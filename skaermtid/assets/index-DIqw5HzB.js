(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();function Gb(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Uu={exports:{}},gi={};var Dg;function Kb(){if(Dg)return gi;Dg=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(l,c,d){var f=null;if(d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),"key"in c){d={};for(var m in c)m!=="key"&&(d[m]=c[m])}else d=c;return c=d.ref,{$$typeof:s,type:l,key:f,ref:c!==void 0?c:null,props:d}}return gi.Fragment=n,gi.jsx=r,gi.jsxs=r,gi}var Mg;function Vb(){return Mg||(Mg=1,Uu.exports=Kb()),Uu.exports}var o=Vb(),zu={exports:{}},qe={};var Ug;function Pb(){if(Ug)return qe;Ug=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function z(k,H,D){this.props=k,this.context=H,this.refs=A,this.updater=D||j}z.prototype.isReactComponent={},z.prototype.setState=function(k,H){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,H,"setState")},z.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function I(){}I.prototype=z.prototype;function C(k,H,D){this.props=k,this.context=H,this.refs=A,this.updater=D||j}var F=C.prototype=new I;F.constructor=C,E(F,z.prototype),F.isPureReactComponent=!0;var Z=Array.isArray;function P(){}var T={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function R(k,H,D){var B=D.ref;return{$$typeof:s,type:k,key:H,ref:B!==void 0?B:null,props:D}}function K(k,H){return R(k.type,H,k.props)}function N(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function Y(k){var H={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(D){return H[D]})}var se=/\/+/g;function X(k,H){return typeof k=="object"&&k!==null&&k.key!=null?Y(""+k.key):H.toString(36)}function le(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(P,P):(k.status="pending",k.then(function(H){k.status==="pending"&&(k.status="fulfilled",k.value=H)},function(H){k.status==="pending"&&(k.status="rejected",k.reason=H)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function M(k,H,D,B,te){var G=typeof k;(G==="undefined"||G==="boolean")&&(k=null);var re=!1;if(k===null)re=!0;else switch(G){case"bigint":case"string":case"number":re=!0;break;case"object":switch(k.$$typeof){case s:case n:re=!0;break;case b:return re=k._init,M(re(k._payload),H,D,B,te)}}if(re)return te=te(k),re=B===""?"."+X(k,0):B,Z(te)?(D="",re!=null&&(D=re.replace(se,"$&/")+"/"),M(te,H,D,"",function(pe){return pe})):te!=null&&(N(te)&&(te=K(te,D+(te.key==null||k&&k.key===te.key?"":(""+te.key).replace(se,"$&/")+"/")+re)),H.push(te)),1;re=0;var de=B===""?".":B+":";if(Z(k))for(var he=0;he<k.length;he++)B=k[he],G=de+X(B,he),re+=M(B,H,D,G,te);else if(he=x(k),typeof he=="function")for(k=he.call(k),he=0;!(B=k.next()).done;)B=B.value,G=de+X(B,he++),re+=M(B,H,D,G,te);else if(G==="object"){if(typeof k.then=="function")return M(le(k),H,D,B,te);throw H=String(k),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return re}function $(k,H,D){if(k==null)return k;var B=[],te=0;return M(k,B,"","",function(G){return H.call(D,G,te++)}),B}function W(k){if(k._status===-1){var H=k._result;H=H(),H.then(function(D){(k._status===0||k._status===-1)&&(k._status=1,k._result=D)},function(D){(k._status===0||k._status===-1)&&(k._status=2,k._result=D)}),k._status===-1&&(k._status=0,k._result=H)}if(k._status===1)return k._result.default;throw k._result}var V=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},fe={map:$,forEach:function(k,H,D){$(k,function(){H.apply(this,arguments)},D)},count:function(k){var H=0;return $(k,function(){H++}),H},toArray:function(k){return $(k,function(H){return H})||[]},only:function(k){if(!N(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return qe.Activity=w,qe.Children=fe,qe.Component=z,qe.Fragment=r,qe.Profiler=c,qe.PureComponent=C,qe.StrictMode=l,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,qe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return T.H.useMemoCache(k)}},qe.cache=function(k){return function(){return k.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(k,H,D){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var B=E({},k.props),te=k.key;if(H!=null)for(G in H.key!==void 0&&(te=""+H.key),H)!L.call(H,G)||G==="key"||G==="__self"||G==="__source"||G==="ref"&&H.ref===void 0||(B[G]=H[G]);var G=arguments.length-2;if(G===1)B.children=D;else if(1<G){for(var re=Array(G),de=0;de<G;de++)re[de]=arguments[de+2];B.children=re}return R(k.type,te,B)},qe.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},qe.createElement=function(k,H,D){var B,te={},G=null;if(H!=null)for(B in H.key!==void 0&&(G=""+H.key),H)L.call(H,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(te[B]=H[B]);var re=arguments.length-2;if(re===1)te.children=D;else if(1<re){for(var de=Array(re),he=0;he<re;he++)de[he]=arguments[he+2];te.children=de}if(k&&k.defaultProps)for(B in re=k.defaultProps,re)te[B]===void 0&&(te[B]=re[B]);return R(k,G,te)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(k){return{$$typeof:m,render:k}},qe.isValidElement=N,qe.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:W}},qe.memo=function(k,H){return{$$typeof:p,type:k,compare:H===void 0?null:H}},qe.startTransition=function(k){var H=T.T,D={};T.T=D;try{var B=k(),te=T.S;te!==null&&te(D,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(P,V)}catch(G){V(G)}finally{H!==null&&D.types!==null&&(H.types=D.types),T.T=H}},qe.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},qe.use=function(k){return T.H.use(k)},qe.useActionState=function(k,H,D){return T.H.useActionState(k,H,D)},qe.useCallback=function(k,H){return T.H.useCallback(k,H)},qe.useContext=function(k){return T.H.useContext(k)},qe.useDebugValue=function(){},qe.useDeferredValue=function(k,H){return T.H.useDeferredValue(k,H)},qe.useEffect=function(k,H){return T.H.useEffect(k,H)},qe.useEffectEvent=function(k){return T.H.useEffectEvent(k)},qe.useId=function(){return T.H.useId()},qe.useImperativeHandle=function(k,H,D){return T.H.useImperativeHandle(k,H,D)},qe.useInsertionEffect=function(k,H){return T.H.useInsertionEffect(k,H)},qe.useLayoutEffect=function(k,H){return T.H.useLayoutEffect(k,H)},qe.useMemo=function(k,H){return T.H.useMemo(k,H)},qe.useOptimistic=function(k,H){return T.H.useOptimistic(k,H)},qe.useReducer=function(k,H,D){return T.H.useReducer(k,H,D)},qe.useRef=function(k){return T.H.useRef(k)},qe.useState=function(k){return T.H.useState(k)},qe.useSyncExternalStore=function(k,H,D){return T.H.useSyncExternalStore(k,H,D)},qe.useTransition=function(){return T.H.useTransition()},qe.version="19.2.3",qe}var zg;function jd(){return zg||(zg=1,zu.exports=Pb()),zu.exports}var y=jd();const rn=Gb(y);var Lu={exports:{}},pi={},Bu={exports:{}},qu={};var Lg;function Yb(){return Lg||(Lg=1,(function(s){function n(M,$){var W=M.length;M.push($);e:for(;0<W;){var V=W-1>>>1,fe=M[V];if(0<c(fe,$))M[V]=$,M[W]=fe,W=V;else break e}}function r(M){return M.length===0?null:M[0]}function l(M){if(M.length===0)return null;var $=M[0],W=M.pop();if(W!==$){M[0]=W;e:for(var V=0,fe=M.length,k=fe>>>1;V<k;){var H=2*(V+1)-1,D=M[H],B=H+1,te=M[B];if(0>c(D,W))B<fe&&0>c(te,D)?(M[V]=te,M[B]=W,V=B):(M[V]=D,M[H]=W,V=H);else if(B<fe&&0>c(te,W))M[V]=te,M[B]=W,V=B;else break e}}return $}function c(M,$){var W=M.sortIndex-$.sortIndex;return W!==0?W:M.id-$.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],p=[],b=1,w=null,S=3,x=!1,j=!1,E=!1,A=!1,z=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function F(M){for(var $=r(p);$!==null;){if($.callback===null)l(p);else if($.startTime<=M)l(p),$.sortIndex=$.expirationTime,n(g,$);else break;$=r(p)}}function Z(M){if(E=!1,F(M),!j)if(r(g)!==null)j=!0,P||(P=!0,Y());else{var $=r(p);$!==null&&le(Z,$.startTime-M)}}var P=!1,T=-1,L=5,R=-1;function K(){return A?!0:!(s.unstable_now()-R<L)}function N(){if(A=!1,P){var M=s.unstable_now();R=M;var $=!0;try{e:{j=!1,E&&(E=!1,I(T),T=-1),x=!0;var W=S;try{t:{for(F(M),w=r(g);w!==null&&!(w.expirationTime>M&&K());){var V=w.callback;if(typeof V=="function"){w.callback=null,S=w.priorityLevel;var fe=V(w.expirationTime<=M);if(M=s.unstable_now(),typeof fe=="function"){w.callback=fe,F(M),$=!0;break t}w===r(g)&&l(g),F(M)}else l(g);w=r(g)}if(w!==null)$=!0;else{var k=r(p);k!==null&&le(Z,k.startTime-M),$=!1}}break e}finally{w=null,S=W,x=!1}$=void 0}}finally{$?Y():P=!1}}}var Y;if(typeof C=="function")Y=function(){C(N)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,X=se.port2;se.port1.onmessage=N,Y=function(){X.postMessage(null)}}else Y=function(){z(N,0)};function le(M,$){T=z(function(){M(s.unstable_now())},$)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(M){switch(S){case 1:case 2:case 3:var $=3;break;default:$=S}var W=S;S=$;try{return M()}finally{S=W}},s.unstable_requestPaint=function(){A=!0},s.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=S;S=M;try{return $()}finally{S=W}},s.unstable_scheduleCallback=function(M,$,W){var V=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?V+W:V):W=V,M){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=W+fe,M={id:b++,callback:$,priorityLevel:M,startTime:W,expirationTime:fe,sortIndex:-1},W>V?(M.sortIndex=W,n(p,M),r(g)===null&&M===r(p)&&(E?(I(T),T=-1):E=!0,le(Z,W-V))):(M.sortIndex=fe,n(g,M),j||x||(j=!0,P||(P=!0,Y()))),M},s.unstable_shouldYield=K,s.unstable_wrapCallback=function(M){var $=S;return function(){var W=S;S=$;try{return M.apply(this,arguments)}finally{S=W}}}})(qu)),qu}var Bg;function Qb(){return Bg||(Bg=1,Bu.exports=Yb()),Bu.exports}var $u={exports:{}},Yt={};var qg;function Xb(){if(qg)return Yt;qg=1;var s=jd();function n(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(g,p,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:g,containerInfo:p,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Yt.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return d(g,p,null,b)},Yt.flushSync=function(g){var p=f.T,b=l.p;try{if(f.T=null,l.p=2,g)return g()}finally{f.T=p,l.p=b,l.d.f()}},Yt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},Yt.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},Yt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,w=m(b,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:x}):b==="script"&&l.d.X(g,{crossOrigin:w,integrity:S,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},Yt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,w=m(b,p.crossOrigin);l.d.L(g,b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yt.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},Yt.requestFormReset=function(g){l.d.r(g)},Yt.unstable_batchedUpdates=function(g,p){return g(p)},Yt.useFormState=function(g,p,b){return f.H.useFormState(g,p,b)},Yt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Yt.version="19.2.3",Yt}var $g;function Mp(){if($g)return $u.exports;$g=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),$u.exports=Xb(),$u.exports}var Hg;function Jb(){if(Hg)return pi;Hg=1;var s=Qb(),n=jd(),r=Mp();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(d(e)!==e)throw Error(l(188))}function p(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,i=t;;){var u=a.return;if(u===null)break;var h=u.alternate;if(h===null){if(i=u.return,i!==null){a=i;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===a)return g(u),e;if(h===i)return g(u),t;h=h.sibling}throw Error(l(188))}if(a.return!==i.return)a=u,i=h;else{for(var v=!1,_=u.child;_;){if(_===a){v=!0,a=u,i=h;break}if(_===i){v=!0,i=u,a=h;break}_=_.sibling}if(!v){for(_=h.child;_;){if(_===a){v=!0,a=h,i=u;break}if(_===i){v=!0,i=h,a=u;break}_=_.sibling}if(!v)throw Error(l(189))}}if(a.alternate!==i)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),C=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function X(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case z:return"Profiler";case A:return"StrictMode";case Z:return"Suspense";case P:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case C:return e.displayName||"Context";case I:return(e._context.displayName||"Context")+".Consumer";case F:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}var le=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},V=[],fe=-1;function k(e){return{current:e}}function H(e){0>fe||(e.current=V[fe],V[fe]=null,fe--)}function D(e,t){fe++,V[fe]=e.current,e.current=t}var B=k(null),te=k(null),G=k(null),re=k(null);function de(e,t){switch(D(G,t),D(te,e),D(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ng(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ng(t),e=sg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(B),D(B,e)}function he(){H(B),H(te),H(G)}function pe(e){e.memoizedState!==null&&D(re,e);var t=B.current,a=sg(t,e.type);t!==a&&(D(te,e),D(B,a))}function Te(e){te.current===e&&(H(B),H(te)),re.current===e&&(H(re),di._currentValue=W)}var Le,Ue;function Re(e){if(Le===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Le=t&&t[1]||"",Ue=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+e+Ue}var Oe=!1;function $e(e,t){if(!e||Oe)return"";Oe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ae){var ee=ae}Reflect.construct(e,[],ue)}else{try{ue.call()}catch(ae){ee=ae}e.call(ue.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(ue=e())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=i.DetermineComponentFrameRoot(),v=h[0],_=h[1];if(v&&_){var O=v.split(`
`),J=_.split(`
`);for(u=i=0;i<O.length&&!O[i].includes("DetermineComponentFrameRoot");)i++;for(;u<J.length&&!J[u].includes("DetermineComponentFrameRoot");)u++;if(i===O.length||u===J.length)for(i=O.length-1,u=J.length-1;1<=i&&0<=u&&O[i]!==J[u];)u--;for(;1<=i&&0<=u;i--,u--)if(O[i]!==J[u]){if(i!==1||u!==1)do if(i--,u--,0>u||O[i]!==J[u]){var ie=`
`+O[i].replace(" at new "," at ");return e.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",e.displayName)),ie}while(1<=i&&0<=u);break}}}finally{Oe=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Re(a):""}function xe(e,t){switch(e.tag){case 26:case 27:case 5:return Re(e.type);case 16:return Re("Lazy");case 13:return e.child!==t&&t!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return $e(e.type,!1);case 11:return $e(e.type.render,!1);case 1:return $e(e.type,!0);case 31:return Re("Activity");default:return""}}function Ee(e){try{var t="",a=null;do t+=xe(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ie=Object.prototype.hasOwnProperty,ge=s.unstable_scheduleCallback,ve=s.unstable_cancelCallback,be=s.unstable_shouldYield,De=s.unstable_requestPaint,oe=s.unstable_now,ye=s.unstable_getCurrentPriorityLevel,Be=s.unstable_ImmediatePriority,Me=s.unstable_UserBlockingPriority,ne=s.unstable_NormalPriority,ze=s.unstable_LowPriority,ke=s.unstable_IdlePriority,ft=s.log,Fe=s.unstable_setDisableYieldValue,vt=null,yt=null;function mt(e){if(typeof ft=="function"&&Fe(e),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(vt,e)}catch{}}var dt=Math.clz32?Math.clz32:et,Pn=Math.log,Zs=Math.LN2;function et(e){return e>>>=0,e===0?32:31-(Pn(e)/Zs|0)|0}var Mt=256,wn=262144,tt=4194304;function gt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ut(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var u=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=i&134217727;return _!==0?(i=_&~h,i!==0?u=gt(i):(v&=_,v!==0?u=gt(v):a||(a=_&~e,a!==0&&(u=gt(a))))):(_=i&~h,_!==0?u=gt(_):v!==0?u=gt(v):a||(a=i&~e,a!==0&&(u=gt(a)))),u===0?0:t!==0&&t!==u&&(t&h)===0&&(h=u&-u,a=t&-t,h>=a||h===32&&(a&4194048)!==0)?t:u}function Xt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Jt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pt(){var e=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),e}function Zt(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Sn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function At(e,t,a,i,u,h){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,O=e.expirationTimes,J=e.hiddenUpdates;for(a=v&~a;0<a;){var ie=31-dt(a),ue=1<<ie;_[ie]=0,O[ie]=-1;var ee=J[ie];if(ee!==null)for(J[ie]=null,ie=0;ie<ee.length;ie++){var ae=ee[ie];ae!==null&&(ae.lane&=-536870913)}a&=~ue}i!==0&&Ln(e,i,0),h!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~t))}function Ln(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-dt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function on(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-dt(a),u=1<<i;u&t|e[i]&t&&(e[i]|=t),a&=~u}}function xn(e,t){var a=t&-t;return a=(a&42)!==0?1:Fn(a),(a&(e.suspendedLanes|t))!==0?0:a}function Fn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function es(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Bn(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:Eg(e.type))}function Ss(e,t){var a=$.p;try{return $.p=e,t()}finally{$.p=a}}var jn=Math.random().toString(36).slice(2),qt="__reactFiber$"+jn,Wt="__reactProps$"+jn,ja="__reactContainer$"+jn,Eo="__reactEvents$"+jn,Ov="__reactListeners$"+jn,Dv="__reactHandles$"+jn,Id="__reactResources$"+jn,Er="__reactMarker$"+jn;function To(e){delete e[qt],delete e[Wt],delete e[Eo],delete e[Ov],delete e[Dv]}function ka(e){var t=e[qt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[ja]||a[qt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=ug(e);e!==null;){if(a=e[qt])return a;e=ug(e)}return t}e=a,a=e.parentNode}return null}function Ea(e){if(e=e[qt]||e[ja]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Tr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Ta(e){var t=e[Id];return t||(t=e[Id]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[Er]=!0}var Gd=new Set,Kd={};function Ws(e,t){Ca(e,t),Ca(e+"Capture",t)}function Ca(e,t){for(Kd[e]=t,e=0;e<t.length;e++)Gd.add(t[e])}var Mv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vd={},Pd={};function Uv(e){return Ie.call(Pd,e)?!0:Ie.call(Vd,e)?!1:Mv.test(e)?Pd[e]=!0:(Vd[e]=!0,!1)}function Ii(e,t,a){if(Uv(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Gi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ts(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function kn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zv(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(v){a=""+v,h.call(this,v)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Co(e){if(!e._valueTracker){var t=Yd(e)?"checked":"value";e._valueTracker=zv(e,t,""+e[t])}}function Qd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Yd(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function Ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Lv=/[\n"\\]/g;function En(e){return e.replace(Lv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function No(e,t,a,i,u,h,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kn(t)):e.value!==""+kn(t)&&(e.value=""+kn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Ao(e,v,kn(t)):a!=null?Ao(e,v,kn(a)):i!=null&&e.removeAttribute("value"),u==null&&h!=null&&(e.defaultChecked=!!h),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+kn(_):e.removeAttribute("name")}function Xd(e,t,a,i,u,h,v,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){Co(e);return}a=a!=null?""+kn(a):"",t=t!=null?""+kn(t):a,_||t===e.value||(e.value=t),e.defaultValue=t}i=i??u,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=_?e.checked:!!i,e.defaultChecked=!!i,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Co(e)}function Ao(e,t,a){t==="number"&&Ki(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Na(e,t,a,i){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&i&&(e[a].defaultSelected=!0)}else{for(a=""+kn(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Jd(e,t,a){if(t!=null&&(t=""+kn(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+kn(a):""}function Zd(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(l(92));if(le(i)){if(1<i.length)throw Error(l(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=kn(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),Co(e)}function Aa(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Bv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wd(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||Bv.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Fd(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var u in t)i=t[u],t.hasOwnProperty(u)&&a[u]!==i&&Wd(e,u,i)}else for(var h in t)t.hasOwnProperty(h)&&Wd(e,h,t[h])}function Ro(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$v=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vi(e){return $v.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ns(){}var Oo=null;function Do(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ra=null,Oa=null;function eh(e){var t=Ea(e);if(t&&(e=t.stateNode)){var a=e[Wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(No(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+En(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var u=i[Wt]||null;if(!u)throw Error(l(90));No(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&Qd(i)}break e;case"textarea":Jd(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Na(e,!!a.multiple,t,!1)}}}var Mo=!1;function th(e,t,a){if(Mo)return e(t,a);Mo=!0;try{var i=e(t);return i}finally{if(Mo=!1,(Ra!==null||Oa!==null)&&(Ol(),Ra&&(t=Ra,e=Oa,Oa=Ra=null,eh(t),e)))for(t=0;t<e.length;t++)eh(e[t])}}function Cr(e,t){var a=e.stateNode;if(a===null)return null;var i=a[Wt]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=!1;if(ss)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Uo=!1}var xs=null,zo=null,Pi=null;function nh(){if(Pi)return Pi;var e,t=zo,a=t.length,i,u="value"in xs?xs.value:xs.textContent,h=u.length;for(e=0;e<a&&t[e]===u[e];e++);var v=a-e;for(i=1;i<=v&&t[a-i]===u[h-i];i++);return Pi=u.slice(e,1<i?1-i:void 0)}function Yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qi(){return!0}function sh(){return!1}function Ft(e){function t(a,i,u,h,v){this._reactName=a,this._targetInst=u,this.type=i,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Qi:sh,this.isPropagationStopped=sh,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),t}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=Ft(Fs),Ar=w({},Fs,{view:0,detail:0}),Hv=Ft(Ar),Lo,Bo,Rr,Ji=w({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$o,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rr&&(Rr&&e.type==="mousemove"?(Lo=e.screenX-Rr.screenX,Bo=e.screenY-Rr.screenY):Bo=Lo=0,Rr=e),Lo)},movementY:function(e){return"movementY"in e?e.movementY:Bo}}),ah=Ft(Ji),Iv=w({},Ji,{dataTransfer:0}),Gv=Ft(Iv),Kv=w({},Ar,{relatedTarget:0}),qo=Ft(Kv),Vv=w({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Pv=Ft(Vv),Yv=w({},Fs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qv=Ft(Yv),Xv=w({},Fs,{data:0}),rh=Ft(Xv),Jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wv[e])?!!t[e]:!1}function $o(){return Fv}var ey=w({},Ar,{key:function(e){if(e.key){var t=Jv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$o,charCode:function(e){return e.type==="keypress"?Yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ty=Ft(ey),ny=w({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=Ft(ny),sy=w({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$o}),ay=Ft(sy),ry=w({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),iy=Ft(ry),ly=w({},Ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oy=Ft(ly),cy=w({},Fs,{newState:0,oldState:0}),uy=Ft(cy),dy=[9,13,27,32],Ho=ss&&"CompositionEvent"in window,Or=null;ss&&"documentMode"in document&&(Or=document.documentMode);var hy=ss&&"TextEvent"in window&&!Or,lh=ss&&(!Ho||Or&&8<Or&&11>=Or),oh=" ",ch=!1;function uh(e,t){switch(e){case"keyup":return dy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Da=!1;function fy(e,t){switch(e){case"compositionend":return dh(t);case"keypress":return t.which!==32?null:(ch=!0,oh);case"textInput":return e=t.data,e===oh&&ch?null:e;default:return null}}function my(e,t){if(Da)return e==="compositionend"||!Ho&&uh(e,t)?(e=nh(),Pi=zo=xs=null,Da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lh&&t.locale!=="ko"?null:t.data;default:return null}}var gy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gy[e.type]:t==="textarea"}function fh(e,t,a,i){Ra?Oa?Oa.push(i):Oa=[i]:Ra=i,t=ql(t,"onChange"),0<t.length&&(a=new Xi("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var Dr=null,Mr=null;function py(e){Jm(e,0)}function Zi(e){var t=Tr(e);if(Qd(t))return e}function mh(e,t){if(e==="change")return t}var gh=!1;if(ss){var Io;if(ss){var Go="oninput"in document;if(!Go){var ph=document.createElement("div");ph.setAttribute("oninput","return;"),Go=typeof ph.oninput=="function"}Io=Go}else Io=!1;gh=Io&&(!document.documentMode||9<document.documentMode)}function vh(){Dr&&(Dr.detachEvent("onpropertychange",yh),Mr=Dr=null)}function yh(e){if(e.propertyName==="value"&&Zi(Mr)){var t=[];fh(t,Mr,e,Do(e)),th(py,t)}}function vy(e,t,a){e==="focusin"?(vh(),Dr=t,Mr=a,Dr.attachEvent("onpropertychange",yh)):e==="focusout"&&vh()}function yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zi(Mr)}function by(e,t){if(e==="click")return Zi(t)}function _y(e,t){if(e==="input"||e==="change")return Zi(t)}function wy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:wy;function Ur(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var u=a[i];if(!Ie.call(t,u)||!cn(e[u],t[u]))return!1}return!0}function bh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _h(e,t){var a=bh(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bh(a)}}function wh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ki(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ki(e.document)}return t}function Ko(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Sy=ss&&"documentMode"in document&&11>=document.documentMode,Ma=null,Vo=null,zr=null,Po=!1;function xh(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Po||Ma==null||Ma!==Ki(i)||(i=Ma,"selectionStart"in i&&Ko(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zr&&Ur(zr,i)||(zr=i,i=ql(Vo,"onSelect"),0<i.length&&(t=new Xi("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=Ma)))}function ea(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ua={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},Yo={},jh={};ss&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function ta(e){if(Yo[e])return Yo[e];if(!Ua[e])return e;var t=Ua[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in jh)return Yo[e]=t[a];return e}var kh=ta("animationend"),Eh=ta("animationiteration"),Th=ta("animationstart"),xy=ta("transitionrun"),jy=ta("transitionstart"),ky=ta("transitioncancel"),Ch=ta("transitionend"),Nh=new Map,Qo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qo.push("scrollEnd");function qn(e,t){Nh.set(e,t),Ws(t,[e])}var Wi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tn=[],za=0,Xo=0;function Fi(){for(var e=za,t=Xo=za=0;t<e;){var a=Tn[t];Tn[t++]=null;var i=Tn[t];Tn[t++]=null;var u=Tn[t];Tn[t++]=null;var h=Tn[t];if(Tn[t++]=null,i!==null&&u!==null){var v=i.pending;v===null?u.next=u:(u.next=v.next,v.next=u),i.pending=u}h!==0&&Ah(a,u,h)}}function el(e,t,a,i){Tn[za++]=e,Tn[za++]=t,Tn[za++]=a,Tn[za++]=i,Xo|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Jo(e,t,a,i){return el(e,t,a,i),tl(e)}function na(e,t){return el(e,null,null,t),tl(e)}function Ah(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var u=!1,h=e.return;h!==null;)h.childLanes|=a,i=h.alternate,i!==null&&(i.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(u=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,u&&t!==null&&(u=31-dt(a),e=h.hiddenUpdates,i=e[u],i===null?e[u]=[t]:i.push(t),t.lane=a|536870912),h):null}function tl(e){if(50<ai)throw ai=0,ru=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var La={};function Ey(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,t,a,i){return new Ey(e,t,a,i)}function Zo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function as(e,t){var a=e.alternate;return a===null?(a=un(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Rh(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function nl(e,t,a,i,u,h){var v=0;if(i=e,typeof e=="function")Zo(e)&&(v=1);else if(typeof e=="string")v=Rb(e,a,B.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case R:return e=un(31,a,t,u),e.elementType=R,e.lanes=h,e;case E:return sa(a.children,u,h,t);case A:v=8,u|=24;break;case z:return e=un(12,a,t,u|2),e.elementType=z,e.lanes=h,e;case Z:return e=un(13,a,t,u),e.elementType=Z,e.lanes=h,e;case P:return e=un(19,a,t,u),e.elementType=P,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break e;case I:v=9;break e;case F:v=11;break e;case T:v=14;break e;case L:v=16,i=null;break e}v=29,a=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=un(v,a,t,u),t.elementType=e,t.type=i,t.lanes=h,t}function sa(e,t,a,i){return e=un(7,e,i,t),e.lanes=a,e}function Wo(e,t,a){return e=un(6,e,null,t),e.lanes=a,e}function Oh(e){var t=un(18,null,null,0);return t.stateNode=e,t}function Fo(e,t,a){return t=un(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Dh=new WeakMap;function Cn(e,t){if(typeof e=="object"&&e!==null){var a=Dh.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ee(t)},Dh.set(e,t),t)}return{value:e,source:t,stack:Ee(t)}}var Ba=[],qa=0,sl=null,Lr=0,Nn=[],An=0,js=null,Yn=1,Qn="";function rs(e,t){Ba[qa++]=Lr,Ba[qa++]=sl,sl=e,Lr=t}function Mh(e,t,a){Nn[An++]=Yn,Nn[An++]=Qn,Nn[An++]=js,js=e;var i=Yn;e=Qn;var u=32-dt(i)-1;i&=~(1<<u),a+=1;var h=32-dt(t)+u;if(30<h){var v=u-u%5;h=(i&(1<<v)-1).toString(32),i>>=v,u-=v,Yn=1<<32-dt(t)+u|a<<u|i,Qn=h+e}else Yn=1<<h|a<<u|i,Qn=e}function ec(e){e.return!==null&&(rs(e,1),Mh(e,1,0))}function tc(e){for(;e===sl;)sl=Ba[--qa],Ba[qa]=null,Lr=Ba[--qa],Ba[qa]=null;for(;e===js;)js=Nn[--An],Nn[An]=null,Qn=Nn[--An],Nn[An]=null,Yn=Nn[--An],Nn[An]=null}function Uh(e,t){Nn[An++]=Yn,Nn[An++]=Qn,Nn[An++]=js,Yn=t.id,Qn=t.overflow,js=e}var $t=null,ct=null,Qe=!1,ks=null,Rn=!1,nc=Error(l(519));function Es(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Br(Cn(t,e)),nc}function zh(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[qt]=e,t[Wt]=i,a){case"dialog":Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":case"embed":Ve("load",t);break;case"video":case"audio":for(a=0;a<ii.length;a++)Ve(ii[a],t);break;case"source":Ve("error",t);break;case"img":case"image":case"link":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"input":Ve("invalid",t),Xd(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ve("invalid",t);break;case"textarea":Ve("invalid",t),Zd(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||eg(t.textContent,a)?(i.popover!=null&&(Ve("beforetoggle",t),Ve("toggle",t)),i.onScroll!=null&&Ve("scroll",t),i.onScrollEnd!=null&&Ve("scrollend",t),i.onClick!=null&&(t.onclick=ns),t=!0):t=!1,t||Es(e,!0)}function Lh(e){for($t=e.return;$t;)switch($t.tag){case 5:case 31:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:$t=$t.return}}function $a(e){if(e!==$t)return!1;if(!Qe)return Lh(e),Qe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||_u(e.type,e.memoizedProps)),a=!a),a&&ct&&Es(e),Lh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ct=cg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ct=cg(e)}else t===27?(t=ct,$s(e.type)?(e=ku,ku=null,ct=e):ct=t):ct=$t?Dn(e.stateNode.nextSibling):null;return!0}function aa(){ct=$t=null,Qe=!1}function sc(){var e=ks;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),ks=null),e}function Br(e){ks===null?ks=[e]:ks.push(e)}var ac=k(null),ra=null,is=null;function Ts(e,t,a){D(ac,t._currentValue),t._currentValue=a}function ls(e){e._currentValue=ac.current,H(ac)}function rc(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function ic(e,t,a,i){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var h=u.dependencies;if(h!==null){var v=u.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=u;for(var O=0;O<t.length;O++)if(_.context===t[O]){h.lanes|=a,_=h.alternate,_!==null&&(_.lanes|=a),rc(h.return,a,e),i||(v=null);break e}h=_.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(l(341));v.lanes|=a,h=v.alternate,h!==null&&(h.lanes|=a),rc(v,a,e),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===e){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function Ha(e,t,a,i){e=null;for(var u=t,h=!1;u!==null;){if(!h){if((u.flags&524288)!==0)h=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(l(387));if(v=v.memoizedProps,v!==null){var _=u.type;cn(u.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(u===re.current){if(v=u.alternate,v===null)throw Error(l(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(di):e=[di])}u=u.return}e!==null&&ic(t,e,a,i),t.flags|=262144}function al(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ia(e){ra=e,is=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return Bh(ra,e)}function rl(e,t){return ra===null&&ia(e),Bh(e,t)}function Bh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},is===null){if(e===null)throw Error(l(308));is=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else is=is.next=t;return a}var Ty=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Cy=s.unstable_scheduleCallback,Ny=s.unstable_NormalPriority,jt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lc(){return{controller:new Ty,data:new Map,refCount:0}}function qr(e){e.refCount--,e.refCount===0&&Cy(Ny,function(){e.controller.abort()})}var $r=null,oc=0,Ia=0,Ga=null;function Ay(e,t){if($r===null){var a=$r=[];oc=0,Ia=du(),Ga={status:"pending",value:void 0,then:function(i){a.push(i)}}}return oc++,t.then(qh,qh),t}function qh(){if(--oc===0&&$r!==null){Ga!==null&&(Ga.status="fulfilled");var e=$r;$r=null,Ia=0,Ga=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ry(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(i.status="rejected",i.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),i}var $h=M.S;M.S=function(e,t){jm=oe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ay(e,t),$h!==null&&$h(e,t)};var la=k(null);function cc(){var e=la.current;return e!==null?e:lt.pooledCache}function il(e,t){t===null?D(la,la.current):D(la,t.pool)}function Hh(){var e=cc();return e===null?null:{parent:jt._currentValue,pool:e}}var Ka=Error(l(460)),uc=Error(l(474)),ll=Error(l(542)),ol={then:function(){}};function Ih(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gh(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ns,ns),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vh(e),e;default:if(typeof t.status=="string")t.then(ns,ns);else{if(e=lt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=i}},function(i){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vh(e),e}throw ca=t,Ka}}function oa(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ca=a,Ka):a}}var ca=null;function Kh(){if(ca===null)throw Error(l(459));var e=ca;return ca=null,e}function Vh(e){if(e===Ka||e===ll)throw Error(l(483))}var Va=null,Hr=0;function cl(e){var t=Hr;return Hr+=1,Va===null&&(Va=[]),Gh(Va,e,t)}function Ir(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ul(e,t){throw t.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ph(e){function t(q,U){if(e){var Q=q.deletions;Q===null?(q.deletions=[U],q.flags|=16):Q.push(U)}}function a(q,U){if(!e)return null;for(;U!==null;)t(q,U),U=U.sibling;return null}function i(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function u(q,U){return q=as(q,U),q.index=0,q.sibling=null,q}function h(q,U,Q){return q.index=Q,e?(Q=q.alternate,Q!==null?(Q=Q.index,Q<U?(q.flags|=67108866,U):Q):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function v(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function _(q,U,Q,ce){return U===null||U.tag!==6?(U=Wo(Q,q.mode,ce),U.return=q,U):(U=u(U,Q),U.return=q,U)}function O(q,U,Q,ce){var je=Q.type;return je===E?ie(q,U,Q.props.children,ce,Q.key):U!==null&&(U.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===L&&oa(je)===U.type)?(U=u(U,Q.props),Ir(U,Q),U.return=q,U):(U=nl(Q.type,Q.key,Q.props,null,q.mode,ce),Ir(U,Q),U.return=q,U)}function J(q,U,Q,ce){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=Fo(Q,q.mode,ce),U.return=q,U):(U=u(U,Q.children||[]),U.return=q,U)}function ie(q,U,Q,ce,je){return U===null||U.tag!==7?(U=sa(Q,q.mode,ce,je),U.return=q,U):(U=u(U,Q),U.return=q,U)}function ue(q,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Wo(""+U,q.mode,Q),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return Q=nl(U.type,U.key,U.props,null,q.mode,Q),Ir(Q,U),Q.return=q,Q;case j:return U=Fo(U,q.mode,Q),U.return=q,U;case L:return U=oa(U),ue(q,U,Q)}if(le(U)||Y(U))return U=sa(U,q.mode,Q,null),U.return=q,U;if(typeof U.then=="function")return ue(q,cl(U),Q);if(U.$$typeof===C)return ue(q,rl(q,U),Q);ul(q,U)}return null}function ee(q,U,Q,ce){var je=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return je!==null?null:_(q,U,""+Q,ce);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return Q.key===je?O(q,U,Q,ce):null;case j:return Q.key===je?J(q,U,Q,ce):null;case L:return Q=oa(Q),ee(q,U,Q,ce)}if(le(Q)||Y(Q))return je!==null?null:ie(q,U,Q,ce,null);if(typeof Q.then=="function")return ee(q,U,cl(Q),ce);if(Q.$$typeof===C)return ee(q,U,rl(q,Q),ce);ul(q,Q)}return null}function ae(q,U,Q,ce,je){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return q=q.get(Q)||null,_(U,q,""+ce,je);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case x:return q=q.get(ce.key===null?Q:ce.key)||null,O(U,q,ce,je);case j:return q=q.get(ce.key===null?Q:ce.key)||null,J(U,q,ce,je);case L:return ce=oa(ce),ae(q,U,Q,ce,je)}if(le(ce)||Y(ce))return q=q.get(Q)||null,ie(U,q,ce,je,null);if(typeof ce.then=="function")return ae(q,U,Q,cl(ce),je);if(ce.$$typeof===C)return ae(q,U,Q,rl(U,ce),je);ul(U,ce)}return null}function _e(q,U,Q,ce){for(var je=null,Je=null,we=U,Ge=U=0,Ye=null;we!==null&&Ge<Q.length;Ge++){we.index>Ge?(Ye=we,we=null):Ye=we.sibling;var Ze=ee(q,we,Q[Ge],ce);if(Ze===null){we===null&&(we=Ye);break}e&&we&&Ze.alternate===null&&t(q,we),U=h(Ze,U,Ge),Je===null?je=Ze:Je.sibling=Ze,Je=Ze,we=Ye}if(Ge===Q.length)return a(q,we),Qe&&rs(q,Ge),je;if(we===null){for(;Ge<Q.length;Ge++)we=ue(q,Q[Ge],ce),we!==null&&(U=h(we,U,Ge),Je===null?je=we:Je.sibling=we,Je=we);return Qe&&rs(q,Ge),je}for(we=i(we);Ge<Q.length;Ge++)Ye=ae(we,q,Ge,Q[Ge],ce),Ye!==null&&(e&&Ye.alternate!==null&&we.delete(Ye.key===null?Ge:Ye.key),U=h(Ye,U,Ge),Je===null?je=Ye:Je.sibling=Ye,Je=Ye);return e&&we.forEach(function(Vs){return t(q,Vs)}),Qe&&rs(q,Ge),je}function Ce(q,U,Q,ce){if(Q==null)throw Error(l(151));for(var je=null,Je=null,we=U,Ge=U=0,Ye=null,Ze=Q.next();we!==null&&!Ze.done;Ge++,Ze=Q.next()){we.index>Ge?(Ye=we,we=null):Ye=we.sibling;var Vs=ee(q,we,Ze.value,ce);if(Vs===null){we===null&&(we=Ye);break}e&&we&&Vs.alternate===null&&t(q,we),U=h(Vs,U,Ge),Je===null?je=Vs:Je.sibling=Vs,Je=Vs,we=Ye}if(Ze.done)return a(q,we),Qe&&rs(q,Ge),je;if(we===null){for(;!Ze.done;Ge++,Ze=Q.next())Ze=ue(q,Ze.value,ce),Ze!==null&&(U=h(Ze,U,Ge),Je===null?je=Ze:Je.sibling=Ze,Je=Ze);return Qe&&rs(q,Ge),je}for(we=i(we);!Ze.done;Ge++,Ze=Q.next())Ze=ae(we,q,Ge,Ze.value,ce),Ze!==null&&(e&&Ze.alternate!==null&&we.delete(Ze.key===null?Ge:Ze.key),U=h(Ze,U,Ge),Je===null?je=Ze:Je.sibling=Ze,Je=Ze);return e&&we.forEach(function(Ib){return t(q,Ib)}),Qe&&rs(q,Ge),je}function it(q,U,Q,ce){if(typeof Q=="object"&&Q!==null&&Q.type===E&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:e:{for(var je=Q.key;U!==null;){if(U.key===je){if(je=Q.type,je===E){if(U.tag===7){a(q,U.sibling),ce=u(U,Q.props.children),ce.return=q,q=ce;break e}}else if(U.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===L&&oa(je)===U.type){a(q,U.sibling),ce=u(U,Q.props),Ir(ce,Q),ce.return=q,q=ce;break e}a(q,U);break}else t(q,U);U=U.sibling}Q.type===E?(ce=sa(Q.props.children,q.mode,ce,Q.key),ce.return=q,q=ce):(ce=nl(Q.type,Q.key,Q.props,null,q.mode,ce),Ir(ce,Q),ce.return=q,q=ce)}return v(q);case j:e:{for(je=Q.key;U!==null;){if(U.key===je)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){a(q,U.sibling),ce=u(U,Q.children||[]),ce.return=q,q=ce;break e}else{a(q,U);break}else t(q,U);U=U.sibling}ce=Fo(Q,q.mode,ce),ce.return=q,q=ce}return v(q);case L:return Q=oa(Q),it(q,U,Q,ce)}if(le(Q))return _e(q,U,Q,ce);if(Y(Q)){if(je=Y(Q),typeof je!="function")throw Error(l(150));return Q=je.call(Q),Ce(q,U,Q,ce)}if(typeof Q.then=="function")return it(q,U,cl(Q),ce);if(Q.$$typeof===C)return it(q,U,rl(q,Q),ce);ul(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(a(q,U.sibling),ce=u(U,Q),ce.return=q,q=ce):(a(q,U),ce=Wo(Q,q.mode,ce),ce.return=q,q=ce),v(q)):a(q,U)}return function(q,U,Q,ce){try{Hr=0;var je=it(q,U,Q,ce);return Va=null,je}catch(we){if(we===Ka||we===ll)throw we;var Je=un(29,we,null,q.mode);return Je.lanes=ce,Je.return=q,Je}}}var ua=Ph(!0),Yh=Ph(!1),Cs=!1;function dc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ns(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function As(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(We&2)!==0){var u=i.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),i.pending=t,t=tl(e),Ah(e,null,a),t}return el(e,i,t,a),tl(e)}function Gr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,on(e,a)}}function fc(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var u=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?u=h=v:h=h.next=v,a=a.next}while(a!==null);h===null?u=h=t:h=h.next=t}else u=h=t;a={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var mc=!1;function Kr(){if(mc){var e=Ga;if(e!==null)throw e}}function Vr(e,t,a,i){mc=!1;var u=e.updateQueue;Cs=!1;var h=u.firstBaseUpdate,v=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var O=_,J=O.next;O.next=null,v===null?h=J:v.next=J,v=O;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,_=ie.lastBaseUpdate,_!==v&&(_===null?ie.firstBaseUpdate=J:_.next=J,ie.lastBaseUpdate=O))}if(h!==null){var ue=u.baseState;v=0,ie=J=O=null,_=h;do{var ee=_.lane&-536870913,ae=ee!==_.lane;if(ae?(Pe&ee)===ee:(i&ee)===ee){ee!==0&&ee===Ia&&(mc=!0),ie!==null&&(ie=ie.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var _e=e,Ce=_;ee=t;var it=a;switch(Ce.tag){case 1:if(_e=Ce.payload,typeof _e=="function"){ue=_e.call(it,ue,ee);break e}ue=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ce.payload,ee=typeof _e=="function"?_e.call(it,ue,ee):_e,ee==null)break e;ue=w({},ue,ee);break e;case 2:Cs=!0}}ee=_.callback,ee!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=u.callbacks,ae===null?u.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ie===null?(J=ie=ae,O=ue):ie=ie.next=ae,v|=ee;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;ae=_,_=ae.next,ae.next=null,u.lastBaseUpdate=ae,u.shared.pending=null}}while(!0);ie===null&&(O=ue),u.baseState=O,u.firstBaseUpdate=J,u.lastBaseUpdate=ie,h===null&&(u.shared.lanes=0),Us|=v,e.lanes=v,e.memoizedState=ue}}function Qh(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Xh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Qh(a[e],t)}var Pa=k(null),dl=k(0);function Jh(e,t){e=ps,D(dl,e),D(Pa,t),ps=e|t.baseLanes}function gc(){D(dl,ps),D(Pa,Pa.current)}function pc(){ps=dl.current,H(Pa),H(dl)}var dn=k(null),On=null;function Rs(e){var t=e.alternate;D(St,St.current&1),D(dn,e),On===null&&(t===null||Pa.current!==null||t.memoizedState!==null)&&(On=e)}function vc(e){D(St,St.current),D(dn,e),On===null&&(On=e)}function Zh(e){e.tag===22?(D(St,St.current),D(dn,e),On===null&&(On=e)):Os()}function Os(){D(St,St.current),D(dn,dn.current)}function hn(e){H(dn),On===e&&(On=null),H(St)}var St=k(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||xu(a)||ju(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var os=0,He=null,at=null,kt=null,fl=!1,Ya=!1,da=!1,ml=0,Pr=0,Qa=null,Oy=0;function bt(){throw Error(l(321))}function yc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!cn(e[a],t[a]))return!1;return!0}function bc(e,t,a,i,u,h){return os=h,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?Uf:Mc,da=!1,h=a(i,u),da=!1,Ya&&(h=Fh(t,a,i,u)),Wh(e),h}function Wh(e){M.H=Xr;var t=at!==null&&at.next!==null;if(os=0,kt=at=He=null,fl=!1,Pr=0,Qa=null,t)throw Error(l(300));e===null||Et||(e=e.dependencies,e!==null&&al(e)&&(Et=!0))}function Fh(e,t,a,i){He=e;var u=0;do{if(Ya&&(Qa=null),Pr=0,Ya=!1,25<=u)throw Error(l(301));if(u+=1,kt=at=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}M.H=zf,h=t(a,i)}while(Ya);return h}function Dy(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?Yr(t):t,e=e.useState()[0],(at!==null?at.memoizedState:null)!==e&&(He.flags|=1024),t}function _c(){var e=ml!==0;return ml=0,e}function wc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Sc(e){if(fl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fl=!1}os=0,kt=at=He=null,Ya=!1,Pr=ml=0,Qa=null}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?He.memoizedState=kt=e:kt=kt.next=e,kt}function xt(){if(at===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=kt===null?He.memoizedState:kt.next;if(t!==null)kt=t,at=e;else{if(e===null)throw He.alternate===null?Error(l(467)):Error(l(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},kt===null?He.memoizedState=kt=e:kt=kt.next=e}return kt}function gl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yr(e){var t=Pr;return Pr+=1,Qa===null&&(Qa=[]),e=Gh(Qa,e,t),t=He,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?Uf:Mc),e}function pl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yr(e);if(e.$$typeof===C)return Ht(e)}throw Error(l(438,String(e)))}function xc(e){var t=null,a=He.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=He.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=gl(),He.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=K;return t.index++,a}function cs(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=xt();return jc(t,at,e)}function jc(e,t,a){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=a;var u=e.baseQueue,h=i.pending;if(h!==null){if(u!==null){var v=u.next;u.next=h.next,h.next=v}t.baseQueue=u=h,i.pending=null}if(h=e.baseState,u===null)e.memoizedState=h;else{t=u.next;var _=v=null,O=null,J=t,ie=!1;do{var ue=J.lane&-536870913;if(ue!==J.lane?(Pe&ue)===ue:(os&ue)===ue){var ee=J.revertLane;if(ee===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ue===Ia&&(ie=!0);else if((os&ee)===ee){J=J.next,ee===Ia&&(ie=!0);continue}else ue={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},O===null?(_=O=ue,v=h):O=O.next=ue,He.lanes|=ee,Us|=ee;ue=J.action,da&&a(h,ue),h=J.hasEagerState?J.eagerState:a(h,ue)}else ee={lane:ue,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},O===null?(_=O=ee,v=h):O=O.next=ee,He.lanes|=ue,Us|=ue;J=J.next}while(J!==null&&J!==t);if(O===null?v=h:O.next=_,!cn(h,e.memoizedState)&&(Et=!0,ie&&(a=Ga,a!==null)))throw a;e.memoizedState=h,e.baseState=v,e.baseQueue=O,i.lastRenderedState=h}return u===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function kc(e){var t=xt(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var i=a.dispatch,u=a.pending,h=t.memoizedState;if(u!==null){a.pending=null;var v=u=u.next;do h=e(h,v.action),v=v.next;while(v!==u);cn(h,t.memoizedState)||(Et=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),a.lastRenderedState=h}return[h,i]}function ef(e,t,a){var i=He,u=xt(),h=Qe;if(h){if(a===void 0)throw Error(l(407));a=a()}else a=t();var v=!cn((at||u).memoizedState,a);if(v&&(u.memoizedState=a,Et=!0),u=u.queue,Cc(sf.bind(null,i,u,e),[e]),u.getSnapshot!==t||v||kt!==null&&kt.memoizedState.tag&1){if(i.flags|=2048,Xa(9,{destroy:void 0},nf.bind(null,i,u,a,t),null),lt===null)throw Error(l(349));h||(os&127)!==0||tf(i,t,a)}return a}function tf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=He.updateQueue,t===null?(t=gl(),He.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function nf(e,t,a,i){t.value=a,t.getSnapshot=i,af(t)&&rf(e)}function sf(e,t,a){return a(function(){af(t)&&rf(e)})}function af(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!cn(e,a)}catch{return!0}}function rf(e){var t=na(e,2);t!==null&&an(t,e,2)}function Ec(e){var t=Qt();if(typeof e=="function"){var a=e;if(e=a(),da){mt(!0);try{a()}finally{mt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:e},t}function lf(e,t,a,i){return e.baseState=a,jc(e,at,typeof i=="function"?i:cs)}function My(e,t,a,i,u){if(_l(e))throw Error(l(485));if(e=t.action,e!==null){var h={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};M.T!==null?a(!0):h.isTransition=!1,i(h),a=t.pending,a===null?(h.next=t.pending=h,of(t,h)):(h.next=a.next,t.pending=a.next=h)}}function of(e,t){var a=t.action,i=t.payload,u=e.state;if(t.isTransition){var h=M.T,v={};M.T=v;try{var _=a(u,i),O=M.S;O!==null&&O(v,_),cf(e,t,_)}catch(J){Tc(e,t,J)}finally{h!==null&&v.types!==null&&(h.types=v.types),M.T=h}}else try{h=a(u,i),cf(e,t,h)}catch(J){Tc(e,t,J)}}function cf(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){uf(e,t,i)},function(i){return Tc(e,t,i)}):uf(e,t,a)}function uf(e,t,a){t.status="fulfilled",t.value=a,df(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,of(e,a)))}function Tc(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,df(t),t=t.next;while(t!==i)}e.action=null}function df(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hf(e,t){return t}function ff(e,t){if(Qe){var a=lt.formState;if(a!==null){e:{var i=He;if(Qe){if(ct){t:{for(var u=ct,h=Rn;u.nodeType!==8;){if(!h){u=null;break t}if(u=Dn(u.nextSibling),u===null){u=null;break t}}h=u.data,u=h==="F!"||h==="F"?u:null}if(u){ct=Dn(u.nextSibling),i=u.data==="F!";break e}}Es(i)}i=!1}i&&(t=a[0])}}return a=Qt(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:t},a.queue=i,a=Of.bind(null,He,i),i.dispatch=a,i=Ec(!1),h=Dc.bind(null,He,!1,i.queue),i=Qt(),u={state:t,dispatch:null,action:e,pending:null},i.queue=u,a=My.bind(null,He,u,h,a),u.dispatch=a,i.memoizedState=e,[t,a,!1]}function mf(e){var t=xt();return gf(t,at,e)}function gf(e,t,a){if(t=jc(e,t,hf)[0],e=vl(cs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Yr(t)}catch(v){throw v===Ka?ll:v}else i=t;t=xt();var u=t.queue,h=u.dispatch;return a!==t.memoizedState&&(He.flags|=2048,Xa(9,{destroy:void 0},Uy.bind(null,u,a),null)),[i,h,e]}function Uy(e,t){e.action=t}function pf(e){var t=xt(),a=at;if(a!==null)return gf(t,a,e);xt(),t=t.memoizedState,a=xt();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function Xa(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=He.updateQueue,t===null&&(t=gl(),He.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function vf(){return xt().memoizedState}function yl(e,t,a,i){var u=Qt();He.flags|=e,u.memoizedState=Xa(1|t,{destroy:void 0},a,i===void 0?null:i)}function bl(e,t,a,i){var u=xt();i=i===void 0?null:i;var h=u.memoizedState.inst;at!==null&&i!==null&&yc(i,at.memoizedState.deps)?u.memoizedState=Xa(t,h,a,i):(He.flags|=e,u.memoizedState=Xa(1|t,h,a,i))}function yf(e,t){yl(8390656,8,e,t)}function Cc(e,t){bl(2048,8,e,t)}function zy(e){He.flags|=4;var t=He.updateQueue;if(t===null)t=gl(),He.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function bf(e){var t=xt().memoizedState;return zy({ref:t,nextImpl:e}),function(){if((We&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function _f(e,t){return bl(4,2,e,t)}function wf(e,t){return bl(4,4,e,t)}function Sf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xf(e,t,a){a=a!=null?a.concat([e]):null,bl(4,4,Sf.bind(null,t,e),a)}function Nc(){}function jf(e,t){var a=xt();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&yc(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function kf(e,t){var a=xt();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&yc(t,i[1]))return i[0];if(i=e(),da){mt(!0);try{e()}finally{mt(!1)}}return a.memoizedState=[i,t],i}function Ac(e,t,a){return a===void 0||(os&1073741824)!==0&&(Pe&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Em(),He.lanes|=e,Us|=e,a)}function Ef(e,t,a,i){return cn(a,t)?a:Pa.current!==null?(e=Ac(e,a,i),cn(e,t)||(Et=!0),e):(os&42)===0||(os&1073741824)!==0&&(Pe&261930)===0?(Et=!0,e.memoizedState=a):(e=Em(),He.lanes|=e,Us|=e,t)}function Tf(e,t,a,i,u){var h=$.p;$.p=h!==0&&8>h?h:8;var v=M.T,_={};M.T=_,Dc(e,!1,t,a);try{var O=u(),J=M.S;if(J!==null&&J(_,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ie=Ry(O,i);Qr(e,t,ie,gn(e))}else Qr(e,t,i,gn(e))}catch(ue){Qr(e,t,{then:function(){},status:"rejected",reason:ue},gn())}finally{$.p=h,v!==null&&_.types!==null&&(v.types=_.types),M.T=v}}function Ly(){}function Rc(e,t,a,i){if(e.tag!==5)throw Error(l(476));var u=Cf(e).queue;Tf(e,u,t,W,a===null?Ly:function(){return Nf(e),a(i)})}function Cf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:W},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Nf(e){var t=Cf(e);t.next===null&&(t=e.alternate.memoizedState),Qr(e,t.next.queue,{},gn())}function Oc(){return Ht(di)}function Af(){return xt().memoizedState}function Rf(){return xt().memoizedState}function By(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=gn();e=Ns(a);var i=As(t,e,a);i!==null&&(an(i,t,a),Gr(i,t,a)),t={cache:lc()},e.payload=t;return}t=t.return}}function qy(e,t,a){var i=gn();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},_l(e)?Df(t,a):(a=Jo(e,t,a,i),a!==null&&(an(a,e,i),Mf(a,t,i)))}function Of(e,t,a){var i=gn();Qr(e,t,a,i)}function Qr(e,t,a,i){var u={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(_l(e))Df(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var v=t.lastRenderedState,_=h(v,a);if(u.hasEagerState=!0,u.eagerState=_,cn(_,v))return el(e,t,u,0),lt===null&&Fi(),!1}catch{}if(a=Jo(e,t,u,i),a!==null)return an(a,e,i),Mf(a,t,i),!0}return!1}function Dc(e,t,a,i){if(i={lane:2,revertLane:du(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},_l(e)){if(t)throw Error(l(479))}else t=Jo(e,a,i,2),t!==null&&an(t,e,2)}function _l(e){var t=e.alternate;return e===He||t!==null&&t===He}function Df(e,t){Ya=fl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Mf(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,on(e,a)}}var Xr={readContext:Ht,use:pl,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};Xr.useEffectEvent=bt;var Uf={readContext:Ht,use:pl,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:yf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,yl(4194308,4,Sf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return yl(4194308,4,e,t)},useInsertionEffect:function(e,t){yl(4,2,e,t)},useMemo:function(e,t){var a=Qt();t=t===void 0?null:t;var i=e();if(da){mt(!0);try{e()}finally{mt(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=Qt();if(a!==void 0){var u=a(t);if(da){mt(!0);try{a(t)}finally{mt(!1)}}}else u=t;return i.memoizedState=i.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},i.queue=e,e=e.dispatch=qy.bind(null,He,e),[i.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ec(e);var t=e.queue,a=Of.bind(null,He,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Nc,useDeferredValue:function(e,t){var a=Qt();return Ac(a,e,t)},useTransition:function(){var e=Ec(!1);return e=Tf.bind(null,He,e.queue,!0,!1),Qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=He,u=Qt();if(Qe){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),lt===null)throw Error(l(349));(Pe&127)!==0||tf(i,t,a)}u.memoizedState=a;var h={value:a,getSnapshot:t};return u.queue=h,yf(sf.bind(null,i,h,e),[e]),i.flags|=2048,Xa(9,{destroy:void 0},nf.bind(null,i,h,a,t),null),a},useId:function(){var e=Qt(),t=lt.identifierPrefix;if(Qe){var a=Qn,i=Yn;a=(i&~(1<<32-dt(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ml++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Oy++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Oc,useFormState:ff,useActionState:ff,useOptimistic:function(e){var t=Qt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Dc.bind(null,He,!0,a),a.dispatch=t,[e,t]},useMemoCache:xc,useCacheRefresh:function(){return Qt().memoizedState=By.bind(null,He)},useEffectEvent:function(e){var t=Qt(),a={impl:e};return t.memoizedState=a,function(){if((We&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},Mc={readContext:Ht,use:pl,useCallback:jf,useContext:Ht,useEffect:Cc,useImperativeHandle:xf,useInsertionEffect:_f,useLayoutEffect:wf,useMemo:kf,useReducer:vl,useRef:vf,useState:function(){return vl(cs)},useDebugValue:Nc,useDeferredValue:function(e,t){var a=xt();return Ef(a,at.memoizedState,e,t)},useTransition:function(){var e=vl(cs)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:Yr(e),t]},useSyncExternalStore:ef,useId:Af,useHostTransitionStatus:Oc,useFormState:mf,useActionState:mf,useOptimistic:function(e,t){var a=xt();return lf(a,at,e,t)},useMemoCache:xc,useCacheRefresh:Rf};Mc.useEffectEvent=bf;var zf={readContext:Ht,use:pl,useCallback:jf,useContext:Ht,useEffect:Cc,useImperativeHandle:xf,useInsertionEffect:_f,useLayoutEffect:wf,useMemo:kf,useReducer:kc,useRef:vf,useState:function(){return kc(cs)},useDebugValue:Nc,useDeferredValue:function(e,t){var a=xt();return at===null?Ac(a,e,t):Ef(a,at.memoizedState,e,t)},useTransition:function(){var e=kc(cs)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:Yr(e),t]},useSyncExternalStore:ef,useId:Af,useHostTransitionStatus:Oc,useFormState:pf,useActionState:pf,useOptimistic:function(e,t){var a=xt();return at!==null?lf(a,at,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:xc,useCacheRefresh:Rf};zf.useEffectEvent=bf;function Uc(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var zc={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=gn(),u=Ns(i);u.payload=t,a!=null&&(u.callback=a),t=As(e,u,i),t!==null&&(an(t,e,i),Gr(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=gn(),u=Ns(i);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=As(e,u,i),t!==null&&(an(t,e,i),Gr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=gn(),i=Ns(a);i.tag=2,t!=null&&(i.callback=t),t=As(e,i,a),t!==null&&(an(t,e,a),Gr(t,e,a))}};function Lf(e,t,a,i,u,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,v):t.prototype&&t.prototype.isPureReactComponent?!Ur(a,i)||!Ur(u,h):!0}function Bf(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&zc.enqueueReplaceState(t,t.state,null)}function ha(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function qf(e){Wi(e)}function $f(e){console.error(e)}function Hf(e){Wi(e)}function wl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function If(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Lc(e,t,a){return a=Ns(a),a.tag=3,a.payload={element:null},a.callback=function(){wl(e,t)},a}function Gf(e){return e=Ns(e),e.tag=3,e}function Kf(e,t,a,i){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var h=i.value;e.payload=function(){return u(h)},e.callback=function(){If(t,a,i)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){If(t,a,i),typeof u!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})})}function $y(e,t,a,i,u){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&Ha(t,a,u,!0),a=dn.current,a!==null){switch(a.tag){case 31:case 13:return On===null?Dl():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=u,i===ol?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),ou(e,i,u)),!1;case 22:return a.flags|=65536,i===ol?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),ou(e,i,u)),!1}throw Error(l(435,a.tag))}return ou(e,i,u),Dl(),!1}if(Qe)return t=dn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,i!==nc&&(e=Error(l(422),{cause:i}),Br(Cn(e,a)))):(i!==nc&&(t=Error(l(423),{cause:i}),Br(Cn(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,i=Cn(i,a),u=Lc(e.stateNode,i,u),fc(e,u),_t!==4&&(_t=2)),!1;var h=Error(l(520),{cause:i});if(h=Cn(h,a),si===null?si=[h]:si.push(h),_t!==4&&(_t=2),t===null)return!0;i=Cn(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=Lc(a.stateNode,i,e),fc(a,e),!1;case 1:if(t=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(zs===null||!zs.has(h))))return a.flags|=65536,u&=-u,a.lanes|=u,u=Gf(u),Kf(u,e,a,i),fc(a,u),!1}a=a.return}while(a!==null);return!1}var Bc=Error(l(461)),Et=!1;function It(e,t,a,i){t.child=e===null?Yh(t,null,a,i):ua(t,e.child,a,i)}function Vf(e,t,a,i,u){a=a.render;var h=t.ref;if("ref"in i){var v={};for(var _ in i)_!=="ref"&&(v[_]=i[_])}else v=i;return ia(t),i=bc(e,t,a,v,h,u),_=_c(),e!==null&&!Et?(wc(e,t,u),us(e,t,u)):(Qe&&_&&ec(t),t.flags|=1,It(e,t,i,u),t.child)}function Pf(e,t,a,i,u){if(e===null){var h=a.type;return typeof h=="function"&&!Zo(h)&&h.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=h,Yf(e,t,h,i,u)):(e=nl(a.type,null,i,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Pc(e,u)){var v=h.memoizedProps;if(a=a.compare,a=a!==null?a:Ur,a(v,i)&&e.ref===t.ref)return us(e,t,u)}return t.flags|=1,e=as(h,i),e.ref=t.ref,e.return=t,t.child=e}function Yf(e,t,a,i,u){if(e!==null){var h=e.memoizedProps;if(Ur(h,i)&&e.ref===t.ref)if(Et=!1,t.pendingProps=i=h,Pc(e,u))(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,us(e,t,u)}return qc(e,t,a,i,u)}function Qf(e,t,a,i){var u=i.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,e!==null){for(i=t.child=e.child,u=0;i!==null;)u=u|i.lanes|i.childLanes,i=i.sibling;i=u&~h}else i=0,t.child=null;return Xf(e,t,h,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&il(t,h!==null?h.cachePool:null),h!==null?Jh(t,h):gc(),Zh(t);else return i=t.lanes=536870912,Xf(e,t,h!==null?h.baseLanes|a:a,a,i)}else h!==null?(il(t,h.cachePool),Jh(t,h),Os(),t.memoizedState=null):(e!==null&&il(t,null),gc(),Os());return It(e,t,u,a),t.child}function Jr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Xf(e,t,a,i,u){var h=cc();return h=h===null?null:{parent:jt._currentValue,pool:h},t.memoizedState={baseLanes:a,cachePool:h},e!==null&&il(t,null),gc(),Zh(t),e!==null&&Ha(e,t,i,!0),t.childLanes=u,null}function Sl(e,t){return t=jl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Jf(e,t,a){return ua(t,e.child,null,a),e=Sl(t,t.pendingProps),e.flags|=2,hn(t),t.memoizedState=null,e}function Hy(e,t,a){var i=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Qe){if(i.mode==="hidden")return e=Sl(t,i),t.lanes=536870912,Jr(null,e);if(vc(t),(e=ct)?(e=og(e,Rn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:js!==null?{id:Yn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},a=Oh(e),a.return=t,t.child=a,$t=t,ct=null)):e=null,e===null)throw Es(t);return t.lanes=536870912,null}return Sl(t,i)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(vc(t),u)if(t.flags&256)t.flags&=-257,t=Jf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Et||Ha(e,t,a,!1),u=(a&e.childLanes)!==0,Et||u){if(i=lt,i!==null&&(v=xn(i,a),v!==0&&v!==h.retryLane))throw h.retryLane=v,na(e,v),an(i,e,v),Bc;Dl(),t=Jf(e,t,a)}else e=h.treeContext,ct=Dn(v.nextSibling),$t=t,Qe=!0,ks=null,Rn=!1,e!==null&&Uh(t,e),t=Sl(t,i),t.flags|=4096;return t}return e=as(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function xl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function qc(e,t,a,i,u){return ia(t),a=bc(e,t,a,i,void 0,u),i=_c(),e!==null&&!Et?(wc(e,t,u),us(e,t,u)):(Qe&&i&&ec(t),t.flags|=1,It(e,t,a,u),t.child)}function Zf(e,t,a,i,u,h){return ia(t),t.updateQueue=null,a=Fh(t,i,a,u),Wh(e),i=_c(),e!==null&&!Et?(wc(e,t,h),us(e,t,h)):(Qe&&i&&ec(t),t.flags|=1,It(e,t,a,h),t.child)}function Wf(e,t,a,i,u){if(ia(t),t.stateNode===null){var h=La,v=a.contextType;typeof v=="object"&&v!==null&&(h=Ht(v)),h=new a(i,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=zc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=i,h.state=t.memoizedState,h.refs={},dc(t),v=a.contextType,h.context=typeof v=="object"&&v!==null?Ht(v):La,h.state=t.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Uc(t,a,v,i),h.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&zc.enqueueReplaceState(h,h.state,null),Vr(t,i,h,u),Kr(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){h=t.stateNode;var _=t.memoizedProps,O=ha(a,_);h.props=O;var J=h.context,ie=a.contextType;v=La,typeof ie=="object"&&ie!==null&&(v=Ht(ie));var ue=a.getDerivedStateFromProps;ie=typeof ue=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,ie||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||J!==v)&&Bf(t,h,i,v),Cs=!1;var ee=t.memoizedState;h.state=ee,Vr(t,i,h,u),Kr(),J=t.memoizedState,_||ee!==J||Cs?(typeof ue=="function"&&(Uc(t,a,ue,i),J=t.memoizedState),(O=Cs||Lf(t,a,O,i,ee,J,v))?(ie||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=J),h.props=i,h.state=J,h.context=v,i=O):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,hc(e,t),v=t.memoizedProps,ie=ha(a,v),h.props=ie,ue=t.pendingProps,ee=h.context,J=a.contextType,O=La,typeof J=="object"&&J!==null&&(O=Ht(J)),_=a.getDerivedStateFromProps,(J=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==ue||ee!==O)&&Bf(t,h,i,O),Cs=!1,ee=t.memoizedState,h.state=ee,Vr(t,i,h,u),Kr();var ae=t.memoizedState;v!==ue||ee!==ae||Cs||e!==null&&e.dependencies!==null&&al(e.dependencies)?(typeof _=="function"&&(Uc(t,a,_,i),ae=t.memoizedState),(ie=Cs||Lf(t,a,ie,i,ee,ae,O)||e!==null&&e.dependencies!==null&&al(e.dependencies))?(J||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,ae,O),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,ae,O)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=ae),h.props=i,h.state=ae,h.context=O,i=ie):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ee===e.memoizedState||(t.flags|=1024),i=!1)}return h=i,xl(e,t),i=(t.flags&128)!==0,h||i?(h=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&i?(t.child=ua(t,e.child,null,u),t.child=ua(t,null,a,u)):It(e,t,a,u),t.memoizedState=h.state,e=t.child):e=us(e,t,u),e}function Ff(e,t,a,i){return aa(),t.flags|=256,It(e,t,a,i),t.child}var $c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hc(e){return{baseLanes:e,cachePool:Hh()}}function Ic(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=mn),e}function em(e,t,a){var i=t.pendingProps,u=!1,h=(t.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(St.current&2)!==0),v&&(u=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(Qe){if(u?Rs(t):Os(),(e=ct)?(e=og(e,Rn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:js!==null?{id:Yn,overflow:Qn}:null,retryLane:536870912,hydrationErrors:null},a=Oh(e),a.return=t,t.child=a,$t=t,ct=null)):e=null,e===null)throw Es(t);return ju(e)?t.lanes=32:t.lanes=536870912,null}var _=i.children;return i=i.fallback,u?(Os(),u=t.mode,_=jl({mode:"hidden",children:_},u),i=sa(i,u,a,null),_.return=t,i.return=t,_.sibling=i,t.child=_,i=t.child,i.memoizedState=Hc(a),i.childLanes=Ic(e,v,a),t.memoizedState=$c,Jr(null,i)):(Rs(t),Gc(t,_))}var O=e.memoizedState;if(O!==null&&(_=O.dehydrated,_!==null)){if(h)t.flags&256?(Rs(t),t.flags&=-257,t=Kc(e,t,a)):t.memoizedState!==null?(Os(),t.child=e.child,t.flags|=128,t=null):(Os(),_=i.fallback,u=t.mode,i=jl({mode:"visible",children:i.children},u),_=sa(_,u,a,null),_.flags|=2,i.return=t,_.return=t,i.sibling=_,t.child=i,ua(t,e.child,null,a),i=t.child,i.memoizedState=Hc(a),i.childLanes=Ic(e,v,a),t.memoizedState=$c,t=Jr(null,i));else if(Rs(t),ju(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var J=v.dgst;v=J,i=Error(l(419)),i.stack="",i.digest=v,Br({value:i,source:null,stack:null}),t=Kc(e,t,a)}else if(Et||Ha(e,t,a,!1),v=(a&e.childLanes)!==0,Et||v){if(v=lt,v!==null&&(i=xn(v,a),i!==0&&i!==O.retryLane))throw O.retryLane=i,na(e,i),an(v,e,i),Bc;xu(_)||Dl(),t=Kc(e,t,a)}else xu(_)?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,ct=Dn(_.nextSibling),$t=t,Qe=!0,ks=null,Rn=!1,e!==null&&Uh(t,e),t=Gc(t,i.children),t.flags|=4096);return t}return u?(Os(),_=i.fallback,u=t.mode,O=e.child,J=O.sibling,i=as(O,{mode:"hidden",children:i.children}),i.subtreeFlags=O.subtreeFlags&65011712,J!==null?_=as(J,_):(_=sa(_,u,a,null),_.flags|=2),_.return=t,i.return=t,i.sibling=_,t.child=i,Jr(null,i),i=t.child,_=e.child.memoizedState,_===null?_=Hc(a):(u=_.cachePool,u!==null?(O=jt._currentValue,u=u.parent!==O?{parent:O,pool:O}:u):u=Hh(),_={baseLanes:_.baseLanes|a,cachePool:u}),i.memoizedState=_,i.childLanes=Ic(e,v,a),t.memoizedState=$c,Jr(e.child,i)):(Rs(t),a=e.child,e=a.sibling,a=as(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=a,t.memoizedState=null,a)}function Gc(e,t){return t=jl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function jl(e,t){return e=un(22,e,null,t),e.lanes=0,e}function Kc(e,t,a){return ua(t,e.child,null,a),e=Gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tm(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),rc(e.return,t,a)}function Vc(e,t,a,i,u,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:u,treeForkCount:h}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=i,v.tail=a,v.tailMode=u,v.treeForkCount=h)}function nm(e,t,a){var i=t.pendingProps,u=i.revealOrder,h=i.tail;i=i.children;var v=St.current,_=(v&2)!==0;if(_?(v=v&1|2,t.flags|=128):v&=1,D(St,v),It(e,t,i,a),i=Qe?Lr:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tm(e,a,t);else if(e.tag===19)tm(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&hl(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),Vc(t,!1,u,a,h,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&hl(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}Vc(t,!0,a,null,h,i);break;case"together":Vc(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function us(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Us|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Ha(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=as(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=as(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Pc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&al(e)))}function Iy(e,t,a){switch(t.tag){case 3:de(t,t.stateNode.containerInfo),Ts(t,jt,e.memoizedState.cache),aa();break;case 27:case 5:pe(t);break;case 4:de(t,t.stateNode.containerInfo);break;case 10:Ts(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vc(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Rs(t),t.flags|=128,null):(a&t.child.childLanes)!==0?em(e,t,a):(Rs(t),e=us(e,t,a),e!==null?e.sibling:null);Rs(t);break;case 19:var u=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(Ha(e,t,a,!1),i=(a&t.childLanes)!==0),u){if(i)return nm(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),D(St,St.current),i)break;return null;case 22:return t.lanes=0,Qf(e,t,a,t.pendingProps);case 24:Ts(t,jt,e.memoizedState.cache)}return us(e,t,a)}function sm(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Et=!0;else{if(!Pc(e,a)&&(t.flags&128)===0)return Et=!1,Iy(e,t,a);Et=(e.flags&131072)!==0}else Et=!1,Qe&&(t.flags&1048576)!==0&&Mh(t,Lr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=oa(t.elementType),t.type=e,typeof e=="function")Zo(e)?(i=ha(e,i),t.tag=1,t=Wf(null,t,e,i,a)):(t.tag=0,t=qc(null,t,e,i,a));else{if(e!=null){var u=e.$$typeof;if(u===F){t.tag=11,t=Vf(null,t,e,i,a);break e}else if(u===T){t.tag=14,t=Pf(null,t,e,i,a);break e}}throw t=X(e)||e,Error(l(306,t,""))}}return t;case 0:return qc(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,u=ha(i,t.pendingProps),Wf(e,t,i,u,a);case 3:e:{if(de(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var h=t.memoizedState;u=h.element,hc(e,t),Vr(t,i,null,a);var v=t.memoizedState;if(i=v.cache,Ts(t,jt,i),i!==h.cache&&ic(t,[jt],a,!0),Kr(),i=v.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Ff(e,t,i,a);break e}else if(i!==u){u=Cn(Error(l(424)),t),Br(u),t=Ff(e,t,i,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ct=Dn(e.firstChild),$t=t,Qe=!0,ks=null,Rn=!0,a=Yh(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(aa(),i===u){t=us(e,t,a);break e}It(e,t,i,a)}t=t.child}return t;case 26:return xl(e,t),e===null?(a=mg(t.type,null,t.pendingProps,null))?t.memoizedState=a:Qe||(a=t.type,e=t.pendingProps,i=$l(G.current).createElement(a),i[qt]=t,i[Wt]=e,Gt(i,a,e),zt(i),t.stateNode=i):t.memoizedState=mg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pe(t),e===null&&Qe&&(i=t.stateNode=dg(t.type,t.pendingProps,G.current),$t=t,Rn=!0,u=ct,$s(t.type)?(ku=u,ct=Dn(i.firstChild)):ct=u),It(e,t,t.pendingProps.children,a),xl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Qe&&((u=i=ct)&&(i=yb(i,t.type,t.pendingProps,Rn),i!==null?(t.stateNode=i,$t=t,ct=Dn(i.firstChild),Rn=!1,u=!0):u=!1),u||Es(t)),pe(t),u=t.type,h=t.pendingProps,v=e!==null?e.memoizedProps:null,i=h.children,_u(u,h)?i=null:v!==null&&_u(u,v)&&(t.flags|=32),t.memoizedState!==null&&(u=bc(e,t,Dy,null,null,a),di._currentValue=u),xl(e,t),It(e,t,i,a),t.child;case 6:return e===null&&Qe&&((e=a=ct)&&(a=bb(a,t.pendingProps,Rn),a!==null?(t.stateNode=a,$t=t,ct=null,e=!0):e=!1),e||Es(t)),null;case 13:return em(e,t,a);case 4:return de(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ua(t,null,i,a):It(e,t,i,a),t.child;case 11:return Vf(e,t,t.type,t.pendingProps,a);case 7:return It(e,t,t.pendingProps,a),t.child;case 8:return It(e,t,t.pendingProps.children,a),t.child;case 12:return It(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,Ts(t,t.type,i.value),It(e,t,i.children,a),t.child;case 9:return u=t.type._context,i=t.pendingProps.children,ia(t),u=Ht(u),i=i(u),t.flags|=1,It(e,t,i,a),t.child;case 14:return Pf(e,t,t.type,t.pendingProps,a);case 15:return Yf(e,t,t.type,t.pendingProps,a);case 19:return nm(e,t,a);case 31:return Hy(e,t,a);case 22:return Qf(e,t,a,t.pendingProps);case 24:return ia(t),i=Ht(jt),e===null?(u=cc(),u===null&&(u=lt,h=lc(),u.pooledCache=h,h.refCount++,h!==null&&(u.pooledCacheLanes|=a),u=h),t.memoizedState={parent:i,cache:u},dc(t),Ts(t,jt,u)):((e.lanes&a)!==0&&(hc(e,t),Vr(t,null,null,a),Kr()),u=e.memoizedState,h=t.memoizedState,u.parent!==i?(u={parent:i,cache:i},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Ts(t,jt,i)):(i=h.cache,Ts(t,jt,i),i!==u.cache&&ic(t,[jt],a,!0))),It(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function ds(e){e.flags|=4}function Yc(e,t,a,i,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Am())e.flags|=8192;else throw ca=ol,uc}else e.flags&=-16777217}function am(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!bg(t))if(Am())e.flags|=8192;else throw ca=ol,uc}function kl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Pt():536870912,e.lanes|=t,Fa|=t)}function Zr(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,i|=u.subtreeFlags&65011712,i|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Gy(e,t,a){var i=t.pendingProps;switch(tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return ut(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ls(jt),he(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($a(t)?ds(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,sc())),ut(t),null;case 26:var u=t.type,h=t.memoizedState;return e===null?(ds(t),h!==null?(ut(t),am(t,h)):(ut(t),Yc(t,u,null,i,a))):h?h!==e.memoizedState?(ds(t),ut(t),am(t,h)):(ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&ds(t),ut(t),Yc(t,u,e,i,a)),null;case 27:if(Te(t),a=G.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ds(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return ut(t),null}e=B.current,$a(t)?zh(t):(e=dg(u,i,a),t.stateNode=e,ds(t))}return ut(t),null;case 5:if(Te(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ds(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return ut(t),null}if(h=B.current,$a(t))zh(t);else{var v=$l(G.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof i.is=="string"?v.createElement("select",{is:i.is}):v.createElement("select"),i.multiple?h.multiple=!0:i.size&&(h.size=i.size);break;default:h=typeof i.is=="string"?v.createElement(u,{is:i.is}):v.createElement(u)}}h[qt]=t,h[Wt]=i;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=h;e:switch(Gt(h,u,i),u){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ds(t)}}return ut(t),Yc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ds(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=G.current,$a(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,u=$t,u!==null)switch(u.tag){case 27:case 5:i=u.memoizedProps}e[qt]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||eg(e.nodeValue,a)),e||Es(t,!0)}else e=$l(e).createTextNode(i),e[qt]=t,t.stateNode=e}return ut(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=$a(t),a!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[qt]=t}else aa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),e=!1}else a=sc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(hn(t),t):(hn(t),null);if((t.flags&128)!==0)throw Error(l(558))}return ut(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=$a(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(l(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[qt]=t}else aa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),u=!1}else u=sc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(hn(t),t):(hn(t),null)}return hn(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,u=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(u=i.alternate.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==u&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),kl(t,t.updateQueue),ut(t),null);case 4:return he(),e===null&&gu(t.stateNode.containerInfo),ut(t),null;case 10:return ls(t.type),ut(t),null;case 19:if(H(St),i=t.memoizedState,i===null)return ut(t),null;if(u=(t.flags&128)!==0,h=i.rendering,h===null)if(u)Zr(i,!1);else{if(_t!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=hl(e),h!==null){for(t.flags|=128,Zr(i,!1),e=h.updateQueue,t.updateQueue=e,kl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Rh(a,e),a=a.sibling;return D(St,St.current&1|2),Qe&&rs(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&oe()>Al&&(t.flags|=128,u=!0,Zr(i,!1),t.lanes=4194304)}else{if(!u)if(e=hl(h),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,kl(t,e),Zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!Qe)return ut(t),null}else 2*oe()-i.renderingStartTime>Al&&a!==536870912&&(t.flags|=128,u=!0,Zr(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=oe(),e.sibling=null,a=St.current,D(St,u?a&1|2:a&1),Qe&&rs(t,i.treeForkCount),e):(ut(t),null);case 22:case 23:return hn(t),pc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),a=t.updateQueue,a!==null&&kl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&H(la),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ls(jt),ut(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function Ky(e,t){switch(tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ls(jt),he(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Te(t),null;case 31:if(t.memoizedState!==null){if(hn(t),t.alternate===null)throw Error(l(340));aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(hn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(St),null;case 4:return he(),null;case 10:return ls(t.type),null;case 22:case 23:return hn(t),pc(),e!==null&&H(la),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ls(jt),null;case 25:return null;default:return null}}function rm(e,t){switch(tc(t),t.tag){case 3:ls(jt),he();break;case 26:case 27:case 5:Te(t);break;case 4:he();break;case 31:t.memoizedState!==null&&hn(t);break;case 13:hn(t);break;case 19:H(St);break;case 10:ls(t.type);break;case 22:case 23:hn(t),pc(),e!==null&&H(la);break;case 24:ls(jt)}}function Wr(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var u=i.next;a=u;do{if((a.tag&e)===e){i=void 0;var h=a.create,v=a.inst;i=h(),v.destroy=i}a=a.next}while(a!==u)}}catch(_){st(t,t.return,_)}}function Ds(e,t,a){try{var i=t.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var h=u.next;i=h;do{if((i.tag&e)===e){var v=i.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,u=t;var O=a,J=_;try{J()}catch(ie){st(u,O,ie)}}}i=i.next}while(i!==h)}}catch(ie){st(t,t.return,ie)}}function im(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Xh(t,a)}catch(i){st(e,e.return,i)}}}function lm(e,t,a){a.props=ha(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){st(e,t,i)}}function Fr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(u){st(e,t,u)}}function Xn(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(u){st(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){st(e,t,u)}else a.current=null}function om(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(u){st(e,e.return,u)}}function Qc(e,t,a){try{var i=e.stateNode;hb(i,e.type,a,t),i[Wt]=t}catch(u){st(e,e.return,u)}}function cm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$s(e.type)||e.tag===4}function Xc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$s(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jc(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ns));else if(i!==4&&(i===27&&$s(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Jc(e,t,a),e=e.sibling;e!==null;)Jc(e,t,a),e=e.sibling}function El(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&$s(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(El(e,t,a),e=e.sibling;e!==null;)El(e,t,a),e=e.sibling}function um(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Gt(t,i,a),t[qt]=e,t[Wt]=a}catch(h){st(e,e.return,h)}}var hs=!1,Tt=!1,Zc=!1,dm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Vy(e,t){if(e=e.containerInfo,yu=Yl,e=Sh(e),Ko(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var u=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var v=0,_=-1,O=-1,J=0,ie=0,ue=e,ee=null;t:for(;;){for(var ae;ue!==a||u!==0&&ue.nodeType!==3||(_=v+u),ue!==h||i!==0&&ue.nodeType!==3||(O=v+i),ue.nodeType===3&&(v+=ue.nodeValue.length),(ae=ue.firstChild)!==null;)ee=ue,ue=ae;for(;;){if(ue===e)break t;if(ee===a&&++J===u&&(_=v),ee===h&&++ie===i&&(O=v),(ae=ue.nextSibling)!==null)break;ue=ee,ee=ue.parentNode}ue=ae}a=_===-1||O===-1?null:{start:_,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(bu={focusedElem:e,selectionRange:a},Yl=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=t,u=h.memoizedProps,h=h.memoizedState,i=a.stateNode;try{var _e=ha(a.type,u);e=i.getSnapshotBeforeUpdate(_e,h),i.__reactInternalSnapshotBeforeUpdate=e}catch(Ce){st(a,a.return,Ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Su(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Su(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function hm(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:ms(e,a),i&4&&Wr(5,a);break;case 1:if(ms(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(v){st(a,a.return,v)}else{var u=ha(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){st(a,a.return,v)}}i&64&&im(a),i&512&&Fr(a,a.return);break;case 3:if(ms(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Xh(e,t)}catch(v){st(a,a.return,v)}}break;case 27:t===null&&i&4&&um(a);case 26:case 5:ms(e,a),t===null&&i&4&&om(a),i&512&&Fr(a,a.return);break;case 12:ms(e,a);break;case 31:ms(e,a),i&4&&gm(e,a);break;case 13:ms(e,a),i&4&&pm(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=eb.bind(null,a),_b(e,a))));break;case 22:if(i=a.memoizedState!==null||hs,!i){t=t!==null&&t.memoizedState!==null||Tt,u=hs;var h=Tt;hs=i,(Tt=t)&&!h?gs(e,a,(a.subtreeFlags&8772)!==0):ms(e,a),hs=u,Tt=h}break;case 30:break;default:ms(e,a)}}function fm(e){var t=e.alternate;t!==null&&(e.alternate=null,fm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&To(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ht=null,en=!1;function fs(e,t,a){for(a=a.child;a!==null;)mm(e,t,a),a=a.sibling}function mm(e,t,a){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(vt,a)}catch{}switch(a.tag){case 26:Tt||Xn(a,t),fs(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||Xn(a,t);var i=ht,u=en;$s(a.type)&&(ht=a.stateNode,en=!1),fs(e,t,a),oi(a.stateNode),ht=i,en=u;break;case 5:Tt||Xn(a,t);case 6:if(i=ht,u=en,ht=null,fs(e,t,a),ht=i,en=u,ht!==null)if(en)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(h){st(a,t,h)}else try{ht.removeChild(a.stateNode)}catch(h){st(a,t,h)}break;case 18:ht!==null&&(en?(e=ht,ig(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),lr(e)):ig(ht,a.stateNode));break;case 4:i=ht,u=en,ht=a.stateNode.containerInfo,en=!0,fs(e,t,a),ht=i,en=u;break;case 0:case 11:case 14:case 15:Ds(2,a,t),Tt||Ds(4,a,t),fs(e,t,a);break;case 1:Tt||(Xn(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&lm(a,t,i)),fs(e,t,a);break;case 21:fs(e,t,a);break;case 22:Tt=(i=Tt)||a.memoizedState!==null,fs(e,t,a),Tt=i;break;default:fs(e,t,a)}}function gm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{lr(e)}catch(a){st(t,t.return,a)}}}function pm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{lr(e)}catch(a){st(t,t.return,a)}}function Py(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new dm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new dm),t;default:throw Error(l(435,e.tag))}}function Tl(e,t){var a=Py(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var u=tb.bind(null,e,i);i.then(u,u)}})}function tn(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var u=a[i],h=e,v=t,_=v;e:for(;_!==null;){switch(_.tag){case 27:if($s(_.type)){ht=_.stateNode,en=!1;break e}break;case 5:ht=_.stateNode,en=!1;break e;case 3:case 4:ht=_.stateNode.containerInfo,en=!0;break e}_=_.return}if(ht===null)throw Error(l(160));mm(h,v,u),ht=null,en=!1,h=u.alternate,h!==null&&(h.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)vm(t,e),t=t.sibling}var $n=null;function vm(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),i&4&&(Ds(3,e,e.return),Wr(3,e),Ds(5,e,e.return));break;case 1:tn(t,e),nn(e),i&512&&(Tt||a===null||Xn(a,a.return)),i&64&&hs&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var u=$n;if(tn(t,e),nn(e),i&512&&(Tt||a===null||Xn(a,a.return)),i&4){var h=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(i){case"title":h=u.getElementsByTagName("title")[0],(!h||h[Er]||h[qt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=u.createElement(i),u.head.insertBefore(h,u.querySelector("head > title"))),Gt(h,i,a),h[qt]=e,zt(h),i=h;break e;case"link":var v=vg("link","href",u).get(i+(a.href||""));if(v){for(var _=0;_<v.length;_++)if(h=v[_],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(_,1);break t}}h=u.createElement(i),Gt(h,i,a),u.head.appendChild(h);break;case"meta":if(v=vg("meta","content",u).get(i+(a.content||""))){for(_=0;_<v.length;_++)if(h=v[_],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(_,1);break t}}h=u.createElement(i),Gt(h,i,a),u.head.appendChild(h);break;default:throw Error(l(468,i))}h[qt]=e,zt(h),i=h}e.stateNode=i}else yg(u,e.type,e.stateNode);else e.stateNode=pg(u,i,e.memoizedProps);else h!==i?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,i===null?yg(u,e.type,e.stateNode):pg(u,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Qc(e,e.memoizedProps,a.memoizedProps)}break;case 27:tn(t,e),nn(e),i&512&&(Tt||a===null||Xn(a,a.return)),a!==null&&i&4&&Qc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(tn(t,e),nn(e),i&512&&(Tt||a===null||Xn(a,a.return)),e.flags&32){u=e.stateNode;try{Aa(u,"")}catch(_e){st(e,e.return,_e)}}i&4&&e.stateNode!=null&&(u=e.memoizedProps,Qc(e,u,a!==null?a.memoizedProps:u)),i&1024&&(Zc=!0);break;case 6:if(tn(t,e),nn(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(_e){st(e,e.return,_e)}}break;case 3:if(Gl=null,u=$n,$n=Hl(t.containerInfo),tn(t,e),$n=u,nn(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{lr(t.containerInfo)}catch(_e){st(e,e.return,_e)}Zc&&(Zc=!1,ym(e));break;case 4:i=$n,$n=Hl(e.stateNode.containerInfo),tn(t,e),nn(e),$n=i;break;case 12:tn(t,e),nn(e);break;case 31:tn(t,e),nn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nl=oe()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 22:u=e.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,J=hs,ie=Tt;if(hs=J||u,Tt=ie||O,tn(t,e),Tt=ie,hs=J,nn(e),i&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||O||hs||Tt||fa(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){O=a=t;try{if(h=O.stateNode,u)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=O.stateNode;var ue=O.memoizedProps.style,ee=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;_.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(_e){st(O,O.return,_e)}}}else if(t.tag===6){if(a===null){O=t;try{O.stateNode.nodeValue=u?"":O.memoizedProps}catch(_e){st(O,O.return,_e)}}}else if(t.tag===18){if(a===null){O=t;try{var ae=O.stateNode;u?lg(ae,!0):lg(O.stateNode,!1)}catch(_e){st(O,O.return,_e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Tl(e,a))));break;case 19:tn(t,e),nn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Tl(e,i)));break;case 30:break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(cm(i)){a=i;break}i=i.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var u=a.stateNode,h=Xc(e);El(e,h,u);break;case 5:var v=a.stateNode;a.flags&32&&(Aa(v,""),a.flags&=-33);var _=Xc(e);El(e,_,v);break;case 3:case 4:var O=a.stateNode.containerInfo,J=Xc(e);Jc(e,J,O);break;default:throw Error(l(161))}}catch(ie){st(e,e.return,ie)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ym(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ym(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ms(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)hm(e,t.alternate,t),t=t.sibling}function fa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ds(4,t,t.return),fa(t);break;case 1:Xn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&lm(t,t.return,a),fa(t);break;case 27:oi(t.stateNode);case 26:case 5:Xn(t,t.return),fa(t);break;case 22:t.memoizedState===null&&fa(t);break;case 30:fa(t);break;default:fa(t)}e=e.sibling}}function gs(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,u=e,h=t,v=h.flags;switch(h.tag){case 0:case 11:case 15:gs(u,h,a),Wr(4,h);break;case 1:if(gs(u,h,a),i=h,u=i.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(J){st(i,i.return,J)}if(i=h,u=i.updateQueue,u!==null){var _=i.stateNode;try{var O=u.shared.hiddenCallbacks;if(O!==null)for(u.shared.hiddenCallbacks=null,u=0;u<O.length;u++)Qh(O[u],_)}catch(J){st(i,i.return,J)}}a&&v&64&&im(h),Fr(h,h.return);break;case 27:um(h);case 26:case 5:gs(u,h,a),a&&i===null&&v&4&&om(h),Fr(h,h.return);break;case 12:gs(u,h,a);break;case 31:gs(u,h,a),a&&v&4&&gm(u,h);break;case 13:gs(u,h,a),a&&v&4&&pm(u,h);break;case 22:h.memoizedState===null&&gs(u,h,a),Fr(h,h.return);break;case 30:break;default:gs(u,h,a)}t=t.sibling}}function Wc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&qr(a))}function Fc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&qr(e))}function Hn(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bm(e,t,a,i),t=t.sibling}function bm(e,t,a,i){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Hn(e,t,a,i),u&2048&&Wr(9,t);break;case 1:Hn(e,t,a,i);break;case 3:Hn(e,t,a,i),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&qr(e)));break;case 12:if(u&2048){Hn(e,t,a,i),e=t.stateNode;try{var h=t.memoizedProps,v=h.id,_=h.onPostCommit;typeof _=="function"&&_(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){st(t,t.return,O)}}else Hn(e,t,a,i);break;case 31:Hn(e,t,a,i);break;case 13:Hn(e,t,a,i);break;case 23:break;case 22:h=t.stateNode,v=t.alternate,t.memoizedState!==null?h._visibility&2?Hn(e,t,a,i):ei(e,t):h._visibility&2?Hn(e,t,a,i):(h._visibility|=2,Ja(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),u&2048&&Wc(v,t);break;case 24:Hn(e,t,a,i),u&2048&&Fc(t.alternate,t);break;default:Hn(e,t,a,i)}}function Ja(e,t,a,i,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,v=t,_=a,O=i,J=v.flags;switch(v.tag){case 0:case 11:case 15:Ja(h,v,_,O,u),Wr(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?Ja(h,v,_,O,u):ei(h,v):(ie._visibility|=2,Ja(h,v,_,O,u)),u&&J&2048&&Wc(v.alternate,v);break;case 24:Ja(h,v,_,O,u),u&&J&2048&&Fc(v.alternate,v);break;default:Ja(h,v,_,O,u)}t=t.sibling}}function ei(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,u=i.flags;switch(i.tag){case 22:ei(a,i),u&2048&&Wc(i.alternate,i);break;case 24:ei(a,i),u&2048&&Fc(i.alternate,i);break;default:ei(a,i)}t=t.sibling}}var ti=8192;function Za(e,t,a){if(e.subtreeFlags&ti)for(e=e.child;e!==null;)_m(e,t,a),e=e.sibling}function _m(e,t,a){switch(e.tag){case 26:Za(e,t,a),e.flags&ti&&e.memoizedState!==null&&Ob(a,$n,e.memoizedState,e.memoizedProps);break;case 5:Za(e,t,a);break;case 3:case 4:var i=$n;$n=Hl(e.stateNode.containerInfo),Za(e,t,a),$n=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ti,ti=16777216,Za(e,t,a),ti=i):Za(e,t,a));break;default:Za(e,t,a)}}function wm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ni(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];Lt=i,xm(i,e)}wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sm(e),e=e.sibling}function Sm(e){switch(e.tag){case 0:case 11:case 15:ni(e),e.flags&2048&&Ds(9,e,e.return);break;case 3:ni(e);break;case 12:ni(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Cl(e)):ni(e);break;default:ni(e)}}function Cl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];Lt=i,xm(i,e)}wm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ds(8,t,t.return),Cl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Cl(t));break;default:Cl(t)}e=e.sibling}}function xm(e,t){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:Ds(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:qr(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,Lt=i;else e:for(a=e;Lt!==null;){i=Lt;var u=i.sibling,h=i.return;if(fm(i),i===a){Lt=null;break e}if(u!==null){u.return=h,Lt=u;break e}Lt=h}}}var Yy={getCacheForType:function(e){var t=Ht(jt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Ht(jt).controller.signal}},Qy=typeof WeakMap=="function"?WeakMap:Map,We=0,lt=null,Ke=null,Pe=0,nt=0,fn=null,Ms=!1,Wa=!1,eu=!1,ps=0,_t=0,Us=0,ma=0,tu=0,mn=0,Fa=0,si=null,sn=null,nu=!1,Nl=0,jm=0,Al=1/0,Rl=null,zs=null,Rt=0,Ls=null,er=null,vs=0,su=0,au=null,km=null,ai=0,ru=null;function gn(){return(We&2)!==0&&Pe!==0?Pe&-Pe:M.T!==null?du():Bn()}function Em(){if(mn===0)if((Pe&536870912)===0||Qe){var e=wn;wn<<=1,(wn&3932160)===0&&(wn=262144),mn=e}else mn=536870912;return e=dn.current,e!==null&&(e.flags|=32),mn}function an(e,t,a){(e===lt&&(nt===2||nt===9)||e.cancelPendingCommit!==null)&&(tr(e,0),Bs(e,Pe,mn,!1)),Sn(e,a),((We&2)===0||e!==lt)&&(e===lt&&((We&2)===0&&(ma|=a),_t===4&&Bs(e,Pe,mn,!1)),Jn(e))}function Tm(e,t,a){if((We&6)!==0)throw Error(l(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Xt(e,t),u=i?Zy(e,t):lu(e,t,!0),h=i;do{if(u===0){Wa&&!i&&Bs(e,t,0,!1);break}else{if(a=e.current.alternate,h&&!Xy(a)){u=lu(e,t,!1),h=!1;continue}if(u===2){if(h=t,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var _=e;u=si;var O=_.current.memoizedState.isDehydrated;if(O&&(tr(_,v).flags|=256),v=lu(_,v,!1),v!==2){if(eu&&!O){_.errorRecoveryDisabledLanes|=h,ma|=h,u=4;break e}h=sn,sn=u,h!==null&&(sn===null?sn=h:sn.push.apply(sn,h))}u=v}if(h=!1,u!==2)continue}}if(u===1){tr(e,0),Bs(e,t,0,!0);break}e:{switch(i=e,h=u,h){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:Bs(i,t,mn,!Ms);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(u=Nl+300-oe(),10<u)){if(Bs(i,t,mn,!Ms),Ut(i,0,!0)!==0)break e;vs=t,i.timeoutHandle=ag(Cm.bind(null,i,a,sn,Rl,nu,t,mn,ma,Fa,Ms,h,"Throttled",-0,0),u);break e}Cm(i,a,sn,Rl,nu,t,mn,ma,Fa,Ms,h,null,-0,0)}}break}while(!0);Jn(e)}function Cm(e,t,a,i,u,h,v,_,O,J,ie,ue,ee,ae){if(e.timeoutHandle=-1,ue=t.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},_m(t,h,ue);var _e=(h&62914560)===h?Nl-oe():(h&4194048)===h?jm-oe():0;if(_e=Db(ue,_e),_e!==null){vs=h,e.cancelPendingCommit=_e(zm.bind(null,e,t,h,a,i,u,v,_,O,ie,ue,null,ee,ae)),Bs(e,h,v,!J);return}}zm(e,t,h,a,i,u,v,_,O)}function Xy(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var u=a[i],h=u.getSnapshot;u=u.value;try{if(!cn(h(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t,a,i){t&=~tu,t&=~ma,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var u=t;0<u;){var h=31-dt(u),v=1<<h;i[h]=-1,u&=~v}a!==0&&Ln(e,a,t)}function Ol(){return(We&6)===0?(ri(0),!1):!0}function iu(){if(Ke!==null){if(nt===0)var e=Ke.return;else e=Ke,is=ra=null,Sc(e),Va=null,Hr=0,e=Ke;for(;e!==null;)rm(e.alternate,e),e=e.return;Ke=null}}function tr(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,gb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),vs=0,iu(),lt=e,Ke=a=as(e.current,null),Pe=t,nt=0,fn=null,Ms=!1,Wa=Xt(e,t),eu=!1,Fa=mn=tu=ma=Us=_t=0,sn=si=null,nu=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var u=31-dt(i),h=1<<u;t|=e[u],i&=~h}return ps=t,Fi(),a}function Nm(e,t){He=null,M.H=Xr,t===Ka||t===ll?(t=Kh(),nt=3):t===uc?(t=Kh(),nt=4):nt=t===Bc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,fn=t,Ke===null&&(_t=1,wl(e,Cn(t,e.current)))}function Am(){var e=dn.current;return e===null?!0:(Pe&4194048)===Pe?On===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?e===On:!1}function Rm(){var e=M.H;return M.H=Xr,e===null?Xr:e}function Om(){var e=M.A;return M.A=Yy,e}function Dl(){_t=4,Ms||(Pe&4194048)!==Pe&&dn.current!==null||(Wa=!0),(Us&134217727)===0&&(ma&134217727)===0||lt===null||Bs(lt,Pe,mn,!1)}function lu(e,t,a){var i=We;We|=2;var u=Rm(),h=Om();(lt!==e||Pe!==t)&&(Rl=null,tr(e,t)),t=!1;var v=_t;e:do try{if(nt!==0&&Ke!==null){var _=Ke,O=fn;switch(nt){case 8:iu(),v=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(t=!0);var J=nt;if(nt=0,fn=null,nr(e,_,O,J),a&&Wa){v=0;break e}break;default:J=nt,nt=0,fn=null,nr(e,_,O,J)}}Jy(),v=_t;break}catch(ie){Nm(e,ie)}while(!0);return t&&e.shellSuspendCounter++,is=ra=null,We=i,M.H=u,M.A=h,Ke===null&&(lt=null,Pe=0,Fi()),v}function Jy(){for(;Ke!==null;)Dm(Ke)}function Zy(e,t){var a=We;We|=2;var i=Rm(),u=Om();lt!==e||Pe!==t?(Rl=null,Al=oe()+500,tr(e,t)):Wa=Xt(e,t);e:do try{if(nt!==0&&Ke!==null){t=Ke;var h=fn;t:switch(nt){case 1:nt=0,fn=null,nr(e,t,h,1);break;case 2:case 9:if(Ih(h)){nt=0,fn=null,Mm(t);break}t=function(){nt!==2&&nt!==9||lt!==e||(nt=7),Jn(e)},h.then(t,t);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Ih(h)?(nt=0,fn=null,Mm(t)):(nt=0,fn=null,nr(e,t,h,7));break;case 5:var v=null;switch(Ke.tag){case 26:v=Ke.memoizedState;case 5:case 27:var _=Ke;if(v?bg(v):_.stateNode.complete){nt=0,fn=null;var O=_.sibling;if(O!==null)Ke=O;else{var J=_.return;J!==null?(Ke=J,Ml(J)):Ke=null}break t}}nt=0,fn=null,nr(e,t,h,5);break;case 6:nt=0,fn=null,nr(e,t,h,6);break;case 8:iu(),_t=6;break e;default:throw Error(l(462))}}Wy();break}catch(ie){Nm(e,ie)}while(!0);return is=ra=null,M.H=i,M.A=u,We=a,Ke!==null?0:(lt=null,Pe=0,Fi(),_t)}function Wy(){for(;Ke!==null&&!be();)Dm(Ke)}function Dm(e){var t=sm(e.alternate,e,ps);e.memoizedProps=e.pendingProps,t===null?Ml(e):Ke=t}function Mm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Zf(a,t,t.pendingProps,t.type,void 0,Pe);break;case 11:t=Zf(a,t,t.pendingProps,t.type.render,t.ref,Pe);break;case 5:Sc(t);default:rm(a,t),t=Ke=Rh(t,ps),t=sm(a,t,ps)}e.memoizedProps=e.pendingProps,t===null?Ml(e):Ke=t}function nr(e,t,a,i){is=ra=null,Sc(t),Va=null,Hr=0;var u=t.return;try{if($y(e,u,t,a,Pe)){_t=1,wl(e,Cn(a,e.current)),Ke=null;return}}catch(h){if(u!==null)throw Ke=u,h;_t=1,wl(e,Cn(a,e.current)),Ke=null;return}t.flags&32768?(Qe||i===1?e=!0:Wa||(Pe&536870912)!==0?e=!1:(Ms=e=!0,(i===2||i===9||i===3||i===6)&&(i=dn.current,i!==null&&i.tag===13&&(i.flags|=16384))),Um(t,e)):Ml(t)}function Ml(e){var t=e;do{if((t.flags&32768)!==0){Um(t,Ms);return}e=t.return;var a=Gy(t.alternate,t,ps);if(a!==null){Ke=a;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);_t===0&&(_t=5)}function Um(e,t){do{var a=Ky(e.alternate,e);if(a!==null){a.flags&=32767,Ke=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ke=e;return}Ke=e=a}while(e!==null);_t=6,Ke=null}function zm(e,t,a,i,u,h,v,_,O){e.cancelPendingCommit=null;do Ul();while(Rt!==0);if((We&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(h=t.lanes|t.childLanes,h|=Xo,At(e,a,h,v,_,O),e===lt&&(Ke=lt=null,Pe=0),er=t,Ls=e,vs=a,su=h,au=u,km=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,nb(ne,function(){return Hm(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=M.T,M.T=null,u=$.p,$.p=2,v=We,We|=4;try{Vy(e,t,a)}finally{We=v,$.p=u,M.T=i}}Rt=1,Lm(),Bm(),qm()}}function Lm(){if(Rt===1){Rt=0;var e=Ls,t=er,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var i=$.p;$.p=2;var u=We;We|=4;try{vm(t,e);var h=bu,v=Sh(e.containerInfo),_=h.focusedElem,O=h.selectionRange;if(v!==_&&_&&_.ownerDocument&&wh(_.ownerDocument.documentElement,_)){if(O!==null&&Ko(_)){var J=O.start,ie=O.end;if(ie===void 0&&(ie=J),"selectionStart"in _)_.selectionStart=J,_.selectionEnd=Math.min(ie,_.value.length);else{var ue=_.ownerDocument||document,ee=ue&&ue.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),_e=_.textContent.length,Ce=Math.min(O.start,_e),it=O.end===void 0?Ce:Math.min(O.end,_e);!ae.extend&&Ce>it&&(v=it,it=Ce,Ce=v);var q=_h(_,Ce),U=_h(_,it);if(q&&U&&(ae.rangeCount!==1||ae.anchorNode!==q.node||ae.anchorOffset!==q.offset||ae.focusNode!==U.node||ae.focusOffset!==U.offset)){var Q=ue.createRange();Q.setStart(q.node,q.offset),ae.removeAllRanges(),Ce>it?(ae.addRange(Q),ae.extend(U.node,U.offset)):(Q.setEnd(U.node,U.offset),ae.addRange(Q))}}}}for(ue=[],ae=_;ae=ae.parentNode;)ae.nodeType===1&&ue.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ue.length;_++){var ce=ue[_];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Yl=!!yu,bu=yu=null}finally{We=u,$.p=i,M.T=a}}e.current=t,Rt=2}}function Bm(){if(Rt===2){Rt=0;var e=Ls,t=er,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var i=$.p;$.p=2;var u=We;We|=4;try{hm(e,t.alternate,t)}finally{We=u,$.p=i,M.T=a}}Rt=3}}function qm(){if(Rt===4||Rt===3){Rt=0,De();var e=Ls,t=er,a=vs,i=km;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Rt=5:(Rt=0,er=Ls=null,$m(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(zs=null),es(a),t=t.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(vt,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=M.T,u=$.p,$.p=2,M.T=null;try{for(var h=e.onRecoverableError,v=0;v<i.length;v++){var _=i[v];h(_.value,{componentStack:_.stack})}}finally{M.T=t,$.p=u}}(vs&3)!==0&&Ul(),Jn(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===ru?ai++:(ai=0,ru=e):ai=0,ri(0)}}function $m(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,qr(t)))}function Ul(){return Lm(),Bm(),qm(),Hm()}function Hm(){if(Rt!==5)return!1;var e=Ls,t=su;su=0;var a=es(vs),i=M.T,u=$.p;try{$.p=32>a?32:a,M.T=null,a=au,au=null;var h=Ls,v=vs;if(Rt=0,er=Ls=null,vs=0,(We&6)!==0)throw Error(l(331));var _=We;if(We|=4,Sm(h.current),bm(h,h.current,v,a),We=_,ri(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(vt,h)}catch{}return!0}finally{$.p=u,M.T=i,$m(e,t)}}function Im(e,t,a){t=Cn(a,t),t=Lc(e.stateNode,t,2),e=As(e,t,2),e!==null&&(Sn(e,2),Jn(e))}function st(e,t,a){if(e.tag===3)Im(e,e,a);else for(;t!==null;){if(t.tag===3){Im(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zs===null||!zs.has(i))){e=Cn(a,e),a=Gf(2),i=As(t,a,2),i!==null&&(Kf(a,i,t,e),Sn(i,2),Jn(i));break}}t=t.return}}function ou(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Qy;var u=new Set;i.set(t,u)}else u=i.get(t),u===void 0&&(u=new Set,i.set(t,u));u.has(a)||(eu=!0,u.add(a),e=Fy.bind(null,e,t,a),t.then(e,e))}function Fy(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,lt===e&&(Pe&a)===a&&(_t===4||_t===3&&(Pe&62914560)===Pe&&300>oe()-Nl?(We&2)===0&&tr(e,0):tu|=a,Fa===Pe&&(Fa=0)),Jn(e)}function Gm(e,t){t===0&&(t=Pt()),e=na(e,t),e!==null&&(Sn(e,t),Jn(e))}function eb(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Gm(e,a)}function tb(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),Gm(e,a)}function nb(e,t){return ge(e,t)}var zl=null,sr=null,cu=!1,Ll=!1,uu=!1,qs=0;function Jn(e){e!==sr&&e.next===null&&(sr===null?zl=sr=e:sr=sr.next=e),Ll=!0,cu||(cu=!0,ab())}function ri(e,t){if(!uu&&Ll){uu=!0;do for(var a=!1,i=zl;i!==null;){if(e!==0){var u=i.pendingLanes;if(u===0)var h=0;else{var v=i.suspendedLanes,_=i.pingedLanes;h=(1<<31-dt(42|e)+1)-1,h&=u&~(v&~_),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Ym(i,h))}else h=Pe,h=Ut(i,i===lt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(h&3)===0||Xt(i,h)||(a=!0,Ym(i,h));i=i.next}while(a);uu=!1}}function sb(){Km()}function Km(){Ll=cu=!1;var e=0;qs!==0&&mb()&&(e=qs);for(var t=oe(),a=null,i=zl;i!==null;){var u=i.next,h=Vm(i,t);h===0?(i.next=null,a===null?zl=u:a.next=u,u===null&&(sr=a)):(a=i,(e!==0||(h&3)!==0)&&(Ll=!0)),i=u}Rt!==0&&Rt!==5||ri(e),qs!==0&&(qs=0)}function Vm(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-dt(h),_=1<<v,O=u[v];O===-1?((_&a)===0||(_&i)!==0)&&(u[v]=Jt(_,t)):O<=t&&(e.expiredLanes|=_),h&=~_}if(t=lt,a=Pe,a=Ut(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(nt===2||nt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ve(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Xt(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&ve(i),es(a)){case 2:case 8:a=Me;break;case 32:a=ne;break;case 268435456:a=ke;break;default:a=ne}return i=Pm.bind(null,e),a=ge(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&ve(i),e.callbackPriority=2,e.callbackNode=null,2}function Pm(e,t){if(Rt!==0&&Rt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ul()&&e.callbackNode!==a)return null;var i=Pe;return i=Ut(e,e===lt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Tm(e,i,t),Vm(e,oe()),e.callbackNode!=null&&e.callbackNode===a?Pm.bind(null,e):null)}function Ym(e,t){if(Ul())return null;Tm(e,t,!0)}function ab(){pb(function(){(We&6)!==0?ge(Be,sb):Km()})}function du(){if(qs===0){var e=Ia;e===0&&(e=Mt,Mt<<=1,(Mt&261888)===0&&(Mt=256)),qs=e}return qs}function Qm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vi(""+e)}function Xm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function rb(e,t,a,i,u){if(t==="submit"&&a&&a.stateNode===u){var h=Qm((u[Wt]||null).action),v=i.submitter;v&&(t=(t=v[Wt]||null)?Qm(t.formAction):v.getAttribute("formAction"),t!==null&&(h=t,v=null));var _=new Xi("action","action",null,i,u);e.push({event:_,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(qs!==0){var O=v?Xm(u,v):new FormData(u);Rc(a,{pending:!0,data:O,method:u.method,action:h},null,O)}}else typeof h=="function"&&(_.preventDefault(),O=v?Xm(u,v):new FormData(u),Rc(a,{pending:!0,data:O,method:u.method,action:h},h,O))},currentTarget:u}]})}}for(var hu=0;hu<Qo.length;hu++){var fu=Qo[hu],ib=fu.toLowerCase(),lb=fu[0].toUpperCase()+fu.slice(1);qn(ib,"on"+lb)}qn(kh,"onAnimationEnd"),qn(Eh,"onAnimationIteration"),qn(Th,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(xy,"onTransitionRun"),qn(jy,"onTransitionStart"),qn(ky,"onTransitionCancel"),qn(Ch,"onTransitionEnd"),Ca("onMouseEnter",["mouseout","mouseover"]),Ca("onMouseLeave",["mouseout","mouseover"]),Ca("onPointerEnter",["pointerout","pointerover"]),Ca("onPointerLeave",["pointerout","pointerover"]),Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ii));function Jm(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],u=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var v=i.length-1;0<=v;v--){var _=i[v],O=_.instance,J=_.currentTarget;if(_=_.listener,O!==h&&u.isPropagationStopped())break e;h=_,u.currentTarget=J;try{h(u)}catch(ie){Wi(ie)}u.currentTarget=null,h=O}else for(v=0;v<i.length;v++){if(_=i[v],O=_.instance,J=_.currentTarget,_=_.listener,O!==h&&u.isPropagationStopped())break e;h=_,u.currentTarget=J;try{h(u)}catch(ie){Wi(ie)}u.currentTarget=null,h=O}}}}function Ve(e,t){var a=t[Eo];a===void 0&&(a=t[Eo]=new Set);var i=e+"__bubble";a.has(i)||(Zm(t,e,2,!1),a.add(i))}function mu(e,t,a){var i=0;t&&(i|=4),Zm(a,e,i,t)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function gu(e){if(!e[Bl]){e[Bl]=!0,Gd.forEach(function(a){a!=="selectionchange"&&(ob.has(a)||mu(a,!1,e),mu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bl]||(t[Bl]=!0,mu("selectionchange",!1,t))}}function Zm(e,t,a,i){switch(Eg(t)){case 2:var u=zb;break;case 8:u=Lb;break;default:u=Au}a=u.bind(null,t,a,e),u=void 0,!Uo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function pu(e,t,a,i,u){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var v=i.tag;if(v===3||v===4){var _=i.stateNode.containerInfo;if(_===u)break;if(v===4)for(v=i.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;_!==null;){if(v=ka(_),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){i=h=v;continue e}_=_.parentNode}}i=i.return}th(function(){var J=h,ie=Do(a),ue=[];e:{var ee=Nh.get(e);if(ee!==void 0){var ae=Xi,_e=e;switch(e){case"keypress":if(Yi(a)===0)break e;case"keydown":case"keyup":ae=ty;break;case"focusin":_e="focus",ae=qo;break;case"focusout":_e="blur",ae=qo;break;case"beforeblur":case"afterblur":ae=qo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Gv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=ay;break;case kh:case Eh:case Th:ae=Pv;break;case Ch:ae=iy;break;case"scroll":case"scrollend":ae=Hv;break;case"wheel":ae=oy;break;case"copy":case"cut":case"paste":ae=Qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ih;break;case"toggle":case"beforetoggle":ae=uy}var Ce=(t&4)!==0,it=!Ce&&(e==="scroll"||e==="scrollend"),q=Ce?ee!==null?ee+"Capture":null:ee;Ce=[];for(var U=J,Q;U!==null;){var ce=U;if(Q=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Q===null||q===null||(ce=Cr(U,q),ce!=null&&Ce.push(li(U,ce,Q))),it)break;U=U.return}0<Ce.length&&(ee=new ae(ee,_e,null,a,ie),ue.push({event:ee,listeners:Ce}))}}if((t&7)===0){e:{if(ee=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",ee&&a!==Oo&&(_e=a.relatedTarget||a.fromElement)&&(ka(_e)||_e[ja]))break e;if((ae||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(_e=a.relatedTarget||a.toElement,ae=J,_e=_e?ka(_e):null,_e!==null&&(it=d(_e),Ce=_e.tag,_e!==it||Ce!==5&&Ce!==27&&Ce!==6)&&(_e=null)):(ae=null,_e=J),ae!==_e)){if(Ce=ah,ce="onMouseLeave",q="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=ih,ce="onPointerLeave",q="onPointerEnter",U="pointer"),it=ae==null?ee:Tr(ae),Q=_e==null?ee:Tr(_e),ee=new Ce(ce,U+"leave",ae,a,ie),ee.target=it,ee.relatedTarget=Q,ce=null,ka(ie)===J&&(Ce=new Ce(q,U+"enter",_e,a,ie),Ce.target=Q,Ce.relatedTarget=it,ce=Ce),it=ce,ae&&_e)t:{for(Ce=cb,q=ae,U=_e,Q=0,ce=q;ce;ce=Ce(ce))Q++;ce=0;for(var je=U;je;je=Ce(je))ce++;for(;0<Q-ce;)q=Ce(q),Q--;for(;0<ce-Q;)U=Ce(U),ce--;for(;Q--;){if(q===U||U!==null&&q===U.alternate){Ce=q;break t}q=Ce(q),U=Ce(U)}Ce=null}else Ce=null;ae!==null&&Wm(ue,ee,ae,Ce,!1),_e!==null&&it!==null&&Wm(ue,it,_e,Ce,!0)}}e:{if(ee=J?Tr(J):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var Je=mh;else if(hh(ee))if(gh)Je=_y;else{Je=yy;var we=vy}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Ro(J.elementType)&&(Je=mh):Je=by;if(Je&&(Je=Je(e,J))){fh(ue,Je,a,ie);break e}we&&we(e,ee,J),e==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Ao(ee,"number",ee.value)}switch(we=J?Tr(J):window,e){case"focusin":(hh(we)||we.contentEditable==="true")&&(Ma=we,Vo=J,zr=null);break;case"focusout":zr=Vo=Ma=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,xh(ue,a,ie);break;case"selectionchange":if(Sy)break;case"keydown":case"keyup":xh(ue,a,ie)}var Ge;if(Ho)e:{switch(e){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Da?uh(e,a)&&(Ye="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ye="onCompositionStart");Ye&&(lh&&a.locale!=="ko"&&(Da||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Da&&(Ge=nh()):(xs=ie,zo="value"in xs?xs.value:xs.textContent,Da=!0)),we=ql(J,Ye),0<we.length&&(Ye=new rh(Ye,e,null,a,ie),ue.push({event:Ye,listeners:we}),Ge?Ye.data=Ge:(Ge=dh(a),Ge!==null&&(Ye.data=Ge)))),(Ge=hy?fy(e,a):my(e,a))&&(Ye=ql(J,"onBeforeInput"),0<Ye.length&&(we=new rh("onBeforeInput","beforeinput",null,a,ie),ue.push({event:we,listeners:Ye}),we.data=Ge)),rb(ue,e,J,a,ie)}Jm(ue,t)})}function li(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ql(e,t){for(var a=t+"Capture",i=[];e!==null;){var u=e,h=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||h===null||(u=Cr(e,a),u!=null&&i.unshift(li(e,u,h)),u=Cr(e,t),u!=null&&i.push(li(e,u,h))),e.tag===3)return i;e=e.return}return[]}function cb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wm(e,t,a,i,u){for(var h=t._reactName,v=[];a!==null&&a!==i;){var _=a,O=_.alternate,J=_.stateNode;if(_=_.tag,O!==null&&O===i)break;_!==5&&_!==26&&_!==27||J===null||(O=J,u?(J=Cr(a,h),J!=null&&v.unshift(li(a,J,O))):u||(J=Cr(a,h),J!=null&&v.push(li(a,J,O)))),a=a.return}v.length!==0&&e.push({event:t,listeners:v})}var ub=/\r\n?/g,db=/\u0000|\uFFFD/g;function Fm(e){return(typeof e=="string"?e:""+e).replace(ub,`
`).replace(db,"")}function eg(e,t){return t=Fm(t),Fm(e)===t}function rt(e,t,a,i,u,h){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Aa(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Aa(e,""+i);break;case"className":Gi(e,"class",i);break;case"tabIndex":Gi(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Gi(e,a,i);break;case"style":Fd(e,i,h);break;case"data":if(t!=="object"){Gi(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Vi(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(t!=="input"&&rt(e,t,"name",u.name,u,null),rt(e,t,"formEncType",u.formEncType,u,null),rt(e,t,"formMethod",u.formMethod,u,null),rt(e,t,"formTarget",u.formTarget,u,null)):(rt(e,t,"encType",u.encType,u,null),rt(e,t,"method",u.method,u,null),rt(e,t,"target",u.target,u,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Vi(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=ns);break;case"onScroll":i!=null&&Ve("scroll",e);break;case"onScrollEnd":i!=null&&Ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(a=i.__html,a!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=Vi(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":Ve("beforetoggle",e),Ve("toggle",e),Ii(e,"popover",i);break;case"xlinkActuate":ts(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ts(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ts(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ts(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ts(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ts(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ts(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ts(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ts(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Ii(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qv.get(a)||a,Ii(e,a,i))}}function vu(e,t,a,i,u,h){switch(a){case"style":Fd(e,i,h);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(a=i.__html,a!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof i=="string"?Aa(e,i):(typeof i=="number"||typeof i=="bigint")&&Aa(e,""+i);break;case"onScroll":i!=null&&Ve("scroll",e);break;case"onScrollEnd":i!=null&&Ve("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),h=e[Wt]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(t,h,u),typeof i=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,u);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):Ii(e,a,i)}}}function Gt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",e),Ve("load",e);var i=!1,u=!1,h;for(h in a)if(a.hasOwnProperty(h)){var v=a[h];if(v!=null)switch(h){case"src":i=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:rt(e,t,h,v,a,null)}}u&&rt(e,t,"srcSet",a.srcSet,a,null),i&&rt(e,t,"src",a.src,a,null);return;case"input":Ve("invalid",e);var _=h=v=u=null,O=null,J=null;for(i in a)if(a.hasOwnProperty(i)){var ie=a[i];if(ie!=null)switch(i){case"name":u=ie;break;case"type":v=ie;break;case"checked":O=ie;break;case"defaultChecked":J=ie;break;case"value":h=ie;break;case"defaultValue":_=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(l(137,t));break;default:rt(e,t,i,ie,a,null)}}Xd(e,h,_,O,J,v,u,!1);return;case"select":Ve("invalid",e),i=v=h=null;for(u in a)if(a.hasOwnProperty(u)&&(_=a[u],_!=null))switch(u){case"value":h=_;break;case"defaultValue":v=_;break;case"multiple":i=_;default:rt(e,t,u,_,a,null)}t=h,a=v,e.multiple=!!i,t!=null?Na(e,!!i,t,!1):a!=null&&Na(e,!!i,a,!0);return;case"textarea":Ve("invalid",e),h=u=i=null;for(v in a)if(a.hasOwnProperty(v)&&(_=a[v],_!=null))switch(v){case"value":i=_;break;case"defaultValue":u=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:rt(e,t,v,_,a,null)}Zd(e,i,u,h);return;case"option":for(O in a)a.hasOwnProperty(O)&&(i=a[O],i!=null)&&(O==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":rt(e,t,O,i,a,null));return;case"dialog":Ve("beforetoggle",e),Ve("toggle",e),Ve("cancel",e),Ve("close",e);break;case"iframe":case"object":Ve("load",e);break;case"video":case"audio":for(i=0;i<ii.length;i++)Ve(ii[i],e);break;case"image":Ve("error",e),Ve("load",e);break;case"details":Ve("toggle",e);break;case"embed":case"source":case"link":Ve("error",e),Ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(i=a[J],i!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:rt(e,t,J,i,a,null)}return;default:if(Ro(t)){for(ie in a)a.hasOwnProperty(ie)&&(i=a[ie],i!==void 0&&vu(e,t,ie,i,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(i=a[_],i!=null&&rt(e,t,_,i,a,null))}function hb(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,h=null,v=null,_=null,O=null,J=null,ie=null;for(ae in a){var ue=a[ae];if(a.hasOwnProperty(ae)&&ue!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":O=ue;default:i.hasOwnProperty(ae)||rt(e,t,ae,null,i,ue)}}for(var ee in i){var ae=i[ee];if(ue=a[ee],i.hasOwnProperty(ee)&&(ae!=null||ue!=null))switch(ee){case"type":h=ae;break;case"name":u=ae;break;case"checked":J=ae;break;case"defaultChecked":ie=ae;break;case"value":v=ae;break;case"defaultValue":_=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(l(137,t));break;default:ae!==ue&&rt(e,t,ee,ae,i,ue)}}No(e,v,_,O,J,ie,h,u);return;case"select":ae=v=_=ee=null;for(h in a)if(O=a[h],a.hasOwnProperty(h)&&O!=null)switch(h){case"value":break;case"multiple":ae=O;default:i.hasOwnProperty(h)||rt(e,t,h,null,i,O)}for(u in i)if(h=i[u],O=a[u],i.hasOwnProperty(u)&&(h!=null||O!=null))switch(u){case"value":ee=h;break;case"defaultValue":_=h;break;case"multiple":v=h;default:h!==O&&rt(e,t,u,h,i,O)}t=_,a=v,i=ae,ee!=null?Na(e,!!a,ee,!1):!!i!=!!a&&(t!=null?Na(e,!!a,t,!0):Na(e,!!a,a?[]:"",!1));return;case"textarea":ae=ee=null;for(_ in a)if(u=a[_],a.hasOwnProperty(_)&&u!=null&&!i.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:rt(e,t,_,null,i,u)}for(v in i)if(u=i[v],h=a[v],i.hasOwnProperty(v)&&(u!=null||h!=null))switch(v){case"value":ee=u;break;case"defaultValue":ae=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==h&&rt(e,t,v,u,i,h)}Jd(e,ee,ae);return;case"option":for(var _e in a)ee=a[_e],a.hasOwnProperty(_e)&&ee!=null&&!i.hasOwnProperty(_e)&&(_e==="selected"?e.selected=!1:rt(e,t,_e,null,i,ee));for(O in i)ee=i[O],ae=a[O],i.hasOwnProperty(O)&&ee!==ae&&(ee!=null||ae!=null)&&(O==="selected"?e.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":rt(e,t,O,ee,i,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)ee=a[Ce],a.hasOwnProperty(Ce)&&ee!=null&&!i.hasOwnProperty(Ce)&&rt(e,t,Ce,null,i,ee);for(J in i)if(ee=i[J],ae=a[J],i.hasOwnProperty(J)&&ee!==ae&&(ee!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(l(137,t));break;default:rt(e,t,J,ee,i,ae)}return;default:if(Ro(t)){for(var it in a)ee=a[it],a.hasOwnProperty(it)&&ee!==void 0&&!i.hasOwnProperty(it)&&vu(e,t,it,void 0,i,ee);for(ie in i)ee=i[ie],ae=a[ie],!i.hasOwnProperty(ie)||ee===ae||ee===void 0&&ae===void 0||vu(e,t,ie,ee,i,ae);return}}for(var q in a)ee=a[q],a.hasOwnProperty(q)&&ee!=null&&!i.hasOwnProperty(q)&&rt(e,t,q,null,i,ee);for(ue in i)ee=i[ue],ae=a[ue],!i.hasOwnProperty(ue)||ee===ae||ee==null&&ae==null||rt(e,t,ue,ee,i,ae)}function tg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var u=a[i],h=u.transferSize,v=u.initiatorType,_=u.duration;if(h&&_&&tg(v)){for(v=0,_=u.responseEnd,i+=1;i<a.length;i++){var O=a[i],J=O.startTime;if(J>_)break;var ie=O.transferSize,ue=O.initiatorType;ie&&tg(ue)&&(O=O.responseEnd,v+=ie*(O<_?1:(_-J)/(O-J)))}if(--i,t+=8*(h+v)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yu=null,bu=null;function $l(e){return e.nodeType===9?e:e.ownerDocument}function ng(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function _u(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wu=null;function mb(){var e=window.event;return e&&e.type==="popstate"?e===wu?!1:(wu=e,!0):(wu=null,!1)}var ag=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,pb=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(e){return rg.resolve(null).then(e).catch(vb)}:ag;function vb(e){setTimeout(function(){throw e})}function $s(e){return e==="head"}function ig(e,t){var a=t,i=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(u),lr(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")oi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,oi(a);for(var h=a.firstChild;h;){var v=h.nextSibling,_=h.nodeName;h[Er]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=v}}else a==="body"&&oi(e.ownerDocument.body);a=u}while(a);lr(t)}function lg(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function Su(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Su(a),To(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function yb(e,t,a,i){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Er])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function bb(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Dn(e.nextSibling),e===null))return null;return e}function og(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function xu(e){return e.data==="$?"||e.data==="$~"}function ju(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _b(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ku=null;function cg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Dn(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function ug(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function dg(e,t,a){switch(t=$l(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function oi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);To(e)}var Mn=new Map,hg=new Set;function Hl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ys=$.d;$.d={f:wb,r:Sb,D:xb,C:jb,L:kb,m:Eb,X:Cb,S:Tb,M:Nb};function wb(){var e=ys.f(),t=Ol();return e||t}function Sb(e){var t=Ea(e);t!==null&&t.tag===5&&t.type==="form"?Nf(t):ys.r(e)}var ar=typeof document>"u"?null:document;function fg(e,t,a){var i=ar;if(i&&typeof t=="string"&&t){var u=En(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),hg.has(u)||(hg.add(u),e={rel:e,crossOrigin:a,href:t},i.querySelector(u)===null&&(t=i.createElement("link"),Gt(t,"link",e),zt(t),i.head.appendChild(t)))}}function xb(e){ys.D(e),fg("dns-prefetch",e,null)}function jb(e,t){ys.C(e,t),fg("preconnect",e,t)}function kb(e,t,a){ys.L(e,t,a);var i=ar;if(i&&e&&t){var u='link[rel="preload"][as="'+En(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+En(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+En(a.imageSizes)+'"]')):u+='[href="'+En(e)+'"]';var h=u;switch(t){case"style":h=rr(e);break;case"script":h=ir(e)}Mn.has(h)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Mn.set(h,e),i.querySelector(u)!==null||t==="style"&&i.querySelector(ci(h))||t==="script"&&i.querySelector(ui(h))||(t=i.createElement("link"),Gt(t,"link",e),zt(t),i.head.appendChild(t)))}}function Eb(e,t){ys.m(e,t);var a=ar;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+En(i)+'"][href="'+En(e)+'"]',h=u;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ir(e)}if(!Mn.has(h)&&(e=w({rel:"modulepreload",href:e},t),Mn.set(h,e),a.querySelector(u)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ui(h)))return}i=a.createElement("link"),Gt(i,"link",e),zt(i),a.head.appendChild(i)}}}function Tb(e,t,a){ys.S(e,t,a);var i=ar;if(i&&e){var u=Ta(i).hoistableStyles,h=rr(e);t=t||"default";var v=u.get(h);if(!v){var _={loading:0,preload:null};if(v=i.querySelector(ci(h)))_.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Mn.get(h))&&Eu(e,a);var O=v=i.createElement("link");zt(O),Gt(O,"link",e),O._p=new Promise(function(J,ie){O.onload=J,O.onerror=ie}),O.addEventListener("load",function(){_.loading|=1}),O.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Il(v,t,i)}v={type:"stylesheet",instance:v,count:1,state:_},u.set(h,v)}}}function Cb(e,t){ys.X(e,t);var a=ar;if(a&&e){var i=Ta(a).hoistableScripts,u=ir(e),h=i.get(u);h||(h=a.querySelector(ui(u)),h||(e=w({src:e,async:!0},t),(t=Mn.get(u))&&Tu(e,t),h=a.createElement("script"),zt(h),Gt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(u,h))}}function Nb(e,t){ys.M(e,t);var a=ar;if(a&&e){var i=Ta(a).hoistableScripts,u=ir(e),h=i.get(u);h||(h=a.querySelector(ui(u)),h||(e=w({src:e,async:!0,type:"module"},t),(t=Mn.get(u))&&Tu(e,t),h=a.createElement("script"),zt(h),Gt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(u,h))}}function mg(e,t,a,i){var u=(u=G.current)?Hl(u):null;if(!u)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=rr(a.href),a=Ta(u).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=rr(a.href);var h=Ta(u).hoistableStyles,v=h.get(e);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=u.querySelector(ci(e)))&&!h._p&&(v.instance=h,v.state.loading=5),Mn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mn.set(e,a),h||Ab(u,e,a,v.state))),t&&i===null)throw Error(l(528,""));return v}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ir(a),a=Ta(u).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function rr(e){return'href="'+En(e)+'"'}function ci(e){return'link[rel="stylesheet"]['+e+"]"}function gg(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Ab(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Gt(t,"link",a),zt(t),e.head.appendChild(t))}function ir(e){return'[src="'+En(e)+'"]'}function ui(e){return"script[async]"+e}function pg(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+En(a.href)+'"]');if(i)return t.instance=i,zt(i),i;var u=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),zt(i),Gt(i,"style",u),Il(i,a.precedence,e),t.instance=i;case"stylesheet":u=rr(a.href);var h=e.querySelector(ci(u));if(h)return t.state.loading|=4,t.instance=h,zt(h),h;i=gg(a),(u=Mn.get(u))&&Eu(i,u),h=(e.ownerDocument||e).createElement("link"),zt(h);var v=h;return v._p=new Promise(function(_,O){v.onload=_,v.onerror=O}),Gt(h,"link",i),t.state.loading|=4,Il(h,a.precedence,e),t.instance=h;case"script":return h=ir(a.src),(u=e.querySelector(ui(h)))?(t.instance=u,zt(u),u):(i=a,(u=Mn.get(h))&&(i=w({},a),Tu(i,u)),e=e.ownerDocument||e,u=e.createElement("script"),zt(u),Gt(u,"link",i),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Il(i,a.precedence,e));return t.instance}function Il(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=i.length?i[i.length-1]:null,h=u,v=0;v<i.length;v++){var _=i[v];if(_.dataset.precedence===t)h=_;else if(h!==u)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Eu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gl=null;function vg(e,t,a){if(Gl===null){var i=new Map,u=Gl=new Map;u.set(a,i)}else u=Gl,i=u.get(a),i||(i=new Map,u.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var h=a[u];if(!(h[Er]||h[qt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(t)||"";v=e+v;var _=i.get(v);_?_.push(h):i.set(v,[h])}}return i}function yg(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Rb(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function bg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ob(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=rr(i.href),h=t.querySelector(ci(u));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Kl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=h,zt(h);return}h=t.ownerDocument||t,i=gg(i),(u=Mn.get(u))&&Eu(i,u),h=h.createElement("link"),zt(h);var v=h;v._p=new Promise(function(_,O){v.onload=_,v.onerror=O}),Gt(h,"link",i),a.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Kl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Cu=0;function Db(e,t){return e.stylesheets&&e.count===0&&Pl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&Pl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Cu===0&&(Cu=62500*fb());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Pl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Cu?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(u)}}:null}function Kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Vl=null;function Pl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Vl=new Map,t.forEach(Mb,e),Vl=null,Kl.call(e))}function Mb(e,t){if(!(t.state.loading&4)){var a=Vl.get(e);if(a)var i=a.get(null);else{a=new Map,Vl.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<u.length;h++){var v=u[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),i=v)}i&&a.set(null,i)}u=t.instance,v=u.getAttribute("data-precedence"),h=a.get(v)||i,h===i&&a.set(null,u),a.set(v,u),this.count++,i=Kl.bind(this),u.addEventListener("load",i),u.addEventListener("error",i),h?h.parentNode.insertBefore(u,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var di={$$typeof:C,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Ub(e,t,a,i,u,h,v,_,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.hiddenUpdates=Zt(null),this.identifierPrefix=i,this.onUncaughtError=u,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function _g(e,t,a,i,u,h,v,_,O,J,ie,ue){return e=new Ub(e,t,a,v,O,J,ie,ue,_),t=1,h===!0&&(t|=24),h=un(3,null,null,t),e.current=h,h.stateNode=e,t=lc(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:i,isDehydrated:a,cache:t},dc(h),e}function wg(e){return e?(e=La,e):La}function Sg(e,t,a,i,u,h){u=wg(u),i.context===null?i.context=u:i.pendingContext=u,i=Ns(t),i.payload={element:a},h=h===void 0?null:h,h!==null&&(i.callback=h),a=As(e,i,t),a!==null&&(an(a,e,t),Gr(a,e,t))}function xg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Nu(e,t){xg(e,t),(e=e.alternate)&&xg(e,t)}function jg(e){if(e.tag===13||e.tag===31){var t=na(e,67108864);t!==null&&an(t,e,67108864),Nu(e,67108864)}}function kg(e){if(e.tag===13||e.tag===31){var t=gn();t=Fn(t);var a=na(e,t);a!==null&&an(a,e,t),Nu(e,t)}}var Yl=!0;function zb(e,t,a,i){var u=M.T;M.T=null;var h=$.p;try{$.p=2,Au(e,t,a,i)}finally{$.p=h,M.T=u}}function Lb(e,t,a,i){var u=M.T;M.T=null;var h=$.p;try{$.p=8,Au(e,t,a,i)}finally{$.p=h,M.T=u}}function Au(e,t,a,i){if(Yl){var u=Ru(i);if(u===null)pu(e,t,i,Ql,a),Tg(e,i);else if(qb(u,e,t,a,i))i.stopPropagation();else if(Tg(e,i),t&4&&-1<Bb.indexOf(e)){for(;u!==null;){var h=Ea(u);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=gt(h.pendingLanes);if(v!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var O=1<<31-dt(v);_.entanglements[1]|=O,v&=~O}Jn(h),(We&6)===0&&(Al=oe()+500,ri(0))}}break;case 31:case 13:_=na(h,2),_!==null&&an(_,h,2),Ol(),Nu(h,2)}if(h=Ru(i),h===null&&pu(e,t,i,Ql,a),h===u)break;u=h}u!==null&&i.stopPropagation()}else pu(e,t,i,null,a)}}function Ru(e){return e=Do(e),Ou(e)}var Ql=null;function Ou(e){if(Ql=null,e=ka(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ql=e,null}function Eg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ye()){case Be:return 2;case Me:return 8;case ne:case ze:return 32;case ke:return 268435456;default:return 32}default:return 32}}var Du=!1,Hs=null,Is=null,Gs=null,hi=new Map,fi=new Map,Ks=[],Bb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tg(e,t){switch(e){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":hi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(t.pointerId)}}function mi(e,t,a,i,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:h,targetContainers:[u]},t!==null&&(t=Ea(t),t!==null&&jg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function qb(e,t,a,i,u){switch(t){case"focusin":return Hs=mi(Hs,e,t,a,i,u),!0;case"dragenter":return Is=mi(Is,e,t,a,i,u),!0;case"mouseover":return Gs=mi(Gs,e,t,a,i,u),!0;case"pointerover":var h=u.pointerId;return hi.set(h,mi(hi.get(h)||null,e,t,a,i,u)),!0;case"gotpointercapture":return h=u.pointerId,fi.set(h,mi(fi.get(h)||null,e,t,a,i,u)),!0}return!1}function Cg(e){var t=ka(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Ss(e.priority,function(){kg(a)});return}}else if(t===31){if(t=m(a),t!==null){e.blockedOn=t,Ss(e.priority,function(){kg(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Ru(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);Oo=i,a.target.dispatchEvent(i),Oo=null}else return t=Ea(a),t!==null&&jg(t),e.blockedOn=a,!1;t.shift()}return!0}function Ng(e,t,a){Xl(e)&&a.delete(t)}function $b(){Du=!1,Hs!==null&&Xl(Hs)&&(Hs=null),Is!==null&&Xl(Is)&&(Is=null),Gs!==null&&Xl(Gs)&&(Gs=null),hi.forEach(Ng),fi.forEach(Ng)}function Jl(e,t){e.blockedOn===t&&(e.blockedOn=null,Du||(Du=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,$b)))}var Zl=null;function Ag(e){Zl!==e&&(Zl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Zl===e&&(Zl=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],u=e[t+2];if(typeof i!="function"){if(Ou(i||a)===null)continue;break}var h=Ea(a);h!==null&&(e.splice(t,3),t-=3,Rc(h,{pending:!0,data:u,method:a.method,action:i},i,u))}}))}function lr(e){function t(O){return Jl(O,e)}Hs!==null&&Jl(Hs,e),Is!==null&&Jl(Is,e),Gs!==null&&Jl(Gs,e),hi.forEach(t),fi.forEach(t);for(var a=0;a<Ks.length;a++){var i=Ks[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ks.length&&(a=Ks[0],a.blockedOn===null);)Cg(a),a.blockedOn===null&&Ks.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var u=a[i],h=a[i+1],v=u[Wt]||null;if(typeof h=="function")v||Ag(a);else if(v){var _=null;if(h&&h.hasAttribute("formAction")){if(u=h,v=h[Wt]||null)_=v.formAction;else if(Ou(u)!==null)continue}else _=v.action;typeof _=="function"?a[i+1]=_:(a.splice(i,3),i-=3),Ag(a)}}}function Rg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return u=v})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function Mu(e){this._internalRoot=e}Wl.prototype.render=Mu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,i=gn();Sg(a,i,e,t,null,null)},Wl.prototype.unmount=Mu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sg(e.current,2,null,e,null,null),Ol(),t[ja]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bn();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ks.length&&t!==0&&t<Ks[a].priority;a++);Ks.splice(a,0,e),a===0&&Cg(e)}};var Og=n.version;if(Og!=="19.2.3")throw Error(l(527,Og,"19.2.3"));$.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Hb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{vt=Fl.inject(Hb),yt=Fl}catch{}}return pi.createRoot=function(e,t){if(!c(e))throw Error(l(299));var a=!1,i="",u=qf,h=$f,v=Hf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=_g(e,1,!1,null,null,a,i,null,u,h,v,Rg),e[ja]=t.current,gu(e),new Mu(t)},pi.hydrateRoot=function(e,t,a){if(!c(e))throw Error(l(299));var i=!1,u="",h=qf,v=$f,_=Hf,O=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),t=_g(e,1,!0,t,a??null,i,u,O,h,v,_,Rg),t.context=wg(null),a=t.current,i=gn(),i=Fn(i),u=Ns(i),u.callback=null,As(a,u,i),a=i,t.current.lanes=a,Sn(t,a),Jn(t),e[ja]=t.current,gu(e),new Wl(t)},pi.version="19.2.3",pi}var Ig;function Zb(){if(Ig)return Lu.exports;Ig=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Lu.exports=Jb(),Lu.exports}var Wb=Zb();const Nt=30;function Sr(s){return s.toLocaleTimeString("da-DK",{hour:"2-digit",minute:"2-digit",hour12:!1})}function Hu(s){const n=Math.floor(s/60),r=s%60;return`${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function Fb(s){if(s.length===0)return new Date;let n=null;for(const r of s){if(!r.startTime||r.isPaused)continue;const l=new Date(r.startTime.getTime()+r.durationMinutes*60*1e3);(!n||l>n)&&(n=l)}return n||new Date}function Un(s,n,r=Nt){if(s.length===0&&n.length===0)return[];const l=[];let c=Fb(s);return n.forEach((d,f)=>{l.push(new Date(c)),c=new Date(c.getTime()+r*60*1e3)}),l}function Zn(s){if(!s.startTime)return s.durationMinutes*60;if(s.isPaused&&s.remainingSecondsWhenPaused!==void 0)return s.remainingSecondsWhenPaused;const n=s.startTime.getTime()+s.durationMinutes*60*1e3,r=Date.now();return Math.max(0,Math.floor((n-r)/1e3))}function bo(s,n){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&n.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)n.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(r[l[c]]=s[l[c]]);return r}function e0(s,n,r,l){function c(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function m(b){try{p(l.next(b))}catch(w){f(w)}}function g(b){try{p(l.throw(b))}catch(w){f(w)}}function p(b){b.done?d(b.value):c(b.value).then(m,g)}p((l=l.apply(s,n||[])).next())})}const t0=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class kd extends Error{constructor(n,r="FunctionsError",l){super(n),this.name=r,this.context=l}}class n0 extends kd{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Gg extends kd{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Kg extends kd{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var id;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(id||(id={}));class s0{constructor(n,{headers:r={},customFetch:l,region:c=id.Any}={}){this.url=n,this.headers=r,this.region=c,this.fetch=t0(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return e0(this,arguments,void 0,function*(r,l={}){var c;let d,f;try{const{headers:m,method:g,body:p,signal:b,timeout:w}=l;let S={},{region:x}=l;x||(x=this.region);const j=new URL(`${this.url}/${r}`);x&&x!=="any"&&(S["x-region"]=x,j.searchParams.set("forceFunctionRegion",x));let E;p&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",E=p):typeof p=="string"?(S["Content-Type"]="text/plain",E=p):typeof FormData<"u"&&p instanceof FormData?E=p:(S["Content-Type"]="application/json",E=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?E=JSON.stringify(p):E=p;let A=b;w&&(f=new AbortController,d=setTimeout(()=>f.abort(),w),b?(A=f.signal,b.addEventListener("abort",()=>f.abort())):A=f.signal);const z=yield this.fetch(j.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),m),body:E,signal:A}).catch(Z=>{throw new n0(Z)}),I=z.headers.get("x-relay-error");if(I&&I==="true")throw new Gg(z);if(!z.ok)throw new Kg(z);let C=((c=z.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),F;return C==="application/json"?F=yield z.json():C==="application/octet-stream"||C==="application/pdf"?F=yield z.blob():C==="text/event-stream"?F=z:C==="multipart/form-data"?F=yield z.formData():F=yield z.text(),{data:F,error:null,response:z}}catch(m){return{data:null,error:m,response:m instanceof Kg||m instanceof Gg?m.context:void 0}}finally{d&&clearTimeout(d)}})}}var a0=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},r0=class{constructor(s){var n,r;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,m=null,g=null,p=d.status,b=d.statusText;if(d.ok){var w,S;if(r.method!=="HEAD"){var x;const z=await d.text();z===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?m=z:m=JSON.parse(z))}const E=(w=r.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),A=(S=d.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");E&&A&&A.length>1&&(g=parseInt(A[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,p=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var j;const E=await d.text();try{f=JSON.parse(E),Array.isArray(f)&&d.status===404&&(m=[],f=null,p=200,b="OK")}catch{d.status===404&&E===""?(p=204,b="No Content"):f={message:E}}if(f&&r.isMaybeSingle&&(!(f==null||(j=f.details)===null||j===void 0)&&j.includes("0 rows"))&&(f=null,p=200,b="OK"),f&&r.shouldThrowOnError)throw new a0(f)}return{error:f,data:m,count:g,status:p,statusText:b}});return this.shouldThrowOnError||(c=c.catch(d=>{var f;let m="";const g=d?.cause;if(g){var p,b,w,S;const j=(p=g?.message)!==null&&p!==void 0?p:"",E=(b=g?.code)!==null&&b!==void 0?b:"";m=`${(w=d?.name)!==null&&w!==void 0?w:"FetchError"}: ${d?.message}`,m+=`

Caused by: ${(S=g?.name)!==null&&S!==void 0?S:"Error"}: ${j}`,E&&(m+=` (${E})`),g?.stack&&(m+=`
${g.stack}`)}else{var x;m=(x=d?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(s,n)}returns(){return this}overrideTypes(){return this}},i0=class extends r0{select(s){let n=!1;const r=(s??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:l=r}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(d,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var f;const m=[s?"analyze":null,n?"verbose":null,r?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Vg=new RegExp("[,()]");var mr=class extends i0{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&Vg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&Vg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${c}fts${d}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},l0=class{constructor(s,{headers:n={},schema:r,fetch:l}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:r=!1,count:l}=n??{},c=r?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join(""),{url:m,headers:g}=this.cloneRequestState();return m.searchParams.set("select",f),l&&g.append("Prefer",`count=${l}`),new mr({method:c,url:m,headers:g,schema:this.schema,fetch:this.fetch})}insert(s,{count:n,defaultToNull:r=!0}={}){var l;const c="POST",{url:d,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(m.length>0){const g=[...new Set(m)].map(p=>`"${p}"`);d.searchParams.set("columns",g.join(","))}}return new mr({method:c,url:d,headers:f,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:l,defaultToNull:c=!0}={}){var d;const f="POST",{url:m,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&m.searchParams.set("on_conflict",n),l&&g.append("Prefer",`count=${l}`),c||g.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(p.length>0){const b=[...new Set(p)].map(w=>`"${w}"`);m.searchParams.set("columns",b.join(","))}}return new mr({method:f,url:m,headers:g,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(s,{count:n}={}){var r;const l="PATCH",{url:c,headers:d}=this.cloneRequestState();return n&&d.append("Prefer",`count=${n}`),new mr({method:l,url:c,headers:d,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:s}={}){var n;const r="DELETE",{url:l,headers:c}=this.cloneRequestState();return s&&c.append("Prefer",`count=${s}`),new mr({method:r,url:l,headers:c,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},o0=class Up{constructor(n,{headers:r={},schema:l,fetch:c}={}){this.url=n,this.headers=new Headers(r),this.schemaName=l,this.fetch=c}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new l0(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new Up(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:l=!1,get:c=!1,count:d}={}){var f;let m;const g=new URL(`${this.url}/rpc/${n}`);let p;const b=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(b)),w=l&&Object.values(r).some(b);w?(m="POST",p=r):l||c?(m=l?"HEAD":"GET",Object.entries(r).filter(([x,j])=>j!==void 0).map(([x,j])=>[x,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([x,j])=>{g.searchParams.append(x,j)})):(m="POST",p=r);const S=new Headers(this.headers);return w?S.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&S.set("Prefer",`count=${d}`),new mr({method:m,url:g,headers:S,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class c0{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const c=l.node,d=parseInt(c.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const l=this.getWebSocketConstructor();return new l(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const u0="2.90.1",d0=`realtime-js/${u0}`,zp="1.0.0",h0="2.0.0",Pg=zp,ld=1e4,f0=1e3,m0=100;var Ys;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ys||(Ys={}));var Ot;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ot||(Ot={}));var Kn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Kn||(Kn={}));var od;(function(s){s.websocket="websocket"})(od||(od={}));var ba;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ba||(ba={}));class g0{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,l;const c=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(n){var r,l;const c=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,l){var c,d;const f=n.topic,m=(c=n.ref)!==null&&c!==void 0?c:"",g=(d=n.join_ref)!==null&&d!==void 0?d:"",p=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+m.length+f.length+p.length+w.length,x=new ArrayBuffer(this.HEADER_LENGTH+S);let j=new DataView(x),E=0;j.setUint8(E++,this.KINDS.userBroadcastPush),j.setUint8(E++,g.length),j.setUint8(E++,m.length),j.setUint8(E++,f.length),j.setUint8(E++,p.length),j.setUint8(E++,w.length),j.setUint8(E++,r),Array.from(g,z=>j.setUint8(E++,z.charCodeAt(0))),Array.from(m,z=>j.setUint8(E++,z.charCodeAt(0))),Array.from(f,z=>j.setUint8(E++,z.charCodeAt(0))),Array.from(p,z=>j.setUint8(E++,z.charCodeAt(0))),Array.from(w,z=>j.setUint8(E++,z.charCodeAt(0)));var A=new Uint8Array(x.byteLength+l.byteLength);return A.set(new Uint8Array(x),0),A.set(new Uint8Array(l),x.byteLength),A.buffer}decode(n,r){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return r(l)}if(typeof n=="string"){const l=JSON.parse(n),[c,d,f,m,g]=l;return r({join_ref:c,ref:d,topic:f,event:m,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),l=r.getUint8(0),c=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,c)}_decodeUserBroadcast(n,r,l){const c=r.getUint8(1),d=r.getUint8(2),f=r.getUint8(3),m=r.getUint8(4);let g=this.HEADER_LENGTH+4;const p=l.decode(n.slice(g,g+c));g=g+c;const b=l.decode(n.slice(g,g+d));g=g+d;const w=l.decode(n.slice(g,g+f));g=g+f;const S=n.slice(g,n.byteLength),x=m===this.JSON_ENCODING?JSON.parse(l.decode(S)):S,j={type:this.BROADCAST_EVENT,event:b,payload:x};return f>0&&(j.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([l])=>r.includes(l)))}}class Lp{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ot||(ot={}));const Yg=(s,n,r={})=>{var l;const c=(l=r.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=p0(f,s,n,c),d),{}):{}},p0=(s,n,r,l)=>{const c=n.find(m=>m.name===s),d=c?.type,f=r[s];return d&&!l.includes(d)?Bp(d,f):cd(f)},Bp=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return _0(n,r)}switch(s){case ot.bool:return v0(n);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return y0(n);case ot.json:case ot.jsonb:return b0(n);case ot.timestamp:return w0(n);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return cd(n);default:return cd(n)}},cd=s=>s,v0=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},y0=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},b0=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},_0=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,l=s[r];if(s[0]==="{"&&l==="}"){let d;const f=s.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>Bp(n,m))}return s},w0=s=>typeof s=="string"?s.replace(" ","T"):s,qp=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Iu{constructor(n,r,l={},c=ld){this.channel=n,this.event=r,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var l;return this._hasReceived(n)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Qg;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Qg||(Qg={}));class wi{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wi.syncState(this.state,c,d,f),this.pendingDiffs.forEach(g=>{this.state=wi.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},c=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=wi.syncDiff(this.state,c,d,f),m())}),this.onJoin((c,d,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:f})}),this.onLeave((c,d,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,l,c){const d=this.cloneDeep(n),f=this.transformState(r),m={},g={};return this.map(d,(p,b)=>{f[p]||(g[p]=b)}),this.map(f,(p,b)=>{const w=d[p];if(w){const S=b.map(A=>A.presence_ref),x=w.map(A=>A.presence_ref),j=b.filter(A=>x.indexOf(A.presence_ref)<0),E=w.filter(A=>S.indexOf(A.presence_ref)<0);j.length>0&&(m[p]=j),E.length>0&&(g[p]=E)}else m[p]=b}),this.syncDiff(d,{joins:m,leaves:g},l,c)}static syncDiff(n,r,l,c){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(d,(m,g)=>{var p;const b=(p=n[m])!==null&&p!==void 0?p:[];if(n[m]=this.cloneDeep(g),b.length>0){const w=n[m].map(x=>x.presence_ref),S=b.filter(x=>w.indexOf(x.presence_ref)<0);n[m].unshift(...S)}l(m,b,g)}),this.map(f,(m,g)=>{let p=n[m];if(!p)return;const b=g.map(w=>w.presence_ref);p=p.filter(w=>b.indexOf(w.presence_ref)<0),n[m]=p,c(m,p,g),p.length===0&&delete n[m]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(l=>r(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,l)=>{const c=n[l];return"metas"in c?r[l]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[l]=c,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xg;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Xg||(Xg={}));var Si;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Si||(Si={}));var bs;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(bs||(bs={}));class yr{constructor(n,r={config:{}},l){var c,d;if(this.topic=n,this.params=r,this.socket=l,this.bindings={},this.state=Ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Iu(this,Kn.join,this.params,this.timeout),this.rejoinTimer=new Lp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ot.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kn.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new wi(this),this.broadcastEndpointURL=qp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var l,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Ot.closed){const{config:{broadcast:f,presence:m,private:g}}=this.params,p=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(x=>x.filter))!==null&&c!==void 0?c:[],b=!!this.bindings[Si.PRESENCE]&&this.bindings[Si.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},S={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>n?.(bs.CHANNEL_ERROR,x)),this._onClose(()=>n?.(bs.CLOSED)),this.updateJoinPayload(Object.assign({config:S},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){n?.(bs.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,A=(j=E?.length)!==null&&j!==void 0?j:0,z=[];for(let I=0;I<A;I++){const C=E[I],{filter:{event:F,schema:Z,table:P,filter:T}}=C,L=x&&x[I];if(L&&L.event===F&&yr.isFilterValueEqual(L.schema,Z)&&yr.isFilterValueEqual(L.table,P)&&yr.isFilterValueEqual(L.filter,T))z.push(Object.assign(Object.assign({},C),{id:L.id}));else{this.unsubscribe(),this.state=Ot.errored,n?.(bs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=z,n&&n(bs.SUBSCRIBED);return}}).receive("error",x=>{this.state=Ot.errored,n?.(bs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{n?.(bs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,l){return this.state===Ot.joined&&n===Si.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,l)}async httpSend(n,r,l={}){var c;if(r==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=l.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const p=await m.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var l,c;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=p.body)===null||c===void 0?void 0:c.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,g;const p=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),p.receive("ok",()=>d("ok")),p.receive("error",()=>d("error")),p.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ot.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new Iu(this,Kn.leave,{},n),l.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ot.closed,this.bindings={}}async _fetchWithTimeout(n,r,l){const c=new AbortController,d=setTimeout(()=>c.abort(),l),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(d),f}_push(n,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Iu(this,n,r,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>m0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,l){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,l){var c,d;const f=n.toLocaleLowerCase(),{close:m,error:g,leave:p,join:b}=Kn;if(l&&[m,g,p,b].indexOf(f)>=0&&l!==this._joinRef())return;let S=this._onMessage(f,r,l);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(x=>{var j,E,A;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((A=(E=x.filter)===null||E===void 0?void 0:E.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===f}).map(x=>x.callback(S,l)):(d=this.bindings[f])===null||d===void 0||d.filter(x=>{var j,E,A,z,I,C,F,Z;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in x){const P=x.id,T=(j=x.filter)===null||j===void 0?void 0:j.event;return P&&((E=r.ids)===null||E===void 0?void 0:E.includes(P))&&(T==="*"||T?.toLocaleLowerCase()===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))&&(!(!((z=x.filter)===null||z===void 0)&&z.table)||x.filter.table===((I=r.data)===null||I===void 0?void 0:I.table))}else{const P=(F=(C=x?.filter)===null||C===void 0?void 0:C.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return P==="*"||P===((Z=r?.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===f}).map(x=>{if(typeof S=="object"&&"ids"in S){const j=S.data,{schema:E,table:A,commit_timestamp:z,type:I,errors:C}=j;S=Object.assign(Object.assign({},{schema:E,table:A,commit_timestamp:z,eventType:I,new:{},old:{},errors:C}),this._getPayloadRecords(j))}x.callback(S,l)})}_isClosed(){return this.state===Ot.closed}_isJoined(){return this.state===Ot.joined}_isJoining(){return this.state===Ot.joining}_isLeaving(){return this.state===Ot.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,l){const c=n.toLocaleLowerCase(),d={type:c,filter:r,callback:l};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(n,r){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&yr.isEqual(c.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const l in n)if(n[l]!==r[l])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Kn.close,{},n)}_onError(n){this._on(Kn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ot.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Yg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Yg(n.columns,n.old_record)),r}}const Gu=()=>{},eo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},S0=[1e3,2e3,5e3,1e4],x0=1e4,j0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class k0{constructor(n,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ld,this.transport=null,this.heartbeatIntervalMs=eo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gu,this.ref=0,this.reconnectTimer=null,this.vsn=Pg,this.logger=Gu,this.conn=null,this.sendBuffer=[],this.serializer=new g0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=c=>c?(...d)=>c(...d):(...d)=>fetch(...d),!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${od.websocket}`,this.httpEndpoint=qp(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=c0.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,l){this.logger(n,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Ys.connecting:return ba.Connecting;case Ys.open:return ba.Open;case Ys.closing:return ba.Closing;default:return ba.Closed}}isConnected(){return this.connectionState()===ba.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const l=`realtime:${n}`,c=this.getChannels().find(d=>d.topic===l);if(c)return c;{const d=new yr(`realtime:${n}`,r,this);return this.channels.push(d),d}}push(n){const{topic:r,event:l,payload:c,ref:d}=n,f=()=>{this.encode(n,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${r} ${l} (${d})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(f0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},eo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",p)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:c,payload:d,ref:f}=r,m=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${l} ${c} ${m}`.trim(),d),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(c,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Ys.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ys.open||this.conn.readyState===Ys.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Kn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const l=n.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${n}${l}${c}`}_workerObjectUrl(n){let r;if(n)r=n;else{const l=new Blob([j0],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,l=!1;if(n)r=n,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(c=>{const d={access_token:r,version:d0};r&&c.updateJoinPayload(d),c.joinedOnce&&c._isJoined()&&c._push(Kn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(r)}catch(c){this.log("error",`error in ${n} callback`,c)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Lp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},eo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,l,c,d,f,m,g,p,b,w,S,x;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=n?.timeout)!==null&&l!==void 0?l:ld,this.heartbeatIntervalMs=(c=n?.heartbeatIntervalMs)!==null&&c!==void 0?c:eo.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:Gu,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:Pg,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n?.reconnectAfterMs)!==null&&p!==void 0?p:(j=>S0[j-1]||x0),this.vsn){case zp:this.encode=(b=n?.encode)!==null&&b!==void 0?b:((j,E)=>E(JSON.stringify(j))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((j,E)=>E(JSON.parse(j)));break;case h0:this.encode=(S=n?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Ci=class extends Error{constructor(s,n){super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function E0(s,n,r){const l=new URL(n,s);if(r)for(const[c,d]of Object.entries(r))d!==void 0&&l.searchParams.set(c,d);return l.toString()}async function T0(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function C0(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:c,body:d,headers:f}){const m=E0(s.baseUrl,l,c),g=await T0(s.auth),p=await n(m,{method:r,headers:{...d?{"Content-Type":"application/json"}:{},...g,...f},body:d?JSON.stringify(d):void 0}),b=await p.text(),w=(p.headers.get("content-type")||"").includes("application/json"),S=w&&b?JSON.parse(b):b;if(!p.ok){const x=w?S:void 0,j=x?.error;throw new Ci(j?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:j?.type,icebergCode:j?.code,details:x})}return{status:p.status,headers:p.headers,data:S}}}}function to(s){return s.join("")}var N0=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:to(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${to(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${to(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${to(s.namespace)}`}),!0}catch(n){if(n instanceof Ci&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof Ci&&r.status===409)return;throw r}}};function or(s){return s.join("")}var A0=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${or(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${or(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${or(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${or(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${or(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${or(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof Ci&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof Ci&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},R0=class{constructor(s){let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=C0({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new N0(this.client,n),this.tableOps=new A0(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},_o=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function pt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var O0=class extends _o{constructor(s,n,r){super(s),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ud=class extends _o{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}};const Ed=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),D0=()=>Response,dd=s=>{if(Array.isArray(s))return s.map(r=>dd(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,l])=>{const c=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[c]=dd(l)}),n},M0=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},U0=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Ni(s){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ni(s)}function z0(s,n){if(Ni(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,n);if(Ni(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function L0(s){var n=z0(s,"string");return Ni(n)=="symbol"?n:n+""}function B0(s,n,r){return(n=L0(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Jg(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);n&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,l)}return r}function Ae(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Jg(Object(r),!0).forEach(function(l){B0(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Jg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const Ku=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},q0=async(s,n,r)=>{s instanceof await D0()&&!r?.noResolveJson?s.json().then(l=>{const c=s.status||500,d=l?.statusCode||c+"";n(new O0(Ku(l),c,d))}).catch(l=>{n(new ud(Ku(l),l))}):n(new ud(Ku(s),s))},$0=(s,n,r,l)=>{const c={method:s,headers:n?.headers||{}};return s==="GET"||!l?c:(M0(l)?(c.headers=Ae({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(l)):c.body=l,n?.duplex&&(c.duplex=n.duplex),Ae(Ae({},c),r))};async function Bi(s,n,r,l,c,d){return new Promise((f,m)=>{s(r,$0(n,l,c,d)).then(g=>{if(!g.ok)throw g;return l?.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>q0(g,m,l))})}async function Ai(s,n,r,l){return Bi(s,"GET",n,r,l)}async function Gn(s,n,r,l,c){return Bi(s,"POST",n,l,c,r)}async function hd(s,n,r,l,c){return Bi(s,"PUT",n,l,c,r)}async function H0(s,n,r,l){return Bi(s,"HEAD",n,Ae(Ae({},r),{},{noResolveJson:!0}),l)}async function Td(s,n,r,l,c){return Bi(s,"DELETE",n,l,c,r)}var I0=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}};let $p;$p=Symbol.toStringTag;var G0=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[$p]="BlobDownloadBuilder",this.promise=null}asStream(){return new I0(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}};const K0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var V0=class{constructor(s,n={},r,l){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.bucketId=r,this.fetch=Ed(l)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,n,r,l){var c=this;try{let d;const f=Ae(Ae({},Zg),l);let m=Ae(Ae({},c.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",c.encodeMetadata(g)),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),g&&!d.has("metadata")&&d.append("metadata",c.encodeMetadata(g))):(d=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,g&&(m["x-metadata"]=c.toBase64(c.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),l?.headers&&(m=Ae(Ae({},m),l.headers));const p=c._removeEmptyFolders(n),b=c._getFinalPath(p),w=await(s=="PUT"?hd:Gn)(c.fetch,`${c.url}/object/${b}`,d,Ae({headers:m},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(pt(d))return{data:null,error:d};throw d}}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,l){var c=this;const d=c._removeEmptyFolders(s),f=c._getFinalPath(d),m=new URL(c.url+`/object/upload/sign/${f}`);m.searchParams.set("token",n);try{let g;const p=Ae({upsert:Zg.upsert},l),b=Ae(Ae({},c.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",p.cacheControl)):(g=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{data:{path:d,fullPath:(await hd(c.fetch,m.toString(),g,{headers:b})).Key},error:null}}catch(g){if(c.shouldThrowOnError)throw g;if(pt(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(s,n){var r=this;try{let l=r._getFinalPath(s);const c=Ae({},r.headers);n?.upsert&&(c["x-upsert"]="true");const d=await Gn(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:c}),f=new URL(r.url+d.url),m=f.searchParams.get("token");if(!m)throw new _o("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:m},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var l=this;try{return{data:await Gn(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers}),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(pt(c))return{data:null,error:c};throw c}}async copy(s,n,r){var l=this;try{return{data:{path:(await Gn(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers})).Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(pt(c))return{data:null,error:c};throw c}}async createSignedUrl(s,n,r){var l=this;try{let c=l._getFinalPath(s),d=await Gn(l.fetch,`${l.url}/object/sign/${c}`,Ae({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:l.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return d={signedUrl:encodeURI(`${l.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(pt(c))return{data:null,error:c};throw c}}async createSignedUrls(s,n,r){var l=this;try{const c=await Gn(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:n,paths:s},{headers:l.headers}),d=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:c.map(f=>Ae(Ae({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${d}`):null})),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(pt(c))return{data:null,error:c};throw c}}download(s,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),c=l?`?${l}`:"",d=this._getFinalPath(s),f=()=>Ai(this.fetch,`${this.url}/${r}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new G0(f,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);try{return{data:dd(await Ai(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await H0(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(pt(l)&&l instanceof ud){const c=l.originalError;if([400,404].includes(c?.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,n){const r=this._getFinalPath(s),l=[],c=n?.download?`download=${n.download===!0?"":n.download}`:"";c!==""&&l.push(c);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&l.push(f);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${m}`)}}}async remove(s){var n=this;try{return{data:await Td(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async list(s,n,r){var l=this;try{const c=Ae(Ae(Ae({},K0),n),{},{prefix:s||""});return{data:await Gn(l.fetch,`${l.url}/object/list/${l.bucketId}`,c,{headers:l.headers},r),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(pt(c))return{data:null,error:c};throw c}}async listV2(s,n){var r=this;try{const l=Ae({},s);return{data:await Gn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},n),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const Hp="2.90.1",Ip={"X-Client-Info":`storage-js/${Hp}`};var P0=class{constructor(s,n={},r,l){this.shouldThrowOnError=!1;const c=new URL(s);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Ae(Ae({},Ip),n),this.fetch=Ed(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var n=this;try{const r=n.listBucketOptionsToQueryString(s);return{data:await Ai(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async getBucket(s){var n=this;try{return{data:await Ai(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async createBucket(s,n={public:!1}){var r=this;try{return{data:await Gn(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}}async updateBucket(s,n){var r=this;try{return{data:await hd(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}}async emptyBucket(s){var n=this;try{return{data:await Gn(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async deleteBucket(s){var n=this;try{return{data:await Td(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Y0=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ae(Ae({},Ip),n),this.fetch=Ed(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var n=this;try{return{data:await Gn(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async listBuckets(s){var n=this;try{const r=new URLSearchParams;s?.limit!==void 0&&r.set("limit",s.limit.toString()),s?.offset!==void 0&&r.set("offset",s.offset.toString()),s?.sortColumn&&r.set("sortColumn",s.sortColumn),s?.sortOrder&&r.set("sortOrder",s.sortOrder),s?.search&&r.set("search",s.search);const l=r.toString(),c=l?`${n.url}/bucket?${l}`:`${n.url}/bucket`;return{data:await Ai(n.fetch,c,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async deleteBucket(s){var n=this;try{return{data:await Td(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}from(s){var n=this;if(!U0(s))throw new _o("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new R0({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(c,d){const f=c[d];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(c,m),error:null}}catch(g){if(l)throw g;return{data:null,error:g}}}}})}};const Cd={"X-Client-Info":`storage-js/${Hp}`,"Content-Type":"application/json"};var Gp=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function vn(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var Vu=class extends Gp{constructor(s,n,r){super(s),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Q0=class extends Gp{constructor(s,n){super(s),this.name="StorageVectorsUnknownError",this.originalError=n}};const Nd=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),X0=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Wg=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),J0=async(s,n,r)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){const l=s.status||500,c=s;if(typeof c.json=="function")c.json().then(d=>{const f=d?.statusCode||d?.code||l+"";n(new Vu(Wg(d),l,f))}).catch(()=>{const d=l+"";n(new Vu(c.statusText||`HTTP ${l} error`,l,d))});else{const d=l+"";n(new Vu(c.statusText||`HTTP ${l} error`,l,d))}}else n(new Q0(Wg(s),s))},Z0=(s,n,r,l)=>{const c={method:s,headers:n?.headers||{}};return l?(X0(l)?(c.headers=Ae({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(l)):c.body=l,Ae(Ae({},c),r)):c};async function W0(s,n,r,l,c,d){return new Promise((f,m)=>{s(r,Z0(n,l,c,d)).then(g=>{if(!g.ok)throw g;if(l?.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>f(g)).catch(g=>J0(g,m,l))})}async function yn(s,n,r,l,c){return W0(s,"POST",n,l,c,r)}var F0=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ae(Ae({},Cd),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async getIndex(s,n){var r=this;try{return{data:await yn(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(vn(l))return{data:null,error:l};throw l}}async listIndexes(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async deleteIndex(s,n){var r=this;try{return{data:await yn(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(vn(l))return{data:null,error:l};throw l}}},e_=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ae(Ae({},Cd),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var n=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await yn(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async getVectors(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async listVectors(s){var n=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await yn(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async queryVectors(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async deleteVectors(s){var n=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await yn(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}},t_=class{constructor(s,n={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ae(Ae({},Cd),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async getBucket(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async listBuckets(s={}){var n=this;try{return{data:await yn(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}async deleteBucket(s){var n=this;try{return{data:await yn(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(vn(r))return{data:null,error:r};throw r}}},n_=class extends t_{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new s_(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},s_=class extends F0{constructor(s,n,r,l){super(s,n,l),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,Ae(Ae({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,Ae(Ae({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new a_(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},a_=class extends e_{constructor(s,n,r,l,c){super(s,n,c),this.vectorBucketName=r,this.indexName=l}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,Ae(Ae({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,Ae(Ae({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,Ae(Ae({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,Ae(Ae({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,Ae(Ae({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},r_=class extends P0{constructor(s,n={},r,l){super(s,n,r,l)}from(s){return new V0(this.url,this.headers,s,this.fetch)}get vectors(){return new n_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Y0(this.url+"/iceberg",this.headers,this.fetch)}};const Kp="2.90.1",gr=30*1e3,fd=3,Pu=fd*gr,i_="http://localhost:9999",l_="supabase.auth.token",o_={"X-Client-Info":`gotrue-js/${Kp}`},md="X-Supabase-Api-Version",Vp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,u_=600*1e3;class Ri extends Error{constructor(n,r,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function Se(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class d_ extends Ri{constructor(n,r,l){super(n,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function h_(s){return Se(s)&&s.name==="AuthApiError"}class _a extends Ri{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class _s extends Ri{constructor(n,r,l,c){super(n,l,c),this.name=r,this.status=l}}class pn extends _s{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function f_(s){return Se(s)&&s.name==="AuthSessionMissingError"}class cr extends _s{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class no extends _s{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class so extends _s{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m_(s){return Se(s)&&s.name==="AuthImplicitGrantRedirectError"}class Fg extends _s{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class g_ extends _s{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class gd extends _s{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Yu(s){return Se(s)&&s.name==="AuthRetryableFetchError"}class ep extends _s{constructor(n,r,l){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class pd extends _s{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tp=` 	
\r=`.split(""),p_=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<tp.length;n+=1)s[tp[n].charCodeAt(0)]=-2;for(let n=0;n<co.length;n+=1)s[co[n].charCodeAt(0)]=n;return s})();function np(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(co[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(co[l]),n.queuedBits-=6}}function Pp(s,n,r){const l=p_[s];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function sp(s){const n=[],r=f=>{n.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=f=>{b_(f,l,r)};for(let f=0;f<s.length;f+=1)Pp(s.charCodeAt(f),c,d);return n.join("")}function v_(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function y_(s,n){for(let r=0;r<s.length;r+=1){let l=s.charCodeAt(r);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(s.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}v_(l,n)}}function b_(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function _r(s){const n=[],r={queue:0,queuedBits:0},l=c=>{n.push(c)};for(let c=0;c<s.length;c+=1)Pp(s.charCodeAt(c),r,l);return new Uint8Array(n)}function __(s){const n=[];return y_(s,r=>n.push(r)),new Uint8Array(n)}function Sa(s){const n=[],r={queue:0,queuedBits:0},l=c=>{n.push(c)};return s.forEach(c=>np(c,r,l)),np(null,r,l),n.join("")}function w_(s){return Math.round(Date.now()/1e3)+s}function S_(){return Symbol("auth-callback")}const Vt=()=>typeof window<"u"&&typeof document<"u",ga={tested:!1,writable:!1},Yp=()=>{if(!Vt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ga.tested)return ga.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),ga.tested=!0,ga.writable=!0}catch{ga.tested=!0,ga.writable=!1}return ga.writable};function x_(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,d)=>{n[d]=c})}catch{}return r.searchParams.forEach((l,c)=>{n[c]=l}),n}const Qp=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),j_=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",pr=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},pa=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Kt=async(s,n)=>{await s.removeItem(n)};class wo{constructor(){this.promise=new wo.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}wo.promiseConstructor=Promise;function Qu(s){const n=s.split(".");if(n.length!==3)throw new pd("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!c_.test(n[l]))throw new pd("JWT not in base64url format");return{header:JSON.parse(sp(n[0])),payload:JSON.parse(sp(n[1])),signature:_r(n[2]),raw:{header:n[0],payload:n[1]}}}async function k_(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function E_(s,n){return new Promise((l,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await s(d);if(!n(d,null,f)){l(f);return}}catch(f){if(!n(d,f)){c(f);return}}})()})}function T_(s){return("0"+s.toString(16)).substr(-2)}function C_(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let c="";for(let d=0;d<56;d++)c+=r.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(n),Array.from(n,T_).join("")}async function N_(s){const r=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(l);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function A_(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await N_(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ur(s,n,r=!1){const l=C_();let c=l;r&&(c+="/PASSWORD_RECOVERY"),await pr(s,`${n}-code-verifier`,c);const d=await A_(l);return[d,l===d?"plain":"s256"]}const R_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function O_(s){const n=s.headers.get(md);if(!n||!n.match(R_))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function D_(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function M_(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const U_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dr(s){if(!U_.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xu(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function z_(s,n){return new Proxy(s,{get:(r,l,c)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,c)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,l,c)}})}function ap(s){return JSON.parse(JSON.stringify(s))}const ya=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),L_=[502,503,504];async function rp(s){var n;if(!j_(s))throw new gd(ya(s),0);if(L_.includes(s.status))throw new gd(ya(s),s.status);let r;try{r=await s.json()}catch(d){throw new _a(ya(d),d)}let l;const c=O_(s);if(c&&c.getTime()>=Vp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new ep(ya(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new pn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new ep(ya(r),s.status,r.weak_password.reasons);throw new d_(ya(r),s.status||500,l)}const B_=(s,n,r,l)=>{const c={method:s,headers:n?.headers||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),r))};async function Ne(s,n,r,l){var c;const d=Object.assign({},l?.headers);d[md]||(d[md]=Vp["2024-01-01"].name),l?.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const f=(c=l?.query)!==null&&c!==void 0?c:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await q_(s,n,r+m,{headers:d,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(g):{data:Object.assign({},g),error:null}}async function q_(s,n,r,l,c,d){const f=B_(n,l,c,d);let m;try{m=await s(r,Object.assign({},f))}catch(g){throw console.error(g),new gd(ya(g),0)}if(m.ok||await rp(m),l?.noResolveJson)return m;try{return await m.json()}catch(g){await rp(g)}}function In(s){var n;let r=null;I_(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=w_(s.expires_in)));const l=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:l},error:null}}function ip(s){const n=In(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Js(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function $_(s){return{data:s,error:null}}function H_(s){const{action_link:n,email_otp:r,hashed_token:l,redirect_to:c,verification_type:d}=s,f=bo(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:r,hashed_token:l,redirect_to:c,verification_type:d},g=Object.assign({},f);return{data:{properties:m,user:g},error:null}}function lp(s){return s}function I_(s){return s.access_token&&s.refresh_token&&s.expires_in}const Ju=["global","local","others"];class G_{constructor({url:n="",headers:r={},fetch:l}){this.url=n,this.headers=r,this.fetch=Qp(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Ju[0]){if(Ju.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ju.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Se(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,r={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Js})}catch(l){if(Se(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:r}=n,l=bo(n,["options"]),c=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(c.new_email=l?.newEmail,delete c.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:H_,redirectTo:r?.redirectTo})}catch(r){if(Se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Js})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,l,c,d,f,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(d=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:lp});if(b.error)throw b.error;const w=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(j=>{const E=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(j.split(";")[1].split("=")[1]);p[`${A}Page`]=E}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(Se(p))return{data:{users:[]},error:p};throw p}}async getUserById(n){dr(n);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Js})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){dr(n);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Js})}catch(l){if(Se(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,r=!1){dr(n);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Js})}catch(l){if(Se(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){dr(n.userId);try{const{data:r,error:l}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:l}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _deleteFactor(n){dr(n.userId),dr(n.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,l,c,d,f,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(d=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:lp});if(b.error)throw b.error;const w=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(j=>{const E=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(j.split(";")[1].split("=")[1]);p[`${A}Page`]=E}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(Se(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(n){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await Ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Se(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Se(r))return{data:null,error:r};throw r}}}function op(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const hr={debug:!!(globalThis&&Yp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xp extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class K_ extends Xp{}async function V_(s,n,r){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),hr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await r()}finally{hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(n===0)throw hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new K_(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(hr.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function P_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Jp(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Y_(s){return parseInt(s,16)}function Q_(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function X_(s){var n;const{chainId:r,domain:l,expirationTime:c,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:g,resources:p,scheme:b,uri:w,version:S}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const x=Jp(s.address),j=b?`${b}://${l}`:l,E=s.statement?`${s.statement}
`:"",A=`${j} wants you to sign in with your Ethereum account:
${x}

${E}`;let z=`URI: ${w}
Version: ${S}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(c&&(z+=`
Expiration Time: ${c.toISOString()}`),m&&(z+=`
Not Before: ${m.toISOString()}`),g&&(z+=`
Request ID: ${g}`),p){let I=`
Resources:`;for(const C of p){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);I+=`
- ${C}`}z+=I}return`${A}
${z}`}class Ct extends Error{constructor({message:n,code:r,cause:l,name:c}){var d;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(d=c??(l instanceof Error?l.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class uo extends Ct{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function J_({error:s,options:n}){var r,l,c;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Ct({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(Zp(f)){if(d.rp.id!==f)return new Ct({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Z_({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Ct({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(Zp(l)){if(r.rpId!==l)return new Ct({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class W_{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const F_=new W_;function ew(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:l}=s,c=bo(s,["challenge","user","excludeCredentials"]),d=_r(n).buffer,f=Object.assign(Object.assign({},r),{id:_r(r.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:d,user:f});if(l&&l.length>0){m.excludeCredentials=new Array(l.length);for(let g=0;g<l.length;g++){const p=l[g];m.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:_r(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function tw(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,l=bo(s,["challenge","allowCredentials"]),c=_r(n).buffer,d=Object.assign(Object.assign({},l),{challenge:c});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const m=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:_r(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function nw(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Sa(new Uint8Array(s.response.attestationObject)),clientDataJSON:Sa(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function sw(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,l=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Sa(new Uint8Array(c.authenticatorData)),clientDataJSON:Sa(new Uint8Array(c.clientDataJSON)),signature:Sa(new Uint8Array(c.signature)),userHandle:c.userHandle?Sa(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Zp(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function cp(){var s,n;return!!(Vt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function aw(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new uo("Browser returned unexpected credential type",n)}:{data:null,error:new uo("Empty credential response",n)}}catch(n){return{data:null,error:J_({error:n,options:s})}}}async function rw(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new uo("Browser returned unexpected credential type",n)}:{data:null,error:new uo("Empty credential response",n)}}catch(n){return{data:null,error:Z_({error:n,options:s})}}}const iw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},lw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ho(...s){const n=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),r=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of s)if(c)for(const d in c){const f=c[d];if(f!==void 0)if(Array.isArray(f))l[d]=f;else if(r(f))l[d]=f;else if(n(f)){const m=l[d];n(m)?l[d]=ho(m,f):l[d]=ho(f)}else l[d]=f}return l}function ow(s,n){return ho(iw,s,n||{})}function cw(s,n){return ho(lw,s,n||{})}class uw{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:l,signal:c},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:m};const g=c??F_.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${l}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=ow(f.webauthn.credential_options.publicKey,d?.create),{data:b,error:w}=await aw({publicKey:p,signal:g});return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const p=cw(f.webauthn.credential_options.publicKey,d?.request),{data:b,error:w}=await rw(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:g}));return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(f){return Se(f)?{data:null,error:f}:{data:null,error:new _a("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!r)return{data:null,error:new Ri("rpId is required for WebAuthn authentication")};try{if(!cp())return{data:null,error:new _a("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:l},signal:c},{request:d});if(!f)return{data:null,error:m};const{webauthn:g}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:l,credential_response:g.credential_response}})}catch(f){return Se(f)?{data:null,error:f}:{data:null,error:new _a("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!r)return{data:null,error:new Ri("rpId is required for WebAuthn registration")};try{if(!cp())return{data:null,error:new _a("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===n&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:m};const{data:g,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:c},{create:d});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:l,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(f){return Se(f)?{data:null,error:f}:{data:null,error:new _a("Unexpected error in register",f)}}}}P_();const dw={url:i_,storageKey:l_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function up(s,n,r){return await r()}const fr={};class Oi{get jwks(){var n,r;return(r=(n=fr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=fr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{cachedAt:n})}constructor(n){var r,l,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},dw),n);if(this.storageKey=d.storageKey,this.instanceID=(r=Oi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Oi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&Vt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new G_({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Qp(d.fetch),this.lock=d.lock||up,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&Vt()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=V_:this.lock=up,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Yp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=op(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=op(this.memoryStorage)),Vt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Kp}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},l="none";if(Vt()&&(r=x_(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),Vt()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:d}=await this._getSessionFromURL(r,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),m_(d)){const g=(n=d.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:f,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Se(r)?this._returnResult({error:r}):this._returnResult({error:new _a("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,l,c;try{const d=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=n?.options)===null||c===void 0?void 0:c.captchaToken}},xform:In}),{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const g=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(d){if(Se(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(n){var r,l,c;try{let d;if("email"in n){const{email:b,password:w,options:S}=n;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await ur(this.storage,this.storageKey)),d=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:b,password:w,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:x,code_challenge_method:j},xform:In})}else if("phone"in n){const{phone:b,password:w,options:S}=n;d=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(l=S?.data)!==null&&l!==void 0?l:{},channel:(c=S?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:In})}else throw new no("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return await Kt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const g=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(d){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),Se(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(n){try{let r;if("email"in n){const{email:d,password:f,options:m}=n;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:ip})}else if("phone"in n){const{phone:d,password:f,options:m}=n;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:ip})}else throw new no("You must provide either an email or phone number and a password");const{data:l,error:c}=r;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new cr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,l,c,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,l,c,d,f,m,g,p,b,w,S;let x,j;if("message"in n)x=n.message,j=n.signature;else{const{chain:E,wallet:A,statement:z,options:I}=n;let C;if(Vt())if(typeof A=="object")C=A;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")C=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=A}const F=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href),Z=await C.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=Jp(Z[0]);let T=(l=I?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!T){const R=await C.request({method:"eth_chainId"});T=Y_(R)}const L={domain:F.host,address:P,statement:z,uri:F.href,version:"1",chainId:T,nonce:(c=I?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(d=I?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=I?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=I?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=I?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=I?.signInWithEthereum)===null||b===void 0?void 0:b.resources};x=X_(L),j=await C.request({method:"personal_sign",params:[Q_(x),P]})}try{const{data:E,error:A}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:In});if(A)throw A;if(!E||!E.session||!E.user){const z=new cr;return this._returnResult({data:{user:null,session:null},error:z})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:A})}catch(E){if(Se(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(n){var r,l,c,d,f,m,g,p,b,w,S,x;let j,E;if("message"in n)j=n.message,E=n.signature;else{const{chain:A,wallet:z,statement:I,options:C}=n;let F;if(Vt())if(typeof z=="object")F=z;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))F=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=z}const Z=new URL((r=C?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in F&&F.signIn){const P=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),I?{statement:I}:null));let T;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")T=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)T=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)j=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),E=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${Z.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(c=(l=C?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=C?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((f=C?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((m=C?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((g=C?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((p=C?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((w=(b=C?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...C.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const P=await F.signMessage(new TextEncoder().encode(j),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=P}}try{const{data:A,error:z}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Sa(E)},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:In});if(z)throw z;if(!A||!A.session||!A.user){const I=new cr;return this._returnResult({data:{user:null,session:null},error:I})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:z})}catch(A){if(Se(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(n){const r=await pa(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new g_;const{data:d,error:f}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:In});if(await Kt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const m=new cr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:f})}catch(d){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),Se(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(n){try{const{options:r,provider:l,token:c,access_token:d,nonce:f}=n,m=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:In}),{data:g,error:p}=m;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const b=new cr;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,l,c,d,f;try{if("email"in n){const{email:m,options:g}=n;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await ur(this.storage,this.storageKey));const{error:w}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(l=g?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:m,options:g}=n,{data:p,error:b}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=g?.data)!==null&&c!==void 0?c:{},create_user:(d=g?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:b})}throw new no("You must provide either an email or phone number.")}catch(m){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),Se(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(n){var r,l;try{let c,d;"options"in n&&(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo,d=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:m}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:In});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,p=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(c){if(Se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(n){var r,l,c,d,f;try{let m=null,g=null;this.flowType==="pkce"&&([m,g]=await ur(this.storage,this.storageKey));const p=await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=n?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:g}),headers:this.headers,xform:$_});return!((d=p.data)===null||d===void 0)&&d.url&&Vt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(m){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),Se(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;if(l)throw l;if(!r)throw new pn;const{error:c}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(n){if(Se(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:l,type:c,options:d}=n,{error:f}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:l,type:c,options:d}=n,{data:f,error:m}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:m})}throw new no("You must provide either an email or phone number and a type")}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<Pu:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const f=await pa(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Xu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=z_(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Js}):await this._useSession(async r=>{var l,c,d;const{data:f,error:m}=r;if(m)throw m;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pn}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:Js})})}catch(r){if(Se(r))return f_(r)&&(await this._removeSession(),await Kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async l=>{const{data:c,error:d}=l;if(d)throw d;if(!c.session)throw new pn;const f=c.session;let m=null,g=null;this.flowType==="pkce"&&n.email!=null&&([m,g]=await ur(this.storage,this.storageKey));const{data:p,error:b}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:g}),jwt:f.access_token,xform:Js});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),Se(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new pn;const r=Date.now()/1e3;let l=r,c=!0,d=null;const{payload:f}=Qu(n.access_token);if(f.exp&&(l=f.exp,c=l<=r),c){const{data:m,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:g}=await this._getUser(n.access_token);if(g)throw g;d={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(r){if(Se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var l;if(!n){const{data:f,error:m}=r;if(m)throw m;n=(l=f.session)!==null&&l!==void 0?l:void 0}if(!n?.refresh_token)throw new pn;const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Vt())throw new so("No browser detected.");if(n.error||n.error_description||n.error_code)throw new so(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Fg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new so("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Fg("No code detected.");const{data:I,error:C}=await this._exchangeCodeForSession(n.code);if(C)throw C;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:d,refresh_token:f,expires_in:m,expires_at:g,token_type:p}=n;if(!d||!m||!f||!p)throw new so("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let S=b+w;g&&(S=parseInt(g));const x=S-b;x*1e3<=gr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const j=S-w;b-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,S,b):b-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,S,b);const{data:E,error:A}=await this._getUser(d);if(A)throw A;const z={provider_token:l,provider_refresh_token:c,access_token:d,expires_in:w,expires_at:S,refresh_token:f,token_type:p,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:z,redirectType:n.type},error:null})}catch(l){if(Se(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await pa(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:c,error:d}=r;if(d)return this._returnResult({error:d});const f=(l=c.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(h_(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return n!=="others"&&(await this._removeSession(),await Kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=S_(),l={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async r=>{var l,c;try{const{data:{session:d},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,r={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ur(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),Se(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var n;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:l,error:c}=await this._useSession(async d=>{var f,m,g,p,b;const{data:w,error:S}=d;if(S)throw S;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",x,{headers:this.headers,jwt:(b=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(c)throw c;return Vt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:n.provider,url:l?.url},error:null})}catch(l){if(Se(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var l;try{const{error:c,data:{session:d}}=r;if(c)throw c;const{options:f,provider:m,token:g,access_token:p,nonce:b}=n,w=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=d?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:m,id_token:g,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:In}),{data:S,error:x}=w;return x?this._returnResult({data:{user:null,session:null},error:x}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new cr}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:x}))}catch(c){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),Se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var l,c;const{data:d,error:f}=r;if(f)throw f;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await E_(async c=>(c>0&&await k_(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:In})),(c,d)=>{const f=200*Math.pow(2,c);return d&&Yu(d)&&Date.now()+f-l<gr})}catch(l){if(this._debug(r,"error",l),Se(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",l),Vt()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await pa(this.storage,this.storageKey);if(c&&this.userStorage){let f=await pa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await pr(this.userStorage,this.storageKey+"-user",f)),c.user=(n=f?.user)!==null&&n!==void 0?n:Xu()}else if(c&&!c.user&&!c.user){const f=await pa(this.storage,this.storageKey+"-user");f&&f?.user?(c.user=f.user,await Kt(this.storage,this.storageKey+"-user"),await pr(this.storage,this.storageKey,c)):c.user=Xu()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const d=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pu;if(this._debug(l,`session has${d?"":" not"} expired with margin of ${Pu}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Yu(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(c.access_token);!m&&f?.user?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var r,l;if(!n)throw new pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new wo;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new pn;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(c,"error",d),Se(d)){const f={data:null,error:d};return Yu(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,r,l=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,r)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Kt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await pr(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const d=ap(c);await pr(this.storage,this.storageKey,d)}else{const c=ap(r);await pr(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Kt(this.storage,this.storageKey),await Kt(this.storage,this.storageKey+"-code-verifier"),await Kt(this.storage,this.storageKey+"-user"),this.userStorage&&await Kt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Vt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),gr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-n)/gr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${gr}ms, refresh threshold is ${fd} ticks`),c<=fd&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Xp)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,l){const c=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,f]=await ur(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(m.toString())}if(l?.queryParams){const d=new URLSearchParams(l.queryParams);c.push(d.toString())}return l?.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var l;const{data:c,error:d}=r;return d?this._returnResult({data:null,error:d}):await Ne(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var l,c;const{data:d,error:f}=r;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:p}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(n.factorType==="totp"&&g.type==="totp"&&(!((c=g?.totp)===null||c===void 0)&&c.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:c,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?nw(n.webauthn.credential_response):sw(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:g}=await Ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:c,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=await Ne(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ew(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:tw(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=r?.factors)!==null&&n!==void 0?n:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Qu(l.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const p=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:l},error:c}=r;return c?this._returnResult({data:null,error:c}):l?await Ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new pn})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:c},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new pn});const f=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Vt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(Se(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:c},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new pn});const f=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Vt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(Se(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;return l?this._returnResult({data:null,error:l}):r?await Ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new pn})})}catch(n){if(Se(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:l},error:c}=r;return c?this._returnResult({data:null,error:c}):l?(await Ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pn})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let l=r.keys.find(m=>m.kid===n);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(m=>m.kid===n),l&&this.jwks_cached_at+u_>c)return l;const{data:d,error:f}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,l=d.keys.find(m=>m.kid===n),!l)?null:l}async getClaims(n,r={}){try{let l=n;if(!l){const{data:x,error:j}=await this.getSession();if(j||!x.session)return this._returnResult({data:null,error:j});l=x.session.access_token}const{header:c,payload:d,signature:f,raw:{header:m,payload:g}}=Qu(l);r?.allowExpired||D_(d.exp);const p=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:x}=await this.getUser(l);if(x)throw x;return{data:{claims:d,header:c,signature:f},error:null}}const b=M_(c.alg),w=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,__(`${m}.${g}`)))throw new pd("Invalid JWT signature");return{data:{claims:d,header:c,signature:f},error:null}}catch(l){if(Se(l))return this._returnResult({data:null,error:l});throw l}}}Oi.nextInstanceID={};const hw=Oi,fw="2.90.1";let bi="";typeof Deno<"u"?bi="deno":typeof document<"u"?bi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bi="react-native":bi="node";const mw={"X-Client-Info":`supabase-js-${bi}/${fw}`},gw={headers:mw},pw={schema:"public"},vw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yw={};function Di(s){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Di(s)}function bw(s,n){if(Di(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,n);if(Di(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function _w(s){var n=bw(s,"string");return Di(n)=="symbol"?n:n+""}function ww(s,n,r){return(n=_w(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function dp(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);n&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,l)}return r}function wt(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?dp(Object(r),!0).forEach(function(l){ww(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):dp(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const Sw=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),xw=()=>Headers,jw=(s,n,r)=>{const l=Sw(r),c=xw();return async(d,f)=>{var m;const g=(m=await n())!==null&&m!==void 0?m:s;let p=new c(f?.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),l(d,wt(wt({},f),{},{headers:p}))}};function kw(s){return s.endsWith("/")?s:s+"/"}function Ew(s,n){var r,l;const{db:c,auth:d,realtime:f,global:m}=s,{db:g,auth:p,realtime:b,global:w}=n,S={db:wt(wt({},g),c),auth:wt(wt({},p),d),realtime:wt(wt({},b),f),storage:{},global:wt(wt(wt({},w),m),{},{headers:wt(wt({},(r=w?.headers)!==null&&r!==void 0?r:{}),(l=m?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?S.accessToken=s.accessToken:delete S.accessToken,S}function Tw(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(kw(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Cw=class extends hw{constructor(s){super(s)}},Nw=class{constructor(s,n,r){var l,c;this.supabaseUrl=s,this.supabaseKey=n;const d=Tw(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:pw,realtime:yw,auth:wt(wt({},vw),{},{storageKey:f}),global:gw},g=Ew(r??{},m);if(this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=g.global.headers)!==null&&c!==void 0?c:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=jw(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(wt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new o0(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new r_(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new s0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(n=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:c,storageKey:d,flowType:f,lock:m,debug:g,throwOnError:p},b,w){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cw({url:this.authUrl.href,headers:wt(wt({},S),b),storageKey:d,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:c,flowType:f,lock:m,debug:g,throwOnError:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new k0(this.realtimeUrl.href,wt(wt({},s),{},{params:wt(wt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Aw=(s,n,r)=>new Nw(s,n,r);function Rw(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Rw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ow="https://jbknjgbpghrbrstqwoxj.supabase.co",Dw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impia25qZ2JwZ2hyYnJzdHF3b3hqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2MjIwNjMsImV4cCI6MjA3ODE5ODA2M30.ZMlxQyzmXuy43EcKIN6-eO8pJZs2F6kfDw_cfaks9qQ",me=Aw(Ow,Dw,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});let Qs=null;async function ws(){if(Qs)return Qs;try{const{data:{user:s}}=await me.auth.getUser();if(!s)return null;const{data:n,error:r}=await me.schema("gaming").from("admins").select("institution_id").eq("user_id",s.id).maybeSingle();if(!r&&n?.institution_id)return Qs=n.institution_id,Qs;const{data:l,error:c}=await me.from("users").select("institution_id").eq("user_id",s.id).maybeSingle();return!c&&l?.institution_id?(Qs=l.institution_id,Qs):null}catch(s){return console.error("Error in getCurrentUserInstitutionId:",s),null}}async function Wp(){const s=await ws();if(!s)return{id:null,name:null};try{const{data:n}=await me.from("institutions").select("id, name").eq("id",s).maybeSingle();return{id:s,name:n?.name??null}}catch(n){return console.error("Error fetching institution name:",n),{id:s,name:null}}}function Zu(){Qs=null}function hp(s){Qs=s||null}async function Fp(s="",n=500,r=null){try{let l=me.schema("gaming").from("users").select("flango_user_id, name, number, nickname, balance_minutes, grade_level").order("name",{ascending:!0}).limit(n);if(r&&(l=l.eq("institution_id",r)),s&&s.trim()){const m=s.toLowerCase().trim();l=l.or(`name.ilike.%${m}%,number.ilike.%${m}%`)}const{data:c,error:d}=await l;if(d)return d.code==="42501"||d.message?.includes("permission denied for schema gaming")?console.error(" GAMING SCHEMA ERROR:",{message:"Gaming schema er ikke eksponeret eller PostgREST er ikke genstartet",solution:'G til Supabase Dashboard  Settings  API  "Exposed schemas"  Tilfj "gaming" og vent 30 sekunder',error:d.message}):console.error("Error fetching gaming users:",d),[];let f=(c||[]).filter(m=>m.name&&m.name.trim()!=="").map(m=>({id:m.flango_user_id,flangoUserId:m.flango_user_id,name:m.name,number:m.number,nickname:m.nickname,balanceMinutes:m.balance_minutes??0,gradeLevel:m.grade_level}));if(s&&s.trim()){const m=s.toLowerCase().trim();f.sort((g,p)=>{const b=(g.nickname||g.name||"").toLowerCase(),w=(p.nickname||p.name||"").toLowerCase(),S=(g.number||"").toString().toLowerCase(),x=(p.number||"").toString().toLowerCase(),j=b.startsWith(m)||S.startsWith(m),E=w.startsWith(m)||x.startsWith(m),A=/\b/.test(b)&&(b.match(new RegExp(`\\b${m}`,"i"))||S.match(new RegExp(`^${m}`,"i"))),z=/\b/.test(w)&&(w.match(new RegExp(`\\b${m}`,"i"))||x.match(new RegExp(`^${m}`,"i")));return j&&!E?-1:!j&&E?1:A&&!z?-1:!A&&z?1:b.localeCompare(w,"da")})}return f}catch(l){return console.error("Error in fetchGamingUsers:",l),[]}}async function xi(s=null){try{let n=me.schema("gaming").from("settings").select("*");s&&(n=n.eq("institution_id",s));const{data:r,error:l}=await n.single();return l?(console.error("Error fetching settings:",l),{default_balance_minutes:30,max_session_minutes:30,auto_reset_enabled:!0,auto_reset_time:"00:00:00",auto_reset_frequency:"daily",auto_reset_weekday:null,queue_attendance_enabled:!1,queue_attendance_timeout_seconds:300,show_names:!0,allow_nicknames:!0,room_title:"Spillerummet",sound_enabled:!0,grade_filter_enabled:!1,grade_filter_levels:[],pulse_enabled_dashboard:!0,pulse_intensity_dashboard:50,pulse_enabled_viewmode:!0,pulse_intensity_viewmode:50}):r}catch(n){return console.error("Error in getSettings:",n),null}}async function Mw(s){try{const{data:{user:n}}=await me.auth.getUser();if(!n)return!1;const{data:r}=await me.from("users").select("institution_id").eq("user_id",n.id).single();if(!r?.institution_id)return!1;const{error:l}=await me.schema("gaming").from("settings").upsert({institution_id:r.institution_id,...s,updated_at:new Date().toISOString()},{onConflict:"institution_id"});return l?(console.error("Error updating settings:",l),!1):!0}catch(n){return console.error("Error in updateSettings:",n),!1}}async function Wu(s){try{const{data:n,error:r}=await me.schema("gaming").from("users").select("balance_minutes").eq("flango_user_id",s).single();return r?(console.error("Error fetching user balance:",r),null):n?.balance_minutes??0}catch(n){return console.error("Error in getUserBalance:",n),null}}async function vd(s=null){try{if(s){const{data:n,error:r}=await me.schema("gaming").rpc("reset_user_balance",{p_flango_user_id:s});return r?(console.error("Error resetting user balance:",r),!1):!!n}else{const{data:n,error:r}=await me.schema("gaming").rpc("reset_user_balances");return r?(console.error("Error resetting all balances:",r),!1):!0}}catch(n){return console.error("Error in resetUserBalance:",n),!1}}async function Uw(s){if(!s?.auto_reset_enabled)return!1;const n=new Date,r=s.auto_reset_time||"00:00:00",[l,c]=r.split(":").map(Number);if(s.auto_reset_frequency==="daily"){const d=n.getHours(),f=n.getMinutes();return d===l&&f===c}else if(s.auto_reset_frequency==="weekly"){const d=n.getDay(),f=n.getHours(),m=n.getMinutes();return s.auto_reset_weekday===d&&f===l&&m===c}return!1}async function zw(s,n,r=1){try{const{data:l,error:c}=await me.schema("gaming").rpc("deduct_session_balance",{p_session_id:s,p_user_id:n,p_minutes_to_deduct:r});return c?(console.error("Error deducting balance:",c),null):l}catch(l){return console.error("Error in deductSessionBalance:",l),null}}async function Lw(s){try{const{data:n,error:r}=await me.schema("gaming").from("parent_overrides").select("max_daily_minutes, max_session_minutes").eq("user_id",s).maybeSingle();return r?(r.code==="PGRST116"||console.error("Error fetching parent override:",r),null):n}catch(n){return console.error("Error in getParentOverride:",n),null}}async function ev(s,n,r="expired"){try{const l=await ws();if(!l||!s.startTime)return!1;const c=s.startTime instanceof Date?s.startTime.toISOString():s.startTime,{error:d}=await me.schema("gaming").from("session_history").insert({institution_id:l,device_id:n,user_id:s.userId||null,user_name:s.userName||null,start_time:c,end_time:new Date().toISOString(),duration_minutes:s.durationMinutes||0,ended_by:r,balance_deducted:s.balanceDeducted||0});return d?(console.error("Error recording session history:",d),!1):!0}catch(l){return console.error("Error in recordSessionEnd:",l),!1}}const xa={},ji={},Bw=300;async function fp(s){if(!s||!s.id)return console.warn("[sync] syncStationToDatabase called with invalid station:",s),!1;const n=s.id.toLowerCase();return ji[n]=s,xa[n]&&clearTimeout(xa[n]),new Promise(r=>{xa[n]=setTimeout(async()=>{delete xa[n],delete ji[n];try{const l=await tv(s);r(l)}catch(l){console.error(`[sync] Uncaught error in _doSync for ${n}:`,l),r(!1)}},Bw)})}async function qw(){const s=Object.keys(ji);if(s.length===0)return;console.log(`[sync] Flushing ${s.length} pending syncs before unload...`);for(const r of s)xa[r]&&(clearTimeout(xa[r]),delete xa[r]);const n=s.map(r=>{const l=ji[r];return delete ji[r],tv(l).catch(c=>{console.error(`[sync] Flush error for ${r}:`,c)})});await Promise.allSettled(n)}async function tv(s){try{const n=await ws();if(!n)return console.warn("[sync] Cannot sync: no institution_id"),!1;const r=s.id.toLowerCase(),l=(s.activeSessions||[]).length,c=(s.queue||[]).length;console.log(`[sync] Syncing ${r}: ${l} sessions, ${c} queue, status=${s.status}, inst=${n.slice(0,8)}`);const f=(await Promise.allSettled([$w(r,n,s.status),Hw(r,n,s.activeSessions||[]),Iw(r,n,s.queue||[])])).filter(m=>m.status==="rejected");return f.length>0?console.error("[sync] Some syncs failed:",f.map(m=>m.reason)):console.log(`[sync]  ${r} synced OK`),f.length===0}catch(n){return console.error("[sync] Error syncing station:",n),!1}}async function $w(s,n,r){const l=r==="active"?"available":r||"available",{error:c}=await me.schema("gaming").from("device_status").upsert({device_id:s,institution_id:n,status:l,updated_at:new Date().toISOString()},{onConflict:"device_id"});if(c)throw console.error(`[sync] device_status error for ${s}:`,c),c}async function Hw(s,n,r){if(r.length===0){const{error:m}=await me.schema("gaming").from("sessions").delete().eq("device_id",s).eq("institution_id",n);if(m)throw console.error(`[sync] sessions delete error for ${s}:`,m),m;return}const l=r.map(m=>({id:m.id,device_id:s,institution_id:n,user_id:m.userId||null,user_name:m.userName||null,start_time:m.startTime?new Date(m.startTime).toISOString():null,duration_minutes:m.durationMinutes||30,is_paused:m.isPaused||!1,remaining_seconds_when_paused:m.remainingSecondsWhenPaused||null,user_balance_at_start:m.userBalanceAtStart??null,balance_deducted:m.balanceDeducted??0,waiting_since:m.waitingSince?new Date(m.waitingSince).toISOString():null,waiting_timeout_seconds:m.waitingTimeoutSeconds??null,status:"active"}));console.log(`[sync] Upserting ${l.length} sessions for ${s}:`,l.map(m=>({id:m.id,user_name:m.user_name})));const c=r.map(m=>m.id),d=await me.schema("gaming").from("sessions").upsert(l,{onConflict:"id"}).select();if(d.error)throw console.error(`[sync] sessions upsert error for ${s}:`,d.error),console.error("[sync] sessions upsert details:",JSON.stringify(d.error)),d.error;console.log(`[sync]  Sessions upsert OK for ${s}, returned ${d.data?.length??0} rows`);const f=await me.schema("gaming").from("sessions").delete().eq("device_id",s).eq("institution_id",n).not("id","in",`(${c.join(",")})`);f.error&&console.error(`[sync] sessions cleanup error for ${s}:`,f.error)}async function Iw(s,n,r){if(r.length===0){const{error:m}=await me.schema("gaming").from("queue").delete().eq("device_id",s).eq("institution_id",n);if(m)throw console.error(`[sync] queue delete error for ${s}:`,m),m;return}const l=r.map((m,g)=>({id:m.id,device_id:s,institution_id:n,user_id:m.userId||null,user_name:m.name||m.userName||null,position:g,expected_start_time:m.availableTime?new Date(m.availableTime).toISOString():null,is_group:!!(m.users&&m.users.length>0),group_users:m.users||null})),c=r.map(m=>m.id),d=await me.schema("gaming").from("queue").upsert(l,{onConflict:"id"});if(d.error)throw console.error(`[sync] queue upsert error for ${s}:`,d.error),d.error;const f=await me.schema("gaming").from("queue").delete().eq("device_id",s).eq("institution_id",n).not("id","in",`(${c.join(",")})`);f.error&&console.error(`[sync] queue cleanup error for ${s}:`,f.error)}const wa={};function nv(s){try{wa[s]||(wa[s]=new Audio(`/sounds/${s}.mp3`),wa[s].volume=.5),wa[s].currentTime=0,wa[s].play().catch(()=>{})}catch{}}function fo(s=800,n=200){try{const r=new(window.AudioContext||window.webkitAudioContext),l=r.createOscillator(),c=r.createGain();l.connect(c),c.connect(r.destination),l.type="sine",l.frequency.setValueAtTime(s,r.currentTime),c.gain.setValueAtTime(.3,r.currentTime),c.gain.exponentialRampToValueAtTime(.001,r.currentTime+n/1e3),l.start(r.currentTime),l.stop(r.currentTime+n/1e3)}catch{}}function Gw(){const s=wa["session-expired"];s&&s.src?nv("session-expired"):(fo(600,150),setTimeout(()=>fo(400,200),180))}function Kw(){const s=wa["queue-called"];s&&s.src?nv("queue-called"):(fo(400,150),setTimeout(()=>fo(600,200),180))}function Vw({isOpen:s=!1,debounceMs:n=300,limit:r=50,institutionId:l=null}={}){const[c,d]=y.useState([]),[f,m]=y.useState([]),[g,p]=y.useState(""),[b,w]=y.useState(!1),[S,x]=y.useState(null),[j,E]=y.useState(0),A=y.useRef(null),z=y.useRef(null),I=y.useCallback(async(Z="")=>{w(!0),x(null);const P=async()=>{const T=new Promise((L,R)=>setTimeout(()=>R(new Error("Timeout: brugerlisten tog for lang tid")),2e4));return Promise.race([Fp(Z,r,l),T])};try{let T;try{T=await P()}catch(L){console.warn("User search first attempt failed, retrying...",L.message),T=await P()}d(T),m(T),E(0)}catch(T){console.error("Error loading users:",T),x('Kunne ikke hente brugere. Tryk "Prv igen" eller luk og bn igen.'),d([]),m([])}finally{w(!1)}},[r,l]);y.useEffect(()=>{s&&(I(""),p(""),E(0))},[s,I]),y.useEffect(()=>{if(s)return A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{g.trim()?I(g):I("")},n),()=>{A.current&&clearTimeout(A.current)}},[g,s,n,I]),y.useEffect(()=>{if(!g.trim()){m(c);return}const Z=g.toLowerCase().trim(),P=c.filter(T=>{const L=(T.nickname||T.name||"").toLowerCase(),R=(T.number||"").toString().toLowerCase(),K=T.gradeLevel!=null?`${T.gradeLevel}.`:"";return L.includes(Z)||R.includes(Z)||K.includes(Z)});P.sort((T,L)=>{const R=(T.nickname||T.name||"").toLowerCase(),K=(L.nickname||L.name||"").toLowerCase(),N=R.startsWith(Z),Y=K.startsWith(Z);return N&&!Y?-1:!N&&Y?1:R.localeCompare(K,"da")}),m(P),E(0)},[g,c]);const C=y.useCallback((Z,P,T)=>{switch(Z.key){case"ArrowDown":Z.preventDefault(),E(L=>Math.min(L+1,f.length-1));break;case"ArrowUp":Z.preventDefault(),E(L=>Math.max(L-1,0));break;case"Enter":Z.preventDefault(),f[j]?P?.(f[j]):g.trim()&&P?.({name:g.trim(),id:null,isManual:!0});break;case"Escape":Z.preventDefault(),T?.();break}},[f,j,g]);y.useEffect(()=>{if(z.current&&f.length>0){const Z=z.current.querySelector(`[data-index="${j}"]`);Z&&Z.scrollIntoView({block:"nearest",behavior:"smooth"})}},[j,f.length]);const F=y.useCallback(()=>{p(""),E(0),m(c)},[c]);return{users:c,filteredUsers:f,searchQuery:g,isLoading:b,error:S,selectedIndex:j,setSearchQuery:p,setSelectedIndex:E,loadUsers:I,handleKeyDown:C,reset:F,listRef:z}}function Pw({isOpen:s,onClose:n,onSelectUser:r,onSelectManualEntry:l,placeholder:c="Indtast eller vlg bruger...",busyUsers:d={},institutionId:f=null,appSettings:m=null}){const[g,p]=y.useState(!1),[b,w]=y.useState(""),S=y.useRef(null),x=y.useRef(null),[j,E]=y.useState("name"),[A,z]=y.useState(!0),[I,C]=y.useState(new Set),{filteredUsers:F,searchQuery:Z,isLoading:P,error:T,selectedIndex:L,setSearchQuery:R,setSelectedIndex:K,handleKeyDown:N,loadUsers:Y,listRef:se}=Vw({isOpen:s,debounceMs:300,limit:500,institutionId:f}),X=D=>{j===D?z(!A):(E(D),z(!0))},le=m?.grade_filter_enabled&&m?.grade_filter_levels?.length>0,M=le?[...m.grade_filter_levels].sort((D,B)=>D-B):[],$=D=>{C(B=>{const te=new Set(B);return te.has(D)?te.delete(D):te.add(D),te})},W=I.size>0?F.filter(D=>D.gradeLevel!=null&&I.has(D.gradeLevel)):F,V=[...W].sort((D,B)=>{const te=D.flangoUserId||D.id,G=B.flangoUserId||B.id,re=!!(te&&d[te]),de=!!(G&&d[G]);if(re&&!de)return 1;if(!re&&de)return-1;const he=A?1:-1;switch(j){case"name":{const pe=(D.nickname||D.name||"").toLowerCase(),Te=(B.nickname||B.name||"").toLowerCase();return he*pe.localeCompare(Te,"da")}case"number":{const pe=D.number||"",Te=B.number||"";return he*pe.localeCompare(Te,"da",{numeric:!0})}case"nickname":{const pe=(D.nickname||"").toLowerCase(),Te=(B.nickname||"").toLowerCase();return!pe&&!Te?0:pe?Te?he*pe.localeCompare(Te,"da"):-1:1}case"grade":{const pe=D.gradeLevel??-1,Te=B.gradeLevel??-1;return he*(pe-Te)}case"balance":{const pe=D.balanceMinutes??0,Te=B.balanceMinutes??0;return he*(pe-Te)}default:return 0}});y.useEffect(()=>{if(s){const D=setTimeout(()=>{S.current&&S.current.focus()},100);return()=>clearTimeout(D)}else p(!1),w(""),C(new Set)},[s]);const fe=D=>{const B=D.nickname||D.name;r(B,D.flangoUserId||D.id),n()},k=D=>{D.preventDefault(),b.trim()&&(l(b.trim()),n())},H=D=>{N(D,B=>{const te=B.flangoUserId||B.id;te&&d[te]||(B.isManual?l(B.name):fe(B),n())},n)};return s?o.jsx("div",{className:"user-selector-overlay",onClick:n,children:o.jsxs("div",{className:"user-selector-modal",onClick:D=>D.stopPropagation(),children:[o.jsxs("div",{className:"user-selector-header",children:[o.jsxs("div",{className:"user-selector-header__left",children:[o.jsx("h3",{children:"Vlg bruger"}),o.jsx("span",{className:"user-selector-count",children:V.length})]}),le&&o.jsx("div",{className:"user-selector-grade-filter",children:M.map(D=>o.jsxs("button",{type:"button",className:`user-selector-grade-chip ${I.has(D)?"user-selector-grade-chip--active":""}`,onClick:()=>$(D),children:[D,"."]},D))}),o.jsx("button",{className:"user-selector-close",onClick:n,"aria-label":"Luk",children:""})]}),T&&o.jsxs("div",{className:"user-selector-error",children:[T,o.jsx("button",{className:"user-selector-retry-btn",onClick:()=>Y(Z||""),children:"Prv igen"})]}),o.jsxs("div",{className:"user-selector-search",children:[o.jsx("input",{ref:S,type:"text",className:"user-selector-input",placeholder:"Sg efter navn, nummer eller klasse...",value:Z,onChange:D=>R(D.target.value),onKeyDown:H}),P&&o.jsx("div",{className:"user-selector-loading",children:"Henter brugere..."})]}),g?o.jsx("div",{className:"user-selector-manual",children:o.jsxs("form",{onSubmit:k,children:[o.jsx("input",{ref:x,type:"text",className:"user-selector-input",placeholder:"Indtast brugerens navn...",value:b,onChange:D=>w(D.target.value),onKeyDown:D=>D.key==="Escape"&&n(),autoFocus:!0}),o.jsxs("div",{className:"user-selector-manual-actions",children:[o.jsx("button",{type:"submit",className:"user-selector-submit",disabled:!b.trim(),children:"Bekrft"}),o.jsx("button",{type:"button",className:"user-selector-cancel",onClick:()=>{p(!1),w(""),S.current&&S.current.focus()},children:"Tilbage til liste"})]})]})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"user-selector-table-wrap",ref:se,children:W.length>0?o.jsxs("table",{className:"user-selector-table",children:[o.jsx("thead",{children:o.jsx("tr",{children:[{key:"name",label:"Navn"},{key:"nickname",label:"Kaldenavn"},{key:"number",label:"Nr."},{key:"grade",label:"Klasse"},{key:"balance",label:"Saldo"}].map(D=>o.jsxs("th",{className:`user-selector-th ${j===D.key?"active":""}`,onClick:()=>X(D.key),children:[D.label,o.jsx("span",{className:"user-selector-th__arrow",children:j===D.key?A?" ":" ":""})]},D.key))})}),o.jsx("tbody",{children:V.map((D,B)=>{const te=D.flangoUserId||D.id,G=d[te],re=!!G;return o.jsxs("tr",{"data-index":B,className:`user-selector-row ${B===L&&!re?"selected":""} ${re?"user-selector-row--busy":""}`,onClick:()=>!re&&fe(D),onMouseEnter:()=>!re&&K(B),children:[o.jsx("td",{className:"user-selector-td user-selector-td--name",children:o.jsx("span",{className:re?"user-selector-name--busy":"",children:D.name})}),o.jsx("td",{className:"user-selector-td user-selector-td--nickname",children:D.nickname||""}),o.jsx("td",{className:"user-selector-td user-selector-td--number",children:D.number||""}),o.jsx("td",{className:"user-selector-td user-selector-td--grade",children:D.gradeLevel!=null?`${D.gradeLevel}.`:""}),o.jsx("td",{className:"user-selector-td user-selector-td--balance",children:re?o.jsxs("span",{className:"user-selector-busy-badge",children:["Spiller  ",G]}):o.jsxs("span",{children:[D.balanceMinutes??0," min"]})})]},te)})})]}):(Z.trim()||I.size>0)&&!P?o.jsxs("div",{className:"user-selector-empty",children:["Ingen brugere fundet.",I.size>0&&o.jsx("button",{className:"user-selector-manual-link",onClick:()=>C(new Set),children:"Fjern rgangsfilter"}),o.jsx("button",{className:"user-selector-manual-link",onClick:()=>p(!0),children:"Indtast navn manuelt "})]}):null}),o.jsx("div",{className:"user-selector-footer",children:o.jsx("button",{className:"user-selector-manual-btn",onClick:()=>p(!0),children:"Indtast navn manuelt"})})]})]})}):null}const ao="skaermtid_remembered_institution",Fu="skaermtid_remembered_email";function Yw({onLoginSuccess:s,suppressAuthEvents:n}){const[r,l]=y.useState(1),[c,d]=y.useState([]),[f,m]=y.useState(""),[g,p]=y.useState(""),[b,w]=y.useState(""),[S,x]=y.useState(!0),[j,E]=y.useState(!1),[A,z]=y.useState(""),[I,C]=y.useState(""),[F,Z]=y.useState(""),[P,T]=y.useState(!1),[L,R]=y.useState(!1),[K,N]=y.useState(null);y.useEffect(()=>{try{const $=localStorage.getItem(ao);if($){const{id:V,name:fe}=JSON.parse($);V&&fe&&(m(V),w(fe),E(!0),l(2))}const W=localStorage.getItem(Fu);W&&(C(W),T(!0))}catch{}},[]),y.useEffect(()=>{(async()=>{try{const{data:W,error:V}=await me.rpc("get_public_institutions");if(V){const{data:fe,error:k}=await me.from("institutions").select("id, name").eq("is_active",!0).order("name");!k&&fe?d(fe):console.error("Failed to fetch institutions:",V,k)}else d(W||[])}catch(W){console.error("Error loading institutions:",W)}finally{x(!1)}})()},[]);const Y=async $=>{$.preventDefault(),N(null),R(!0);try{const W=c.find(k=>k.id===f);if(!W){N("Vlg venligst en institution.");return}const{data:V,error:fe}=await me.rpc("verify_club_login",{p_institution_id:W.id,p_code:g.trim()});if(fe||V!==!0){N("Forkert klubkode. Prv igen, eller sprg en voksen i klubben.");return}w(W.name),j?localStorage.setItem(ao,JSON.stringify({id:W.id,name:W.name})):localStorage.removeItem(ao),N(null),l(2)}catch(W){console.error("Club login error:",W),N("Noget gik galt. Prv igen.")}finally{R(!1)}},se=async $=>{$.preventDefault(),N(null),R(!0);try{const{data:W,error:V}=await me.functions.invoke("operator-login",{body:{institution_id:f,operator_code:A.trim()}});if(V){const k=V.message||"Noget gik galt. Prv igen.";N(k);return}if(!W?.hashed_token){N(W?.error||"Forkert operatr-kode.");return}const{error:fe}=await me.auth.verifyOtp({token_hash:W.hashed_token,type:"magiclink"});if(fe){console.error("OTP verification failed:",fe),N("Login fejlede. Prv igen.");return}hp(f),s?.()}catch(W){console.error("Operator login error:",W),N(W.message||"Noget gik galt. Prv igen.")}finally{R(!1)}},X=async $=>{$.preventDefault(),N(null),R(!0),n&&(n.current=!0);try{const{data:W,error:V}=await me.auth.signInWithPassword({email:I.trim(),password:F});if(V)throw V;if(W.user){if(W.user.app_metadata?.role==="superadmin")throw await me.auth.signOut(),new Error("Superadmin-konti kan ikke logge ind her. Brug super-admin panelet.");const{data:fe,error:k}=await me.schema("gaming").from("admins").select("institution_id").eq("user_id",W.user.id).maybeSingle();if(k||!fe?.institution_id)throw await me.auth.signOut(),new Error("Denne bruger har ikke admin-adgang til skrmtid.");if(fe.institution_id!==f){await me.auth.signOut();const D=c.find(B=>B.id===fe.institution_id)?.name||"en anden institution";throw new Error(`Denne admin-konto tilhrer "${D}" og kan ikke bruges til at logge ind p "${b}".`)}n&&(n.current=!1),hp(fe.institution_id),P?localStorage.setItem(Fu,I.trim()):localStorage.removeItem(Fu),s?.(W.user)}}catch(W){console.error("Login error:",W),N(W.message||"Login fejlede. Tjek email og password.")}finally{n&&(n.current=!1),R(!1)}},le=()=>{N(null),r==="3a"||r==="3b"?(l(2),z(""),Z("")):r===2&&(l(1),p(""),localStorage.removeItem(ao),E(!1))},M=r===1?1:r===2?2:3;return o.jsxs("div",{className:"login-container",children:[o.jsx("div",{className:"login-glow-orb-bottom"}),o.jsxs("div",{className:"login-card",children:[o.jsxs("div",{className:"login-logo",children:[o.jsx("div",{className:"login-logo-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),o.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),o.jsx("h1",{children:"Skrmtid"}),o.jsxs("p",{children:[r===1&&"Vlg institution og indtast klubkode",r===2&&"Vlg login-type",r==="3a"&&"Indtast operatr-kode",r==="3b"&&"Log ind med din administratorkonto"]})]}),o.jsxs("div",{className:"login-steps",children:[o.jsx("div",{className:`login-step-dot ${M>=1?M>1?"completed":"active":""}`}),o.jsx("div",{className:`login-step-connector ${M>=2?"completed":""}`}),o.jsx("div",{className:`login-step-dot ${M>=2?M>2?"completed":"active":""}`}),o.jsx("div",{className:`login-step-connector ${M>=3?"completed":""}`}),o.jsx("div",{className:`login-step-dot ${M>=3?"active":""}`})]}),K&&o.jsx("div",{className:"login-error",children:K}),r===1&&o.jsxs("form",{onSubmit:Y,className:"login-form login-step-enter",children:[o.jsxs("div",{className:"login-field",children:[o.jsx("label",{htmlFor:"institution-select",children:"Institution"}),o.jsxs("select",{id:"institution-select",value:f,onChange:$=>m($.target.value),disabled:L||S,required:!0,children:[o.jsx("option",{value:"",children:S?"Indlser...":"Vlg institution..."}),c.map($=>o.jsx("option",{value:$.id,children:$.name},$.id))]})]}),o.jsxs("div",{className:"login-field",children:[o.jsx("label",{htmlFor:"club-code",children:"Klubkode"}),o.jsx("input",{id:"club-code",type:"password",inputMode:"numeric",maxLength:8,value:g,onChange:$=>p($.target.value.replace(/\D/g,"")),placeholder:"",required:!0,disabled:L,autoComplete:"off"})]}),o.jsxs("label",{className:"login-remember",children:[o.jsx("input",{type:"checkbox",checked:j,onChange:$=>E($.target.checked)}),o.jsx("span",{className:"login-remember-check"}),o.jsx("span",{children:"Husk mig p denne enhed"})]}),o.jsxs("button",{type:"submit",className:"login-btn login-btn--primary",disabled:L||!f||g.length<1,children:[L&&o.jsx("span",{className:"login-spinner"}),L?"Verificerer...":"Fortst"]})]},"step1"),r===2&&o.jsxs("div",{className:"login-step-enter",children:[o.jsxs("div",{className:"login-institution-badge",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),o.jsx("span",{children:b})]}),o.jsxs("div",{className:"login-role-choice",children:[o.jsxs("button",{className:"login-role-btn login-role-btn--operator",onClick:()=>{N(null),l("3a")},children:[o.jsx("div",{className:"login-role-btn-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),o.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),o.jsxs("div",{className:"login-role-btn-text",children:[o.jsx("strong",{children:"Log ind som operatr"}),o.jsx("span",{children:"Betjen stationer med operatr-kode"})]})]}),o.jsxs("button",{className:"login-role-btn login-role-btn--admin",onClick:()=>{N(null),l("3b")},children:[o.jsx("div",{className:"login-role-btn-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),o.jsxs("div",{className:"login-role-btn-text",children:[o.jsx("strong",{children:"Log ind som admin"}),o.jsx("span",{children:"Fuld adgang med email og password"})]})]}),o.jsx("button",{type:"button",className:"login-btn login-btn--back",onClick:le,children:"Tilbage"})]})]},"step2"),r==="3a"&&o.jsxs("div",{className:"login-step-enter",children:[o.jsxs("div",{className:"login-institution-badge",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),o.jsx("span",{children:b})]}),o.jsxs("form",{onSubmit:se,className:"login-form",children:[o.jsxs("div",{className:"login-field",children:[o.jsx("label",{htmlFor:"operator-code",children:"Operatr-kode"}),o.jsx("input",{id:"operator-code",type:"password",inputMode:"numeric",maxLength:8,value:A,onChange:$=>z($.target.value.replace(/\D/g,"")),placeholder:"",required:!0,autoFocus:!0,disabled:L,autoComplete:"off"})]}),o.jsxs("button",{type:"submit",className:"login-btn login-btn--primary",disabled:L||A.length<4,children:[L&&o.jsx("span",{className:"login-spinner"}),L?"Logger ind...":"Log ind"]}),o.jsx("button",{type:"button",className:"login-btn login-btn--back",onClick:le,disabled:L,children:"Tilbage"})]})]},"step3a"),r==="3b"&&o.jsxs("div",{className:"login-step-enter",children:[o.jsxs("div",{className:"login-institution-badge",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),o.jsx("span",{children:b})]}),o.jsxs("form",{onSubmit:X,className:"login-form",children:[o.jsxs("div",{className:"login-field",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{id:"email",type:"email",value:I,onChange:$=>C($.target.value),placeholder:"admin@institution.dk",required:!0,autoFocus:!0,disabled:L})]}),o.jsxs("div",{className:"login-field",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{id:"password",type:"password",value:F,onChange:$=>Z($.target.value),placeholder:"",required:!0,disabled:L})]}),o.jsxs("label",{className:"login-remember",children:[o.jsx("input",{type:"checkbox",checked:P,onChange:$=>T($.target.checked)}),o.jsx("span",{className:"login-remember-check"}),o.jsx("span",{children:"Husk mig p denne enhed"})]}),o.jsxs("button",{type:"submit",className:"login-btn login-btn--primary",disabled:L||!I.trim()||!F,children:[L&&o.jsx("span",{className:"login-spinner"}),L?"Logger ind...":"Log ind"]}),o.jsx("button",{type:"button",className:"login-btn login-btn--back",onClick:le,disabled:L,children:"Tilbage"})]})]},"step3b"),o.jsx("div",{className:"login-footer",children:o.jsxs("p",{children:[r===1&&"Brug klubkoden fra jeres institution til at komme videre.",r===2&&"Vlg hvordan du vil logge ind.",r==="3a"&&"Indtast den operatr-kode som din admin har oprettet.",r==="3b"&&"Log ind med din Flango stations-konto."]})})]})]})}function Qw({onPasswordChanged:s}){const[n,r]=y.useState(""),[l,c]=y.useState(""),[d,f]=y.useState(!1),[m,g]=y.useState(null),p=async b=>{if(b.preventDefault(),g(null),n.length<6){g("Adgangskoden skal vre mindst 6 tegn.");return}if(n!==l){g("Adgangskoderne er ikke ens.");return}f(!0);try{const{error:w}=await me.auth.updateUser({password:n});if(w)throw w;const{error:S}=await me.auth.updateUser({data:{must_change_password:!1}});if(S)throw S;s?.()}catch(w){g(w.message||"Kunne ikke skifte adgangskode.")}finally{f(!1)}};return o.jsx("div",{className:"login-container",children:o.jsxs("div",{className:"login-card",children:[o.jsxs("div",{className:"login-logo",children:[o.jsx("h1",{children:"Vlg ny adgangskode"}),o.jsx("p",{children:"Du skal vlge en personlig adgangskode fr du fortstter."})]}),m&&o.jsx("div",{className:"login-error",children:m}),o.jsxs("form",{onSubmit:p,className:"login-form",children:[o.jsxs("div",{className:"login-field",children:[o.jsx("label",{htmlFor:"new-password",children:"Ny adgangskode"}),o.jsx("input",{id:"new-password",type:"password",value:n,onChange:b=>r(b.target.value),placeholder:"Mindst 6 tegn",required:!0,autoFocus:!0,disabled:d})]}),o.jsxs("div",{className:"login-field",children:[o.jsx("label",{htmlFor:"confirm-password",children:"Bekrft adgangskode"}),o.jsx("input",{id:"confirm-password",type:"password",value:l,onChange:b=>c(b.target.value),placeholder:"Gentag adgangskode",required:!0,disabled:d})]}),o.jsx("button",{type:"submit",className:"login-btn login-btn--primary",disabled:d||!n||!l,children:d?"Gemmer...":"Gem adgangskode"})]})]})})}const ro={skaermtid_enabled:!1,skaermtid_show_usage:!0,skaermtid_show_remaining:!0,skaermtid_show_rules:!0,skaermtid_allow_personal_limits:!1,skaermtid_allow_extra_time_requests:!1,skaermtid_allow_game_approval:!1};async function mp(){try{const s=await ws();if(!s)return{...ro};const{data:n,error:r}=await me.schema("gaming").from("portal_settings").select("*").eq("institution_id",s).maybeSingle();return r?(console.error("Error fetching portal settings:",r),{...ro}):{...ro,...n||{}}}catch(s){return console.error("Error in getPortalSettings:",s),{...ro}}}async function Xw(s){try{const n=await ws();if(!n)return!1;const{error:r}=await me.schema("gaming").from("portal_settings").upsert({institution_id:n,...s,updated_at:new Date().toISOString()},{onConflict:"institution_id"});return r?(console.error("Error updating portal settings:",r),!1):!0}catch(n){return console.error("Error in updatePortalSettings:",n),!1}}function Jw(s,n){const r=[];if(n.type){const l=Array.isArray(s)?"array":typeof s;if(l!==n.type)return r.push(`Forventede ${n.type}, fik ${l}`),{valid:!1,errors:r}}if(n.required&&(s==null||s===""))return r.push("Feltet er pkrvet"),{valid:!1,errors:r};if(typeof s=="number"&&(n.min!==void 0&&s<n.min&&r.push(`Vrdien skal vre mindst ${n.min}`),n.max!==void 0&&s>n.max&&r.push(`Vrdien m hjst vre ${n.max}`),n.integer&&!Number.isInteger(s)&&r.push("Vrdien skal vre et heltal")),typeof s=="string"&&(n.minLength!==void 0&&s.length<n.minLength&&r.push(`Skal vre mindst ${n.minLength} tegn`),n.maxLength!==void 0&&s.length>n.maxLength&&r.push(`M hjst vre ${n.maxLength} tegn`),n.pattern&&!n.pattern.test(s)&&r.push(n.patternMessage||"Ugyldigt format"),n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)&&r.push("Ugyldig email-adresse")),n.enum&&!n.enum.includes(s)&&r.push(`Ugyldig vrdi. Tilladt: ${n.enum.join(", ")}`),n.custom){const l=n.custom(s);l&&r.push(l)}return{valid:r.length===0,errors:r}}function Zw(s,n){const r={};let l=!0;for(const[c,d]of Object.entries(n)){const f=Jw(s[c],d);f.valid||(l=!1,r[c]=f.errors)}return{valid:l,errors:r}}const Ww={settings:{default_balance_minutes:{type:"number",min:0,max:480,integer:!0},max_session_minutes:{type:"number",min:1,max:120,integer:!0},auto_reset_time:{type:"string",pattern:/^\d{2}:\d{2}(:\d{2})?$/,patternMessage:"Tid skal vre i format HH:MM eller HH:MM:SS"},queue_attendance_timeout_seconds:{type:"number",min:30,max:900,integer:!0}}};function Fw(s){return Zw(s,Ww.settings)}async function eS(s,n){try{const{data:r,error:l}=await me.rpc("rotate_operator_code",{p_institution_id:s,p_code:n||null});return l?(console.error("Error rotating operator code:",l),{error:l.message||"Kunne ikke generere operatr-kode."}):{code:r}}catch(r){return console.error("Error in rotateOperatorCode:",r),{error:r.message||"Uventet fejl."}}}async function tS(s){try{const{error:n}=await me.rpc("disable_operator_login",{p_institution_id:s});return n?(console.error("Error disabling operator login:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in disableOperatorLogin:",n),{success:!1,error:n.message}}}async function nS(){try{const{data:s,error:n}=await me.schema("gaming").from("game_catalog").select("*").order("display_order",{ascending:!0});return n?(console.error("Error fetching game catalog:",n),[]):s||[]}catch(s){return console.error("Error in fetchGameCatalog:",s),[]}}async function sS({name:s,category:n="both"}){try{const r=await ws();if(!r)return null;const{data:l}=await me.schema("gaming").from("game_catalog").select("display_order").order("display_order",{ascending:!1}).limit(1),c=l&&l.length>0?l[0].display_order+1:0,{data:d,error:f}=await me.schema("gaming").from("game_catalog").insert({institution_id:r,name:s,category:n,display_order:c}).select().single();return f?(f.code==="23505"&&console.error("Game name already exists:",s),console.error("Error creating game:",f),null):d}catch(r){return console.error("Error in createGame:",r),null}}async function gp(s,n){try{const r={updated_at:new Date().toISOString()};n.name!==void 0&&(r.name=n.name),n.category!==void 0&&(r.category=n.category),n.is_active!==void 0&&(r.is_active=n.is_active),n.display_order!==void 0&&(r.display_order=n.display_order),n.executable_path!==void 0&&(r.executable_path=n.executable_path),n.process_names!==void 0&&(r.process_names=n.process_names),n.launch_args!==void 0&&(r.launch_args=n.launch_args);const{error:l}=await me.schema("gaming").from("game_catalog").update(r).eq("id",s);return l?(console.error("Error updating game:",l),!1):!0}catch(r){return console.error("Error in updateGame:",r),!1}}async function aS(s){try{const{error:n}=await me.schema("gaming").from("game_catalog").delete().eq("id",s);return n?(console.error("Error deleting game:",n),!1):!0}catch(n){return console.error("Error in deleteGame:",n),!1}}function rS({isOpen:s,onClose:n}){const[r,l]=y.useState([]),[c,d]=y.useState(!0),[f,m]=y.useState(""),[g,p]=y.useState("both"),[b,w]=y.useState(!1),[S,x]=y.useState(null),[j,E]=y.useState({}),[A,z]=y.useState(null);y.useEffect(()=>{s&&I()},[s]);const I=async()=>{d(!0);const R=await nS();l(R),d(!1)},C=async()=>{if(!f.trim())return;const R=await sS({name:f.trim(),category:g});R&&(l(K=>[...K,R]),m(""),p("both"),w(!1))},F=async R=>{await gp(R.id,{is_active:!R.is_active})&&l(N=>N.map(Y=>Y.id===R.id?{...Y,is_active:!Y.is_active}:Y))},Z=async R=>{if(!confirm(`Slet "${R.name}" fra kataloget?`))return;await aS(R.id)&&(l(N=>N.filter(Y=>Y.id!==R.id)),S===R.id&&x(null))},P=R=>{S===R.id?(x(null),E({})):(x(R.id),E({executable_path:R.executable_path||"",process_names:(R.process_names||[]).join(", "),launch_args:R.launch_args||""}))},T=async R=>{z(R.id);const K=j.process_names.split(",").map(Y=>Y.trim()).filter(Boolean);await gp(R.id,{executable_path:j.executable_path||null,process_names:K,launch_args:j.launch_args||null})&&l(Y=>Y.map(se=>se.id===R.id?{...se,executable_path:j.executable_path||null,process_names:K,launch_args:j.launch_args||null}:se)),z(null)};if(!s)return null;const L=R=>{switch(R){case"pc":return"PC";case"console":return"Konsol";default:return"Begge"}};return o.jsx("div",{className:"gc-overlay",onClick:n,children:o.jsxs("div",{className:"gc-panel",onClick:R=>R.stopPropagation(),children:[o.jsxs("div",{className:"gc-header",children:[o.jsx("h2",{className:"gc-title",children:"Spilkatalog"}),o.jsx("button",{className:"gc-close",onClick:n,children:""})]}),o.jsx("p",{className:"gc-description",children:"Spil i kataloget kan godkendes eller blokeres af forldre via forldreportalen. Klik p et spil for at redigere PC-klient-indstillinger (filsti og procesnavne)."}),c?o.jsx("div",{className:"gc-loading",children:"Indlser..."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"gc-list",children:r.length===0?o.jsx("div",{className:"gc-empty",children:"Ingen spil i kataloget endnu."}):r.map(R=>o.jsxs("div",{children:[o.jsxs("div",{className:`gc-item ${R.is_active?"":"gc-item--inactive"}`,children:[o.jsxs("div",{className:"gc-item-info",onClick:()=>P(R),style:{cursor:"pointer"},children:[o.jsxs("span",{className:"gc-item-name",children:[R.name,R.executable_path&&o.jsx("span",{style:{marginLeft:"0.5rem",fontSize:"0.7rem",opacity:.5,verticalAlign:"middle"},title:"PC-klient konfigureret",children:""})]}),o.jsx("span",{className:"gc-item-category",children:L(R.category)})]}),o.jsxs("div",{className:"gc-item-actions",children:[o.jsx("button",{className:`gc-toggle ${R.is_active?"gc-toggle--active":""}`,onClick:()=>F(R),title:R.is_active?"Deaktivr":"Aktivr",children:R.is_active?"Aktiv":"Inaktiv"}),o.jsx("button",{className:"gc-delete",onClick:()=>Z(R),title:"Slet spil",children:""})]})]}),S===R.id&&o.jsxs("div",{style:{background:"rgba(0,217,255,0.04)",border:"1px solid rgba(0,217,255,0.12)",borderRadius:"0 0 8px 8px",padding:"1rem 1.25rem",marginTop:"-1px",marginBottom:"0.5rem"},children:[o.jsx("p",{style:{fontSize:"0.8rem",opacity:.6,marginBottom:"0.75rem"},children:"PC-klient  disse felter bruges af Flango PC-klienten til at starte og overvge spillet."}),o.jsxs("div",{style:{marginBottom:"0.75rem"},children:[o.jsx("label",{style:{display:"block",fontSize:"0.8rem",opacity:.7,marginBottom:"0.25rem"},children:"Filsti (executable path)"}),o.jsx("input",{type:"text",className:"gc-input",value:j.executable_path,onChange:K=>E(N=>({...N,executable_path:K.target.value})),placeholder:"C:\\Program Files\\...\\spil.exe  eller  shell:AppsFolder\\...  eller  steam://...",style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{style:{marginBottom:"0.75rem"},children:[o.jsx("label",{style:{display:"block",fontSize:"0.8rem",opacity:.7,marginBottom:"0.25rem"},children:"Procesnavne (komma-separeret)"}),o.jsx("input",{type:"text",className:"gc-input",value:j.process_names,onChange:K=>E(N=>({...N,process_names:K.target.value})),placeholder:"spil.exe, launcher.exe",style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}}),o.jsx("span",{style:{fontSize:"0.75rem",opacity:.5},children:"Find i Jobliste > Detaljer nr spillet krer"})]}),o.jsxs("div",{style:{marginBottom:"0.75rem"},children:[o.jsx("label",{style:{display:"block",fontSize:"0.8rem",opacity:.7,marginBottom:"0.25rem"},children:"Start-argumenter (valgfrit)"}),o.jsx("input",{type:"text",className:"gc-input",value:j.launch_args,onChange:K=>E(N=>({...N,launch_args:K.target.value})),placeholder:"--fullscreen --no-update",style:{width:"100%",fontFamily:"monospace",fontSize:"0.85rem"}})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{className:"gc-btn gc-btn--save",onClick:()=>T(R),disabled:A===R.id,children:A===R.id?"Gemmer...":"Gem"}),o.jsx("button",{className:"gc-btn gc-btn--cancel",onClick:()=>{x(null),E({})},children:"Luk"})]})]})]},R.id))}),b?o.jsxs("div",{className:"gc-add-form",children:[o.jsx("input",{type:"text",className:"gc-input",value:f,onChange:R=>m(R.target.value),placeholder:"Spilnavn...",autoFocus:!0,onKeyDown:R=>R.key==="Enter"&&C()}),o.jsxs("select",{className:"gc-select",value:g,onChange:R=>p(R.target.value),children:[o.jsx("option",{value:"both",children:"Begge"}),o.jsx("option",{value:"pc",children:"PC"}),o.jsx("option",{value:"console",children:"Konsol"})]}),o.jsxs("div",{className:"gc-add-actions",children:[o.jsx("button",{className:"gc-btn gc-btn--save",onClick:C,children:"Tilfj"}),o.jsx("button",{className:"gc-btn gc-btn--cancel",onClick:()=>{w(!1),m("")},children:"Annullr"})]})]}):o.jsx("button",{className:"gc-btn gc-btn--add",onClick:()=>w(!0),children:"+ Tilfj spil"})]})]})})}async function sv(s){const{data:n,error:r}=await me.schema("gaming").from("users").select("id, flango_user_id, name, number, grade_level, nickname, balance_minutes, source, is_test_user, created_at").eq("institution_id",s).order("name");if(r)throw r;return n}async function iS(s,n,r,l){const{data:c,error:d}=await me.rpc("create_gaming_user",{p_institution_id:s,p_name:n,p_number:r||null,p_is_test_user:!1});if(d)throw d;return c}async function yd(s,n,r){const{data:l,error:c}=await me.rpc("update_gaming_user",{p_institution_id:s,p_user_id:n,p_name:r.name??null,p_number:r.number??null,p_grade_level:r.grade_level??null,p_nickname:r.nickname??null,p_balance_minutes:r.balance_minutes??null});if(c)throw c;return l}async function lS(s,n){const{error:r}=await me.rpc("delete_gaming_user",{p_institution_id:s,p_user_id:n});if(r)throw r}async function oS(s,n){const{data:r,error:l}=await me.rpc("bulk_create_gaming_users",{p_institution_id:s,p_users:n});if(l)throw l;return r}async function cS(s){const{data:n,error:r}=await me.rpc("delete_all_institution_users",{p_institution_id:s,p_target:"skaermtid"});if(r)throw r;return n}async function uS(s){const{data:n,error:r}=await me.from("institution_apps").select("is_enabled").eq("institution_id",s).eq("app_name","cafe").eq("is_enabled",!0).maybeSingle();return r?!1:!!n}async function dS(s){const{data:n,error:r}=await me.schema("gaming").rpc("get_sync_diff",{p_institution_id:s});if(r)throw r;return n}async function hS(s){const{data:n,error:r}=await me.schema("gaming").rpc("sync_from_cafe",{p_institution_id:s});if(r)throw r;return n}function fS({isOpen:s,onClose:n,institutionId:r,onSyncComplete:l}){const[c,d]=y.useState(null),[f,m]=y.useState(!0),[g,p]=y.useState(!1),[b,w]=y.useState(null),[S,x]=y.useState(null);y.useEffect(()=>{!s||!r||(m(!0),x(null),w(null),d(null),dS(r).then(A=>d(A)).catch(A=>x(A.message)).finally(()=>m(!1)))},[s,r]);const j=async()=>{p(!0),x(null);try{const A=await hS(r);w(A),l?.()}catch(A){x(A.message)}finally{p(!1)}};if(!s)return null;const E=c&&(c.to_create.length>0||c.to_update.length>0);return o.jsx("div",{className:"sm-overlay",onClick:n,children:o.jsxs("div",{className:"sm-modal",onClick:A=>A.stopPropagation(),children:[o.jsxs("div",{className:"sm-header",children:[o.jsx("h2",{children:"Synkroniser fra Cafe"}),o.jsx("button",{className:"sm-close",onClick:n,"aria-label":"Luk",children:""})]}),o.jsxs("div",{className:"sm-content",children:[f&&o.jsx("p",{className:"sm-loading",children:"Sammenligner brugerlister..."}),S&&o.jsx("div",{className:"sm-error",children:S}),c&&!b&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"sm-summary",children:[o.jsxs("span",{children:["Cafe-brugere: ",o.jsx("strong",{children:c.summary.total_cafe_users})]}),o.jsxs("span",{children:["Skaermtid-brugere: ",o.jsx("strong",{children:c.summary.total_gaming_users})]})]}),c.to_create.length>0&&o.jsxs("div",{className:"sm-section sm-section--create",children:[o.jsxs("h3",{children:["Nye brugere (",c.to_create.length,")"]}),o.jsx("p",{className:"sm-section-help",children:"Disse brugere findes i cafe-systemet men ikke i skaermtid endnu."}),o.jsxs("table",{className:"sm-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Navn"}),o.jsx("th",{children:"Nr."}),o.jsx("th",{children:"Klasse"})]})}),o.jsx("tbody",{children:c.to_create.map(A=>o.jsxs("tr",{children:[o.jsx("td",{children:A.name}),o.jsx("td",{children:A.number||"-"}),o.jsx("td",{children:A.grade_level!=null?`${A.grade_level}. kl`:"-"})]},A.public_user_id))})]})]}),c.to_update.length>0&&o.jsxs("div",{className:"sm-section sm-section--update",children:[o.jsxs("h3",{children:["Opdateringer (",c.to_update.length,")"]}),o.jsx("p",{className:"sm-section-help",children:"Disse brugere har aendrede felter i cafe-systemet."}),o.jsxs("table",{className:"sm-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Felt"}),o.jsx("th",{children:"Nuvaerende"}),o.jsx("th",{}),o.jsx("th",{children:"Ny"})]})}),o.jsx("tbody",{children:c.to_update.map(A=>o.jsxs(o.Fragment,{children:[A.name_changed&&o.jsxs("tr",{children:[o.jsx("td",{children:"Navn"}),o.jsx("td",{className:"sm-old",children:A.current_name}),o.jsx("td",{className:"sm-arrow",children:""}),o.jsx("td",{className:"sm-new",children:A.new_name})]},`${A.gaming_user_id}-name`),A.number_changed&&o.jsxs("tr",{children:[o.jsx("td",{children:"Nr."}),o.jsx("td",{className:"sm-old",children:A.current_number||"-"}),o.jsx("td",{className:"sm-arrow",children:""}),o.jsx("td",{className:"sm-new",children:A.new_number||"-"})]},`${A.gaming_user_id}-number`),A.grade_level_changed&&o.jsxs("tr",{children:[o.jsx("td",{children:"Klasse"}),o.jsx("td",{className:"sm-old",children:A.current_grade_level!=null?`${A.current_grade_level}.`:"-"}),o.jsx("td",{className:"sm-arrow",children:""}),o.jsx("td",{className:"sm-new",children:A.new_grade_level!=null?`${A.new_grade_level}.`:"-"})]},`${A.gaming_user_id}-grade`)]}))})]})]}),c.orphaned.length>0&&o.jsxs("div",{className:"sm-section sm-section--orphaned",children:[o.jsxs("h3",{children:["Kun i Skaermtid (",c.orphaned.length,")"]}),o.jsx("p",{className:"sm-section-help",children:"Disse brugere er linket til cafe men findes ikke laengere der."}),o.jsx("ul",{className:"sm-orphan-list",children:c.orphaned.map(A=>o.jsxs("li",{children:[A.name," ",A.number?`(#${A.number})`:""]},A.gaming_user_id))})]}),!E&&c.orphaned.length===0&&o.jsx("div",{className:"sm-up-to-date",children:"Brugerlisten er ajour med cafe-systemet."}),o.jsx("p",{className:"sm-notice",children:"Balance og kaldenavne berores ikke ved synkronisering."}),o.jsxs("div",{className:"sm-actions",children:[o.jsx("button",{className:"um-btn-secondary",onClick:n,children:"Luk"}),E&&o.jsx("button",{className:"um-btn-primary",onClick:j,disabled:g,children:g?"Synkroniserer...":`Synkroniser nu (${c.to_create.length+c.to_update.length} aendringer)`})]})]}),b&&o.jsxs("div",{className:"sm-result",children:[o.jsx("h3",{children:"Synkronisering faerdig"}),o.jsxs("div",{className:"sm-result-grid",children:[o.jsxs("div",{className:"sm-result-item sm-result-item--create",children:[o.jsx("span",{className:"sm-result-count",children:b.created}),o.jsx("span",{className:"sm-result-label",children:"oprettet"})]}),o.jsxs("div",{className:"sm-result-item sm-result-item--update",children:[o.jsx("span",{className:"sm-result-count",children:b.updated}),o.jsx("span",{className:"sm-result-label",children:"opdateret"})]}),b.orphaned>0&&o.jsxs("div",{className:"sm-result-item sm-result-item--orphaned",children:[o.jsx("span",{className:"sm-result-count",children:b.orphaned}),o.jsx("span",{className:"sm-result-label",children:"kun i skaermtid"})]})]}),o.jsx("div",{className:"sm-actions",children:o.jsx("button",{className:"um-btn-primary",onClick:n,children:"Luk"})})]})]})]})})}function vi({label:s,field:n,sortField:r,sortDirection:l,onSort:c}){const d=r===n;return o.jsxs("th",{onClick:()=>c(n),style:{cursor:"pointer",userSelect:"none",whiteSpace:"nowrap"},children:[s," ",d?l==="asc"?"":"":o.jsx("span",{style:{opacity:.3},children:""})]})}function mS(s,n,r){return n?[...s].sort((l,c)=>{let d=l[n],f=c[n];return d==null&&f==null?0:d==null?1:f==null?-1:typeof d=="number"&&typeof f=="number"?r==="asc"?d-f:f-d:(d=String(d).toLowerCase(),f=String(f).toLowerCase(),d<f?r==="asc"?-1:1:d>f?r==="asc"?1:-1:0)}):s}function gS({isOpen:s,onClose:n,institutionId:r}){const[l,c]=y.useState([]),[d,f]=y.useState(!0),[m,g]=y.useState("name"),[p,b]=y.useState("asc"),[w,S]=y.useState(!1),[x,j]=y.useState(!1),[E,A]=y.useState(!1),[z,I]=y.useState(null),[C,F]=y.useState(null),[Z,P]=y.useState(null),[T,L]=y.useState(15),[R,K]=y.useState(!1),[N,Y]=y.useState(!1),[se,X]=y.useState(!1),[le,M]=y.useState(!1),W={sortField:m,sortDirection:p,onSort:B=>{m===B?b(te=>te==="asc"?"desc":"asc"):(g(B),b("asc"))}},V=async()=>{if(r){f(!0);try{const B=await sv(r);c(B||[])}catch(B){console.error("Failed to load users:",B)}finally{f(!1)}}};y.useEffect(()=>{s&&(V(),r&&uS(r).then(X))},[s,r]);const fe=async(B,te)=>{if(confirm(`Slet skrmtid-bruger "${te}"?`)){F(B);try{await lS(r,B),V()}catch(G){alert("Fejl: "+G.message)}finally{F(null)}}},k=async()=>{if(!(!Z||T<=0)){K(!0);try{const B=(Z.balance_minutes??0)+T;await yd(r,Z.id,{name:Z.name,balance_minutes:B}),P(null),L(15),V()}catch(B){alert("Fejl: "+B.message)}finally{K(!1)}}},H=async B=>{if(confirm(`Nulstil saldo for "${B.name}" til standard?`))try{if(B.flango_user_id)await vd(B.flango_user_id);else{const G=(await xi())?.default_balance_minutes??30;await yd(r,B.id,{name:B.name,balance_minutes:G})}V()}catch(te){alert("Fejl: "+te.message)}},D=async()=>{if(confirm("Nulstil saldo for ALLE brugere til standard?")){Y(!0);try{await vd(null),V()}catch(B){alert("Fejl: "+B.message)}finally{Y(!1)}}};return s?o.jsx("div",{className:"um-overlay",onClick:n,children:o.jsxs("div",{className:"um-modal",onClick:B=>B.stopPropagation(),children:[o.jsxs("div",{className:"um-header",children:[o.jsx("h2",{children:"Skrmtid-brugere"}),o.jsx("button",{className:"um-close",onClick:n,children:""})]}),o.jsx("div",{className:"um-content",children:d?o.jsx("p",{className:"um-loading",children:"Indlser..."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"um-actions",children:[o.jsx("button",{className:"um-btn um-btn-primary",onClick:()=>S(!0),children:"+ Ny bruger"}),o.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>j(!0),children:"Importr CSV"}),se&&o.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>M(!0),children:"Synkroniser fra caf"}),o.jsx("button",{className:"um-btn um-btn-secondary",onClick:D,disabled:N,children:N?"Nulstiller...":"Nulstil alle saldoer"}),o.jsx("button",{className:"um-btn um-btn-danger",onClick:()=>A(!0),children:"Slet alle"})]}),o.jsx("div",{className:"um-table-wrap",children:o.jsxs("table",{className:"um-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx(vi,{label:"Navn",field:"name",...W}),o.jsx(vi,{label:"Nr",field:"number",...W}),o.jsx(vi,{label:"Klasse",field:"grade_level",...W}),o.jsx(vi,{label:"Kaldenavn",field:"nickname",...W}),o.jsx(vi,{label:"Balance",field:"balance_minutes",...W}),o.jsx("th",{children:"Kilde"}),o.jsx("th",{})]})}),o.jsxs("tbody",{children:[mS(l,m,p).map(B=>o.jsxs("tr",{children:[o.jsx("td",{children:B.name}),o.jsx("td",{children:B.number||"-"}),o.jsx("td",{children:B.grade_level!=null?`${B.grade_level}. kl`:"-"}),o.jsx("td",{children:B.nickname||"-"}),o.jsxs("td",{children:[B.balance_minutes," min"]}),o.jsx("td",{children:o.jsx("span",{className:`um-badge ${B.source}`,children:B.source==="cafe_sync"?"caf":"lokal"})}),o.jsxs("td",{className:"um-action-col",children:[o.jsx("button",{className:"um-btn-sm",onClick:()=>{P(B),L(15)},children:"Optank"}),o.jsx("button",{className:"um-btn-sm",onClick:()=>H(B),children:"Nulstil"}),o.jsx("button",{className:"um-btn-sm",onClick:()=>I(B),children:"Rediger"}),o.jsx("button",{className:"um-btn-sm danger",onClick:()=>fe(B.id,B.name),disabled:C===B.id,children:C===B.id?"...":"Slet"})]})]},B.id)),l.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"um-empty",children:"Ingen brugere"})})]})]})})]})}),w&&o.jsx(pS,{institutionId:r,onClose:()=>S(!1),onCreated:V}),x&&o.jsx(yS,{institutionId:r,onClose:()=>j(!1),onCreated:V}),E&&o.jsx(bS,{count:l.filter(B=>B.source==="standalone").length,onConfirm:async()=>{try{await cS(r),V()}catch(B){alert("Fejl: "+B.message)}A(!1)},onClose:()=>A(!1)}),z&&o.jsx(vS,{institutionId:r,user:z,onClose:()=>I(null),onSaved:()=>{I(null),V()}}),o.jsx(fS,{isOpen:le,onClose:()=>M(!1),institutionId:r,onSyncComplete:V}),Z&&o.jsx("div",{className:"um-sub-overlay",onClick:()=>P(null),children:o.jsxs("div",{className:"um-sub-modal",onClick:B=>B.stopPropagation(),children:[o.jsx("h3",{children:"Optank tid"}),o.jsxs("div",{className:"um-info",children:[o.jsx("p",{children:o.jsx("strong",{children:Z.name})}),o.jsxs("p",{children:["Nuvrende saldo: ",o.jsxs("strong",{children:[Z.balance_minutes??0," min"]})]})]}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Tilfj minutter"}),o.jsx("input",{type:"number",min:"1",value:T,onChange:B=>L(parseInt(B.target.value)||0),autoFocus:!0,onKeyDown:B=>{B.key==="Enter"&&k()}})]}),o.jsxs("div",{className:"um-modal-actions",children:[o.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>P(null),children:"Annuller"}),o.jsx("button",{className:"um-btn um-btn-primary",onClick:k,disabled:R||T<=0,children:R?"Tilfjer...":`+${T} min`})]})]})})]})}):null}function pS({institutionId:s,onClose:n,onCreated:r}){const[l,c]=y.useState(""),[d,f]=y.useState(""),[m,g]=y.useState(""),[p,b]=y.useState(!1),[w,S]=y.useState(null),x=async j=>{j.preventDefault(),b(!0),S(null);try{await iS(s,l.trim(),d.trim()||null,m?parseInt(m):null),r(),n()}catch(E){S(E.message)}finally{b(!1)}};return o.jsx("div",{className:"um-sub-overlay",onClick:n,children:o.jsxs("div",{className:"um-sub-modal",onClick:j=>j.stopPropagation(),children:[o.jsx("h3",{children:"Ny skrmtid-bruger"}),o.jsxs("form",{onSubmit:x,children:[w&&o.jsx("div",{className:"um-error",children:w}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Navn"}),o.jsx("input",{value:l,onChange:j=>c(j.target.value),autoFocus:!0,required:!0})]}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Nummer (valgfrit)"}),o.jsx("input",{value:d,onChange:j=>f(j.target.value),placeholder:"F.eks. 2501"})]}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Klasse (valgfrit)"}),o.jsx("input",{type:"number",value:m,onChange:j=>g(j.target.value),placeholder:"F.eks. 3",min:"0",max:"13"})]}),o.jsxs("div",{className:"um-modal-actions",children:[o.jsx("button",{type:"button",className:"um-btn um-btn-secondary",onClick:n,children:"Annuller"}),o.jsx("button",{type:"submit",className:"um-btn um-btn-primary",disabled:p,children:p?"Opretter...":"Opret"})]})]})]})})}function vS({institutionId:s,user:n,onClose:r,onSaved:l}){const[c,d]=y.useState(n.name||""),[f,m]=y.useState(n.number||""),[g,p]=y.useState(n.grade_level!=null?String(n.grade_level):""),[b,w]=y.useState(n.nickname||""),[S,x]=y.useState(String(n.balance_minutes??0)),[j,E]=y.useState(!1),[A,z]=y.useState(null),I=async C=>{if(C.preventDefault(),!c.trim()){z("Navn er pkrvet.");return}E(!0),z(null);try{await yd(s,n.id,{name:c.trim(),number:f.trim()||"",grade_level:g!==""?parseInt(g):null,nickname:b.trim()||"",balance_minutes:parseInt(S)||0}),l()}catch(F){z(F.message)}finally{E(!1)}};return o.jsx("div",{className:"um-sub-overlay",onClick:r,children:o.jsxs("div",{className:"um-sub-modal",onClick:C=>C.stopPropagation(),children:[o.jsx("h3",{children:"Rediger bruger"}),o.jsxs("form",{onSubmit:I,children:[A&&o.jsx("div",{className:"um-error",children:A}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Navn"}),o.jsx("input",{value:c,onChange:C=>d(C.target.value),autoFocus:!0,required:!0})]}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Nummer"}),o.jsx("input",{value:f,onChange:C=>m(C.target.value)})]}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Klasse"}),o.jsx("input",{type:"number",value:g,onChange:C=>p(C.target.value),min:"0",max:"13"})]}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Kaldenavn"}),o.jsx("input",{value:b,onChange:C=>w(C.target.value)})]}),o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Balance (minutter)"}),o.jsx("input",{type:"number",value:S,onChange:C=>x(C.target.value),min:"0"})]}),o.jsxs("div",{className:"um-modal-actions",children:[o.jsx("button",{type:"button",className:"um-btn um-btn-secondary",onClick:r,children:"Annuller"}),o.jsx("button",{type:"submit",className:"um-btn um-btn-primary",disabled:j,children:j?"Gemmer...":"Gem"})]})]})]})})}function yS({institutionId:s,onClose:n,onCreated:r}){const[l,c]=y.useState(null),[d,f]=y.useState(null),[m,g]=y.useState(!1),[p,b]=y.useState(!1),[w,S]=y.useState(null),[x,j]=y.useState(null),E=C=>{const F=C.target.files[0];if(!F)return;S(null),f(null);const Z=new FileReader;Z.onload=P=>{try{const T=P.target.result.split(/\r?\n/).filter(se=>se.trim());if(T.length<2){S("CSV skal have mindst en header og en data-linje.");return}const L=T[0].split(/[;,\t]/).map(se=>se.trim().toLowerCase()),R=L.findIndex(se=>["navn","name"].includes(se)),K=L.findIndex(se=>["klasse","class","grade_level","grade"].includes(se)),N=L.findIndex(se=>["nummer","number","nr"].includes(se));if(R===-1){S('CSV mangler en "navn" kolonne.');return}const Y=[];for(let se=1;se<T.length;se++){const X=T[se].split(/[;,\t]/).map($=>$.trim()),le=X[R];if(!le)continue;const M={name:le};if(K!==-1&&X[K]){const $=parseInt(X[K]);isNaN($)||(M.grade_level=$)}N!==-1&&X[N]&&(M.number=X[N]),Y.push(M)}c(Y),A(Y)}catch{S("Kunne ikke parse CSV-filen.")}},Z.readAsText(F)},A=async C=>{g(!0);try{const F=await sv(s)||[],Z=new Map;F.forEach(R=>Z.set(R.name.trim().toLowerCase(),R));const P=[],T=[],L=[];C.forEach(R=>{const K=R.name.trim().toLowerCase(),N=Z.get(K);if(!N)P.push({csv:R});else{const Y=[];R.grade_level!=null&&R.grade_level!==N.grade_level&&Y.push({field:"klasse",from:N.grade_level!=null?`${N.grade_level}. kl`:"-",to:`${R.grade_level}. kl`}),R.number&&R.number!==N.number&&Y.push({field:"nummer",from:N.number||"-",to:R.number}),Y.length>0?T.push({csv:R,changes:Y}):L.push({csv:R})}}),f({newUsers:P,updatedUsers:T,unchangedUsers:L})}catch(F){S("Sammenligning fejlede: "+F.message)}finally{g(!1)}},z=async()=>{b(!0),S(null);try{const C=await oS(s,l);j(C),r()}catch(C){S(C.message)}finally{b(!1)}},I=d&&(d.newUsers.length>0||d.updatedUsers.length>0);return o.jsx("div",{className:"um-sub-overlay",onClick:n,children:o.jsxs("div",{className:"um-sub-modal um-wide",onClick:C=>C.stopPropagation(),children:[o.jsx("h3",{children:"Importr CSV"}),w&&o.jsx("div",{className:"um-error",children:w}),x?o.jsxs("div",{children:[o.jsx("p",{children:"Import fuldfrt!"}),o.jsxs("div",{className:"um-info",children:[x.created>0&&o.jsxs("p",{children:["Oprettet: ",x.created]}),x.skipped>0&&o.jsxs("p",{children:["Sprunget over: ",x.skipped]})]}),o.jsx("button",{className:"um-btn um-btn-primary",onClick:n,children:"Luk"})]}):o.jsx(o.Fragment,{children:l?m?o.jsx("p",{children:"Sammenligner med database..."}):d?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"um-diff-summary",children:[o.jsxs("span",{className:"um-diff-new",children:[d.newUsers.length," nye"]}),o.jsxs("span",{className:"um-diff-update",children:[d.updatedUsers.length," opdateres"]}),o.jsxs("span",{className:"um-diff-unchanged",children:[d.unchangedUsers.length," undrede"]})]}),o.jsx("div",{className:"um-table-wrap",style:{maxHeight:"300px"},children:o.jsxs("table",{className:"um-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Navn"}),o.jsx("th",{children:"Klasse"}),l.some(C=>C.number)&&o.jsx("th",{children:"Nr"}),o.jsx("th",{children:"Status"})]})}),o.jsxs("tbody",{children:[d.updatedUsers.map((C,F)=>o.jsxs("tr",{className:"um-row-update",children:[o.jsx("td",{children:C.csv.name}),o.jsx("td",{children:C.changes.find(Z=>Z.field==="klasse")?o.jsxs(o.Fragment,{children:[o.jsx("s",{children:C.changes.find(Z=>Z.field==="klasse").from}),"  ",o.jsx("strong",{children:C.changes.find(Z=>Z.field==="klasse").to})]}):C.csv.grade_level!=null?`${C.csv.grade_level}. kl`:"-"}),l.some(Z=>Z.number)&&o.jsx("td",{children:C.csv.number||"-"}),o.jsx("td",{children:o.jsx("span",{className:"um-status-update",children:"opdateres"})})]},`u-${F}`)),d.newUsers.map((C,F)=>o.jsxs("tr",{className:"um-row-new",children:[o.jsx("td",{children:C.csv.name}),o.jsx("td",{children:C.csv.grade_level!=null?`${C.csv.grade_level}. kl`:"-"}),l.some(Z=>Z.number)&&o.jsx("td",{children:C.csv.number||"-"}),o.jsx("td",{children:o.jsx("span",{className:"um-status-new",children:"ny"})})]},`n-${F}`)),d.unchangedUsers.map((C,F)=>o.jsxs("tr",{className:"um-row-unchanged",children:[o.jsx("td",{children:C.csv.name}),o.jsx("td",{children:C.csv.grade_level!=null?`${C.csv.grade_level}. kl`:"-"}),l.some(Z=>Z.number)&&o.jsx("td",{children:C.csv.number||"-"}),o.jsx("td",{children:o.jsx("span",{className:"um-status-unchanged",children:"undret"})})]},`c-${F}`))]})]})}),o.jsxs("div",{className:"um-modal-actions",children:[o.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>{c(null),f(null)},children:"Vlg ny fil"}),o.jsx("button",{className:"um-btn um-btn-secondary",onClick:n,children:"Annuller"}),I?o.jsx("button",{className:"um-btn um-btn-primary",onClick:z,disabled:p,children:p?"Importerer...":`Importr (${d.newUsers.length} nye, ${d.updatedUsers.length} opdateringer)`}):o.jsx("button",{className:"um-btn um-btn-primary",disabled:!0,children:"Ingen ndringer"})]})]}):null:o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"um-field",children:[o.jsx("label",{children:"Vlg CSV-fil (kolonner: navn, klasse)"}),o.jsx("input",{type:"file",accept:".csv,.txt,.tsv",onChange:E})]}),o.jsx("div",{className:"um-modal-actions",children:o.jsx("button",{className:"um-btn um-btn-secondary",onClick:n,children:"Annuller"})})]})})]})})}function bS({count:s,onConfirm:n,onClose:r}){const[l,c]=y.useState(""),[d,f]=y.useState(!1),m=async()=>{f(!0),await n(),f(!1)};return o.jsx("div",{className:"um-sub-overlay",onClick:r,children:o.jsxs("div",{className:"um-sub-modal",onClick:g=>g.stopPropagation(),children:[o.jsx("h3",{style:{color:"#ef4444"},children:"Slet alle skrmtid-brugere"}),o.jsxs("p",{children:["Er du sikker? ",o.jsx("strong",{children:s})," standalone-brugere slettes permanent."]}),o.jsx("p",{className:"um-warn",children:"Caf-synkede brugere berres ikke."}),o.jsxs("div",{className:"um-field",children:[o.jsxs("label",{children:["Skriv ",o.jsx("strong",{children:"SLET ALLE"})," for at bekrfte:"]}),o.jsx("input",{value:l,onChange:g=>c(g.target.value),placeholder:"SLET ALLE",autoFocus:!0,disabled:d})]}),o.jsxs("div",{className:"um-modal-actions",children:[o.jsx("button",{className:"um-btn um-btn-secondary",onClick:r,disabled:d,children:"Annuller"}),o.jsx("button",{className:"um-btn um-btn-danger",onClick:m,disabled:d||l!=="SLET ALLE",children:d?"Sletter...":`Slet ${s} brugere`})]})]})})}async function _S(s){const{data:n,error:r}=await me.schema("gaming").from("admins").select("id, user_id, name, email, created_at").eq("institution_id",s).order("name");if(r)throw r;return n}async function wS(s,n,r){const{data:l,error:c}=await me.functions.invoke("create-gaming-admin",{body:{institution_id:s,email:n,name:r}});if(c)throw c;if(l?.error)throw new Error(l.error);return l}async function SS(s,n,r){const{data:l,error:c}=await me.schema("gaming").from("admins").update({name:r}).eq("id",n).eq("institution_id",s).select().single();if(c)throw c;return l}async function xS(s,n,r){const{data:l,error:c}=await me.functions.invoke("update-admin-email",{body:{institution_id:s,admin_id:n,new_email:r}});if(c)throw c;if(l?.error)throw new Error(l.error);return l}async function jS(s,n){const{data:r,error:l}=await me.functions.invoke("reset-admin-password",{body:{user_id:n,institution_id:s}});if(l)throw l;if(r?.error)throw new Error(r.error);return r}async function kS(s,n){const{data:r,error:l}=await me.functions.invoke("delete-gaming-admin",{body:{admin_id:n,institution_id:s}});if(l)throw l;if(r?.error)throw new Error(r.error);return r}function ES({isOpen:s,onClose:n,institutionId:r}){const[l,c]=y.useState([]),[d,f]=y.useState(!0),[m,g]=y.useState(null),[p,b]=y.useState(null),[w,S]=y.useState(!1),[x,j]=y.useState(null),[E,A]=y.useState(null),[z,I]=y.useState(null),[C,F]=y.useState(null),[Z,P]=y.useState(null),[T,L]=y.useState(!1),[R,K]=y.useState(""),[N,Y]=y.useState(""),[se,X]=y.useState(""),[le,M]=y.useState("");y.useEffect(()=>{!s||!r||($(),me.auth.getUser().then(({data:D})=>{b(D?.user?.id||null)}))},[s,r]);const $=async()=>{f(!0),g(null);try{const D=await _S(r);c(D||[])}catch(D){g(D.message)}finally{f(!1)}},W=()=>{S(!1),j(null),A(null),I(null),F(null),P(null),L(!1),K(""),Y(""),X(""),M("")},V=async()=>{if(!(!R.trim()||!N.trim())){L(!0),P(null);try{const D=await wS(r,N.trim(),R.trim());F(D.temp_password),await $()}catch(D){P(D.message)}finally{L(!1)}}},fe=async()=>{if(se.trim()){L(!0),P(null);try{se.trim()!==x.name&&await SS(r,x.id,se.trim()),le.trim()&&le.trim()!==x.email&&await xS(r,x.id,le.trim()),await $(),W()}catch(D){P(D.message)}finally{L(!1)}}},k=async()=>{L(!0),P(null);try{const D=await jS(r,E.user_id);F(D.temp_password),A(null)}catch(D){P(D.message)}finally{L(!1)}},H=async()=>{L(!0),P(null);try{await kS(r,z.id),await $(),W()}catch(D){P(D.message)}finally{L(!1)}};return s?o.jsxs("div",{className:"am-overlay",onClick:n,children:[o.jsxs("div",{className:"am-modal",onClick:D=>D.stopPropagation(),children:[o.jsxs("div",{className:"am-header",children:[o.jsx("h2",{children:"Administrer admins"}),o.jsx("button",{className:"am-close",onClick:n,"aria-label":"Luk",children:""})]}),o.jsxs("div",{className:"am-content",children:[m&&o.jsx("div",{className:"am-error",children:m}),o.jsx("div",{className:"am-toolbar",children:o.jsx("button",{className:"um-btn-primary",onClick:()=>{W(),S(!0)},children:"+ Opret admin"})}),d?o.jsx("div",{className:"am-loading",children:"Indlaeser admins..."}):l.length===0?o.jsx("div",{className:"am-empty",children:"Ingen admins fundet. Opret den foerste admin ovenfor."}):o.jsx("div",{className:"am-table-wrap",children:o.jsxs("table",{className:"am-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Navn"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Oprettet"}),o.jsx("th",{children:"Handlinger"})]})}),o.jsx("tbody",{children:l.map(D=>{const B=D.user_id===p;return o.jsxs("tr",{className:B?"am-self-row":"",children:[o.jsxs("td",{children:[D.name,B&&o.jsx("span",{className:"am-self-badge",children:"dig"})]}),o.jsx("td",{children:D.email||"-"}),o.jsx("td",{children:D.created_at?new Date(D.created_at).toLocaleDateString("da-DK"):"-"}),o.jsx("td",{children:o.jsxs("div",{className:"am-actions",children:[o.jsx("button",{className:"am-action-edit",onClick:()=>{W(),X(D.name),M(D.email||""),j(D)},children:"Rediger"}),o.jsx("button",{className:"am-action-reset",onClick:()=>{W(),A(D)},children:"Nulstil kode"}),!B&&o.jsx("button",{className:"am-action-delete",onClick:()=>{W(),I(D)},children:"Slet"})]})})]},D.id)})})]})}),C&&o.jsxs("div",{className:"am-temp-password",children:[o.jsx("p",{children:"Midlertidig adgangskode"}),o.jsx("code",{children:C}),o.jsx("small",{children:"Kopier koden og giv den til admin. Den skal aendres ved foerste login."}),o.jsx("div",{className:"am-sub-actions",style:{justifyContent:"center",marginTop:"0.75rem"},children:o.jsx("button",{className:"um-btn-secondary",onClick:()=>F(null),children:"Luk"})})]})]})]}),w&&!C&&o.jsx("div",{className:"am-sub-overlay",onClick:W,children:o.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[o.jsx("h3",{children:"Opret ny admin"}),Z&&o.jsx("div",{className:"am-error",children:Z}),o.jsxs("div",{className:"am-field",children:[o.jsx("label",{children:"Navn"}),o.jsx("input",{type:"text",value:R,onChange:D=>K(D.target.value),placeholder:"Fulde navn",autoFocus:!0})]}),o.jsxs("div",{className:"am-field",children:[o.jsx("label",{children:"Email"}),o.jsx("input",{type:"email",value:N,onChange:D=>Y(D.target.value),placeholder:"email@eksempel.dk"})]}),o.jsxs("div",{className:"am-sub-actions",children:[o.jsx("button",{className:"um-btn-secondary",onClick:W,disabled:T,children:"Annuller"}),o.jsx("button",{className:"um-btn-primary",onClick:V,disabled:T||!R.trim()||!N.trim(),children:T?"Opretter...":"Opret admin"})]})]})}),x&&o.jsx("div",{className:"am-sub-overlay",onClick:W,children:o.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[o.jsx("h3",{children:"Rediger admin"}),Z&&o.jsx("div",{className:"am-error",children:Z}),o.jsxs("div",{className:"am-field",children:[o.jsx("label",{children:"Navn"}),o.jsx("input",{type:"text",value:se,onChange:D=>X(D.target.value),autoFocus:!0})]}),o.jsxs("div",{className:"am-field",children:[o.jsx("label",{children:"Email"}),o.jsx("input",{type:"email",value:le,onChange:D=>M(D.target.value)})]}),o.jsxs("div",{className:"am-sub-actions",children:[o.jsx("button",{className:"um-btn-secondary",onClick:W,disabled:T,children:"Annuller"}),o.jsx("button",{className:"um-btn-primary",onClick:fe,disabled:T||!se.trim(),children:T?"Gemmer...":"Gem"})]})]})}),E&&!C&&o.jsx("div",{className:"am-sub-overlay",onClick:W,children:o.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[o.jsx("h3",{children:"Nulstil adgangskode"}),Z&&o.jsx("div",{className:"am-error",children:Z}),o.jsxs("p",{className:"am-confirm-text",children:["Nulstil adgangskoden for ",o.jsx("strong",{children:E.name}),"?"]}),o.jsx("p",{className:"am-confirm-warn",children:"En ny midlertidig kode genereres som admin skal bruge ved naeste login."}),o.jsxs("div",{className:"am-sub-actions",children:[o.jsx("button",{className:"um-btn-secondary",onClick:W,disabled:T,children:"Annuller"}),o.jsx("button",{className:"um-btn-primary",onClick:k,disabled:T,children:T?"Nulstiller...":"Nulstil kode"})]})]})}),z&&o.jsx("div",{className:"am-sub-overlay",onClick:W,children:o.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[o.jsx("h3",{children:"Slet admin"}),Z&&o.jsx("div",{className:"am-error",children:Z}),o.jsxs("p",{className:"am-confirm-text",children:["Er du sikker paa at du vil slette ",o.jsx("strong",{children:z.name}),"?"]}),o.jsx("p",{className:"am-confirm-warn",children:"Admin mister adgang til skaermtid og kan ikke logge ind laengere. Denne handling kan ikke fortrydes."}),o.jsxs("div",{className:"am-sub-actions",children:[o.jsx("button",{className:"um-btn-secondary",onClick:W,disabled:T,children:"Annuller"}),o.jsx("button",{className:"um-btn-danger",onClick:H,disabled:T,children:T?"Sletter...":"Slet admin"})]})]})})]}):null}function TS({isOpen:s,onClose:n,institutionId:r=null,onOpenLayoutEditor:l,onSettingsSaved:c}){const[d,f]=y.useState(null),[m,g]=y.useState(!1),[p,b]=y.useState(!1),[w,S]=y.useState(null),[x,j]=y.useState(null),[E,A]=y.useState({}),[z,I]=y.useState(null),[C,F]=y.useState(!1),[Z,P]=y.useState({id:null,name:null}),[T,L]=y.useState(!1),[R,K]=y.useState(""),[N,Y]=y.useState(""),[se,X]=y.useState(!1),[le,M]=y.useState(null),[$,W]=y.useState(!1),[V,fe]=y.useState(!1),[k,H]=y.useState(""),[D,B]=y.useState(!1),[te,G]=y.useState(!1),[re,de]=y.useState(!1),[he,pe]=y.useState(""),[Te,Le]=y.useState(!1),[Ue,Re]=y.useState(!1),[Oe,$e]=y.useState(!1);y.useEffect(()=>{s&&(xe(),S(null),j(null),A({}))},[s]);const xe=async()=>{g(!0),S(null);try{const[ne,ze,ke]=await Promise.all([xi(),mp(),Wp()]);if(ne?f(ne):S("Kunne ikke hente indstillinger"),I(ze??null),P(ke??{id:null,name:null}),ke?.id)try{const{data:ft}=await me.from("institutions").select("login_code, operator_enabled").eq("id",ke.id).single();M(ft?.login_code||null),B(ft?.operator_enabled===!0)}catch{}}catch(ne){console.error("Error loading settings:",ne),S("Fejl ved indlsning af indstillinger")}finally{g(!1)}},Ee=async()=>{if(!d)return;const ne=Fw(d);if(!ne.valid){A(ne.errors),S("Ret venligst fejlene fr du gemmer");return}A({}),b(!0),S(null),j(null);try{const[ze,ke]=await Promise.all([Mw(d),z?Xw(z):Promise.resolve(!0)]);if(ze&&ke){j("Indstillinger gemt!");const Fe=(await mp())?.skaermtid_enabled===!0;j(`Indstillinger gemt! ${Fe?"Skrmtid i portalen er slet til (lst tilbage fra DB).":"Kontrol: Skrmtid i portalen lst tilbage som slet fra  tjek at Skrmtid bruger samme Supabase-projekt som forldreportalen (jbknjgbpghrbrstqwoxj)."}`),setTimeout(()=>j(null),8e3),c?.()}else S("Kunne ikke gemme indstillinger")}catch(ze){console.error("Error saving settings:",ze),S("Fejl ved gemning af indstillinger")}finally{b(!1)}},Ie=async()=>{if(R.length<6){S("Adgangskoden skal vre mindst 6 tegn.");return}if(R!==N){S("Adgangskoderne er ikke ens.");return}X(!0),S(null);try{const{error:ne}=await me.auth.updateUser({password:R});if(ne)throw ne;j("Admin-kode ndret!"),L(!1),K(""),Y(""),setTimeout(()=>j(null),3e3)}catch(ne){S(ne.message||"Kunne ikke ndre adgangskode.")}finally{X(!1)}},ge=async()=>{const ne=k.trim();if(!ne){S("Indtast en kode.");return}if(ne.length<4||ne.length>8){S("Koden skal vre mellem 4 og 8 tegn.");return}fe(!0),S(null);try{const{data:ze,error:ke}=await me.rpc("rotate_invite_code",{p_institution_id:Z.id,p_code:ne});if(ke)throw ke;M(ne),W(!0),H(""),j("Institutionskode gemt!"),setTimeout(()=>j(null),3e3)}catch(ze){S(ze.message||"Kunne ikke gemme kode.")}finally{fe(!1)}},ve=async()=>{if(!Z.id)return;const ne=he.trim();if(!ne){S("Indtast en operatr-kode.");return}if(ne.length<4||ne.length>8){S("Operatr-koden skal vre mellem 4 og 8 tegn.");return}G(!0),S(null);try{const ze=await eS(Z.id,ne);ze.error?S(ze.error):(B(!0),pe(""),j("Operatr-kode gemt!"),setTimeout(()=>j(null),3e3))}catch(ze){S(ze.message||"Kunne ikke gemme operatr-kode.")}finally{G(!1)}},be=async()=>{if(Z.id&&D){de(!0),S(null);try{const ne=await tS(Z.id);ne.error?S(ne.error):(B(!1),pe(""),j("Operatr-login deaktiveret."),setTimeout(()=>j(null),3e3))}catch(ne){S(ne.message||"Kunne ikke ndre operatr-status.")}finally{de(!1)}}},[De,oe]=y.useState(null);y.useEffect(()=>{s&&oe(null)},[s]);const ye=[{key:"policy",icon:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),title:"Skrmtidspolitik",description:"Saldo, sessioner og automatisk nulstilling"},{key:"queue",icon:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),title:"K & Mdepligt",description:"Khndtering og mdepligtsregler"},{key:"display",icon:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),o.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),title:"Rum & Visning",description:"Titel, visning og lydeffekter"},...z?[{key:"portal",icon:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),o.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),title:"Portal Integration",description:"Forldreportal og spilkatalog"}]:[],{key:"client-setup",icon:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"4",y:"2",width:"16",height:"12",rx:"2"}),o.jsx("line",{x1:"8",y1:"18",x2:"16",y2:"18"}),o.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"18"}),o.jsx("path",{d:"M9 22h6"})]}),title:"Klient Opstning",description:"Automatisk tidsstyring p gaming-PC'er"},{key:"users",icon:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),title:"Administrer brugere",description:"Brugere, saldoer og tidsoptankning",direct:!0},{key:"security",icon:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),title:"Adgang & Sikkerhed",description:"Koder, operatr-login og adgangskode"}],Be=ye.find(ne=>ne.key===De);if(!s)return null;const Me=()=>{switch(De){case"policy":return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Standard Saldo"}),o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:["Standard tid (minutter):",o.jsx("input",{type:"number",min:"0",max:"480",value:d.default_balance_minutes||30,onChange:ne=>f({...d,default_balance_minutes:parseInt(ne.target.value)||0}),className:E.default_balance_minutes?"input-error":""})]}),E.default_balance_minutes&&o.jsx("span",{className:"field-error",children:E.default_balance_minutes[0]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Maksimal Session-lngde"}),o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:["Maksimal tid pr. session (minutter):",o.jsx("input",{type:"number",min:"1",max:"120",value:d.max_session_minutes||30,onChange:ne=>f({...d,max_session_minutes:parseInt(ne.target.value)||1}),className:E.max_session_minutes?"input-error":""})]}),E.max_session_minutes&&o.jsx("span",{className:"field-error",children:E.max_session_minutes[0]}),o.jsx("p",{className:"settings-help",children:"En session kan aldrig overstige denne tid, uanset brugerens saldo."})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Automatisk Nulstilling"}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.auto_reset_enabled||!1,onChange:ne=>f({...d,auto_reset_enabled:ne.target.checked})}),"Aktivr automatisk nulstilling"]})}),d.auto_reset_enabled&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:["Reset-tidspunkt (HH:MM):",o.jsx("input",{type:"time",value:d.auto_reset_time||"00:00",onChange:ne=>f({...d,auto_reset_time:ne.target.value+":00"})})]})}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:["Frekvens:",o.jsxs("select",{value:d.auto_reset_frequency||"daily",onChange:ne=>f({...d,auto_reset_frequency:ne.target.value}),children:[o.jsx("option",{value:"daily",children:"Dagligt"}),o.jsx("option",{value:"weekly",children:"Ugentligt"})]})]})}),d.auto_reset_frequency==="weekly"&&o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:["Ugedag:",o.jsxs("select",{value:d.auto_reset_weekday??0,onChange:ne=>f({...d,auto_reset_weekday:parseInt(ne.target.value)}),children:[o.jsx("option",{value:"0",children:"Sndag"}),o.jsx("option",{value:"1",children:"Mandag"}),o.jsx("option",{value:"2",children:"Tirsdag"}),o.jsx("option",{value:"3",children:"Onsdag"}),o.jsx("option",{value:"4",children:"Torsdag"}),o.jsx("option",{value:"5",children:"Fredag"}),o.jsx("option",{value:"6",children:"Lrdag"})]})]})})]})]}),o.jsx("div",{className:"settings-actions",children:o.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Ee,disabled:p,children:p?"Gemmer...":"Gem indstillinger"})})]});case"queue":return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Mdepligt"}),o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.queue_attendance_enabled||!1,onChange:ne=>f({...d,queue_attendance_enabled:ne.target.checked})}),"Aktivr mdepligt"]}),o.jsx("p",{className:"settings-help",children:"Nr et barn er nste i ken og bliver kaldt, har de et tidsvindue til at mde op. Mder de ikke, mister de deres plads og ken rykker videre."})]}),d.queue_attendance_enabled&&o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:["Ventetid (sekunder):",o.jsx("input",{type:"number",min:"30",max:"900",value:d.queue_attendance_timeout_seconds||300,onChange:ne=>f({...d,queue_attendance_timeout_seconds:parseInt(ne.target.value)||300}),className:E.queue_attendance_timeout_seconds?"input-error":""})]}),E.queue_attendance_timeout_seconds&&o.jsx("span",{className:"field-error",children:E.queue_attendance_timeout_seconds[0]}),o.jsx("p",{className:"settings-help",children:"Hvor lang tid barnet har til at mde op (30-900 sekunder). Standard: 300 sekunder (5 minutter)."})]})]}),o.jsx("div",{className:"settings-actions",children:o.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Ee,disabled:p,children:p?"Gemmer...":"Gem indstillinger"})})]});case"display":return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Rum & Visning"}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:["Rummets navn:",o.jsx("input",{type:"text",value:d.room_title||"",onChange:ne=>f({...d,room_title:ne.target.value}),placeholder:"Spillerummet",style:{width:"100%",padding:"0.75rem 1rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(0,217,255,0.3)",borderRadius:"6px",color:"var(--text-primary, #fff)",fontSize:"1rem"}})]})}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.show_room_title_dashboard!==!1,onChange:ne=>f({...d,show_room_title_dashboard:ne.target.checked})}),"Vis titel i kontrolpanelet"]})}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.show_room_title_viewmode!==!1,onChange:ne=>f({...d,show_room_title_viewmode:ne.target.checked})}),"Vis titel i View-tilstand"]})}),o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.sound_enabled!==!1,onChange:ne=>f({...d,sound_enabled:ne.target.checked})}),"Afspil lyde"]}),o.jsx("p",{className:"settings-help",children:"Lydeffekter ved session-udlb og k-kald."})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Puls-effekt (Glow)"}),o.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Den pulserende lyseffekt rundt om stationer. Styr styrke separat for kontrolpanel og TV-visning."}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.pulse_enabled_dashboard!==!1,onChange:ne=>f({...d,pulse_enabled_dashboard:ne.target.checked})}),"Vis puls i kontrolpanelet"]})}),d.pulse_enabled_dashboard!==!1&&o.jsx("div",{className:"settings-field",style:{paddingLeft:"1.5rem"},children:o.jsxs("label",{className:"settings-range-label",children:["Intensitet: ",o.jsxs("strong",{children:[d.pulse_intensity_dashboard??50,"%"]}),o.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:d.pulse_intensity_dashboard??50,onChange:ne=>f({...d,pulse_intensity_dashboard:parseInt(ne.target.value)}),className:"settings-range"})]})}),o.jsx("div",{className:"settings-field",style:{marginTop:"0.5rem"},children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.pulse_enabled_viewmode!==!1,onChange:ne=>f({...d,pulse_enabled_viewmode:ne.target.checked})}),"Vis puls i View-tilstand (TV)"]})}),d.pulse_enabled_viewmode!==!1&&o.jsx("div",{className:"settings-field",style:{paddingLeft:"1.5rem"},children:o.jsxs("label",{className:"settings-range-label",children:["Intensitet: ",o.jsxs("strong",{children:[d.pulse_intensity_viewmode??50,"%"]}),o.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:d.pulse_intensity_viewmode??50,onChange:ne=>f({...d,pulse_intensity_viewmode:parseInt(ne.target.value)}),className:"settings-range"})]})})]}),l&&o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Layout"}),o.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Placr og tilpas stationernes position og strrelse p dashboardet."}),o.jsxs("button",{className:"settings-btn settings-btn-secondary",onClick:l,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),o.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Rediger layout"]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"rgangsfilter"}),o.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Vis filtreringsknapper i brugervalg-dialogen, s man hurtigt kan filtrere efter klasse/rgang."}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:d.grade_filter_enabled||!1,onChange:ne=>f({...d,grade_filter_enabled:ne.target.checked})}),"Aktivr rgangsfilter"]})}),d.grade_filter_enabled&&o.jsxs("div",{className:"settings-grade-picker",children:[o.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.5rem"},children:"Vlg hvilke rgange der vises som filterknapper:"}),o.jsx("div",{className:"settings-grade-grid",children:[0,1,2,3,4,5,6,7,8,9,10].map(ne=>{const ze=d.grade_filter_levels||[],ke=ze.includes(ne);return o.jsxs("label",{className:"settings-grade-option",children:[o.jsx("input",{type:"checkbox",checked:ke,onChange:()=>{const ft=ke?ze.filter(Fe=>Fe!==ne):[...ze,ne].sort((Fe,vt)=>Fe-vt);f({...d,grade_filter_levels:ft})}}),ne,". klasse"]},ne)})})]})]}),o.jsx("div",{className:"settings-actions",children:o.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Ee,disabled:p,children:p?"Gemmer...":"Gem indstillinger"})})]});case"portal":return z?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:z.skaermtid_enabled||!1,onChange:ne=>I({...z,skaermtid_enabled:ne.target.checked})}),"Aktivr Skrmtid i forldreportalen"]}),o.jsx("p",{className:"settings-help",children:"Gr det muligt for forldre at se og styre deres barns skrmtid via forldreportalen."})]}),z.skaermtid_enabled&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"settings-subsection",children:[o.jsx("h4",{children:"Forldre kan se:"}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:z.skaermtid_show_usage!==!1,onChange:ne=>I({...z,skaermtid_show_usage:ne.target.checked})}),"Forbrug (brugte minutter)"]})}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:z.skaermtid_show_remaining!==!1,onChange:ne=>I({...z,skaermtid_show_remaining:ne.target.checked})}),"Resterende tid"]})}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:z.skaermtid_show_rules!==!1,onChange:ne=>I({...z,skaermtid_show_rules:ne.target.checked})}),"Institutions-regler"]})})]}),o.jsxs("div",{className:"settings-subsection",children:[o.jsx("h4",{children:"Forldre kan gre:"}),o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:z.skaermtid_allow_personal_limits||!1,onChange:ne=>I({...z,skaermtid_allow_personal_limits:ne.target.checked})}),"St personlige grnser"]}),o.jsx("p",{className:"settings-help",children:"Forldre kan stte lavere grnser (aldrig over institutions-regler)."})]}),o.jsxs("div",{className:"settings-field",children:[o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:z.skaermtid_allow_extra_time_requests||!1,onChange:ne=>I({...z,skaermtid_allow_extra_time_requests:ne.target.checked})}),"Samtykke til forlnget spilletid"]}),o.jsx("p",{className:"settings-help",children:"Forldre kan vlge at give forudgende samtykke til, at personalet undtagelsesvis m forlnge deres barns spilletid. Samtykket giver ikke barnet ekstra rettigheder og udlser ikke automatiske forlngelser  det fungerer udelukkende som pdagogisk beslutningssttte for personalet."})]}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:z.skaermtid_allow_game_approval||!1,onChange:ne=>I({...z,skaermtid_allow_game_approval:ne.target.checked})}),"Godkend spil fra kataloget"]})})]}),o.jsx("div",{className:"settings-admin-actions",children:o.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>F(!0),children:"Administrer spilkatalog"})})]})]}),o.jsx("div",{className:"settings-actions",children:o.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Ee,disabled:p,children:p?"Gemmer...":"Gem indstillinger"})})]}):null;case"users":return o.jsx(o.Fragment,{children:o.jsxs("div",{className:"settings-section",children:[o.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Opret, rediger og slet skrmtid-brugere. Optank tid og nulstil saldoer direkte i brugertabellen."}),o.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>Le(!0),style:{width:"100%",textAlign:"left",padding:"1rem 1.25rem"},children:"Administrer brugere"})]})});case"client-setup":return o.jsxs(o.Fragment,{children:[Oe&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"flex-start",overflowY:"auto",padding:"2rem 1rem"},onClick:()=>$e(!1),children:o.jsxs("div",{style:{background:"#1a1d23",borderRadius:"16px",maxWidth:"800px",width:"100%",padding:"2.5rem",color:"#e2e8f0",position:"relative",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},onClick:ne=>ne.stopPropagation(),children:[o.jsx("button",{onClick:()=>$e(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"rgba(255,255,255,0.1)",border:"none",color:"#fff",fontSize:"1.5rem",cursor:"pointer",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),o.jsx("h2",{style:{fontSize:"1.6rem",fontWeight:700,marginBottom:"0.5rem"},children:"Komplet guide: Flango PC-klient"}),o.jsx("p",{style:{opacity:.6,marginBottom:"2rem",fontSize:"0.9rem"},children:"Automatisk tidsstyring p jeres gaming-PC'er"}),o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"#00d9ff",fontSize:"1.15rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{background:"#00d9ff",color:"#1a1d23",borderRadius:"50%",width:"28px",height:"28px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:"1"}),"Forudstninger"]}),o.jsx("p",{style:{lineHeight:1.7,marginBottom:"0.75rem"},children:"Inden I installerer PC-klienten skal disse ting vre p plads:"}),o.jsx("div",{style:{background:"rgba(0,217,255,0.06)",border:"1px solid rgba(0,217,255,0.15)",borderRadius:"8px",padding:"1rem 1.25rem"},children:o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Opret stationer"}),' i dette kontrolpanel. G til Layout-editoren og opret en station for hver gaming-PC (f.eks. "PC-1", "PC-2"). Typen skal vre ',o.jsx("strong",{children:"PC"}),"."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Tilfj spil"}),' til spilkataloget (knappen "Spilkatalog" i menuen). Hvert spil skal have et navn og en kategori. Felterne til filsti og procesnavn udfyldes efter installation (se del 4).']}),o.jsxs("li",{children:[o.jsx("strong",{children:"St tidsregler"}),' under "Indstillinger"  standard-minutter pr. dag og max sessionslngde.']}),o.jsxs("li",{children:[o.jsx("strong",{children:"Windows 10/11"})," (64-bit) med internetforbindelse p alle gaming-PC'er."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Administratorrettigheder"})," p gaming-PC'en til installation."]})]})})]}),o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"#00d9ff",fontSize:"1.15rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{background:"#00d9ff",color:"#1a1d23",borderRadius:"50%",width:"28px",height:"28px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:"2"}),"Installation og opstning"]}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2.2},children:[o.jsx("li",{children:"Download installationsfilen (knappen nedenfor) og kr den p gaming-PC'en."}),o.jsx("li",{children:"Programmet starter automatisk efter installation."}),o.jsxs("li",{children:["Indtast ",o.jsx("strong",{children:"institutionens navn"}),"  prcis som det vises herunder: ",o.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"4px"},children:Z?.name||""})]}),o.jsxs("li",{children:["Indtast ",o.jsx("strong",{children:"institutionskoden"}),": ",o.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:"4px",fontFamily:"monospace"},children:le||"(ikke sat)"})]}),o.jsx("li",{children:'Vlg den station som denne PC skal tilknyttes (f.eks. "PC-1"). Stationer der allerede er tilknyttet en anden PC vises med orange mrke.'}),o.jsx("li",{children:"Bekrft  PC'en er nu tilknyttet og klar til brug."})]}),o.jsx("p",{style:{marginTop:"0.5rem",opacity:.7,fontSize:"0.9rem"},children:"Gentag trin 16 for hver gaming-PC."})]}),o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"#00d9ff",fontSize:"1.15rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{background:"#00d9ff",color:"#1a1d23",borderRadius:"50%",width:"28px",height:"28px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:"3"}),"Sdan fungerer PC-klienten"]}),o.jsxs("p",{style:{lineHeight:1.7,marginBottom:"1rem"},children:["Nr klienten er installeret, krer den i ",o.jsx("strong",{children:"kiosk-tilstand"}),"  et fuldskrmsprogram som brnene ikke kan lukke."]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.04)",borderRadius:"8px",padding:"1.25rem",marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem"},children:"Dagligt flow for brnene:"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2},children:[o.jsx("li",{children:"Barnet ser en ventescreen med nummerfeltet  ligesom en pinkode-ls."}),o.jsxs("li",{children:["Barnet taster sit ",o.jsx("strong",{children:"kontonummer"}),' (det samme som i cafen) og trykker "Start".']}),o.jsxs("li",{children:["Klienten tjekker automatisk barnets ",o.jsx("strong",{children:"minutter-saldo"})," og forldres tidsgrnser."]}),o.jsx("li",{children:"Barnet vlger et spil fra listen af godkendte spil."}),o.jsxs("li",{children:["Spillet starter, og en ",o.jsx("strong",{children:"nedtlling"})," krer. Barnet fr en advarsel 5 minutter fr tiden udlber (orange bjlke) og igen 1 minut fr (rd bjlke)."]}),o.jsx("li",{children:"Nr tiden udlber, lukkes spillet automatisk, og PC'en vender tilbage til venteskrmen."})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.04)",borderRadius:"8px",padding:"1.25rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem"},children:"Sikkerhed og beskyttelse:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Tastatur-blokering:"})," Alt+Tab, Alt+F4, Windows-tasten, Start-menuen og andre system-genveje er blokeret under en session."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Proces-overvgning:"})," Hvert 3. sekund scanner klienten alle krende programmer. Alt der ikke er p en whitelist (system-processer, Flango, spil-launchers) lukkes automatisk."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Automatisk oprydning:"})," Nr en session slutter, ryddes Temp-filer, Downloads-mappen og skrivebordet. Lydstyrken nulstilles til 50%."]})]})]})]}),o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"#00d9ff",fontSize:"1.15rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{background:"#00d9ff",color:"#1a1d23",borderRadius:"50%",width:"28px",height:"28px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:"4"}),"Tilfj spil til kataloget"]}),o.jsxs("p",{style:{lineHeight:1.7,marginBottom:"1rem"},children:["For at PC-klienten kan starte spil automatisk, skal hvert spil have en ",o.jsx("strong",{children:"filsti"})," (executable path) og ",o.jsx("strong",{children:"procesnavne"}),". Disse udfyldes i Spilkataloget."]}),o.jsxs("div",{style:{background:"rgba(0,217,255,0.06)",border:"1px solid rgba(0,217,255,0.15)",borderRadius:"8px",padding:"1rem 1.25rem",marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.75rem"},children:"Der er tre typer spil:"}),o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[o.jsx("th",{style:{textAlign:"left",padding:"0.5rem 0.75rem",opacity:.7},children:"Type"}),o.jsx("th",{style:{textAlign:"left",padding:"0.5rem 0.75rem",opacity:.7},children:"Filsti-format"}),o.jsx("th",{style:{textAlign:"left",padding:"0.5rem 0.75rem",opacity:.7},children:"Eksempel"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx("td",{style:{padding:"0.5rem 0.75rem"},children:"Direkte .exe"}),o.jsx("td",{style:{padding:"0.5rem 0.75rem",fontFamily:"monospace",fontSize:"0.8rem"},children:"C:\\sti\\til\\spil.exe"}),o.jsx("td",{style:{padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:"Minecraft, lokalt installeret spil"})]}),o.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[o.jsx("td",{style:{padding:"0.5rem 0.75rem"},children:"Microsoft Store / UWP"}),o.jsx("td",{style:{padding:"0.5rem 0.75rem",fontFamily:"monospace",fontSize:"0.8rem"},children:"shell:AppsFolder\\..."}),o.jsx("td",{style:{padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:"Roblox fra Microsoft Store"})]}),o.jsxs("tr",{children:[o.jsx("td",{style:{padding:"0.5rem 0.75rem"},children:"Protokol / Launcher"}),o.jsx("td",{style:{padding:"0.5rem 0.75rem",fontFamily:"monospace",fontSize:"0.8rem"},children:"steam://rungameid/..."}),o.jsx("td",{style:{padding:"0.5rem 0.75rem",fontSize:"0.85rem"},children:"Steam-spil, Epic Games"})]})]})]})]}),o.jsxs("div",{style:{background:"rgba(255,200,0,0.08)",border:"1px solid rgba(255,200,0,0.2)",borderRadius:"8px",padding:"1rem 1.25rem",marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem",color:"#fbbf24"},children:"Sdan finder du filstien:"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2,fontSize:"0.9rem"},children:[o.jsx("li",{children:"Hjreklik p spillets genvej (p skrivebordet eller i Start-menuen)."}),o.jsxs("li",{children:["Vlg ",o.jsx("strong",{children:'"Egenskaber"'})," (Properties)."]}),o.jsxs("li",{children:['Under fanen "Genvej" (Shortcut) finder du feltet ',o.jsx("strong",{children:'"Ml"'})," (Target)  det er filstien."]}),o.jsx("li",{children:'Kopir hele stien og indst i spilkatalogets "Filsti"-felt.'})]})]}),o.jsxs("div",{style:{background:"rgba(255,200,0,0.08)",border:"1px solid rgba(255,200,0,0.2)",borderRadius:"8px",padding:"1rem 1.25rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem",color:"#fbbf24"},children:"Sdan finder du procesnavnet:"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2,fontSize:"0.9rem"},children:[o.jsx("li",{children:"Start spillet manuelt p PC'en."}),o.jsxs("li",{children:["bn ",o.jsx("strong",{children:"Jobliste"})," (Task Manager) med Ctrl+Shift+Esc."]}),o.jsx("li",{children:'Find spillet under fanen "Processer" og hjreklik.'}),o.jsxs("li",{children:["Vlg ",o.jsx("strong",{children:'"G til detaljer"'}),"  procesnavnet vises med .exe (f.eks. ",o.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"3px"},children:"javaw.exe"}),")."]}),o.jsx("li",{children:'Indtast procesnavnet i spilkatalogets "Procesnavne"-felt. Nogle spil har flere processer (f.eks. launcher + selve spillet).'})]})]})]}),o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"#00d9ff",fontSize:"1.15rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{background:"#00d9ff",color:"#1a1d23",borderRadius:"50%",width:"28px",height:"28px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:"5"}),"Admin-adgang (ndudgang)"]}),o.jsx("p",{style:{lineHeight:1.7,marginBottom:"1rem"},children:"Personale kan altid komme ud af kiosk-tilstanden for at installere spil, opdatere Windows eller fejlsge."}),o.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",border:"1px solid rgba(139,92,246,0.25)",borderRadius:"8px",padding:"1rem 1.25rem"},children:[o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2.2},children:[o.jsxs("li",{children:["Tryk ",o.jsx("kbd",{style:{background:"rgba(255,255,255,0.15)",padding:"2px 8px",borderRadius:"4px",fontSize:"0.85rem",fontFamily:"monospace"},children:"Ctrl + Shift + F12"}),"  en password-dialog vises."]}),o.jsxs("li",{children:["Indtast admin-passwordet (standard: ",o.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"3px"},children:"flango"}),")."]}),o.jsx("li",{children:"Flango minimeres og alle sikkerhedsforanstaltninger deaktiveres midlertidigt."}),o.jsx("li",{children:"Udfr det ndvendige (installr spil, opdatr osv.)."}),o.jsxs("li",{children:["Klik ",o.jsx("strong",{children:'"Tilbage til Flango"'})," i det minimerede vindue  kiosk-mode genaktiveres."]})]}),o.jsx("p",{style:{marginTop:"0.75rem",opacity:.7,fontSize:"0.85rem"},children:"Vi anbefaler at ndre standard-passwordet til noget personalet kender, men som brnene ikke gtter."})]})]}),o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("h3",{style:{color:"#00d9ff",fontSize:"1.15rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{background:"#00d9ff",color:"#1a1d23",borderRadius:"50%",width:"28px",height:"28px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:"6"}),"Anbefalet Windows-opstning"]}),o.jsxs("p",{style:{lineHeight:1.7,marginBottom:"1rem"},children:["Flango blokerer de fleste system-genveje, men nogle ting krver opstning i Windows selv. Disse trin er ",o.jsx("strong",{children:"valgfrie"})," men anbefales for at gre PC'erne endnu mere brnesikre."]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.04)",borderRadius:"8px",padding:"1rem 1.25rem",marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem"},children:"Windows Auto-login (anbefalet):"}),o.jsx("p",{style:{lineHeight:1.7,fontSize:"0.9rem",marginBottom:"0.5rem"},children:`Opret en separat Windows-brugerkonto (f.eks. "Gamer") med standard-rettigheder (ikke administrator). Konfigurr Windows til automatisk login, s PC'en starter direkte til skrivebordet uden at brnene skal logge ind.`}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2,fontSize:"0.9rem"},children:[o.jsxs("li",{children:["Opret en ny lokal brugerkonto under ",o.jsx("strong",{children:"Indstillinger > Konti > Andre brugere"}),"."]}),o.jsxs("li",{children:["Tryk ",o.jsx("kbd",{style:{background:"rgba(255,255,255,0.15)",padding:"2px 6px",borderRadius:"3px",fontSize:"0.8rem"},children:"Win + R"}),", skriv ",o.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"3px"},children:"netplwiz"})," og tryk Enter."]}),o.jsx("li",{children:'Fjern fluebenet ved "Brugere skal angive brugernavn og adgangskode" og vlg den nye konto.'})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.04)",borderRadius:"8px",padding:"1rem 1.25rem",marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem"},children:"Auto-start af Flango (anbefalet):"}),o.jsx("p",{style:{lineHeight:1.7,fontSize:"0.9rem"},children:"Flango br starte automatisk nr PC'en tndes. Installationsprogrammet tilbyder dette som valgmulighed, men det kan ogs gres manuelt:"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2,fontSize:"0.9rem"},children:[o.jsxs("li",{children:["Tryk ",o.jsx("kbd",{style:{background:"rgba(255,255,255,0.15)",padding:"2px 6px",borderRadius:"3px",fontSize:"0.8rem"},children:"Win + R"}),", skriv ",o.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"3px"},children:"shell:startup"})," og tryk Enter."]}),o.jsx("li",{children:"Opret en genvej til Flango Skrmtid i denne mappe."})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.04)",borderRadius:"8px",padding:"1rem 1.25rem",marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem"},children:"Bloker Ctrl+Alt+Delete (valgfrit, krver Windows Pro):"}),o.jsx("p",{style:{lineHeight:1.7,fontSize:"0.9rem"},children:"Flango kan ikke blokere Ctrl+Alt+Delete  det krver Group Policy i Windows Pro/Enterprise:"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2,fontSize:"0.9rem"},children:[o.jsxs("li",{children:["Tryk ",o.jsx("kbd",{style:{background:"rgba(255,255,255,0.15)",padding:"2px 6px",borderRadius:"3px",fontSize:"0.8rem"},children:"Win + R"}),", skriv ",o.jsx("code",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 6px",borderRadius:"3px"},children:"gpedit.msc"}),"."]}),o.jsxs("li",{children:["G til ",o.jsx("strong",{children:"User Configuration > Administrative Templates > System > Ctrl+Alt+Del Options"}),"."]}),o.jsx("li",{children:'Aktivr: "Remove Task Manager", "Remove Lock Computer", "Remove Change Password".'})]})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.04)",borderRadius:"8px",padding:"1rem 1.25rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.5rem"},children:"BIOS-sikring (valgfrit):"}),o.jsx("p",{style:{lineHeight:1.7,fontSize:"0.9rem"},children:"For at forhindre at brn starter PC'en fra USB eller ndrer boot-indstillinger:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:2,fontSize:"0.9rem"},children:[o.jsx("li",{children:"Deaktivr boot fra USB/CD under Boot-indstillinger i BIOS."}),o.jsx("li",{children:"St et BIOS-password s kun personale kan ndre indstillinger."}),o.jsx("li",{children:"BIOS bnes typisk ved at trykke F2, F10 eller Delete under opstart  det varierer efter producent."})]})]})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsxs("h3",{style:{color:"#00d9ff",fontSize:"1.15rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{background:"#00d9ff",color:"#1a1d23",borderRadius:"50%",width:"28px",height:"28px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"0.85rem",fontWeight:700,flexShrink:0},children:"7"}),"Fejlfinding"]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.04)",borderRadius:"8px",padding:"1rem 1.25rem"},children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.25rem"},children:'"Ingen stationer fundet" under opstning'}),o.jsx("p",{style:{opacity:.7,fontSize:"0.9rem",lineHeight:1.6},children:'Tjek at institutionsnavnet er stavet prcis som vist ovenfor, og at institutionskoden er korrekt. Tjek ogs at der er oprettet stationer af typen "PC" i dette kontrolpanel.'})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Spil starter ikke"}),o.jsx("p",{style:{opacity:.7,fontSize:"0.9rem",lineHeight:1.6},children:"Brug admin-adgang (Ctrl+Shift+F12) til at komme ud af kiosk-mode. Start spillet manuelt og tjek at filstien i spilkataloget er korrekt. Husk at spillet skal vre installeret p den specifikke PC."})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Barnet har 0 minutter"}),o.jsx("p",{style:{opacity:.7,fontSize:"0.9rem",lineHeight:1.6},children:'Minutsaldoen nulstilles automatisk (dagligt eller ugentligt afhngigt af jeres indstillinger). Personale kan manuelt justere saldoen fra dette kontrolpanel under "Brugere".'})]}),o.jsxs("div",{children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"PC'en fryser eller Flango lukker ned"}),o.jsx("p",{style:{opacity:.7,fontSize:"0.9rem",lineHeight:1.6},children:"Genstart PC'en  Flango starter automatisk igen hvis den er sat op til auto-start. Sessionen afbrydes, men barnets minut-saldo er allerede trukket korrekt."})]})]})]})]})}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Opstning af PC-klient"}),o.jsx("p",{className:"settings-help",style:{marginTop:0},children:"Installer Flango PC-klient p jeres gaming-PC'er for automatisk tidsstyring. Hvert barn logger ind med sit kontonummer, og PC'en holder styr p tid og spil."}),o.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>$e(!0),style:{width:"100%",textAlign:"left",padding:"1rem 1.25rem",marginBottom:"1rem"},children:o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),o.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Komplet opstningsguide",o.jsx("span",{style:{opacity:.5,fontSize:"0.85rem",marginLeft:"auto"},children:"Installation, spil, sikkerhed, fejlfinding"})]})}),o.jsxs("div",{style:{background:"rgba(0, 217, 255, 0.05)",border:"1px solid rgba(0, 217, 255, 0.2)",borderRadius:"8px",padding:"1.25rem",marginBottom:"1rem"},children:[o.jsx("p",{style:{fontWeight:600,marginBottom:"0.75rem",fontSize:"0.95rem"},children:"Hurtig-opstning:"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem",lineHeight:"2.2",fontSize:"0.95rem"},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Opret stationer"})," i dette kontrolpanel (Layout-editoren)  n pr. gaming-PC"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Download"})," installationsfilen herunder og installr p gaming-PC'en"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Start"})," Flango Skrmtid p PC'en"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Indtast institutionens navn"}),"  prcis som vist herunder"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Indtast institutionens kode"}),"  den samme kode I bruger til at logge ind her"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Vlg station"})," fra listen og bekrft  PC'en er klar!"]})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Jeres institutionsoplysninger"}),o.jsx("p",{className:"settings-help",style:{marginTop:0},children:"Disse oplysninger skal indtastes i PC-klienten under opstning."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[o.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"0.75rem 1rem",borderRadius:"8px",flex:"1 1 180px",border:"1px solid rgba(255,255,255,0.08)"},children:[o.jsx("span",{style:{opacity:.5,fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Institutionsnavn"}),o.jsx("div",{style:{fontWeight:700,fontSize:"1.15rem",marginTop:"0.35rem"},children:Z?.name||""})]}),o.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"0.75rem 1rem",borderRadius:"8px",flex:"1 1 180px",border:"1px solid rgba(255,255,255,0.08)"},children:[o.jsx("span",{style:{opacity:.5,fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Institutionskode"}),o.jsx("div",{style:{fontWeight:700,fontSize:"1.15rem",marginTop:"0.35rem",fontFamily:"monospace"},children:le||"(ikke sat)"})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Download"}),o.jsxs("a",{href:"https://github.com/theisonflango/flango-releases/releases/download/pc-client-v0.1.0/Flango-Skaermtid-0.1.0-Setup.exe",target:"_blank",rel:"noopener noreferrer",className:"settings-btn settings-btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",textDecoration:"none",cursor:"pointer"},children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Download Flango PC-klient (Windows)"]}),o.jsx("p",{className:"settings-help",style:{marginTop:"0.5rem"},children:"Krver Windows 10 eller nyere (64-bit). Installr p hver gaming-PC."})]})]});case"security":return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Institutionskode"}),o.jsx("p",{className:"settings-help",children:"Denne kode bruges af personalet for at komme til login-siden."}),le&&o.jsxs("div",{className:"settings-field",style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[o.jsx("span",{style:{opacity:.7},children:"Nuvrende kode:"}),o.jsx("code",{style:{background:"rgba(255,255,255,0.08)",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"1.25rem",fontWeight:"bold",letterSpacing:"0.1em",userSelect:"all"},children:$?le:""}),o.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>W(!$),style:{minWidth:"auto"},children:$?"Skjul":"Vis"})]}),o.jsxs("div",{className:"settings-field",style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("input",{type:"text",value:k,onChange:ne=>H(ne.target.value),placeholder:le?"Ny kode (4-8 tegn)":"Vlg kode (4-8 tegn)",maxLength:8,style:{width:"180px",padding:"0.5rem 0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(0,217,255,0.3)",borderRadius:"6px",color:"var(--text-primary, #fff)",fontSize:"1rem",letterSpacing:"0.1em"}}),o.jsx("button",{className:"settings-btn settings-btn-primary",onClick:ge,disabled:V||!k.trim(),style:{minWidth:"auto"},children:V?"...":"Gem kode"})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Operatr-login"}),o.jsx("p",{className:"settings-help",children:"Operatrer kan betjene stationer (start/stop sessioner, ker, vlge brugere) uden adgang til indstillinger eller brugerstyring."}),D&&o.jsx("div",{className:"settings-field",style:{marginBottom:"0.5rem"},children:o.jsx("span",{style:{color:"rgba(0, 217, 255, 0.9)",fontWeight:500},children:" Operatr-login er aktivt"})}),o.jsxs("div",{className:"settings-field",style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("input",{type:"text",value:he,onChange:ne=>pe(ne.target.value),placeholder:D?"Ny kode (4-8 tegn)":"Vlg kode (4-8 tegn)",maxLength:8,style:{width:"180px",padding:"0.5rem 0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(0,217,255,0.3)",borderRadius:"6px",color:"var(--text-primary, #fff)",fontSize:"1rem",letterSpacing:"0.1em"}}),o.jsx("button",{className:"settings-btn settings-btn-primary",onClick:ve,disabled:te||!he.trim(),style:{minWidth:"auto"},children:te?"...":D?"Gem ny kode":"Aktivr"}),D&&o.jsx("button",{className:"settings-btn settings-btn-danger",onClick:be,disabled:re,style:{minWidth:"auto"},children:re?"...":"Deaktivr"})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Administrer admins"}),o.jsx("p",{className:"settings-help",children:"Opret, rediger og slet admin-brugere til skrmtid-appen."}),o.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>Re(!0),style:{width:"100%",textAlign:"left",padding:"1rem 1.25rem"},children:"Administrer admins"})]}),o.jsxs("div",{className:"settings-section",children:[o.jsx("h3",{children:"Skift admin-kode"}),T?o.jsxs("div",{className:"settings-password-change",children:[o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:["Ny adgangskode:",o.jsx("input",{type:"password",value:R,onChange:ne=>K(ne.target.value),placeholder:"Mindst 6 tegn",autoComplete:"new-password"})]})}),o.jsx("div",{className:"settings-field",children:o.jsxs("label",{children:["Bekrft adgangskode:",o.jsx("input",{type:"password",value:N,onChange:ne=>Y(ne.target.value),placeholder:"Gentag adgangskode",autoComplete:"new-password"})]})}),o.jsxs("div",{className:"settings-admin-actions",children:[o.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Ie,disabled:se||!R||!N,children:se?"Gemmer...":"Gem ny adgangskode"}),o.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>{L(!1),K(""),Y("")},children:"Annuller"})]})]}):o.jsx("div",{className:"settings-admin-actions",children:o.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>L(!0),children:"Skift min adgangskode"})})]})]});default:return null}};return o.jsx("div",{className:"settings-overlay",onClick:n,children:o.jsxs("div",{className:"settings-modal",onClick:ne=>ne.stopPropagation(),children:[o.jsxs("div",{className:"settings-header",children:[De?o.jsx("button",{className:"settings-back-btn",onClick:()=>oe(null),"aria-label":"Tilbage",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}):null,o.jsx("h2",{children:Be?Be.title:"Indstillinger"}),o.jsx("button",{className:"settings-close",onClick:n,"aria-label":"Luk",children:""})]}),w&&o.jsx("div",{className:"settings-error",children:w}),x&&o.jsx("div",{className:"settings-success",children:x}),m&&!d?o.jsx("div",{className:"settings-loading",children:"Indlser indstillinger..."}):d?o.jsx("div",{className:"settings-content",children:De===null?o.jsx("div",{className:"settings-menu",children:ye.map(ne=>o.jsxs("button",{className:"settings-menu-btn",onClick:()=>ne.direct?Le(!0):oe(ne.key),children:[o.jsx("span",{className:"settings-menu-btn__icon",children:ne.icon}),o.jsxs("span",{className:"settings-menu-btn__text",children:[o.jsx("span",{className:"settings-menu-btn__title",children:ne.title}),o.jsx("span",{className:"settings-menu-btn__desc",children:ne.description})]}),o.jsx("svg",{className:"settings-menu-btn__arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})]},ne.key))}):Me()}):null,C&&o.jsx(rS,{isOpen:C,onClose:()=>F(!1)}),Te&&o.jsx(gS,{isOpen:Te,onClose:()=>Le(!1),institutionId:r}),Ue&&o.jsx(ES,{isOpen:Ue,onClose:()=>Re(!1),institutionId:r})]})})}var _i=Mp();function CS(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return y.useMemo(()=>l=>{n.forEach(c=>c(l))},n)}const So=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xr(s){const n=Object.prototype.toString.call(s);return n==="[object Window]"||n==="[object global]"}function Ad(s){return"nodeType"in s}function ln(s){var n,r;return s?xr(s)?s:Ad(s)&&(n=(r=s.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function Rd(s){const{Document:n}=ln(s);return s instanceof n}function qi(s){return xr(s)?!1:s instanceof ln(s).HTMLElement}function av(s){return s instanceof ln(s).SVGElement}function jr(s){return s?xr(s)?s.document:Ad(s)?Rd(s)?s:qi(s)||av(s)?s.ownerDocument:document:document:document}const Wn=So?y.useLayoutEffect:y.useEffect;function Od(s){const n=y.useRef(s);return Wn(()=>{n.current=s}),y.useCallback(function(){for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return n.current==null?void 0:n.current(...l)},[])}function NS(){const s=y.useRef(null),n=y.useCallback((l,c)=>{s.current=setInterval(l,c)},[]),r=y.useCallback(()=>{s.current!==null&&(clearInterval(s.current),s.current=null)},[]);return[n,r]}function Mi(s,n){n===void 0&&(n=[s]);const r=y.useRef(s);return Wn(()=>{r.current!==s&&(r.current=s)},n),r}function $i(s,n){const r=y.useRef();return y.useMemo(()=>{const l=s(r.current);return r.current=l,l},[...n])}function mo(s){const n=Od(s),r=y.useRef(null),l=y.useCallback(c=>{c!==r.current&&n?.(c,r.current),r.current=c},[]);return[r,l]}function bd(s){const n=y.useRef();return y.useEffect(()=>{n.current=s},[s]),n.current}let ed={};function Hi(s,n){return y.useMemo(()=>{if(n)return n;const r=ed[s]==null?0:ed[s]+1;return ed[s]=r,s+"-"+r},[s,n])}function rv(s){return function(n){for(var r=arguments.length,l=new Array(r>1?r-1:0),c=1;c<r;c++)l[c-1]=arguments[c];return l.reduce((d,f)=>{const m=Object.entries(f);for(const[g,p]of m){const b=d[g];b!=null&&(d[g]=b+s*p)}return d},{...n})}}const wr=rv(1),Ui=rv(-1);function AS(s){return"clientX"in s&&"clientY"in s}function Dd(s){if(!s)return!1;const{KeyboardEvent:n}=ln(s.target);return n&&s instanceof n}function RS(s){if(!s)return!1;const{TouchEvent:n}=ln(s.target);return n&&s instanceof n}function _d(s){if(RS(s)){if(s.touches&&s.touches.length){const{clientX:n,clientY:r}=s.touches[0];return{x:n,y:r}}else if(s.changedTouches&&s.changedTouches.length){const{clientX:n,clientY:r}=s.changedTouches[0];return{x:n,y:r}}}return AS(s)?{x:s.clientX,y:s.clientY}:null}const zi=Object.freeze({Translate:{toString(s){if(!s)return;const{x:n,y:r}=s;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(s){if(!s)return;const{scaleX:n,scaleY:r}=s;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(s){if(s)return[zi.Translate.toString(s),zi.Scale.toString(s)].join(" ")}},Transition:{toString(s){let{property:n,duration:r,easing:l}=s;return n+" "+r+"ms "+l}}}),pp="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function OS(s){return s.matches(pp)?s:s.querySelector(pp)}const DS={display:"none"};function MS(s){let{id:n,value:r}=s;return rn.createElement("div",{id:n,style:DS},r)}function US(s){let{id:n,announcement:r,ariaLiveType:l="assertive"}=s;const c={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return rn.createElement("div",{id:n,style:c,role:"status","aria-live":l,"aria-atomic":!0},r)}function zS(){const[s,n]=y.useState("");return{announce:y.useCallback(l=>{l!=null&&n(l)},[]),announcement:s}}const iv=y.createContext(null);function LS(s){const n=y.useContext(iv);y.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(s)},[s,n])}function BS(){const[s]=y.useState(()=>new Set),n=y.useCallback(l=>(s.add(l),()=>s.delete(l)),[s]);return[y.useCallback(l=>{let{type:c,event:d}=l;s.forEach(f=>{var m;return(m=f[c])==null?void 0:m.call(f,d)})},[s]),n]}const qS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$S={onDragStart(s){let{active:n}=s;return"Picked up draggable item "+n.id+"."},onDragOver(s){let{active:n,over:r}=s;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(s){let{active:n,over:r}=s;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(s){let{active:n}=s;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function HS(s){let{announcements:n=$S,container:r,hiddenTextDescribedById:l,screenReaderInstructions:c=qS}=s;const{announce:d,announcement:f}=zS(),m=Hi("DndLiveRegion"),[g,p]=y.useState(!1);if(y.useEffect(()=>{p(!0)},[]),LS(y.useMemo(()=>({onDragStart(w){let{active:S}=w;d(n.onDragStart({active:S}))},onDragMove(w){let{active:S,over:x}=w;n.onDragMove&&d(n.onDragMove({active:S,over:x}))},onDragOver(w){let{active:S,over:x}=w;d(n.onDragOver({active:S,over:x}))},onDragEnd(w){let{active:S,over:x}=w;d(n.onDragEnd({active:S,over:x}))},onDragCancel(w){let{active:S,over:x}=w;d(n.onDragCancel({active:S,over:x}))}}),[d,n])),!g)return null;const b=rn.createElement(rn.Fragment,null,rn.createElement(MS,{id:l,value:c.draggable}),rn.createElement(US,{id:m,announcement:f}));return r?_i.createPortal(b,r):b}var Dt;(function(s){s.DragStart="dragStart",s.DragMove="dragMove",s.DragEnd="dragEnd",s.DragCancel="dragCancel",s.DragOver="dragOver",s.RegisterDroppable="registerDroppable",s.SetDroppableDisabled="setDroppableDisabled",s.UnregisterDroppable="unregisterDroppable"})(Dt||(Dt={}));function go(){}function vp(s,n){return y.useMemo(()=>({sensor:s,options:n??{}}),[s,n])}function IS(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return y.useMemo(()=>[...n].filter(l=>l!=null),[...n])}const Vn=Object.freeze({x:0,y:0});function lv(s,n){return Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2))}function ov(s,n){let{data:{value:r}}=s,{data:{value:l}}=n;return r-l}function GS(s,n){let{data:{value:r}}=s,{data:{value:l}}=n;return l-r}function yp(s){let{left:n,top:r,height:l,width:c}=s;return[{x:n,y:r},{x:n+c,y:r},{x:n,y:r+l},{x:n+c,y:r+l}]}function cv(s,n){if(!s||s.length===0)return null;const[r]=s;return r[n]}function bp(s,n,r){return n===void 0&&(n=s.left),r===void 0&&(r=s.top),{x:n+s.width*.5,y:r+s.height*.5}}const KS=s=>{let{collisionRect:n,droppableRects:r,droppableContainers:l}=s;const c=bp(n,n.left,n.top),d=[];for(const f of l){const{id:m}=f,g=r.get(m);if(g){const p=lv(bp(g),c);d.push({id:m,data:{droppableContainer:f,value:p}})}}return d.sort(ov)},VS=s=>{let{collisionRect:n,droppableRects:r,droppableContainers:l}=s;const c=yp(n),d=[];for(const f of l){const{id:m}=f,g=r.get(m);if(g){const p=yp(g),b=c.reduce((S,x,j)=>S+lv(p[j],x),0),w=Number((b/4).toFixed(4));d.push({id:m,data:{droppableContainer:f,value:w}})}}return d.sort(ov)};function PS(s,n){const r=Math.max(n.top,s.top),l=Math.max(n.left,s.left),c=Math.min(n.left+n.width,s.left+s.width),d=Math.min(n.top+n.height,s.top+s.height),f=c-l,m=d-r;if(l<c&&r<d){const g=n.width*n.height,p=s.width*s.height,b=f*m,w=b/(g+p-b);return Number(w.toFixed(4))}return 0}const YS=s=>{let{collisionRect:n,droppableRects:r,droppableContainers:l}=s;const c=[];for(const d of l){const{id:f}=d,m=r.get(f);if(m){const g=PS(m,n);g>0&&c.push({id:f,data:{droppableContainer:d,value:g}})}}return c.sort(GS)};function QS(s,n,r){return{...s,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function uv(s,n){return s&&n?{x:s.left-n.left,y:s.top-n.top}:Vn}function XS(s){return function(r){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];return c.reduce((f,m)=>({...f,top:f.top+s*m.y,bottom:f.bottom+s*m.y,left:f.left+s*m.x,right:f.right+s*m.x}),{...r})}}const JS=XS(1);function ZS(s){if(s.startsWith("matrix3d(")){const n=s.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(s.startsWith("matrix(")){const n=s.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function WS(s,n,r){const l=ZS(n);if(!l)return s;const{scaleX:c,scaleY:d,x:f,y:m}=l,g=s.left-f-(1-c)*parseFloat(r),p=s.top-m-(1-d)*parseFloat(r.slice(r.indexOf(" ")+1)),b=c?s.width/c:s.width,w=d?s.height/d:s.height;return{width:b,height:w,top:p,right:g+b,bottom:p+w,left:g}}const FS={ignoreTransform:!1};function kr(s,n){n===void 0&&(n=FS);let r=s.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:b}=ln(s).getComputedStyle(s);p&&(r=WS(r,p,b))}const{top:l,left:c,width:d,height:f,bottom:m,right:g}=r;return{top:l,left:c,width:d,height:f,bottom:m,right:g}}function _p(s){return kr(s,{ignoreTransform:!0})}function ex(s){const n=s.innerWidth,r=s.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function tx(s,n){return n===void 0&&(n=ln(s).getComputedStyle(s)),n.position==="fixed"}function nx(s,n){n===void 0&&(n=ln(s).getComputedStyle(s));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(c=>{const d=n[c];return typeof d=="string"?r.test(d):!1})}function xo(s,n){const r=[];function l(c){if(n!=null&&r.length>=n||!c)return r;if(Rd(c)&&c.scrollingElement!=null&&!r.includes(c.scrollingElement))return r.push(c.scrollingElement),r;if(!qi(c)||av(c)||r.includes(c))return r;const d=ln(s).getComputedStyle(c);return c!==s&&nx(c,d)&&r.push(c),tx(c,d)?r:l(c.parentNode)}return s?l(s):r}function dv(s){const[n]=xo(s,1);return n??null}function td(s){return!So||!s?null:xr(s)?s:Ad(s)?Rd(s)||s===jr(s).scrollingElement?window:qi(s)?s:null:null}function hv(s){return xr(s)?s.scrollX:s.scrollLeft}function fv(s){return xr(s)?s.scrollY:s.scrollTop}function wd(s){return{x:hv(s),y:fv(s)}}var Bt;(function(s){s[s.Forward=1]="Forward",s[s.Backward=-1]="Backward"})(Bt||(Bt={}));function mv(s){return!So||!s?!1:s===document.scrollingElement}function gv(s){const n={x:0,y:0},r=mv(s)?{height:window.innerHeight,width:window.innerWidth}:{height:s.clientHeight,width:s.clientWidth},l={x:s.scrollWidth-r.width,y:s.scrollHeight-r.height},c=s.scrollTop<=n.y,d=s.scrollLeft<=n.x,f=s.scrollTop>=l.y,m=s.scrollLeft>=l.x;return{isTop:c,isLeft:d,isBottom:f,isRight:m,maxScroll:l,minScroll:n}}const sx={x:.2,y:.2};function ax(s,n,r,l,c){let{top:d,left:f,right:m,bottom:g}=r;l===void 0&&(l=10),c===void 0&&(c=sx);const{isTop:p,isBottom:b,isLeft:w,isRight:S}=gv(s),x={x:0,y:0},j={x:0,y:0},E={height:n.height*c.y,width:n.width*c.x};return!p&&d<=n.top+E.height?(x.y=Bt.Backward,j.y=l*Math.abs((n.top+E.height-d)/E.height)):!b&&g>=n.bottom-E.height&&(x.y=Bt.Forward,j.y=l*Math.abs((n.bottom-E.height-g)/E.height)),!S&&m>=n.right-E.width?(x.x=Bt.Forward,j.x=l*Math.abs((n.right-E.width-m)/E.width)):!w&&f<=n.left+E.width&&(x.x=Bt.Backward,j.x=l*Math.abs((n.left+E.width-f)/E.width)),{direction:x,speed:j}}function rx(s){if(s===document.scrollingElement){const{innerWidth:d,innerHeight:f}=window;return{top:0,left:0,right:d,bottom:f,width:d,height:f}}const{top:n,left:r,right:l,bottom:c}=s.getBoundingClientRect();return{top:n,left:r,right:l,bottom:c,width:s.clientWidth,height:s.clientHeight}}function pv(s){return s.reduce((n,r)=>wr(n,wd(r)),Vn)}function ix(s){return s.reduce((n,r)=>n+hv(r),0)}function lx(s){return s.reduce((n,r)=>n+fv(r),0)}function ox(s,n){if(n===void 0&&(n=kr),!s)return;const{top:r,left:l,bottom:c,right:d}=n(s);dv(s)&&(c<=0||d<=0||r>=window.innerHeight||l>=window.innerWidth)&&s.scrollIntoView({block:"center",inline:"center"})}const cx=[["x",["left","right"],ix],["y",["top","bottom"],lx]];class Md{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const l=xo(r),c=pv(l);this.rect={...n},this.width=n.width,this.height=n.height;for(const[d,f,m]of cx)for(const g of f)Object.defineProperty(this,g,{get:()=>{const p=m(l),b=c[d]-p;return this.rect[g]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ki{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var l;return(l=this.target)==null?void 0:l.removeEventListener(...r)})},this.target=n}add(n,r,l){var c;(c=this.target)==null||c.addEventListener(n,r,l),this.listeners.push([n,r,l])}}function ux(s){const{EventTarget:n}=ln(s);return s instanceof n?s:jr(s)}function nd(s,n){const r=Math.abs(s.x),l=Math.abs(s.y);return typeof n=="number"?Math.sqrt(r**2+l**2)>n:"x"in n&&"y"in n?r>n.x&&l>n.y:"x"in n?r>n.x:"y"in n?l>n.y:!1}var zn;(function(s){s.Click="click",s.DragStart="dragstart",s.Keydown="keydown",s.ContextMenu="contextmenu",s.Resize="resize",s.SelectionChange="selectionchange",s.VisibilityChange="visibilitychange"})(zn||(zn={}));function wp(s){s.preventDefault()}function dx(s){s.stopPropagation()}var Xe;(function(s){s.Space="Space",s.Down="ArrowDown",s.Right="ArrowRight",s.Left="ArrowLeft",s.Up="ArrowUp",s.Esc="Escape",s.Enter="Enter",s.Tab="Tab"})(Xe||(Xe={}));const vv={start:[Xe.Space,Xe.Enter],cancel:[Xe.Esc],end:[Xe.Space,Xe.Enter,Xe.Tab]},hx=(s,n)=>{let{currentCoordinates:r}=n;switch(s.code){case Xe.Right:return{...r,x:r.x+25};case Xe.Left:return{...r,x:r.x-25};case Xe.Down:return{...r,y:r.y+25};case Xe.Up:return{...r,y:r.y-25}}};class Ud{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new ki(jr(r)),this.windowListeners=new ki(ln(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zn.Resize,this.handleCancel),this.windowListeners.add(zn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,l=n.node.current;l&&ox(l),r(Vn)}handleKeyDown(n){if(Dd(n)){const{active:r,context:l,options:c}=this.props,{keyboardCodes:d=vv,coordinateGetter:f=hx,scrollBehavior:m="smooth"}=c,{code:g}=n;if(d.end.includes(g)){this.handleEnd(n);return}if(d.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:p}=l.current,b=p?{x:p.left,y:p.top}:Vn;this.referenceCoordinates||(this.referenceCoordinates=b);const w=f(n,{active:r,context:l.current,currentCoordinates:b});if(w){const S=Ui(w,b),x={x:0,y:0},{scrollableAncestors:j}=l.current;for(const E of j){const A=n.code,{isTop:z,isRight:I,isLeft:C,isBottom:F,maxScroll:Z,minScroll:P}=gv(E),T=rx(E),L={x:Math.min(A===Xe.Right?T.right-T.width/2:T.right,Math.max(A===Xe.Right?T.left:T.left+T.width/2,w.x)),y:Math.min(A===Xe.Down?T.bottom-T.height/2:T.bottom,Math.max(A===Xe.Down?T.top:T.top+T.height/2,w.y))},R=A===Xe.Right&&!I||A===Xe.Left&&!C,K=A===Xe.Down&&!F||A===Xe.Up&&!z;if(R&&L.x!==w.x){const N=E.scrollLeft+S.x,Y=A===Xe.Right&&N<=Z.x||A===Xe.Left&&N>=P.x;if(Y&&!S.y){E.scrollTo({left:N,behavior:m});return}Y?x.x=E.scrollLeft-N:x.x=A===Xe.Right?E.scrollLeft-Z.x:E.scrollLeft-P.x,x.x&&E.scrollBy({left:-x.x,behavior:m});break}else if(K&&L.y!==w.y){const N=E.scrollTop+S.y,Y=A===Xe.Down&&N<=Z.y||A===Xe.Up&&N>=P.y;if(Y&&!S.x){E.scrollTo({top:N,behavior:m});return}Y?x.y=E.scrollTop-N:x.y=A===Xe.Down?E.scrollTop-Z.y:E.scrollTop-P.y,x.y&&E.scrollBy({top:-x.y,behavior:m});break}}this.handleMove(n,wr(Ui(w,this.referenceCoordinates),x))}}}handleMove(n,r){const{onMove:l}=this.props;n.preventDefault(),l(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ud.activators=[{eventName:"onKeyDown",handler:(s,n,r)=>{let{keyboardCodes:l=vv,onActivation:c}=n,{active:d}=r;const{code:f}=s.nativeEvent;if(l.start.includes(f)){const m=d.activatorNode.current;return m&&s.target!==m?!1:(s.preventDefault(),c?.({event:s.nativeEvent}),!0)}return!1}}];function Sp(s){return!!(s&&"distance"in s)}function xp(s){return!!(s&&"delay"in s)}class zd{constructor(n,r,l){var c;l===void 0&&(l=ux(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:d}=n,{target:f}=d;this.props=n,this.events=r,this.document=jr(f),this.documentListeners=new ki(this.document),this.listeners=new ki(l),this.windowListeners=new ki(ln(f)),this.initialCoordinates=(c=_d(d))!=null?c:Vn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:l}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(zn.Resize,this.handleCancel),this.windowListeners.add(zn.DragStart,wp),this.windowListeners.add(zn.VisibilityChange,this.handleCancel),this.windowListeners.add(zn.ContextMenu,wp),this.documentListeners.add(zn.Keydown,this.handleKeydown),r){if(l!=null&&l({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xp(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Sp(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:l,onPending:c}=this.props;c(l,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(zn.Click,dx,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zn.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:l,initialCoordinates:c,props:d}=this,{onMove:f,options:{activationConstraint:m}}=d;if(!c)return;const g=(r=_d(n))!=null?r:Vn,p=Ui(c,g);if(!l&&m){if(Sp(m)){if(m.tolerance!=null&&nd(p,m.tolerance))return this.handleCancel();if(nd(p,m.distance))return this.handleStart()}if(xp(m)&&nd(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}n.cancelable&&n.preventDefault(),f(g)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===Xe.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const fx={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ld extends zd{constructor(n){const{event:r}=n,l=jr(r.target);super(n,fx,l)}}Ld.activators=[{eventName:"onPointerDown",handler:(s,n)=>{let{nativeEvent:r}=s,{onActivation:l}=n;return!r.isPrimary||r.button!==0?!1:(l?.({event:r}),!0)}}];const mx={move:{name:"mousemove"},end:{name:"mouseup"}};var Sd;(function(s){s[s.RightClick=2]="RightClick"})(Sd||(Sd={}));class gx extends zd{constructor(n){super(n,mx,jr(n.event.target))}}gx.activators=[{eventName:"onMouseDown",handler:(s,n)=>{let{nativeEvent:r}=s,{onActivation:l}=n;return r.button===Sd.RightClick?!1:(l?.({event:r}),!0)}}];const sd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class px extends zd{constructor(n){super(n,sd)}static setup(){return window.addEventListener(sd.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(sd.move.name,n)};function n(){}}}px.activators=[{eventName:"onTouchStart",handler:(s,n)=>{let{nativeEvent:r}=s,{onActivation:l}=n;const{touches:c}=r;return c.length>1?!1:(l?.({event:r}),!0)}}];var Ei;(function(s){s[s.Pointer=0]="Pointer",s[s.DraggableRect=1]="DraggableRect"})(Ei||(Ei={}));var po;(function(s){s[s.TreeOrder=0]="TreeOrder",s[s.ReversedTreeOrder=1]="ReversedTreeOrder"})(po||(po={}));function vx(s){let{acceleration:n,activator:r=Ei.Pointer,canScroll:l,draggingRect:c,enabled:d,interval:f=5,order:m=po.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:b,delta:w,threshold:S}=s;const x=bx({delta:w,disabled:!d}),[j,E]=NS(),A=y.useRef({x:0,y:0}),z=y.useRef({x:0,y:0}),I=y.useMemo(()=>{switch(r){case Ei.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Ei.DraggableRect:return c}},[r,c,g]),C=y.useRef(null),F=y.useCallback(()=>{const P=C.current;if(!P)return;const T=A.current.x*z.current.x,L=A.current.y*z.current.y;P.scrollBy(T,L)},[]),Z=y.useMemo(()=>m===po.TreeOrder?[...p].reverse():p,[m,p]);y.useEffect(()=>{if(!d||!p.length||!I){E();return}for(const P of Z){if(l?.(P)===!1)continue;const T=p.indexOf(P),L=b[T];if(!L)continue;const{direction:R,speed:K}=ax(P,L,I,n,S);for(const N of["x","y"])x[N][R[N]]||(K[N]=0,R[N]=0);if(K.x>0||K.y>0){E(),C.current=P,j(F,f),A.current=K,z.current=R;return}}A.current={x:0,y:0},z.current={x:0,y:0},E()},[n,F,l,E,d,f,JSON.stringify(I),JSON.stringify(x),j,p,Z,b,JSON.stringify(S)])}const yx={x:{[Bt.Backward]:!1,[Bt.Forward]:!1},y:{[Bt.Backward]:!1,[Bt.Forward]:!1}};function bx(s){let{delta:n,disabled:r}=s;const l=bd(n);return $i(c=>{if(r||!l||!c)return yx;const d={x:Math.sign(n.x-l.x),y:Math.sign(n.y-l.y)};return{x:{[Bt.Backward]:c.x[Bt.Backward]||d.x===-1,[Bt.Forward]:c.x[Bt.Forward]||d.x===1},y:{[Bt.Backward]:c.y[Bt.Backward]||d.y===-1,[Bt.Forward]:c.y[Bt.Forward]||d.y===1}}},[r,n,l])}function _x(s,n){const r=n!=null?s.get(n):void 0,l=r?r.node.current:null;return $i(c=>{var d;return n==null?null:(d=l??c)!=null?d:null},[l,n])}function wx(s,n){return y.useMemo(()=>s.reduce((r,l)=>{const{sensor:c}=l,d=c.activators.map(f=>({eventName:f.eventName,handler:n(f.handler,l)}));return[...r,...d]},[]),[s,n])}var Li;(function(s){s[s.Always=0]="Always",s[s.BeforeDragging=1]="BeforeDragging",s[s.WhileDragging=2]="WhileDragging"})(Li||(Li={}));var xd;(function(s){s.Optimized="optimized"})(xd||(xd={}));const jp=new Map;function Sx(s,n){let{dragging:r,dependencies:l,config:c}=n;const[d,f]=y.useState(null),{frequency:m,measure:g,strategy:p}=c,b=y.useRef(s),w=A(),S=Mi(w),x=y.useCallback(function(z){z===void 0&&(z=[]),!S.current&&f(I=>I===null?z:I.concat(z.filter(C=>!I.includes(C))))},[S]),j=y.useRef(null),E=$i(z=>{if(w&&!r)return jp;if(!z||z===jp||b.current!==s||d!=null){const I=new Map;for(let C of s){if(!C)continue;if(d&&d.length>0&&!d.includes(C.id)&&C.rect.current){I.set(C.id,C.rect.current);continue}const F=C.node.current,Z=F?new Md(g(F),F):null;C.rect.current=Z,Z&&I.set(C.id,Z)}return I}return z},[s,d,r,w,g]);return y.useEffect(()=>{b.current=s},[s]),y.useEffect(()=>{w||x()},[r,w]),y.useEffect(()=>{d&&d.length>0&&f(null)},[JSON.stringify(d)]),y.useEffect(()=>{w||typeof m!="number"||j.current!==null||(j.current=setTimeout(()=>{x(),j.current=null},m))},[m,w,x,...l]),{droppableRects:E,measureDroppableContainers:x,measuringScheduled:d!=null};function A(){switch(p){case Li.Always:return!1;case Li.BeforeDragging:return r;default:return!r}}}function yv(s,n){return $i(r=>s?r||(typeof n=="function"?n(s):s):null,[n,s])}function xx(s,n){return yv(s,n)}function jx(s){let{callback:n,disabled:r}=s;const l=Od(n),c=y.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:d}=window;return new d(l)},[l,r]);return y.useEffect(()=>()=>c?.disconnect(),[c]),c}function jo(s){let{callback:n,disabled:r}=s;const l=Od(n),c=y.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:d}=window;return new d(l)},[r]);return y.useEffect(()=>()=>c?.disconnect(),[c]),c}function kx(s){return new Md(kr(s),s)}function kp(s,n,r){n===void 0&&(n=kx);const[l,c]=y.useState(null);function d(){c(g=>{if(!s)return null;if(s.isConnected===!1){var p;return(p=g??r)!=null?p:null}const b=n(s);return JSON.stringify(g)===JSON.stringify(b)?g:b})}const f=jx({callback(g){if(s)for(const p of g){const{type:b,target:w}=p;if(b==="childList"&&w instanceof HTMLElement&&w.contains(s)){d();break}}}}),m=jo({callback:d});return Wn(()=>{d(),s?(m?.observe(s),f?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),f?.disconnect())},[s]),l}function Ex(s){const n=yv(s);return uv(s,n)}const Ep=[];function Tx(s){const n=y.useRef(s),r=$i(l=>s?l&&l!==Ep&&s&&n.current&&s.parentNode===n.current.parentNode?l:xo(s):Ep,[s]);return y.useEffect(()=>{n.current=s},[s]),r}function Cx(s){const[n,r]=y.useState(null),l=y.useRef(s),c=y.useCallback(d=>{const f=td(d.target);f&&r(m=>m?(m.set(f,wd(f)),new Map(m)):null)},[]);return y.useEffect(()=>{const d=l.current;if(s!==d){f(d);const m=s.map(g=>{const p=td(g);return p?(p.addEventListener("scroll",c,{passive:!0}),[p,wd(p)]):null}).filter(g=>g!=null);r(m.length?new Map(m):null),l.current=s}return()=>{f(s),f(d)};function f(m){m.forEach(g=>{const p=td(g);p?.removeEventListener("scroll",c)})}},[c,s]),y.useMemo(()=>s.length?n?Array.from(n.values()).reduce((d,f)=>wr(d,f),Vn):pv(s):Vn,[s,n])}function Tp(s,n){n===void 0&&(n=[]);const r=y.useRef(null);return y.useEffect(()=>{r.current=null},n),y.useEffect(()=>{const l=s!==Vn;l&&!r.current&&(r.current=s),!l&&r.current&&(r.current=null)},[s]),r.current?Ui(s,r.current):Vn}function Nx(s){y.useEffect(()=>{if(!So)return;const n=s.map(r=>{let{sensor:l}=r;return l.setup==null?void 0:l.setup()});return()=>{for(const r of n)r?.()}},s.map(n=>{let{sensor:r}=n;return r}))}function Ax(s,n){return y.useMemo(()=>s.reduce((r,l)=>{let{eventName:c,handler:d}=l;return r[c]=f=>{d(f,n)},r},{}),[s,n])}function bv(s){return y.useMemo(()=>s?ex(s):null,[s])}const Cp=[];function Rx(s,n){n===void 0&&(n=kr);const[r]=s,l=bv(r?ln(r):null),[c,d]=y.useState(Cp);function f(){d(()=>s.length?s.map(g=>mv(g)?l:new Md(n(g),g)):Cp)}const m=jo({callback:f});return Wn(()=>{m?.disconnect(),f(),s.forEach(g=>m?.observe(g))},[s]),c}function Ox(s){if(!s)return null;if(s.children.length>1)return s;const n=s.children[0];return qi(n)?n:s}function Dx(s){let{measure:n}=s;const[r,l]=y.useState(null),c=y.useCallback(p=>{for(const{target:b}of p)if(qi(b)){l(w=>{const S=n(b);return w?{...w,width:S.width,height:S.height}:S});break}},[n]),d=jo({callback:c}),f=y.useCallback(p=>{const b=Ox(p);d?.disconnect(),b&&d?.observe(b),l(b?n(b):null)},[n,d]),[m,g]=mo(f);return y.useMemo(()=>({nodeRef:m,rect:r,setRef:g}),[r,m,g])}const Mx=[{sensor:Ld,options:{}},{sensor:Ud,options:{}}],Ux={current:{}},oo={draggable:{measure:_p},droppable:{measure:_p,strategy:Li.WhileDragging,frequency:xd.Optimized},dragOverlay:{measure:kr}};class Ti extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,l;return(r=(l=this.get(n))==null?void 0:l.node.current)!=null?r:void 0}}const zx={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ti,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:go},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:oo,measureDroppableContainers:go,windowRect:null,measuringScheduled:!1},Lx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:go,draggableNodes:new Map,over:null,measureDroppableContainers:go},ko=y.createContext(Lx),_v=y.createContext(zx);function Bx(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ti}}}function qx(s,n){switch(n.type){case Dt.DragStart:return{...s,draggable:{...s.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Dt.DragMove:return s.draggable.active==null?s:{...s,draggable:{...s.draggable,translate:{x:n.coordinates.x-s.draggable.initialCoordinates.x,y:n.coordinates.y-s.draggable.initialCoordinates.y}}};case Dt.DragEnd:case Dt.DragCancel:return{...s,draggable:{...s.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Dt.RegisterDroppable:{const{element:r}=n,{id:l}=r,c=new Ti(s.droppable.containers);return c.set(l,r),{...s,droppable:{...s.droppable,containers:c}}}case Dt.SetDroppableDisabled:{const{id:r,key:l,disabled:c}=n,d=s.droppable.containers.get(r);if(!d||l!==d.key)return s;const f=new Ti(s.droppable.containers);return f.set(r,{...d,disabled:c}),{...s,droppable:{...s.droppable,containers:f}}}case Dt.UnregisterDroppable:{const{id:r,key:l}=n,c=s.droppable.containers.get(r);if(!c||l!==c.key)return s;const d=new Ti(s.droppable.containers);return d.delete(r),{...s,droppable:{...s.droppable,containers:d}}}default:return s}}function $x(s){let{disabled:n}=s;const{active:r,activatorEvent:l,draggableNodes:c}=y.useContext(ko),d=bd(l),f=bd(r?.id);return y.useEffect(()=>{if(!n&&!l&&d&&f!=null){if(!Dd(d)||document.activeElement===d.target)return;const m=c.get(f);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const b of[g.current,p.current]){if(!b)continue;const w=OS(b);if(w){w.focus();break}}})}},[l,n,c,f,d]),null}function Hx(s,n){let{transform:r,...l}=n;return s!=null&&s.length?s.reduce((c,d)=>d({transform:c,...l}),r):r}function Ix(s){return y.useMemo(()=>({draggable:{...oo.draggable,...s?.draggable},droppable:{...oo.droppable,...s?.droppable},dragOverlay:{...oo.dragOverlay,...s?.dragOverlay}}),[s?.draggable,s?.droppable,s?.dragOverlay])}function Gx(s){let{activeNode:n,measure:r,initialRect:l,config:c=!0}=s;const d=y.useRef(!1),{x:f,y:m}=typeof c=="boolean"?{x:c,y:c}:c;Wn(()=>{if(!f&&!m||!n){d.current=!1;return}if(d.current||!l)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const b=r(p),w=uv(b,l);if(f||(w.x=0),m||(w.y=0),d.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const S=dv(p);S&&S.scrollBy({top:w.y,left:w.x})}},[n,f,m,l,r])}const wv=y.createContext({...Vn,scaleX:1,scaleY:1});var Xs;(function(s){s[s.Uninitialized=0]="Uninitialized",s[s.Initializing=1]="Initializing",s[s.Initialized=2]="Initialized"})(Xs||(Xs={}));const Kx=y.memo(function(n){var r,l,c,d;let{id:f,accessibility:m,autoScroll:g=!0,children:p,sensors:b=Mx,collisionDetection:w=YS,measuring:S,modifiers:x,...j}=n;const E=y.useReducer(qx,void 0,Bx),[A,z]=E,[I,C]=BS(),[F,Z]=y.useState(Xs.Uninitialized),P=F===Xs.Initialized,{draggable:{active:T,nodes:L,translate:R},droppable:{containers:K}}=A,N=T!=null?L.get(T):null,Y=y.useRef({initial:null,translated:null}),se=y.useMemo(()=>{var tt;return T!=null?{id:T,data:(tt=N?.data)!=null?tt:Ux,rect:Y}:null},[T,N]),X=y.useRef(null),[le,M]=y.useState(null),[$,W]=y.useState(null),V=Mi(j,Object.values(j)),fe=Hi("DndDescribedBy",f),k=y.useMemo(()=>K.getEnabled(),[K]),H=Ix(S),{droppableRects:D,measureDroppableContainers:B,measuringScheduled:te}=Sx(k,{dragging:P,dependencies:[R.x,R.y],config:H.droppable}),G=_x(L,T),re=y.useMemo(()=>$?_d($):null,[$]),de=wn(),he=xx(G,H.draggable.measure);Gx({activeNode:T!=null?L.get(T):null,config:de.layoutShiftCompensation,initialRect:he,measure:H.draggable.measure});const pe=kp(G,H.draggable.measure,he),Te=kp(G?G.parentElement:null),Le=y.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:D,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=K.getNodeFor((r=Le.current.over)==null?void 0:r.id),Re=Dx({measure:H.dragOverlay.measure}),Oe=(l=Re.nodeRef.current)!=null?l:G,$e=P?(c=Re.rect)!=null?c:pe:null,xe=!!(Re.nodeRef.current&&Re.rect),Ee=Ex(xe?null:pe),Ie=bv(Oe?ln(Oe):null),ge=Tx(P?Ue??G:null),ve=Rx(ge),be=Hx(x,{transform:{x:R.x-Ee.x,y:R.y-Ee.y,scaleX:1,scaleY:1},activatorEvent:$,active:se,activeNodeRect:pe,containerNodeRect:Te,draggingNodeRect:$e,over:Le.current.over,overlayNodeRect:Re.rect,scrollableAncestors:ge,scrollableAncestorRects:ve,windowRect:Ie}),De=re?wr(re,R):null,oe=Cx(ge),ye=Tp(oe),Be=Tp(oe,[pe]),Me=wr(be,ye),ne=$e?JS($e,be):null,ze=se&&ne?w({active:se,collisionRect:ne,droppableRects:D,droppableContainers:k,pointerCoordinates:De}):null,ke=cv(ze,"id"),[ft,Fe]=y.useState(null),vt=xe?be:wr(be,Be),yt=QS(vt,(d=ft?.rect)!=null?d:null,pe),mt=y.useRef(null),dt=y.useCallback((tt,gt)=>{let{sensor:Ut,options:Xt}=gt;if(X.current==null)return;const Jt=L.get(X.current);if(!Jt)return;const Pt=tt.nativeEvent,Zt=new Ut({active:X.current,activeNode:Jt,event:Pt,options:Xt,context:Le,onAbort(At){if(!L.get(At))return;const{onDragAbort:on}=V.current,xn={id:At};on?.(xn),I({type:"onDragAbort",event:xn})},onPending(At,Ln,on,xn){if(!L.get(At))return;const{onDragPending:es}=V.current,Bn={id:At,constraint:Ln,initialCoordinates:on,offset:xn};es?.(Bn),I({type:"onDragPending",event:Bn})},onStart(At){const Ln=X.current;if(Ln==null)return;const on=L.get(Ln);if(!on)return;const{onDragStart:xn}=V.current,Fn={activatorEvent:Pt,active:{id:Ln,data:on.data,rect:Y}};_i.unstable_batchedUpdates(()=>{xn?.(Fn),Z(Xs.Initializing),z({type:Dt.DragStart,initialCoordinates:At,active:Ln}),I({type:"onDragStart",event:Fn}),M(mt.current),W(Pt)})},onMove(At){z({type:Dt.DragMove,coordinates:At})},onEnd:Sn(Dt.DragEnd),onCancel:Sn(Dt.DragCancel)});mt.current=Zt;function Sn(At){return async function(){const{active:on,collisions:xn,over:Fn,scrollAdjustedTranslate:es}=Le.current;let Bn=null;if(on&&es){const{cancelDrop:Ss}=V.current;Bn={activatorEvent:Pt,active:on,collisions:xn,delta:es,over:Fn},At===Dt.DragEnd&&typeof Ss=="function"&&await Promise.resolve(Ss(Bn))&&(At=Dt.DragCancel)}X.current=null,_i.unstable_batchedUpdates(()=>{z({type:At}),Z(Xs.Uninitialized),Fe(null),M(null),W(null),mt.current=null;const Ss=At===Dt.DragEnd?"onDragEnd":"onDragCancel";if(Bn){const jn=V.current[Ss];jn?.(Bn),I({type:Ss,event:Bn})}})}}},[L]),Pn=y.useCallback((tt,gt)=>(Ut,Xt)=>{const Jt=Ut.nativeEvent,Pt=L.get(Xt);if(X.current!==null||!Pt||Jt.dndKit||Jt.defaultPrevented)return;const Zt={active:Pt};tt(Ut,gt.options,Zt)===!0&&(Jt.dndKit={capturedBy:gt.sensor},X.current=Xt,dt(Ut,gt))},[L,dt]),Zs=wx(b,Pn);Nx(b),Wn(()=>{pe&&F===Xs.Initializing&&Z(Xs.Initialized)},[pe,F]),y.useEffect(()=>{const{onDragMove:tt}=V.current,{active:gt,activatorEvent:Ut,collisions:Xt,over:Jt}=Le.current;if(!gt||!Ut)return;const Pt={active:gt,activatorEvent:Ut,collisions:Xt,delta:{x:Me.x,y:Me.y},over:Jt};_i.unstable_batchedUpdates(()=>{tt?.(Pt),I({type:"onDragMove",event:Pt})})},[Me.x,Me.y]),y.useEffect(()=>{const{active:tt,activatorEvent:gt,collisions:Ut,droppableContainers:Xt,scrollAdjustedTranslate:Jt}=Le.current;if(!tt||X.current==null||!gt||!Jt)return;const{onDragOver:Pt}=V.current,Zt=Xt.get(ke),Sn=Zt&&Zt.rect.current?{id:Zt.id,rect:Zt.rect.current,data:Zt.data,disabled:Zt.disabled}:null,At={active:tt,activatorEvent:gt,collisions:Ut,delta:{x:Jt.x,y:Jt.y},over:Sn};_i.unstable_batchedUpdates(()=>{Fe(Sn),Pt?.(At),I({type:"onDragOver",event:At})})},[ke]),Wn(()=>{Le.current={activatorEvent:$,active:se,activeNode:G,collisionRect:ne,collisions:ze,droppableRects:D,draggableNodes:L,draggingNode:Oe,draggingNodeRect:$e,droppableContainers:K,over:ft,scrollableAncestors:ge,scrollAdjustedTranslate:Me},Y.current={initial:$e,translated:ne}},[se,G,ze,ne,L,Oe,$e,D,K,ft,ge,Me]),vx({...de,delta:R,draggingRect:ne,pointerCoordinates:De,scrollableAncestors:ge,scrollableAncestorRects:ve});const et=y.useMemo(()=>({active:se,activeNode:G,activeNodeRect:pe,activatorEvent:$,collisions:ze,containerNodeRect:Te,dragOverlay:Re,draggableNodes:L,droppableContainers:K,droppableRects:D,over:ft,measureDroppableContainers:B,scrollableAncestors:ge,scrollableAncestorRects:ve,measuringConfiguration:H,measuringScheduled:te,windowRect:Ie}),[se,G,pe,$,ze,Te,Re,L,K,D,ft,B,ge,ve,H,te,Ie]),Mt=y.useMemo(()=>({activatorEvent:$,activators:Zs,active:se,activeNodeRect:pe,ariaDescribedById:{draggable:fe},dispatch:z,draggableNodes:L,over:ft,measureDroppableContainers:B}),[$,Zs,se,pe,z,fe,L,ft,B]);return rn.createElement(iv.Provider,{value:C},rn.createElement(ko.Provider,{value:Mt},rn.createElement(_v.Provider,{value:et},rn.createElement(wv.Provider,{value:yt},p)),rn.createElement($x,{disabled:m?.restoreFocus===!1})),rn.createElement(HS,{...m,hiddenTextDescribedById:fe}));function wn(){const tt=le?.autoScrollEnabled===!1,gt=typeof g=="object"?g.enabled===!1:g===!1,Ut=P&&!tt&&!gt;return typeof g=="object"?{...g,enabled:Ut}:{enabled:Ut}}}),Vx=y.createContext(null),Np="button",Px="Draggable";function Yx(s){let{id:n,data:r,disabled:l=!1,attributes:c}=s;const d=Hi(Px),{activators:f,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:b,draggableNodes:w,over:S}=y.useContext(ko),{role:x=Np,roleDescription:j="draggable",tabIndex:E=0}=c??{},A=g?.id===n,z=y.useContext(A?wv:Vx),[I,C]=mo(),[F,Z]=mo(),P=Ax(f,n),T=Mi(r);Wn(()=>(w.set(n,{id:n,key:d,node:I,activatorNode:F,data:T}),()=>{const R=w.get(n);R&&R.key===d&&w.delete(n)}),[w,n]);const L=y.useMemo(()=>({role:x,tabIndex:E,"aria-disabled":l,"aria-pressed":A&&x===Np?!0:void 0,"aria-roledescription":j,"aria-describedby":b.draggable}),[l,x,E,A,j,b.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:L,isDragging:A,listeners:l?void 0:P,node:I,over:S,setNodeRef:C,setActivatorNodeRef:Z,transform:z}}function Qx(){return y.useContext(_v)}const Xx="Droppable",Jx={timeout:25};function Zx(s){let{data:n,disabled:r=!1,id:l,resizeObserverConfig:c}=s;const d=Hi(Xx),{active:f,dispatch:m,over:g,measureDroppableContainers:p}=y.useContext(ko),b=y.useRef({disabled:r}),w=y.useRef(!1),S=y.useRef(null),x=y.useRef(null),{disabled:j,updateMeasurementsFor:E,timeout:A}={...Jx,...c},z=Mi(E??l),I=y.useCallback(()=>{if(!w.current){w.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{p(Array.isArray(z.current)?z.current:[z.current]),x.current=null},A)},[A]),C=jo({callback:I,disabled:j||!f}),F=y.useCallback((L,R)=>{C&&(R&&(C.unobserve(R),w.current=!1),L&&C.observe(L))},[C]),[Z,P]=mo(F),T=Mi(n);return y.useEffect(()=>{!C||!Z.current||(C.disconnect(),w.current=!1,C.observe(Z.current))},[Z,C]),y.useEffect(()=>(m({type:Dt.RegisterDroppable,element:{id:l,key:d,disabled:r,node:Z,rect:S,data:T}}),()=>m({type:Dt.UnregisterDroppable,key:d,id:l})),[l]),y.useEffect(()=>{r!==b.current.disabled&&(m({type:Dt.SetDroppableDisabled,id:l,key:d,disabled:r}),b.current.disabled=r)},[l,d,r,m]),{active:f,rect:S,isOver:g?.id===l,node:Z,over:g,setNodeRef:P}}function Bd(s,n,r){const l=s.slice();return l.splice(r<0?l.length+r:r,0,l.splice(n,1)[0]),l}function Wx(s,n){return s.reduce((r,l,c)=>{const d=n.get(l);return d&&(r[c]=d),r},Array(s.length))}function io(s){return s!==null&&s>=0}function Fx(s,n){if(s===n)return!0;if(s.length!==n.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==n[r])return!1;return!0}function ej(s){return typeof s=="boolean"?{draggable:s,droppable:s}:s}const Sv=s=>{let{rects:n,activeIndex:r,overIndex:l,index:c}=s;const d=Bd(n,l,r),f=n[c],m=d[c];return!m||!f?null:{x:m.left-f.left,y:m.top-f.top,scaleX:m.width/f.width,scaleY:m.height/f.height}},lo={scaleX:1,scaleY:1},tj=s=>{var n;let{activeIndex:r,activeNodeRect:l,index:c,rects:d,overIndex:f}=s;const m=(n=d[r])!=null?n:l;if(!m)return null;if(c===r){const p=d[f];return p?{x:0,y:r<f?p.top+p.height-(m.top+m.height):p.top-m.top,...lo}:null}const g=nj(d,c,r);return c>r&&c<=f?{x:0,y:-m.height-g,...lo}:c<r&&c>=f?{x:0,y:m.height+g,...lo}:{x:0,y:0,...lo}};function nj(s,n,r){const l=s[n],c=s[n-1],d=s[n+1];return l?r<n?c?l.top-(c.top+c.height):d?d.top-(l.top+l.height):0:d?d.top-(l.top+l.height):c?l.top-(c.top+c.height):0:0}const xv="Sortable",jv=rn.createContext({activeIndex:-1,containerId:xv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Sv,disabled:{draggable:!1,droppable:!1}});function sj(s){let{children:n,id:r,items:l,strategy:c=Sv,disabled:d=!1}=s;const{active:f,dragOverlay:m,droppableRects:g,over:p,measureDroppableContainers:b}=Qx(),w=Hi(xv,r),S=m.rect!==null,x=y.useMemo(()=>l.map(P=>typeof P=="object"&&"id"in P?P.id:P),[l]),j=f!=null,E=f?x.indexOf(f.id):-1,A=p?x.indexOf(p.id):-1,z=y.useRef(x),I=!Fx(x,z.current),C=A!==-1&&E===-1||I,F=ej(d);Wn(()=>{I&&j&&b(x)},[I,x,j,b]),y.useEffect(()=>{z.current=x},[x]);const Z=y.useMemo(()=>({activeIndex:E,containerId:w,disabled:F,disableTransforms:C,items:x,overIndex:A,useDragOverlay:S,sortedRects:Wx(x,g),strategy:c}),[E,w,F.draggable,F.droppable,C,x,A,g,S,c]);return rn.createElement(jv.Provider,{value:Z},n)}const aj=s=>{let{id:n,items:r,activeIndex:l,overIndex:c}=s;return Bd(r,l,c).indexOf(n)},rj=s=>{let{containerId:n,isSorting:r,wasDragging:l,index:c,items:d,newIndex:f,previousItems:m,previousContainerId:g,transition:p}=s;return!p||!l||m!==d&&c===f?!1:r?!0:f!==c&&n===g},ij={duration:200,easing:"ease"},kv="transform",lj=zi.Transition.toString({property:kv,duration:0,easing:"linear"}),oj={roleDescription:"sortable"};function cj(s){let{disabled:n,index:r,node:l,rect:c}=s;const[d,f]=y.useState(null),m=y.useRef(r);return Wn(()=>{if(!n&&r!==m.current&&l.current){const g=c.current;if(g){const p=kr(l.current,{ignoreTransform:!0}),b={x:g.left-p.left,y:g.top-p.top,scaleX:g.width/p.width,scaleY:g.height/p.height};(b.x||b.y)&&f(b)}}r!==m.current&&(m.current=r)},[n,r,l,c]),y.useEffect(()=>{d&&f(null)},[d]),d}function uj(s){let{animateLayoutChanges:n=rj,attributes:r,disabled:l,data:c,getNewIndex:d=aj,id:f,strategy:m,resizeObserverConfig:g,transition:p=ij}=s;const{items:b,containerId:w,activeIndex:S,disabled:x,disableTransforms:j,sortedRects:E,overIndex:A,useDragOverlay:z,strategy:I}=y.useContext(jv),C=dj(l,x),F=b.indexOf(f),Z=y.useMemo(()=>({sortable:{containerId:w,index:F,items:b},...c}),[w,c,F,b]),P=y.useMemo(()=>b.slice(b.indexOf(f)),[b,f]),{rect:T,node:L,isOver:R,setNodeRef:K}=Zx({id:f,data:Z,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...g}}),{active:N,activatorEvent:Y,activeNodeRect:se,attributes:X,setNodeRef:le,listeners:M,isDragging:$,over:W,setActivatorNodeRef:V,transform:fe}=Yx({id:f,data:Z,attributes:{...oj,...r},disabled:C.draggable}),k=CS(K,le),H=!!N,D=H&&!j&&io(S)&&io(A),B=!z&&$,te=B&&D?fe:null,re=D?te??(m??I)({rects:E,activeNodeRect:se,activeIndex:S,overIndex:A,index:F}):null,de=io(S)&&io(A)?d({id:f,items:b,activeIndex:S,overIndex:A}):F,he=N?.id,pe=y.useRef({activeId:he,items:b,newIndex:de,containerId:w}),Te=b!==pe.current.items,Le=n({active:N,containerId:w,isDragging:$,isSorting:H,id:f,index:F,items:b,newIndex:pe.current.newIndex,previousItems:pe.current.items,previousContainerId:pe.current.containerId,transition:p,wasDragging:pe.current.activeId!=null}),Ue=cj({disabled:!Le,index:F,node:L,rect:T});return y.useEffect(()=>{H&&pe.current.newIndex!==de&&(pe.current.newIndex=de),w!==pe.current.containerId&&(pe.current.containerId=w),b!==pe.current.items&&(pe.current.items=b)},[H,de,w,b]),y.useEffect(()=>{if(he===pe.current.activeId)return;if(he!=null&&pe.current.activeId==null){pe.current.activeId=he;return}const Oe=setTimeout(()=>{pe.current.activeId=he},50);return()=>clearTimeout(Oe)},[he]),{active:N,activeIndex:S,attributes:X,data:Z,rect:T,index:F,newIndex:de,items:b,isOver:R,isSorting:H,isDragging:$,listeners:M,node:L,overIndex:A,over:W,setNodeRef:k,setActivatorNodeRef:V,setDroppableNodeRef:K,setDraggableNodeRef:le,transform:Ue??re,transition:Re()};function Re(){if(Ue||Te&&pe.current.newIndex===F)return lj;if(!(B&&!Dd(Y)||!p)&&(H||Le))return zi.Transition.toString({...p,property:kv})}}function dj(s,n){var r,l;return typeof s=="boolean"?{draggable:s,droppable:!1}:{draggable:(r=s?.draggable)!=null?r:n.draggable,droppable:(l=s?.droppable)!=null?l:n.droppable}}function vo(s){if(!s)return!1;const n=s.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const hj=[Xe.Down,Xe.Right,Xe.Up,Xe.Left],fj=(s,n)=>{let{context:{active:r,collisionRect:l,droppableRects:c,droppableContainers:d,over:f,scrollableAncestors:m}}=n;if(hj.includes(s.code)){if(s.preventDefault(),!r||!l)return;const g=[];d.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const S=c.get(w.id);if(S)switch(s.code){case Xe.Down:l.top<S.top&&g.push(w);break;case Xe.Up:l.top>S.top&&g.push(w);break;case Xe.Left:l.left>S.left&&g.push(w);break;case Xe.Right:l.left<S.left&&g.push(w);break}});const p=VS({collisionRect:l,droppableRects:c,droppableContainers:g});let b=cv(p,"id");if(b===f?.id&&p.length>1&&(b=p[1].id),b!=null){const w=d.get(r.id),S=d.get(b),x=S?c.get(S.id):null,j=S?.node.current;if(j&&x&&w&&S){const A=xo(j).some((P,T)=>m[T]!==P),z=Ev(w,S),I=mj(w,S),C=A||!z?{x:0,y:0}:{x:I?l.width-x.width:0,y:I?l.height-x.height:0},F={x:x.left,y:x.top};return C.x&&C.y?F:Ui(F,C)}}}};function Ev(s,n){return!vo(s)||!vo(n)?!1:s.data.current.sortable.containerId===n.data.current.sortable.containerId}function mj(s,n){return!vo(s)||!vo(n)||!Ev(s,n)?!1:s.data.current.sortable.index<n.data.current.sortable.index}function gj({item:s,index:n,onEdit:r,onRemove:l,compact:c=!1}){const{attributes:d,listeners:f,setNodeRef:m,transform:g,transition:p,isDragging:b}=uj({id:s.id}),w={transform:zi.Transform.toString(g),transition:p};return o.jsxs("div",{ref:m,style:w,className:`queue-item ${b?"dragging":""}`,...d,children:[o.jsx("div",{...f,style:{cursor:"grab",display:"flex",alignItems:"center"},children:o.jsxs("span",{className:"queue-item-number",children:[n+1,"."]})}),o.jsx("div",{className:"queue-item-content",children:s.users&&s.users.length>0?o.jsxs("div",{className:"queue-item-group",children:[o.jsxs("div",{className:"queue-item-group-header",children:[o.jsxs("span",{className:"queue-item-group-badge",children:["Gruppe (",s.users.length,")"]}),o.jsx("span",{className:"queue-item-time",children:Sr(s.availableTime)})]}),c?o.jsxs("div",{className:"queue-item-group-preview",title:s.users.join(", "),children:[s.users.slice(0,2).join(", "),s.users.length>2?` +${s.users.length-2}`:""]}):o.jsx("div",{className:"queue-item-group-users",children:s.users.map((S,x)=>o.jsx("input",{type:"text",className:"queue-item-name queue-item-group-name",value:S,onChange:j=>r(s.id,x,j.target.value,!0),onClick:j=>j.stopPropagation()},x))})]}):o.jsxs("div",{className:"queue-item-name-time-row",children:[o.jsx("span",{className:"queue-item-name-wrap",children:o.jsx("input",{type:"text",className:"queue-item-name",value:s.name,onChange:S=>r(s.id,S.target.value),onClick:S=>S.stopPropagation()})}),o.jsx("span",{className:"queue-item-time",children:Sr(s.availableTime)})]})}),o.jsx("button",{className:"queue-item-remove",onClick:()=>l(s.id),title:"Fjern fra k",children:""})]})}function pj({station:s,onStartSession:n,onStopSession:r,onExtendSession:l,onEditSessionName:c,onJoinSession:d,onPauseSession:f,onStartPendingSession:m,onAddToQueue:g,onAddGroupToQueue:p,onEditQueueName:b,onRemoveFromQueue:w,onReorderQueue:S,onStatusChange:x,onOpenUserSelector:j,pendingUsers:E=[],onStartGroup:A,onRemovePendingUser:z}){const[I,C]=y.useState(null),[F,Z]=y.useState({}),P=s.type==="PS",[T,L]=y.useState({});y.useEffect(()=>{const te=setInterval(()=>{const G={},re={};s.activeSessions.forEach(de=>{if(de.isPaused?de.remainingSecondsWhenPaused!==void 0&&(G[de.id]=de.remainingSecondsWhenPaused):G[de.id]=Zn(de),de.waitingSince&&!de.startTime){const he=Date.now()-new Date(de.waitingSince).getTime(),pe=(de.waitingTimeoutSeconds||300)*1e3,Te=Math.max(0,pe-he);re[de.id]=Math.ceil(Te/1e3)}}),Z(G),L(re)},1e3);return()=>clearInterval(te)},[s.activeSessions]);const R=()=>{j?.(s.id,"queue")},K=()=>{j?.(s.id,"auto")},N=(te,G,re,de)=>{de&&typeof G=="number"&&re!==void 0?b(s.id,te,G,re,!0):b(s.id,te,G)},Y=()=>{if(s.queue.length>0){const te=s.queue[0];n(s.id,te)}},X=s.status==="maintenance"?"maintenance":s.status==="closed"?"closed":s.activeSessions.length>0?"active":"available",le=s.activeSessions.length<s.maxUsers,M=s.queue.length>0,$=P&&(s.activeSessions.length+s.queue.length>=4||s.activeSessions.length>=2&&s.queue.length>=1),W=P&&s.activeSessions.length>=2&&!$,V=P&&s.queue.length>=3&&!$,fe=$&&P,k=IS(vp(Ld),vp(Ud,{coordinateGetter:fj})),H=te=>{const{active:G,over:re}=te;if(re&&G.id!==re.id){const de=s.queue.findIndex(pe=>pe.id===G.id),he=s.queue.findIndex(pe=>pe.id===re.id);S(s.id,de,he)}},B=(()=>{if(X!=="active")return null;let te=0,G=0;if(s.activeSessions.length>0){const Re=s.activeSessions.map(xe=>{const Ee=F[xe.id]??Zn(xe),Ie=xe.durationMinutes*60;return{remaining:Ee,totalDuration:Ie}});te=Math.max(...Re.map(xe=>xe.remaining)),G=Re.reduce((xe,Ee)=>xe.remaining>Ee.remaining?xe:Ee).totalDuration}const re=s.queue.length*Nt*60;te+=re;const de=G+re;if(te<=0)return null;const he=new Date,pe=new Date(he.getTime()+te*1e3),Te=Math.ceil(te/60),Le=Math.max(0,de-te),Ue=de>0?Math.max(0,Math.min(1,Le/de)):0;return{availableTime:pe,totalSecondsUntilAvailable:te,totalMinutes:Te,progressPercent:Ue}})();return o.jsxs("div",{className:`station-card status-${X} ${P?"station-card--ps":""} ${$?"station-card--ps-dense":""}`,onClick:te=>{X==="available"&&s.activeSessions.length===0&&!te.target.closest("button")&&!te.target.closest(".station-status")&&K()},children:[o.jsxs("div",{className:"station-header",children:[o.jsxs("div",{className:"station-id",children:[o.jsx("div",{className:"station-icon",children:s.type==="PC"?"":""}),o.jsx("div",{className:"station-name-wrapper",children:o.jsx("span",{className:"station-name",children:s.id.toUpperCase()})})]}),o.jsx("div",{className:"station-status-wrapper",children:o.jsxs("span",{className:`station-status ${X} ${X!=="active"?"clickable":""}`,onClick:()=>{X!=="active"&&x&&(X==="available"?x(s.id,"closed"):X==="closed"?x(s.id,"maintenance"):X==="maintenance"&&x(s.id,"available"))},style:{cursor:X!=="active"?"pointer":"default"},title:X!=="active"?"Klik for at ndre status":"",children:[X==="available"&&"Ledig",X==="active"&&"Optaget",X==="maintenance"&&"Ude af drift",X==="closed"&&"Lukket"]})})]}),X==="available"&&s.activeSessions.length===0&&(!P||E.length===0)&&o.jsx("div",{className:"station-available-label",children:"LEDIG"}),s.activeSessions.length>0&&o.jsx("div",{className:`active-sessions ${W?"active-sessions--grid":""} ${$?"active-sessions--dense":""}`,children:s.activeSessions.map(te=>{const G=!te.startTime,re=G?te.durationMinutes*60:F[te.id]??Zn(te),de=!G&&re<=300,he=!G&&re<=60,pe=I===te.id,Te=te.userName||"Ingen navn",Le=te.userId&&te.userBalanceAtStart!=null,Ue=Le?Math.max(0,te.userBalanceAtStart-(te.balanceDeducted||0)):null,Re=Ue!=null&&Ue<=5,Oe=te.durationMinutes*60,$e=G?0:Oe-re,xe=Oe>0?Math.max(0,Math.min(1,$e/Oe)):0;return o.jsxs("div",{className:"active-session",children:[!G&&o.jsx("div",{className:`active-session__fill ${he?"active-session__fill--critical":de?"active-session__fill--warning":""}`,style:{width:`${xe*100}%`}}),o.jsxs("div",{className:"session-name-timer-row",children:[pe?o.jsx("input",{type:"text",className:"session-user-input",value:te.userName||"",onChange:Ee=>c(s.id,te.id,Ee.target.value),onBlur:()=>C(null),onKeyDown:Ee=>{(Ee.key==="Enter"||Ee.key==="Escape")&&C(null)},autoFocus:!0,placeholder:"Indtast navn..."}):o.jsxs("div",{className:"session-user",onClick:()=>C(te.id),title:"Klik for at redigere navn",children:[Te,Le&&o.jsxs("span",{className:`session-balance ${Re?"session-balance--low":""}`,children:["(",Ue," min)"]})]}),o.jsx("div",{className:`session-timer ${de?he?"critical":"warning":""} ${te.isPaused?"paused":""} ${G?"pending":""} ${te.waitingSince&&!te.startTime?"attendance":""}`,children:G&&te.waitingSince?o.jsxs("span",{className:"attendance-indicator",children:["Venter p fremmde (",Hu(T[te.id]||0),")"]}):G?o.jsxs("span",{className:"pending-indicator",children:["Klar til start (",Hu(re),")"]}):o.jsxs(o.Fragment,{children:[Hu(re),te.isPaused&&o.jsx("span",{className:"paused-indicator",children:" (Pauset)"})]})})]}),o.jsx("div",{className:`session-extend ${fe?"session-extend--compact":""}`,children:G?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"extend-btn start-session-btn",onClick:()=>m(s.id,te.id,te.userId),children:"START"}),o.jsx("button",{className:"extend-btn delete-btn",onClick:()=>r(s.id,te.id),children:"SLET"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"session-control-buttons",children:[te.isPaused?o.jsx("button",{className:"extend-btn resume-session-btn",onClick:()=>f(s.id,te.id),children:fe?"":"Fortst"}):o.jsx("button",{className:"extend-btn pause-session-btn",onClick:()=>f(s.id,te.id),children:fe?"II":"Pause"}),o.jsx("button",{className:"extend-btn",onClick:()=>r(s.id,te.id),children:fe?"":"Stop"})]}),o.jsxs("div",{className:"time-adjust-buttons",children:[o.jsx("button",{className:"extend-btn time-btn",onClick:()=>l(s.id,te.id,-1),title:"Fjern 1 minut",children:"1"}),o.jsx("button",{className:"extend-btn time-btn",onClick:()=>l(s.id,te.id,1),title:"Tilfj 1 minut",children:"+1"})]})]})})]},te.id)})}),o.jsxs("div",{className:"queue-section",children:[s.queue.length>0&&o.jsxs("div",{className:"queue-title",children:["K (",s.queue.length,")"]}),o.jsx(Kx,{sensors:k,collisionDetection:KS,onDragEnd:H,children:o.jsx(sj,{items:s.queue.map(te=>te.id),strategy:tj,children:o.jsx("div",{className:`queue-list ${V?"queue-list--grid":""} ${$?"queue-list--dense":""}`,children:s.queue.map((te,G)=>o.jsx(gj,{item:te,index:G,onEdit:N,onRemove:re=>w(s.id,re),compact:$&&P},te.id))})})})]}),X!=="maintenance"&&X!=="closed"&&s.activeSessions.length>0&&o.jsx("div",{className:"add-to-queue",children:o.jsxs("button",{className:"add-btn",onClick:R,children:["+ Tilfj til k",P?" (1-4)":""]})}),P&&E.length>0&&s.activeSessions.length===0&&o.jsxs("div",{className:"selected-users-list",children:[o.jsxs("div",{className:"selected-users-title",children:["Valgte (",E.length,"/",s.maxUsers,"):"]}),E.map((te,G)=>o.jsxs("div",{className:"selected-user-item",children:[o.jsx("span",{children:te.name}),o.jsx("button",{type:"button",className:"selected-user-remove",onClick:()=>z?.(G),title:"Fjern",children:""})]},G))]}),X!=="maintenance"&&X!=="closed"&&(s.activeSessions.length===0||P&&le)&&o.jsx("div",{className:"select-user-section",children:o.jsx("button",{className:"select-user-btn",onClick:K,disabled:P&&!le&&E.length>=s.maxUsers,children:P?s.activeSessions.length>0?`+ Join session (${s.activeSessions.length}/${s.maxUsers})`:`+ Vlg bruger (${E.length}/${s.maxUsers})`:"Vlg bruger"})}),o.jsxs("div",{className:"station-actions",children:[P&&E.length>0&&s.activeSessions.length===0&&o.jsxs("button",{className:"action-btn start",onClick:A,children:["Start (",E.length," ",E.length===1?"bruger":"brugere",")"]}),M&&s.activeSessions.length===0&&E.length===0&&X!=="maintenance"&&X!=="closed"&&o.jsxs("button",{className:"action-btn start",onClick:Y,children:["Start (",s.queue[0].users?.length>0?`Gruppe: ${s.queue[0].users.length}`:s.queue[0].name,")"]}),s.activeSessions.length>1&&P&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"action-btn pause",onClick:()=>{const te=s.activeSessions.some(G=>!G.isPaused);s.activeSessions.forEach(G=>{(te&&!G.isPaused||!te&&G.isPaused)&&f(s.id,G.id)})},children:s.activeSessions.some(te=>!te.isPaused)?"Pause alle":"Fortst alle"}),o.jsx("button",{className:"action-btn stop",onClick:()=>s.activeSessions.forEach(te=>r(s.id,te.id)),children:"Stop alle"})]})]}),B&&o.jsxs("div",{className:`avail-bar ${B.totalSecondsUntilAvailable<=120?"avail-bar--now":B.totalSecondsUntilAvailable<=300?"avail-bar--soon":""}`,children:[o.jsx("div",{className:"avail-bar__fill",style:{width:`${B.progressPercent*100}%`}}),o.jsxs("span",{className:"avail-bar__text",children:[B.totalMinutes,"m  kl. ",Sr(B.availableTime)]})]})]})}function vj({station:s,showNames:n=!0,nicknameMap:r={}}){const[l,c]=y.useState(0),[d,f]=y.useState(0),m=s.status||"available",g=s.activeSessions||[],p=s.queue||[],b=s.type==="PS",w=b&&(g.length+p.length>=4||g.length>=2&&p.length>=1),S=b&&g.length>=2&&!w,x=b&&p.length>=3&&!w,j=g[0]||null,E=j&&j.waitingSince&&!j.startTime;y.useEffect(()=>{if(!j||m==="available"||m==="maintenance"||m==="closed"){c(0),f(0);return}const T=()=>{if(E){const R=Date.now()-new Date(j.waitingSince).getTime(),K=(j.waitingTimeoutSeconds||300)*1e3;f(Math.ceil(Math.max(0,K-R)/1e3))}else c(Zn(j))};T();const L=setInterval(T,1e3);return()=>clearInterval(L)},[j,m,E]);const A={available:{text:"Ledig",cls:"available"},active:{text:"Optaget",cls:"active"},maintenance:{text:"Ude af drift",cls:"maintenance"},closed:{text:"Lukket",cls:"closed"}},z=A[m]||A.available,I=l<=60?"vdt__timer-value--critical":l<=300?"vdt__timer-value--warning":"",F=s.type!=="PS"?o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),o.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"6",y1:"12",x2:"10",y2:"12"}),o.jsx("line",{x1:"8",y1:"10",x2:"8",y2:"14"}),o.jsx("line",{x1:"15",y1:"13",x2:"15.01",y2:"13"}),o.jsx("line",{x1:"18",y1:"11",x2:"18.01",y2:"11"}),o.jsx("path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.544-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"})]}),P=(()=>{if(m!=="active")return null;let T=0,L=0;if(g.length>0){const le=g.map(W=>{let V=0;if(W.startTime)V=Zn(W);else if(W.waitingSince){const k=Date.now()-new Date(W.waitingSince).getTime(),H=(W.waitingTimeoutSeconds||300)*1e3;V=Math.ceil(Math.max(0,H-k)/1e3)}const fe=(W.durationMinutes||Nt)*60;return{remaining:V,totalDuration:fe}});T=Math.max(...le.map(W=>W.remaining)),L=le.reduce((W,V)=>W.remaining>V.remaining?W:V).totalDuration}const R=p.length*Nt*60;T+=R;const K=L+R;if(T<=0)return null;const N=new Date(Date.now()+T*1e3),Y=Math.ceil(T/60),se=Math.max(0,K-T),X=K>0?Math.max(0,Math.min(1,se/K)):0;return{availableTime:N,totalSecondsUntilAvailable:T,totalMinutes:Y,progressPercent:X}})();return o.jsxs("div",{className:`vdt vdt--${s.type==="PS"?"ps":"pc"} vdt--${m} ${w?"vdt--dense":""}`,children:[o.jsxs("div",{className:"vdt__header",children:[o.jsxs("div",{className:"vdt__header-left",children:[o.jsx("div",{className:"vdt__icon",children:F}),o.jsx("div",{className:"vdt__name-row",children:o.jsx("span",{className:"vdt__label",children:s.name||s.id.toUpperCase()})})]}),o.jsx("div",{children:o.jsx("span",{className:`vdt__badge vdt__badge--${z.cls}`,children:z.text})})]}),o.jsx("div",{className:"vdt__content",children:m==="maintenance"?o.jsx("div",{className:"vdt__status",children:"Ude af drift"}):m==="closed"?o.jsx("div",{className:"vdt__status",children:"Lukket"}):g.length===0?o.jsx("div",{className:"vdt__status vdt__status--available",children:"LEDIG"}):o.jsx("div",{className:`vdt__sessions ${S?"vdt__sessions--grid":""} ${w?"vdt__sessions--dense":""}`,children:g.map((T,L)=>{const R=T.userId&&r[T.userId]?r[T.userId]:T.userName||"Ukendt",K=n?R:`Spiller ${L+1}`,N=T.waitingSince&&!T.startTime,Y=T.startTime?Zn(T):0,se=Y<=60?"vdt__timer-value--critical":Y<=300?"vdt__timer-value--warning":"",X=(T.durationMinutes||Nt)*60,le=T.startTime?X-Y:0,M=X>0?Math.max(0,Math.min(1,le/X)):0;return o.jsxs("div",{className:`vdt__session ${N?"vdt__session--waiting":""}`,children:[T.startTime&&o.jsx("div",{className:`vdt__session-fill ${Y<=60?"vdt__session-fill--critical":Y<=300?"vdt__session-fill--warning":""}`,style:{width:`${M*100}%`}}),o.jsxs("div",{className:"vdt__session-name-timer-row",children:[o.jsx("div",{className:`vdt__session-name ${N?"vdt__session-name--waiting":""}`,children:K}),N?o.jsxs("div",{className:"vdt__attendance-timer",children:["(",Ap(d),")"]}):T.startTime?o.jsx("div",{className:"vdt__session-timer",children:o.jsx("span",{className:`vdt__timer-value ${L===0?I:se}`,children:Ap(L===0?l:Y)})}):null]}),N&&o.jsx("div",{className:"vdt__attendance-label",children:"Venter p fremmde"})]},T.id||L)})})}),p.length>0&&o.jsx("div",{className:"vdt__queue",children:o.jsx("div",{className:`vdt__queue-list ${x?"vdt__queue-list--grid":""} ${w?"vdt__queue-list--dense":""}`,children:p.map((T,L)=>{let R;if(!n)R=`Spiller ${L+1}`;else if(T.users&&T.users.length>0){const N=T.users.map(Y=>Y.userId&&r[Y.userId]||Y.name||Y.userName||"Ukendt");R=w?`${N.slice(0,2).join(", ")}${N.length>2?` +${N.length-2}`:""}`:N.join(", ")}else R=T.userId&&r[T.userId]?r[T.userId]:T.name||T.userName||"Ukendt";const K=T.availableTime?Sr(T.availableTime):null;return o.jsxs("div",{className:"vdt__queue-item",children:[o.jsxs("span",{className:"vdt__queue-number",children:[L+1,"."]}),o.jsx("span",{className:"vdt__queue-name",children:R}),K&&o.jsxs("span",{className:"vdt__queue-time",children:["~",K]})]},T.id||L)})})}),P&&o.jsxs("div",{className:`vdt__avail-bar ${P.totalSecondsUntilAvailable<=120?"vdt__avail-bar--now":P.totalSecondsUntilAvailable<=300?"vdt__avail-bar--soon":""}`,children:[o.jsx("div",{className:"vdt__avail-bar__fill",style:{width:`${P.progressPercent*100}%`}}),o.jsxs("span",{className:"vdt__avail-bar__text",children:[P.totalMinutes,"m  kl. ",Sr(P.availableTime)]})]})]})}function Ap(s){if(s<=0)return"00:00";if(s>=3600){const l=Math.floor(s/3600),c=Math.floor(s%3600/60);return`${l}t ${c}min`}const n=Math.floor(s/60),r=s%60;return`${n}:${String(r).padStart(2,"0")}`}const bn=48,_n=27,yj={w:6,h:5},bj={w:8,h:5},_j=6;function yi(s,n,r,l=bn,c=_n){const d=n/l,f=r/c,m=_j;return{left:s.x*d+m/2,top:s.y*f+m/2,width:s.w*d-m,height:s.h*f-m}}function yo(s,n=bn,r=_n){const l=Math.min(s.w,n),c=Math.min(s.h,r),d=Math.max(0,Math.min(s.x,n-l)),f=Math.max(0,Math.min(s.y,r-c));return{...s,x:d,y:f,w:l,h:c}}function qd(s,n){return!(s.x+s.w<=n.x||n.x+n.w<=s.x||s.y+s.h<=n.y||n.y+n.h<=s.y)}function ad(s,n){for(const r of s)if(r.station_id!==n.station_id&&qd(r,n))return r;return null}function wj(s,n){const r=n.x+n.w/2,l=n.y+n.h/2;let c=null,d=1/0;for(const f of s){if(f.station_id===n.station_id||!qd(f,n))continue;const m=f.x+f.w/2,g=f.y+f.h/2,p=Math.hypot(m-r,g-l);p<d&&(d=p,c=f)}return c}function Rp(s,n,r=bn,l=_n){const c=s.map(f=>({...f})),d=c.length*6;for(let f=0;f<d;f++){let m=!1;for(let g=0;g<c.length;g++)for(let p=g+1;p<c.length;p++){const b=c[g],w=c[p];if(!qd(b,w))continue;const S=n.has(b.station_id),x=n.has(w.station_id);if(S&&x)return null;const j=S?b:x?w:b,E=j===b?p:g,A=c[E],I=[{axis:"x",val:j.x+j.w,dist:Math.abs(j.x+j.w-A.x)},{axis:"x",val:j.x-A.w,dist:Math.abs(A.x+A.w-j.x)},{axis:"y",val:j.y+j.h,dist:Math.abs(j.y+j.h-A.y)},{axis:"y",val:j.y-A.h,dist:Math.abs(A.y+A.h-j.y)}].filter(F=>F.axis==="x"?F.val>=0&&F.val+A.w<=r:F.val>=0&&F.val+A.h<=l).sort((F,Z)=>F.dist-Z.dist);if(I.length===0)return null;const C=I[0];C.axis==="x"?c[E]={...c[E],x:C.val}:c[E]={...c[E],y:C.val},m=!0}if(!m)return c}return null}function $d(s,n,r=bn,l=_n){const c=new Set(n.map(w=>w.station_id)),d=s.filter(w=>!c.has(w.id));if(d.length===0)return[...n];let f=0;for(const w of n){const S=w.y+w.h;S>f&&(f=S)}n.length>0&&(f+=1);const m=[...n];let g=0,p=f,b=0;for(const w of d){const S=w.type==="PS"?bj:yj;g+S.w>r&&(g=0,p+=b+1,b=0),m.push({station_id:w.id,x:g,y:p,w:S.w,h:S.h}),g+=S.w+1,S.h>b&&(b=S.h)}return m}function Op(s,n=bn,r=_n){return $d(s,[],n,r)}function Sj(s,n,r){if(!r||r.length===0)return null;if(!s)return[...r].sort((g,p)=>g.y-p.y||g.x-p.x)[0]?.station_id||null;const l=r.find(m=>m.station_id===s);if(!l)return r[0]?.station_id||null;const c=l.x+l.w/2,d=l.y+l.h/2;let f=r.filter(m=>m.station_id!==s);switch(n){case"ArrowRight":f=f.filter(m=>m.x+m.w/2>c);break;case"ArrowLeft":f=f.filter(m=>m.x+m.w/2<c);break;case"ArrowDown":f=f.filter(m=>m.y+m.h/2>d);break;case"ArrowUp":f=f.filter(m=>m.y+m.h/2<d);break;default:return s}return f.length===0?s:(f.sort((m,g)=>{const p=Math.abs(m.x+m.w/2-c)+Math.abs(m.y+m.h/2-d),b=Math.abs(g.x+g.w/2-c)+Math.abs(g.y+g.h/2-d);return p-b}),f[0].station_id)}function Hd({stations:s=[],layoutItems:n=[],gridCols:r=bn,gridRows:l=_n,editable:c=!1,onLayoutChange:d,onSelectionChange:f,collisionMode:m="block",renderTile:g,className:p="",focusedStationId:b=null,highlightedStationId:w=null}){const S=y.useRef(null),[x,j]=y.useState({w:0,h:0}),[E,A]=y.useState(null),[z,I]=y.useState(null),[C,F]=y.useState(null),[Z,P]=y.useState(null),[T,L]=y.useState(null),[R,K]=y.useState(new Set),[N,Y]=y.useState(null),se=y.useRef(R);y.useEffect(()=>{se.current!==R&&(se.current=R,f?.(R))},[R,f]);const X=$d(s,n,r,l),le=(()=>{if(c||X.length===0)return l;let G=0;for(const re of X){const de=re.y+re.h;de>G&&(G=de)}return Math.min(l,G+1)})(),M=y.useRef(X);M.current=X,y.useEffect(()=>{if(!w||!S.current)return;S.current.querySelector(`[data-station-id="${w}"]`)?.scrollIntoView({behavior:"smooth",block:"center"})},[w]),y.useEffect(()=>{const G=S.current;if(!G)return;const re=()=>{const he=G.getBoundingClientRect();j({w:he.width,h:he.height})};re();const de=new ResizeObserver(re);return de.observe(G),()=>de.disconnect()},[]);const $=c?l:le,W=()=>{if(!c||x.w===0)return null;const G=x.w/r,re=x.h/$,de=[];for(let he=1;he<r;he++)de.push(o.jsx("line",{x1:he*G,y1:0,x2:he*G,y2:x.h,stroke:"rgba(0,217,255,0.06)",strokeWidth:"1"},`v${he}`));for(let he=1;he<$;he++)de.push(o.jsx("line",{x1:0,y1:he*re,x2:x.w,y2:he*re,stroke:"rgba(0,217,255,0.06)",strokeWidth:"1"},`h${he}`));return o.jsx("svg",{className:"lc__grid-lines",width:x.w,height:x.h,children:de})},V=y.useCallback((G,re)=>{if(!c||G.target.closest(".lc__resize-handle"))return;G.preventDefault(),G.stopPropagation();const de=S.current.getBoundingClientRect(),he=G.clientX-de.left,pe=G.clientY-de.top;if(G.shiftKey){K(xe=>{const Ee=new Set(xe);return Ee.has(re.station_id)?Ee.delete(re.station_id):Ee.add(re.station_id),Ee});return}const Te=R.has(re.station_id);Te||K(new Set([re.station_id]));const Le=yi(re,x.w,x.h,r,$),Ue=Te?R:new Set([re.station_id]),Re={},Oe=M.current;for(const xe of Ue){const Ee=Oe.find(Ie=>Ie.station_id===xe);Ee&&(Re[xe]={...Ee})}A({station_id:re.station_id,dragSet:Ue,originals:Re,startPx:he,startPy:pe,origItem:{...re},offsetX:he-Le.left,offsetY:pe-Le.top});const $e=[];for(const xe of Ue){const Ee=Re[xe];Ee&&$e.push({station_id:xe,x:Ee.x,y:Ee.y,w:Ee.w,h:Ee.h})}P($e)},[c,x,r,$,R]),fe=y.useCallback((G,re)=>{if(!c)return;G.preventDefault(),G.stopPropagation();const de=S.current.getBoundingClientRect();I({station_id:re.station_id,origItem:{...re},startPx:G.clientX-de.left,startPy:G.clientY-de.top}),F({x:re.x,y:re.y,w:re.w,h:re.h}),K(new Set([re.station_id]))},[c]),k=y.useCallback(G=>{if(!c||G.target!==S.current&&!G.target.classList.contains("lc__grid-lines"))return;G.preventDefault();const re=S.current.getBoundingClientRect(),de=G.clientX-re.left,he=G.clientY-re.top;G.shiftKey||K(new Set),Y({startX:de,startY:he,curX:de,curY:he})},[c]);y.useEffect(()=>{const G=!!E,re=!!z,de=!!N;if(!G&&!re&&!de)return;const he=Te=>{const Le=S.current.getBoundingClientRect(),Ue=Te.clientX-Le.left,Re=Te.clientY-Le.top;if(de&&!G&&!re){Y(Oe=>Oe?{...Oe,curX:Ue,curY:Re}:null);return}if(G){const Oe=x.w/r,$e=x.h/$,xe=Math.round((Ue-E.startPx)/Oe),Ee=Math.round((Re-E.startPy)/$e),Ie=[];for(const ge of E.dragSet){const ve=E.originals[ge];if(!ve)continue;const be=yo({...ve,x:ve.x+xe,y:ve.y+Ee},r,l);Ie.push({station_id:ge,x:be.x,y:be.y,w:be.w,h:be.h})}P(Ie)}if(re){const Oe=x.w/r,$e=x.h/$,xe=Ue-z.startPx,Ee=Re-z.startPy,Ie=Math.max(2,z.origItem.w+Math.round(xe/Oe)),ge=Math.max(2,z.origItem.h+Math.round(Ee/$e)),ve=yo({...z.origItem,w:Ie,h:ge},r,l);F({x:ve.x,y:ve.y,w:ve.w,h:ve.h})}},pe=Te=>{if(de&&!G&&!re&&N){const Le=Math.min(N.startX,N.curX),Ue=Math.min(N.startY,N.curY),Re=Math.max(N.startX,N.curX),Oe=Math.max(N.startY,N.curY);if(Re-Le>5||Oe-Ue>5){const $e=M.current,xe=new Set(Te?.shiftKey?R:[]);for(const Ee of $e){const Ie=yi(Ee,x.w,x.h,r,$),ge=Ie.left,ve=Ie.top,be=Ie.left+Ie.width,De=Ie.top+Ie.height;be>Le&&ge<Re&&De>Ue&&ve<Oe&&xe.add(Ee.station_id)}K(xe)}Y(null);return}if(G&&Z){const Le=M.current,Ue=E.dragSet,Re=Le.filter(xe=>!Ue.has(xe.station_id)),Oe=Z.map(xe=>({...xe}));let $e=!1;for(const xe of Oe){if(ad(Re,xe)){$e=!0;break}if(ad(Oe,xe)){$e=!0;break}}if($e)if(m==="swap"&&Ue.size===1){const xe=[...Ue][0],Ee=Oe[0],Ie=wj(Re,Ee);if(Ie){const ge=E.originals[xe],ve=Le.map(be=>be.station_id===xe?{...be,x:Ie.x,y:Ie.y}:be.station_id===Ie.station_id?{...be,x:ge.x,y:ge.y}:be);d?.(ve)}else H(Ue)}else H(Ue);else{const xe={};for(const Ie of Oe)xe[Ie.station_id]=Ie;const Ee=Le.map(Ie=>xe[Ie.station_id]?xe[Ie.station_id]:Ie);d?.(Ee)}A(null),P(null);return}if(re&&C){const Le=M.current,Ue=z.station_id,Re={station_id:Ue,...C},Oe=Le.filter(xe=>xe.station_id!==Ue);if(ad(Oe,Re))H(new Set([Ue]));else{const xe=Le.map(Ee=>Ee.station_id===Ue?Re:Ee);d?.(xe)}I(null),F(null);return}A(null),I(null),F(null),P(null),Y(null)};return window.addEventListener("pointermove",he),window.addEventListener("pointerup",pe),()=>{window.removeEventListener("pointermove",he),window.removeEventListener("pointerup",pe)}},[E,z,N,C,Z,x,r,l,$,m,d,R]);const H=G=>{L(G),setTimeout(()=>L(null),600)},D=()=>{if(!N)return null;const G=Math.min(N.startX,N.curX),re=Math.min(N.startY,N.curY),de=Math.abs(N.curX-N.startX),he=Math.abs(N.curY-N.startY);return{position:"absolute",left:G,top:re,width:de,height:he}};y.useEffect(()=>{if(!c)return;const G=re=>{re.key==="Escape"&&R.size>0&&(re.stopPropagation(),K(new Set)),(re.ctrlKey||re.metaKey)&&re.key==="a"&&(re.preventDefault(),K(new Set(n.map(de=>de.station_id))))};return window.addEventListener("keydown",G,!0),()=>window.removeEventListener("keydown",G,!0)},[c,R,n]);const B=c?void 0:{aspectRatio:`${r} / ${le}`,height:"auto"};if(x.w===0||x.h===0)return o.jsx("div",{ref:S,className:`lc ${p}`,style:B});const te=E?.dragSet||new Set;return o.jsxs("div",{ref:S,className:`lc ${c?"lc--editable":""} ${p}`,style:B,onPointerDown:c?k:void 0,children:[W(),Z&&E&&Z.map(G=>o.jsx("div",{className:"lc__ghost",style:rd(yi(G,x.w,x.h,r,$))},`ghost-${G.station_id}`)),C&&z&&o.jsx("div",{className:"lc__ghost",style:rd(yi(C,x.w,x.h,r,$))}),N&&o.jsx("div",{className:"lc__marquee",style:D()}),X.map(G=>{const re=s.find($e=>$e.id===G.station_id);if(!re)return null;const de=te.has(G.station_id),he=z?.station_id===G.station_id,pe=yi(G,x.w,x.h,r,$),Te=R.has(G.station_id),Le=T instanceof Set?T.has(G.station_id):T===G.station_id,Ue=b===G.station_id,Re=w===G.station_id,Oe=["lc__tile",de?"lc__tile--dragging":"",he?"lc__tile--dragging":"",Le?"lc__tile--collision":"",Te&&c?"lc__tile--selected":"",Ue?"lc__tile--focused":"",Re?"lc__tile--highlighted":""].filter(Boolean).join(" ");return o.jsxs("div",{"data-station-id":G.station_id,className:Oe,style:{...rd(pe),opacity:de?.4:1},onPointerDown:c?$e=>V($e,G):void 0,children:[g(re,pe),c&&o.jsx("div",{className:"lc__resize-handle",onPointerDown:$e=>fe($e,G)})]},G.station_id)}),c&&R.size>1&&!E&&o.jsxs("div",{className:"lc__selection-badge",children:[R.size," valgte"]})]})}function rd(s){return{position:"absolute",left:`${s.left}px`,top:`${s.top}px`,width:`${s.width}px`,height:`${s.height}px`}}function xj({stations:s,appSettings:n,onExitViewMode:r,layoutItems:l=[],gridCols:c=bn,gridRows:d=_n}){const[f,m]=y.useState(new Date),[g,p]=y.useState({}),b=y.useRef(s);y.useEffect(()=>{s!==b.current&&(m(new Date),b.current=s)},[s]),y.useEffect(()=>{let j=!1;return Fp("",1e3).then(E=>{if(j)return;const A={};E.forEach(z=>{z.nickname&&z.flangoUserId&&(A[z.flangoUserId]=z.nickname)}),p(A)}).catch(()=>{}),()=>{j=!0}},[]);const w=n?.show_names!==!1,S=n?.show_room_title_viewmode!==!1,x=n?.room_title||"Spillerummet";return o.jsxs("div",{className:"view-mode",children:[o.jsxs("div",{className:"view-mode__header",children:[o.jsx("div",{children:S&&o.jsx("div",{className:"view-mode__title",children:x})}),o.jsxs("div",{className:"view-mode__meta",children:[o.jsxs("span",{className:"view-mode__updated",children:["Sidst opdateret: ",Sr(f)]}),o.jsxs("button",{className:"view-mode__exit-btn",onClick:r,title:"Tilbage til kontrolpanel (Tab)",children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),o.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Tilbage"]})]})]}),o.jsx("div",{className:"view-mode__layout",style:{"--pulse-i":n?.pulse_enabled_viewmode!==!1?(n?.pulse_intensity_viewmode??50)/100:0},children:s.length===0?o.jsx("div",{className:"view-mode__empty",children:"Ingen stationer konfigureret"}):o.jsx(Hd,{stations:s,layoutItems:l,gridCols:c,gridRows:d,editable:!1,renderTile:j=>o.jsx(vj,{station:j,showNames:w,nicknameMap:g}),className:"view-mode__canvas"})})]})}async function Tv(s=null){try{let n=me.schema("gaming").from("stations").select("*").order("display_order",{ascending:!0});s&&(n=n.eq("institution_id",s));const{data:r,error:l}=await n;return l?(console.error("Error fetching stations:",l),[]):(r||[]).map(c=>({id:c.slug,dbId:c.id,slug:c.slug,name:c.name,type:c.type==="console"?"PS":"PC",maxUsers:c.max_users,displayOrder:c.display_order,status:c.status,hasClient:c.has_client}))}catch(n){return console.error("Error in fetchStations:",n),[]}}async function jj({name:s,type:n,maxUsers:r}){try{const l=await ws();if(!l)return null;const c=Cv(s),{data:d}=await me.schema("gaming").from("stations").select("display_order").order("display_order",{ascending:!1}).limit(1),f=d&&d.length>0?d[0].display_order+1:0,{data:m,error:g}=await me.schema("gaming").from("stations").insert({institution_id:l,slug:c,name:s,type:n==="PS"?"console":"pc",max_users:r||(n==="PS"?4:1),display_order:f,status:"available"}).select().single();return g?(g.code==="23505"&&console.error("Station slug already exists:",c),console.error("Error creating station:",g),null):{id:m.slug,dbId:m.id,slug:m.slug,name:m.name,type:m.type==="console"?"PS":"PC",maxUsers:m.max_users,displayOrder:m.display_order,status:m.status,hasClient:m.has_client}}catch(l){return console.error("Error in createStation:",l),null}}async function kj(s,n){try{const r={};n.name!==void 0&&(r.name=n.name,r.slug=Cv(n.name)),n.type!==void 0&&(r.type=n.type==="PS"?"console":"pc"),n.maxUsers!==void 0&&(r.max_users=n.maxUsers),n.status!==void 0&&(r.status=n.status);const{error:l}=await me.schema("gaming").from("stations").update(r).eq("id",s);return l?(console.error("Error updating station:",l),!1):!0}catch(r){return console.error("Error in updateStation:",r),!1}}async function Ej(s){try{const{error:n}=await me.schema("gaming").from("stations").delete().eq("id",s);return n?(console.error("Error deleting station:",n),!1):!0}catch(n){return console.error("Error in deleteStation:",n),!1}}function Cv(s){return s.toLowerCase().replace(/[]/g,"ae").replace(/[]/g,"oe").replace(/[]/g,"aa").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||"station"}function Tj({stations:s,onClose:n,onStationsChanged:r}){const[l,c]=y.useState([]),[d,f]=y.useState(!1),[m,g]=y.useState(null),[p,b]=y.useState(null),[w,S]=y.useState(!1),[x,j]=y.useState(null),[E,A]=y.useState(""),[z,I]=y.useState("PC"),[C,F]=y.useState(1);y.useEffect(()=>{Z()},[]);const Z=async()=>{f(!0);try{const N=await Tv();c(N)}catch(N){console.error("Error loading stations:",N),g("Fejl ved indlsning af stationer")}finally{f(!1)}},P=()=>{j(null),A(""),I("PC"),F(1),S(!0),g(null)},T=N=>{j(N),A(N.name),I(N.type),F(N.maxUsers),S(!0),g(null)},L=async N=>{if(s?.find(X=>X.id===N.id||X.slug===N.slug)?.activeSessions?.length>0){g(`"${N.name}" har aktive sessions. Stop dem frst.`);return}if(!window.confirm(`Slet stationen "${N.name}"? Alle tilknyttede data fjernes.`))return;g(null),await Ej(N.dbId)?(c(X=>X.filter(le=>le.dbId!==N.dbId)),K(`"${N.name}" slettet`),r?.()):g("Kunne ikke slette stationen")},R=async N=>{if(N.preventDefault(),!!E.trim()){g(null),f(!0);try{if(x)await kj(x.dbId,{name:E.trim(),type:z,maxUsers:C})?(await Z(),K(`"${E.trim()}" opdateret`),S(!1),r?.()):g("Kunne ikke opdatere stationen");else{const Y=await jj({name:E.trim(),type:z,maxUsers:C});Y?(c(se=>[...se,Y]),K(`"${E.trim()}" oprettet`),S(!1),r?.()):g("Kunne ikke oprette stationen. Tjek at navnet er unikt.")}}finally{f(!1)}}},K=N=>{b(N),setTimeout(()=>b(null),3e3)};return o.jsx("div",{className:"mss__overlay",onClick:n,children:o.jsxs("div",{className:"mss",onClick:N=>N.stopPropagation(),children:[o.jsxs("div",{className:"mss__header",children:[o.jsx("h3",{children:"Administrr stationer"}),o.jsx("button",{className:"mss__close",onClick:n,children:""})]}),m&&o.jsx("div",{className:"mss__msg mss__msg--error",children:m}),p&&o.jsx("div",{className:"mss__msg mss__msg--success",children:p}),w?o.jsxs("form",{className:"mss__form",onSubmit:R,children:[o.jsx("h4",{className:"mss__form-title",children:x?"Rediger station":"Ny station"}),o.jsxs("label",{className:"mss__field",children:[o.jsx("span",{children:"Navn"}),o.jsx("input",{type:"text",value:E,onChange:N=>A(N.target.value),placeholder:"fx PC 1, Xbox Lounge",autoFocus:!0,required:!0})]}),o.jsxs("label",{className:"mss__field",children:[o.jsx("span",{children:"Type"}),o.jsxs("select",{value:z,onChange:N=>{I(N.target.value),N.target.value==="PS"&&C===1?F(4):N.target.value==="PC"&&C===4&&F(1)},children:[o.jsx("option",{value:"PC",children:"PC"}),o.jsx("option",{value:"PS",children:"Konsol"})]})]}),o.jsxs("label",{className:"mss__field",children:[o.jsx("span",{children:"Maks brugere"}),o.jsx("input",{type:"number",min:"1",max:"8",value:C,onChange:N=>F(parseInt(N.target.value)||1)})]}),o.jsxs("div",{className:"mss__form-actions",children:[o.jsx("button",{type:"submit",className:"le__btn le__btn--primary",disabled:d||!E.trim(),children:d?"Gemmer...":x?"Gem ndringer":"Opret"}),o.jsx("button",{type:"button",className:"le__btn",onClick:()=>S(!1),children:"Annullr"})]})]}):o.jsxs("div",{className:"mss__content",children:[d?o.jsx("div",{className:"mss__empty",children:"Indlser stationer..."}):l.length===0?o.jsx("div",{className:"mss__empty",children:o.jsx("p",{children:"Ingen stationer oprettet endnu."})}):o.jsx("div",{className:"mss__list",children:l.map(N=>o.jsxs("div",{className:"mss__item",children:[o.jsx("div",{className:"mss__item-icon",children:N.type==="PS"?"":""}),o.jsxs("div",{className:"mss__item-info",children:[o.jsx("span",{className:"mss__item-name",children:N.name}),o.jsxs("span",{className:"mss__item-meta",children:[N.type,"  maks ",N.maxUsers," ",N.maxUsers===1?"bruger":"brugere"]})]}),o.jsxs("div",{className:"mss__item-actions",children:[o.jsx("button",{className:"le__btn",onClick:()=>T(N),children:"Rediger"}),o.jsx("button",{className:"le__btn le__btn--danger",onClick:()=>L(N),children:"Slet"})]})]},N.dbId))}),o.jsx("button",{className:"le__btn le__btn--primary mss__add-btn",onClick:P,children:"+ Tilfj station"})]})]})})}async function vr(){try{const{data:s,error:n}=await me.schema("gaming").from("station_layout_presets").select("*").order("name");return n?(console.error("Error fetching layout presets:",n),[]):s||[]}catch(s){return console.error("Error in fetchLayoutPresets:",s),[]}}async function Dp(s){try{const n=await ws();if(!n)return{data:null,error:"Kunne ikke finde institution. Prv at logge ind igen."};const r={institution_id:n,name:s.name,is_default:s.is_default??!1,grid_w:s.grid_w??48,grid_h:s.grid_h??27,items_json:s.items_json??[],updated_at:new Date().toISOString()};if(s.id){const{data:l,error:c}=await me.schema("gaming").from("station_layout_presets").update(r).eq("id",s.id).select().single();return c?(console.error("Error updating layout preset:",c),{data:null,error:`Fejl ved opdatering: ${c.message}`}):{data:l,error:null}}else{const{data:l,error:c}=await me.schema("gaming").from("station_layout_presets").insert(r).select().single();return c?(console.error("Error creating layout preset:",c),{data:null,error:`Fejl ved oprettelse: ${c.message}`}):{data:l,error:null}}}catch(n){return console.error("Error in saveLayoutPreset:",n),{data:null,error:`Uventet fejl: ${n.message}`}}}async function Cj(s){try{const{error:n}=await me.schema("gaming").from("station_layout_presets").delete().eq("id",s);return n?(console.error("Error deleting layout preset:",n),!1):!0}catch(n){return console.error("Error in deleteLayoutPreset:",n),!1}}async function Nj(s){try{const n=await ws();if(!n)return!1;const{error:r}=await me.schema("gaming").from("station_layout_presets").update({is_default:!1}).eq("institution_id",n);if(r)return console.error("Error clearing default presets:",r),!1;const{error:l}=await me.schema("gaming").from("station_layout_presets").update({is_default:!0,updated_at:new Date().toISOString()}).eq("id",s);return l?(console.error("Error setting default preset:",l),!1):!0}catch(n){return console.error("Error in setDefaultPreset:",n),!1}}function Aj({stations:s,institutionId:n,onClose:r,onStationsChanged:l}){const c=n?`skaermtid_last_layout_preset_${n}`:"skaermtid_last_layout_preset",[d,f]=y.useState([]),[m,g]=y.useState(null),[p,b]=y.useState(""),[w,S]=y.useState([]),[x,j]=y.useState(bn),[E,A]=y.useState(_n),[z,I]=y.useState(!1),[C,F]=y.useState(!1),[Z,P]=y.useState("block"),[T,L]=y.useState(!1),[R,K]=y.useState(""),[N,Y]=y.useState(!1),[se,X]=y.useState(!0),[le,M]=y.useState(null),[$,W]=y.useState(!1),[V,fe]=y.useState(new Set),k=y.useRef([]),H=y.useRef([]),[D,B]=y.useState(0),[te,G]=y.useState(0),re=y.useRef(!1),de=y.useCallback(oe=>{S(ye=>{const Be=typeof oe=="function"?oe(ye):oe;return Be===ye?ye:(re.current||(k.current=[...k.current,ye],k.current.length>80&&(k.current=k.current.slice(-80)),H.current=[],B(k.current.length),G(0)),re.current=!1,Be)})},[]),he=y.useCallback(()=>{if(k.current.length===0)return;const oe=k.current[k.current.length-1];k.current=k.current.slice(0,-1),B(k.current.length),S(ye=>(H.current=[...H.current,ye],G(H.current.length),oe)),I(!0)},[]),pe=y.useCallback(()=>{if(H.current.length===0)return;const oe=H.current[H.current.length-1];H.current=H.current.slice(0,-1),G(H.current.length),S(ye=>(k.current=[...k.current,ye],B(k.current.length),oe)),I(!0)},[]),Te=y.useCallback((oe,ye)=>{de(Be=>{const Me=V.size>0?V:new Set(Be.map(et=>et.station_id)),ne=Be.filter(et=>Me.has(et.station_id));if(ne.length===0)return Be;const ke=[...ne].sort((et,Mt)=>et.y!==Mt.y?et.y-Mt.y:et.x-Mt.x)[0],ft=Math.max(2,ke.w+oe),Fe=Math.max(2,ke.h+ye),vt=ke.w>0?ft/ke.w:1,yt=ke.h>0?Fe/ke.h:1,mt=Be.map(et=>{if(!Me.has(et.station_id))return et;const Mt=Math.max(2,et.w+oe),wn=Math.max(2,et.h+ye);if(et.station_id===ke.station_id)return yo({...et,w:Mt,h:wn},x,E);const tt=ke.x+Math.round((et.x-ke.x)*vt),gt=ke.y+Math.round((et.y-ke.y)*yt);return yo({...et,x:tt,y:gt,w:Mt,h:wn},x,E)}),dt=mt.filter(et=>Me.has(et.station_id));let Pn=mt;if(dt.length>1){const et=ke.station_id,Mt=Rp(dt,new Set([et]),x,E);if(!Mt)return Be;const wn={};for(const tt of Mt)wn[tt.station_id]=tt;Pn=mt.map(tt=>wn[tt.station_id]||tt)}return Rp(Pn,Me,x,E)||Be}),I(!0)},[V,x,E,de]);y.useEffect(()=>{Le()},[]);const Le=async()=>{X(!0);const oe=await vr();f(oe);const ye=localStorage.getItem(c),Be=oe.find(ze=>ze.is_default),ne=(ye?oe.find(ze=>ze.id===ye):null)||Be||null;if(ne)Ue(ne);else{const ze=Op(s,bn,_n);S(ze),j(bn),A(_n),b("Standard"),g(null)}X(!1)},Ue=oe=>{g(oe.id),b(oe.name),re.current=!0,S(oe.items_json||[]),j(oe.grid_w||bn),A(oe.grid_h||_n),I(!1),k.current=[],H.current=[],B(0),G(0),localStorage.setItem(c,oe.id)},Re=y.useCallback(oe=>{de(oe),I(!0)},[de]),Oe=(oe,ye)=>{M({type:oe,text:ye}),setTimeout(()=>M(null),4e3)},$e=async()=>{W(!0);const{data:oe,error:ye}=await Dp({id:m||void 0,name:p||"Standard",grid_w:x,grid_h:E,items_json:w});if(W(!1),ye)return Oe("error",ye),null;if(oe){g(oe.id),I(!1),localStorage.setItem(c,oe.id),Oe("success",`"${oe.name}" gemt`);const Be=await vr();return f(Be),oe}return null},xe=async()=>{if(!R.trim())return;W(!0);const{data:oe,error:ye}=await Dp({name:R.trim(),grid_w:x,grid_h:E,items_json:w});if(W(!1),ye){Oe("error",ye);return}if(oe){g(oe.id),b(oe.name),I(!1),L(!1),K(""),localStorage.setItem(c,oe.id),Oe("success",`"${oe.name}" gemt`);const Be=await vr();f(Be)}},Ee=async()=>{if(!m||!window.confirm(`Slet layout "${p}"?`))return;if(await Cj(m)){Oe("success",`"${p}" slettet`);const ye=await vr();f(ye),ye.length>0?Ue(ye[0]):(g(null),b("Standard"),S(Op(s,x,E)),I(!1),localStorage.removeItem(c))}else Oe("error","Kunne ikke slette layout")},Ie=async()=>{let oe=m;if(oe||(oe=(await $e())?.id||null),oe)if(await Nj(oe)){Oe("success","Sat som standard-layout");const Be=await vr();f(Be)}else Oe("error","Kunne ikke stte standard")},ge=oe=>{if(z&&!window.confirm("Du har ndringer der ikke er gemt. Skift alligevel?"))return;const ye=d.find(Be=>Be.id===oe);ye&&Ue(ye)},ve=oe=>{const ye=oe.status||"available",Be=oe.type!=="PS",Me=oe.activeSessions?.length||0,ne=oe.queue?.length||0;return o.jsxs("div",{className:`le-tile le-tile--${ye}`,children:[o.jsxs("div",{className:"le-tile__header",children:[o.jsx("span",{className:"le-tile__icon",children:Be?"":""}),o.jsx("span",{className:"le-tile__name",children:oe.name||oe.id.toUpperCase()})]}),o.jsxs("div",{className:"le-tile__info",children:[Me>0&&o.jsxs("span",{className:"le-tile__badge le-tile__badge--active",children:[Me," aktiv"]}),ne>0&&o.jsxs("span",{className:"le-tile__badge le-tile__badge--queue",children:[ne," i k"]}),Me===0&&ne===0&&o.jsx("span",{className:"le-tile__badge le-tile__badge--available",children:"Ledig"})]})]})};y.useEffect(()=>{const oe=ye=>{if((ye.ctrlKey||ye.metaKey)&&ye.key==="z"&&!ye.shiftKey){ye.preventDefault(),he();return}if((ye.ctrlKey||ye.metaKey)&&(ye.key==="Z"||ye.key==="z"&&ye.shiftKey||ye.key==="y")){ye.preventDefault(),pe();return}ye.key==="Escape"&&(T?L(!1):N?Y(!1):r())};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[r,T,N,he,pe]);const De=d.find(oe=>oe.id===m)?.is_default===!0;return o.jsxs("div",{className:"le",children:[o.jsxs("div",{className:"le__toolbar",children:[o.jsxs("div",{className:"le__toolbar-left",children:[o.jsxs("select",{className:"le__select",value:m||"",onChange:oe=>oe.target.value?ge(oe.target.value):null,children:[d.length===0&&o.jsx("option",{value:"",children:"Ingen presets"}),d.map(oe=>o.jsxs("option",{value:oe.id,children:[oe.name,oe.is_default?" (standard)":""]},oe.id))]}),o.jsx("button",{className:"le__btn le__btn--primary",onClick:$e,disabled:$,title:"Gem",children:$?" Gemmer...":z?" Gem *":" Gem"}),o.jsx("button",{className:"le__btn",onClick:()=>{L(!0),K("")},title:"Gem som ny",children:"Gem som..."}),m&&o.jsx("button",{className:"le__btn le__btn--danger",onClick:Ee,title:"Slet layout",children:"Slet"}),m&&!De&&o.jsx("button",{className:"le__btn",onClick:Ie,title:"St som standard-layout",children:"St standard"}),De&&o.jsx("span",{className:"le__default-badge",children:" Standard"})]}),o.jsxs("div",{className:"le__toolbar-right",children:[o.jsxs("div",{className:"le__undo-group",children:[o.jsx("button",{className:"le__btn le__btn--undo",onClick:he,disabled:D===0,title:"Fortryd (Ctrl+Z)",children:""}),o.jsx("button",{className:"le__btn le__btn--undo",onClick:pe,disabled:te===0,title:"Gentag (Ctrl+Shift+Z)",children:""})]}),o.jsxs("div",{className:"le__size-group",children:[o.jsxs("span",{className:"le__size-label",children:["Strrelse",V.size>0?` (${V.size})`:""]}),o.jsx("button",{className:"le__btn le__btn--size",onClick:()=>Te(-1,-1),title:"Formindsk (1 grid)",children:""}),o.jsx("button",{className:"le__btn le__btn--size",onClick:()=>Te(1,1),title:"Forstr (+1 grid)",children:"+"}),o.jsx("button",{className:"le__btn le__btn--size le__btn--size-w",onClick:()=>Te(-1,0),title:"Smallere bredde",children:"W"}),o.jsx("button",{className:"le__btn le__btn--size le__btn--size-w",onClick:()=>Te(1,0),title:"Bredere",children:"W+"}),o.jsx("button",{className:"le__btn le__btn--size le__btn--size-h",onClick:()=>Te(0,-1),title:"Lavere hjde",children:"H"}),o.jsx("button",{className:"le__btn le__btn--size le__btn--size-h",onClick:()=>Te(0,1),title:"Hjere",children:"H+"})]}),o.jsxs("label",{className:"le__toggle",children:[o.jsx("input",{type:"checkbox",checked:Z==="swap",onChange:oe=>P(oe.target.checked?"swap":"block")}),o.jsx("span",{className:"le__toggle-label",children:"Swap-tilstand"})]}),o.jsxs("label",{className:"le__toggle",children:[o.jsx("input",{type:"checkbox",checked:C,onChange:oe=>F(oe.target.checked)}),o.jsx("span",{className:"le__toggle-label",children:"Redigr layout"})]}),o.jsx("button",{className:"le__btn",onClick:()=>Y(!0),children:"Administrr stationer"}),o.jsx("button",{className:"le__btn le__btn--close",onClick:r,title:"Luk (Esc)",children:" Luk"})]})]}),le&&o.jsx("div",{className:`le__status le__status--${le.type}`,children:le.text}),o.jsx("div",{className:"le__canvas-wrap",children:se?o.jsx("div",{className:"le__loading",children:"Indlser layout..."}):o.jsx(Hd,{stations:s,layoutItems:w,gridCols:x,gridRows:E,editable:C,onLayoutChange:Re,onSelectionChange:fe,collisionMode:Z,renderTile:ve,className:"le__canvas"})}),T&&o.jsx("div",{className:"le__dialog-overlay",onClick:()=>L(!1),children:o.jsxs("div",{className:"le__dialog",onClick:oe=>oe.stopPropagation(),children:[o.jsx("h3",{children:"Gem layout som"}),o.jsx("input",{className:"le__dialog-input",type:"text",placeholder:"Navn p layout...",value:R,onChange:oe=>K(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&xe(),autoFocus:!0}),o.jsxs("div",{className:"le__dialog-actions",children:[o.jsx("button",{className:"le__btn le__btn--primary",onClick:xe,disabled:!R.trim(),children:"Gem"}),o.jsx("button",{className:"le__btn",onClick:()=>L(!1),children:"Annullr"})]})]})}),N&&o.jsx(Tj,{stations:s,onClose:()=>Y(!1),onStationsChanged:l})]})}class Rj extends y.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({errorInfo:r}),this.props.onError&&this.props.onError(n,r)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsx("div",{style:Ps.container,children:o.jsxs("div",{style:Ps.content,children:[o.jsx("div",{style:Ps.icon,children:""}),o.jsx("h2",{style:Ps.title,children:"Noget gik galt"}),o.jsx("p",{style:Ps.message,children:"Der opstod en uventet fejl. Prv at genindlse siden."}),!1,o.jsxs("div",{style:Ps.buttons,children:[o.jsx("button",{style:Ps.retryButton,onClick:this.handleRetry,children:"Prv igen"}),o.jsx("button",{style:Ps.reloadButton,onClick:this.handleReload,children:"Genindls side"})]})]})}):this.props.children}}const Ps={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#0a0a0a",padding:"20px"},content:{textAlign:"center",maxWidth:"500px",padding:"40px",backgroundColor:"#1a1a1a",borderRadius:"12px",border:"1px solid #333"},icon:{fontSize:"48px",marginBottom:"20px"},title:{color:"#fff",fontSize:"24px",fontWeight:"600",marginBottom:"12px"},message:{color:"#888",fontSize:"16px",marginBottom:"24px",lineHeight:"1.5"},buttons:{display:"flex",gap:"12px",justifyContent:"center"},retryButton:{padding:"12px 24px",backgroundColor:"transparent",border:"1px solid #4a9eff",borderRadius:"6px",color:"#4a9eff",fontSize:"14px",fontWeight:"500",cursor:"pointer"},reloadButton:{padding:"12px 24px",backgroundColor:"#4a9eff",border:"none",borderRadius:"6px",color:"#fff",fontSize:"14px",fontWeight:"500",cursor:"pointer"}},va=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Oj(s,n){const[r,l]=y.useState([]),[c,d]=y.useState(!1),f=y.useCallback(async()=>{try{const T=await Tv(n);if(!T||T.length===0){l([]),d(!0);return}let L=me.schema("gaming").from("sessions").select("*").eq("status","active"),R=me.schema("gaming").from("queue").select("*").order("position",{ascending:!0});n&&(L=L.eq("institution_id",n),R=R.eq("institution_id",n));const[K,N]=await Promise.all([L,R]),Y=K.data||[],se=N.data||[];console.log(`[loadStations] Loaded ${Y.length} sessions and ${se.length} queue items from DB`),Y.forEach(V=>console.log(`[loadStations]   session: ${V.user_name} on ${V.device_id} (id=${V.id?.slice(0,8)})`));const X={};Y.forEach(V=>{X[V.device_id]||(X[V.device_id]=[]),X[V.device_id].push({id:V.id,userName:V.user_name||"",userId:V.user_id||null,startTime:V.start_time?new Date(V.start_time):null,durationMinutes:V.duration_minutes||30,isPaused:V.is_paused||!1,remainingSecondsWhenPaused:V.remaining_seconds_when_paused||null,userBalanceAtStart:V.user_balance_at_start??null,balanceDeducted:V.balance_deducted??0,waitingSince:V.waiting_since?new Date(V.waiting_since):null,waitingTimeoutSeconds:V.waiting_timeout_seconds??null,_loadedFromDb:!0})});const le=new Set(Y.map(V=>V.id));let M=0;try{const V=localStorage.getItem("skaermtid_sessions_backup");V&&(JSON.parse(V).forEach(k=>{if(!le.has(k.id)&&k._deviceId){const H=k._deviceId;X[H]||(X[H]=[]),X[H].push({id:k.id,userName:k.userName||"",userId:k.userId||null,startTime:k.startTime?new Date(k.startTime):null,durationMinutes:k.durationMinutes||30,isPaused:k.isPaused||!1,remainingSecondsWhenPaused:k.remainingSecondsWhenPaused||null,userBalanceAtStart:k.userBalanceAtStart??null,balanceDeducted:k.balanceDeducted??0,waitingSince:k.waitingSince?new Date(k.waitingSince):null,waitingTimeoutSeconds:k.waitingTimeoutSeconds??null,_loadedFromDb:!0,_restoredFromBackup:!0}),M++,console.log(`[loadStations]  Restored session from backup: ${k.userName} on ${H}`)}}),localStorage.removeItem("skaermtid_sessions_backup"))}catch(V){console.warn("[loadStations] Error restoring from localStorage backup:",V)}M>0&&console.log(`[loadStations] Restored ${M} sessions from localStorage backup`);const $={};se.forEach(V=>{$[V.device_id]||($[V.device_id]=[]),$[V.device_id].push({id:V.id,name:V.user_name||"",userId:V.user_id||null,availableTime:V.expected_start_time?new Date(V.expected_start_time):new Date,users:V.is_group?V.group_users||[]:void 0})});const W=T.map(V=>({...V,activeSessions:X[V.id]||[],queue:$[V.id]||[],status:X[V.id]?.length>0?"active":V.status}));l(W),d(!0),M>0&&W.filter(V=>V.activeSessions.some(fe=>fe._restoredFromBackup)).forEach(V=>{console.log(`[loadStations] Re-syncing restored station ${V.id} to DB`),fp(V)})}catch(T){console.error("Error loading stations:",T),d(!0)}},[n]),m=y.useCallback((T,L)=>{let R=null;return l(K=>{const N=K.find(Y=>Y.id===T);return N?(R=L(N),K.map(Y=>Y.id===T?R:Y)):K}),R},[]),g=y.useCallback(T=>{if(T){const L=(T.activeSessions||[]).map(R=>R.userName).join(", ");console.log(`[useStations] syncStation called for ${T.id}: ${T.activeSessions?.length||0} sessions [${L}], ${T.queue?.length||0} queue`),fp(T).catch(R=>{console.error(`Error syncing station ${T.id}:`,R)})}else console.warn("[useStations] syncStation called with null/undefined station")},[]),p=y.useCallback(()=>s?.max_session_minutes||Nt,[s]),b=y.useCallback(async(T,L)=>{let R="",K=null,N=!1,Y=null,se=!1,X=[];L&&typeof L=="object"&&(R=L.name||"",K=L.userId||null,L.users?.length>0?(se=!0,X=L.users,N=!0,Y=L.id):L.id&&(N=!0,Y=L.id));const le=p();let M=le,$=null;if(K&&!se){const[V,fe]=await Promise.all([Wu(K),Lw(K)]);if(V!==null){if(V<=0){console.warn(`User ${R} has no balance (${V} min)`);return}M=Math.min(V,le),$=V}fe?.max_session_minutes&&(M=Math.min(M,fe.max_session_minutes))}const W=m(T,V=>{if(V.status!=="available"&&V.status!=="active")return V;if(se){const B=X.map(de=>({id:va(),userName:de,startTime:new Date,durationMinutes:le})),te=[...V.activeSessions,...B],G=V.queue.filter(de=>de.id!==Y),re=Un(te,G,Nt);return{...V,activeSessions:te,queue:G.map((de,he)=>({...de,availableTime:re[he]||new Date})),status:"active"}}const fe={id:va(),userName:R,userId:K,startTime:new Date,durationMinutes:M,userBalanceAtStart:$,balanceDeducted:0},k=[...V.activeSessions,fe];let H=V.queue;N&&Y&&(H=V.queue.filter(B=>B.id!==Y));const D=Un(k,H,Nt);return{...V,activeSessions:k,queue:H.map((B,te)=>({...B,availableTime:D[te]||new Date})),status:"active"}});g(W)},[m,g,p]),w=y.useCallback((T,L,R="admin_stop")=>{const K=s?.queue_attendance_enabled||!1,N=s?.queue_attendance_timeout_seconds||300;l(se=>{const le=se.find(M=>M.id===T)?.activeSessions?.find(M=>M.id===L);return le&&le.startTime&&ev(le,T,R),se});const Y=m(T,se=>{const X=se.activeSessions.filter(W=>W.id!==L),le=Un(X,se.queue,Nt);let M=se.queue.map((W,V)=>({...W,availableTime:le[V]||new Date}));if(X.length<se.maxUsers&&M.length>0){const W=M[0];M=M.slice(1);let V=[];W.users?.length>0?V=W.users.map(H=>({id:va(),userName:H,durationMinutes:p(),...K&&{waitingSince:new Date,waitingTimeoutSeconds:N}})):V=[{id:va(),userName:W.name,userId:W.userId||null,durationMinutes:p(),...K&&{waitingSince:new Date,waitingTimeoutSeconds:N}}];const fe=[...X,...V],k=Un(fe,M,Nt);return{...se,activeSessions:fe,queue:M.map((H,D)=>({...H,availableTime:k[D]||new Date})),status:"active"}}return{...se,activeSessions:X,queue:M,status:X.length===0?"available":"active"}});g(Y)},[m,g,p,s]),S=y.useCallback((T,L,R)=>{let K=null;l(N=>N.map(Y=>{if(Y.id===T){const se=Y.activeSessions.map(le=>{if(le.id===L){const M=Math.max(1,le.durationMinutes+R);return{...le,durationMinutes:M}}return le}),X=Un(se,Y.queue,Nt);return K={...Y,activeSessions:se,queue:Y.queue.map((le,M)=>({...le,availableTime:X[M]||new Date}))},K}return Y})),g(K)},[g]),x=y.useCallback((T,L)=>{const R=m(T,K=>{const N=K.activeSessions.find(Y=>Y.id===L);if(!N||!N.startTime)return K;if(N.isPaused){const Y=N.remainingSecondsWhenPaused||0,se=new Date(Date.now()-N.durationMinutes*60*1e3+Y*1e3);return{...K,activeSessions:K.activeSessions.map(X=>X.id===L?{...X,isPaused:!1,startTime:se,remainingSecondsWhenPaused:void 0}:X)}}else{const Y=Zn(N);return{...K,activeSessions:K.activeSessions.map(se=>se.id===L?{...se,isPaused:!0,remainingSecondsWhenPaused:Y}:se)}}});g(R)},[m,g]),j=y.useCallback(async(T,L,R)=>{let K=p(),N=null;if(R){const se=await Wu(R);if(se!==null){if(se<=0){const X=m(T,le=>{const M=le.activeSessions.filter($=>$.id!==L);return{...le,activeSessions:M,status:M.length===0?"available":"active"}});g(X);return}K=Math.min(se,K),N=se}}const Y=m(T,se=>{const X=se.activeSessions.find(le=>le.id===L);return!X||X.startTime?se:{...se,activeSessions:se.activeSessions.map(le=>le.id===L?{...le,startTime:new Date,durationMinutes:K,userBalanceAtStart:N,balanceDeducted:0,waitingSince:null,waitingTimeoutSeconds:null}:le)}});g(Y)},[m,g,p]),E=y.useCallback(async(T,L,R)=>{const K=p();let N=K,Y=null;if(R){const X=await Wu(R);if(X!==null){if(X<=0){console.warn(`User ${L} has no balance`);return}N=Math.min(X,K),Y=X}}const se=m(T,X=>{if(X.activeSessions.length===0)return X;const le={id:va(),userName:L,userId:R,startTime:new Date,durationMinutes:N,userBalanceAtStart:Y,balanceDeducted:0},M=[...X.activeSessions,le],$=Un(M,X.queue,Nt);return{...X,activeSessions:M,queue:X.queue.map((W,V)=>({...W,availableTime:$[V]||new Date})),status:"active"}});g(se)},[m,g,p]),A=y.useCallback((T,L,R)=>{const K=m(T,N=>({...N,activeSessions:N.activeSessions.map(Y=>Y.id===L?{...Y,userName:R}:Y)}));g(K)},[m,g]),z=y.useCallback((T,L,R)=>{const K=m(T,N=>{const Y={id:va(),name:L,userId:R||null,availableTime:new Date},se=[...N.queue,Y],X=Un(N.activeSessions,se,Nt);return{...N,queue:se.map((le,M)=>({...le,availableTime:X[M]||new Date}))}});g(K)},[m,g]),I=y.useCallback((T,L)=>{if(!L?.length)return;const R=m(T,K=>{const N={id:va(),users:[...L],availableTime:new Date},Y=[...K.queue,N],se=Un(K.activeSessions,Y,Nt);return{...K,queue:Y.map((X,le)=>({...X,availableTime:se[le]||new Date}))}});g(R)},[m,g]),C=y.useCallback((T,L,R,K,N)=>{const Y=m(T,se=>N&&typeof R=="number"&&K!==void 0?{...se,queue:se.queue.map(X=>{if(X.id===L&&X.users){const le=[...X.users];return le[R]=K,{...X,users:le}}return X})}:{...se,queue:se.queue.map(X=>X.id===L?{...X,name:R}:X)});g(Y)},[m,g]),F=y.useCallback((T,L)=>{const R=m(T,K=>{const N=K.queue.filter(se=>se.id!==L),Y=Un(K.activeSessions,N,Nt);return{...K,queue:N.map((se,X)=>({...se,availableTime:Y[X]||new Date}))}});g(R)},[m,g]),Z=y.useCallback((T,L,R)=>{const K=m(T,N=>{const Y=Bd(N.queue,L,R),se=Un(N.activeSessions,Y,Nt);return{...N,queue:Y.map((X,le)=>({...X,availableTime:se[le]||new Date}))}});g(K)},[m,g]),P=y.useCallback((T,L)=>{const R=m(T,K=>({...K,status:L}));g(R)},[m,g]);return{stations:r,setStations:l,stationsLoaded:c,loadStations:f,syncStation:g,handlers:{handleStartSession:b,handleStopSession:w,handleExtendSession:S,handlePauseSession:x,handleStartPendingSession:j,handleJoinSession:E,handleEditSessionName:A,handleAddToQueue:z,handleAddGroupToQueue:I,handleEditQueueName:C,handleRemoveFromQueue:F,handleReorderQueue:Z,handleStatusChange:P}}}function Dj(){const[s,n]=y.useState(!1),[r,l]=y.useState(!0),[c,d]=y.useState(!1),[f,m]=y.useState(null),[g,p]=y.useState(null),[b,w]=y.useState(null),[S,x]=y.useState(null),[j,E]=y.useState(null),[A,z]=y.useState(null),I=y.useRef(!1),C=y.useRef(!1),F=async K=>{try{const{data:N,error:Y}=await me.schema("gaming").from("admins").select("name, institution_id").eq("user_id",K).maybeSingle();if(N)return{role:"admin",name:N.name||null,institutionId:N.institution_id};const{data:se,error:X}=await me.from("users").select("role, name, institution_id").eq("user_id",K).single();if(X)return console.error("Error fetching user profile:",X),{role:null,name:null,institutionId:null};let le=se?.name||null;return se?.role==="operator"&&le&&(le=le.replace(/^Operatr\s*-\s*/i,"").trim()||le),{role:se?.role||null,name:le,institutionId:se?.institution_id||null}}catch(N){return console.error("Error in fetchUserProfile:",N),{role:null,name:null,institutionId:null}}},Z=async K=>{try{x(K.email||null);const N=await F(K.id);m(N.role),E(N.name),N.role==="admin"&&K.user_metadata?.must_change_password&&d(!0);let Y=N.institutionId,se=null;if(Y){const{data:le}=await me.from("institutions").select("name").eq("id",Y).maybeSingle();se=le?.name??null}else{const le=await Wp();Y=le?.id||null,se=le?.name||null}p(Y),w(se);const X=await xi(Y);X&&z(X)}catch(N){console.error("Error loading user data:",N)}};y.useEffect(()=>{const{data:{subscription:K}}=me.auth.onAuthStateChange(async(le,M)=>{I.current&&(C.current||(le==="SIGNED_IN"?(n(!0),M?.user&&await Z(M.user)):le==="SIGNED_OUT"?(Zu(),n(!1),m(null),z(null),p(null),w(null),x(null),E(null),d(!1)):le==="TOKEN_REFRESHED"&&n(!!M)))});(async()=>{try{const{data:{user:le},error:M}=await me.auth.getUser();M||!le?n(!1):(n(!0),await Z(le))}catch(le){console.error("Auth init error:",le),n(!1)}finally{I.current=!0,l(!1)}})();let Y=null;const se=120*1e3,X=async()=>{if(document.visibilityState==="hidden"){Y=Date.now();return}if(!I.current||!Y)return;const le=Date.now()-Y;if(Y=null,!(le<se))try{const{data:{session:M}}=await me.auth.getSession();if(M)return;const{data:{user:$},error:W}=await me.auth.getUser();(W||!$)&&(Zu(),n(!1),m(null),z(null),p(null),w(null),x(null),E(null))}catch{}};return document.addEventListener("visibilitychange",X),()=>{K.unsubscribe(),document.removeEventListener("visibilitychange",X)}},[]),y.useEffect(()=>{if(!s||!A)return;const K=setInterval(async()=>{if(await Uw(A)&&await vd(null)){const se=await xi(g);se&&z(se)}},6e4);return()=>clearInterval(K)},[s,A,g]);const P=y.useCallback(async()=>{Zu(),await me.auth.signOut(),n(!1),m(null),z(null),w(null),x(null),E(null)},[]),T=y.useCallback(async()=>{const K=await xi(g);K&&z(K)},[g]),L=y.useCallback(()=>{d(!1)},[]),R=y.useCallback(async()=>{n(!0);try{const{data:{user:K}}=await me.auth.getUser();K&&await Z(K)}catch(K){console.error("Error loading user data after login:",K)}},[]);return{isAuthenticated:s,isCheckingAuth:r,mustChangePassword:c,userRole:f,institutionId:g,institutionName:b,userEmail:S,userName:j,appSettings:A,handleLoginSuccess:R,signOut:P,refreshSettings:T,clearMustChangePassword:L,suppressAuthEvents:C}}function Mj(){const{isAuthenticated:s,isCheckingAuth:n,mustChangePassword:r,userRole:l,institutionId:c,institutionName:d,userName:f,appSettings:m,refreshSettings:g,handleLoginSuccess:p,signOut:b,clearMustChangePassword:w,suppressAuthEvents:S}=Dj(),x=l==="admin",{stations:j,setStations:E,stationsLoaded:A,loadStations:z,syncStation:I,handlers:C}=Oj(m,c),[F,Z]=y.useState(!1),[P,T]=y.useState(null),[L,R]=y.useState("auto"),[K,N]=y.useState({}),[Y,se]=y.useState(!1),[X,le]=y.useState(()=>{try{return localStorage.getItem("skaermtid_viewMode")==="true"}catch{return!1}}),[M,$]=y.useState(!1),[W,V]=y.useState([]),[fe,k]=y.useState(bn),[H,D]=y.useState(_n),[B,te]=y.useState(null),[G,re]=y.useState(null),de=y.useRef(null),he=y.useMemo(()=>$d(j,W,fe,H),[j,W,fe,H]),pe=y.useRef(j);y.useEffect(()=>{pe.current=j},[j]);const Te=y.useRef(Date.now());y.useEffect(()=>{s&&c&&z()},[s,c,z]),y.useEffect(()=>{const ge=()=>{try{const ve=pe.current.flatMap(be=>(be.activeSessions||[]).map(De=>({...De,_deviceId:be.id,startTime:De.startTime?De.startTime.toISOString():null,waitingSince:De.waitingSince?new Date(De.waitingSince).toISOString():null}))).filter(be=>be.startTime);ve.length>0&&(localStorage.setItem("skaermtid_sessions_backup",JSON.stringify(ve)),console.log(`[unload] Saved ${ve.length} sessions to localStorage backup`))}catch{}qw()};return window.addEventListener("beforeunload",ge),()=>window.removeEventListener("beforeunload",ge)},[]);const Le=y.useCallback(async()=>{try{const ge=await vr(),ve=c?`skaermtid_last_layout_preset_${c}`:"skaermtid_last_layout_preset",be=localStorage.getItem(ve),De=ge.find(Be=>Be.is_default),ye=(be?ge.find(Be=>Be.id===be):null)||De||null;ye&&(V(ye.items_json||[]),k(ye.grid_w||bn),D(ye.grid_h||_n))}catch(ge){console.error("Error loading layout preset:",ge)}},[c]);y.useEffect(()=>{s&&A&&Le()},[s,A,Le]),y.useEffect(()=>{try{localStorage.setItem("skaermtid_viewMode",X?"true":"false")}catch{}},[X]),y.useEffect(()=>{const ge=ve=>{const be=ve.target.tagName;if(ve.key==="Tab"&&be!=="INPUT"&&be!=="TEXTAREA"&&be!=="SELECT"&&(ve.preventDefault(),le(oe=>!oe)),ve.key==="Escape"){if(B){te(null);return}M?$(!1):X?le(!1):F?Z(!1):Y&&se(!1);return}if(!(F||Y||M||X)&&!(be==="INPUT"||be==="TEXTAREA"||be==="SELECT")){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(ve.key)){ve.preventDefault(),te(oe=>Sj(oe,ve.key,he));return}ve.key==="Enter"&&B&&(ve.preventDefault(),T(B),R("auto"),Z(!0))}};return document.addEventListener("keydown",ge),()=>document.removeEventListener("keydown",ge)},[X,F,Y,M,B,he]),y.useEffect(()=>{if(!s||!A)return;const ge=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),ve=setInterval(()=>{const be=Date.now();be-Te.current>=6e4&&(Te.current=be,pe.current.forEach(Me=>{Me.activeSessions.forEach(ne=>{const ze=ne._loadedFromDb&&ne.startTime&&Zn(ne)<=0;ne.userId&&ne.startTime&&!ne.isPaused&&!ze&&zw(ne.id,ne.userId,1).then(ke=>{ke&&ke.success?(E(ft=>ft.map(Fe=>({...Fe,activeSessions:Fe.activeSessions.map(vt=>vt.id===ne.id?{...vt,balanceDeducted:(vt.balanceDeducted||0)+(ke.deducted||0),_loadedFromDb:!1}:vt)}))),ke.remaining<=0&&(console.log(`[balance] Stopping session ${ne.userName} on ${Me.id}: balance exhausted (remaining=${ke.remaining})`),C.handleStopSession(Me.id,ne.id,"balance_exhausted"))):ke&&!ke.success&&ke.reason==="no_balance"&&(console.log(`[balance] Stopping session ${ne.userName} on ${Me.id}: no_balance response`),C.handleStopSession(Me.id,ne.id,"balance_exhausted"))}).catch(ke=>{console.error("Balance deduction error:",ke)})})}));const De=m?.queue_attendance_enabled||!1,oe=m?.queue_attendance_timeout_seconds||300,ye=[];E(Be=>Be.map(Me=>{if(Me.status==="maintenance"||Me.status==="closed")return Me;let ne=!1,ze=[...Me.activeSessions],ke=[...Me.queue];const ft=m?.sound_enabled!==!1;if(ze=ze.filter(Fe=>{if(!Fe.startTime||Fe.isPaused)return!0;const vt=Zn(Fe);return vt<=0?Fe._loadedFromDb?!0:(console.log(`[expiry] Removing expired session ${Fe.userName} on ${Me.id} (remaining=${vt}, duration=${Fe.durationMinutes}min)`),ne=!0,ev(Fe,Me.id,"expired"),ft&&Gw(),!1):!0}),De&&(ze=ze.filter(Fe=>{if(!Fe.waitingSince||Fe.startTime)return!0;const vt=Date.now()-new Date(Fe.waitingSince).getTime(),yt=(Fe.waitingTimeoutSeconds||oe)*1e3;return vt>=yt?(ne=!0,!1):!0})),ne){const Fe=Un(ze,ke,Nt);if(ke=ke.map((mt,dt)=>({...mt,availableTime:Fe[dt]||new Date})),ze.length<Me.maxUsers&&ke.length>0){const mt=ke[0];ke=ke.slice(1),ft&&Kw();const dt=m?.max_session_minutes||Nt;let Pn=[];mt.users?.length>0?Pn=mt.users.map(et=>({id:ge(),userName:et,durationMinutes:dt,...De&&{waitingSince:new Date,waitingTimeoutSeconds:oe}})):Pn=[{id:ge(),userName:mt.name,userId:mt.userId||null,durationMinutes:dt,...De&&{waitingSince:new Date,waitingTimeoutSeconds:oe}}],ze=[...ze,...Pn];const Zs=Un(ze,ke,Nt);ke=ke.map((et,Mt)=>({...et,availableTime:Zs[Mt]||new Date}))}const yt={...Me,activeSessions:ze,queue:ke,status:ze.length===0?"available":"active"};return ye.push(yt),yt}return Me})),ye.forEach(Be=>I(Be))},1e3);return()=>clearInterval(ve)},[s,A,m,E,C,I]);const Ue=(ge,ve,be)=>{for(const De of j)if(De.id!==be)for(const oe of De.queue){if(ve&&oe.userId===ve)return{station:De,queueItem:oe,matchedInGroup:!1};if(oe.users&&oe.users.some(ye=>ye===ge))return{station:De,queueItem:oe,matchedInGroup:!0};if(!oe.users&&oe.name===ge)return{station:De,queueItem:oe,matchedInGroup:!1}}return null},Re=(ge,ve)=>{const be=j.find(Me=>Me.id===P);if(!be)return;if(ve){const Me=j.find(ne=>ne.activeSessions.some(ze=>ze.userId===ve));if(Me){const ne=Me.name||Me.id.toUpperCase();window.alert(`${ge} spiller allerede p ${ne}.`);return}}const De=Ue(ge,ve,P);if(De){const Me=De.station.name||De.station.id.toUpperCase();if(!window.confirm(`${ge} er allerede i k til ${Me}.

Vil du fjerne fra ken der og fortstte her?`))return;C.handleRemoveFromQueue(De.station.id,De.queueItem.id)}const oe=be.activeSessions.length>0,ye=be.activeSessions.length<be.maxUsers,Be=be.type==="PS"&&be.maxUsers>1;L==="queue"?Be?C.handleAddGroupToQueue(P,[ge]):C.handleAddToQueue(P,ge,ve):!oe&&Be?N(Me=>({...Me,[P]:[...Me[P]||[],{name:ge,userId:ve}]})):oe?ye?C.handleJoinSession(P,ge,ve):Be?C.handleAddGroupToQueue(P,[ge]):C.handleAddToQueue(P,ge,ve):C.handleStartSession(P,{name:ge,userId:ve}),Z(!1),T(null),R("auto")},Oe=ge=>{Re(ge,null)},$e=ge=>{const ve=K[ge]||[];ve.length!==0&&(ve.forEach(be=>{C.handleStartSession(ge,{name:be.name,userId:be.userId})}),N(be=>{const De={...be};return delete De[ge],De}))},xe=(ge,ve)=>{N(be=>{const De=(be[ge]||[]).filter((oe,ye)=>ye!==ve);if(De.length===0){const oe={...be};return delete oe[ge],oe}return{...be,[ge]:De}})},Ee=y.useMemo(()=>j.length===0?!1:j.every(ge=>ge.status==="maintenance"||ge.status==="closed"||ge.activeSessions.length>=ge.maxUsers),[j]),Ie=y.useCallback(()=>{let ge=null,ve=1/0;j.forEach(be=>{be.status==="maintenance"||be.status==="closed"||be.activeSessions.forEach(De=>{if(!De.startTime||De.isPaused)return;const oe=Zn(De),ye=be.queue.length*(m?.max_session_minutes||Nt)*60,Be=oe+ye;Be<ve&&(ve=Be,ge=be.id)})}),ge&&(re(ge),te(ge),de.current&&clearTimeout(de.current),de.current=setTimeout(()=>{re(null),de.current=null},3e3))},[j,m]);return y.useEffect(()=>()=>{de.current&&clearTimeout(de.current)},[]),n?o.jsx("div",{className:"app",children:o.jsxs("div",{className:"app-header",children:[o.jsx("h1",{className:"app-title",children:"Gaming Station Dashboard"}),o.jsx("p",{className:"app-subtitle",children:"Tjekker login..."})]})}):s?r&&x?o.jsx(Qw,{onPasswordChanged:w}):o.jsx(Rj,{children:o.jsxs("div",{className:"app",children:[o.jsx("div",{className:"app-header",children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[o.jsx("div",{children:m?.show_room_title_dashboard!==!1&&o.jsx("h1",{className:"app-title",children:m?.room_title||"Spillerummet"})}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[(d||l)&&o.jsxs("div",{className:"header-user-info",children:[d&&o.jsxs("span",{className:"header-user-info__item",children:[o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),d]}),d&&l&&o.jsx("span",{className:"header-user-info__divider"}),l&&o.jsxs("span",{className:"header-user-info__item",children:[o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l==="admin"?o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}):o.jsxs(o.Fragment,{children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),l==="admin"?f?`Admin: ${f}`:"Admin":"Operatr"]})]}),o.jsxs("button",{onClick:()=>le(!0),className:"header-btn header-btn--view",title:"Vis TV-visning (Tab)",children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"View"]}),Ee&&j.length>0&&o.jsxs("button",{onClick:Ie,className:"header-btn header-btn--next-available",title:"Find stationen der snart bliver ledig",children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Nste ledige"]}),x&&o.jsx("button",{onClick:()=>se(!0),className:"header-btn header-btn--settings",children:"Indstillinger"}),o.jsx("button",{onClick:b,className:"header-btn header-btn--logout",children:"Log ud"})]})]})}),A?j.length===0?o.jsx("div",{className:"station-grid",style:{justifyContent:"center",padding:"4rem",textAlign:"center"},children:o.jsxs("div",{children:[o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"1.1rem",marginBottom:"1rem"},children:"Ingen stationer oprettet endnu."}),x&&o.jsx("button",{onClick:()=>se(!0),style:{padding:"0.75rem 1.5rem",background:"var(--accent-cyan)",border:"none",borderRadius:"6px",color:"#000",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"Opret stationer i Indstillinger"})]})}):o.jsx("div",{className:"dashboard-canvas-wrap",style:{"--pulse-i":m?.pulse_enabled_dashboard!==!1?(m?.pulse_intensity_dashboard??50)/100:0},children:o.jsx(Hd,{stations:j,layoutItems:W,gridCols:fe,gridRows:H,editable:!1,focusedStationId:B,highlightedStationId:G,renderTile:ge=>o.jsx(pj,{station:ge,onStartSession:C.handleStartSession,onStopSession:C.handleStopSession,onExtendSession:C.handleExtendSession,onEditSessionName:C.handleEditSessionName,onJoinSession:C.handleJoinSession,onPauseSession:C.handlePauseSession,onStartPendingSession:C.handleStartPendingSession,onAddToQueue:C.handleAddToQueue,onAddGroupToQueue:C.handleAddGroupToQueue,onEditQueueName:C.handleEditQueueName,onRemoveFromQueue:C.handleRemoveFromQueue,onReorderQueue:C.handleReorderQueue,onStatusChange:C.handleStatusChange,onOpenUserSelector:(ve,be)=>{T(ve),R(be||"auto"),Z(!0)},pendingUsers:K[ge.id]||[],onStartGroup:()=>$e(ge.id),onRemovePendingUser:ve=>xe(ge.id,ve)}),className:"dashboard-canvas"})}):o.jsx("div",{className:"station-grid",style:{justifyContent:"center",padding:"4rem"},children:o.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"1.1rem"},children:"Indlser stationer..."})}),P&&o.jsx(Pw,{isOpen:F,onClose:()=>{Z(!1),T(null),R("auto")},onSelectUser:Re,onSelectManualEntry:Oe,placeholder:"Vlg eller indtast bruger...",institutionId:c,appSettings:m,busyUsers:(()=>{const ge={};return j.forEach(ve=>{ve.activeSessions.forEach(be=>{be.userId&&(ge[be.userId]=ve.name||ve.id.toUpperCase())})}),ge})()}),o.jsx(TS,{isOpen:Y,onClose:()=>se(!1),onSettingsSaved:g,onStationsChanged:z,institutionId:c,onOpenLayoutEditor:()=>{se(!1),$(!0)}}),X&&o.jsx(xj,{stations:j,appSettings:m,onExitViewMode:()=>le(!1),layoutItems:W,gridCols:fe,gridRows:H}),M&&o.jsx(Aj,{stations:j,institutionId:c,onClose:()=>{$(!1),Le()},onStationsChanged:z})]})}):o.jsx(Yw,{onLoginSuccess:p,suppressAuthEvents:S})}const Nv=()=>{try{return localStorage.getItem("queryLoggingEnabled")==="true"||!1}catch{return!1}},Uj=Nv();let Av=0,br=[];function zj(){Av=0,br=[]}function Rv(s=50){return br.slice(-s)}function Lj(){if(!Uj)return{enabled:!1,message:'Query logging is disabled. Enable via: localStorage.setItem("queryLoggingEnabled", "true")'};const s=br.reduce((l,c)=>(l[c.type]=(l[c.type]||0)+1,l),{}),n=br.filter(l=>l.duration).reduce((l,c)=>l+c.duration,0),r=br.filter(l=>l.duration).length>0?Math.round(n/br.filter(l=>l.duration).length):0;return{enabled:!0,totalQueries:Av,queriesByType:s,totalDuration:`${n}ms`,averageDuration:`${r}ms`,recentQueries:Rv(10)}}typeof window<"u"&&(window.enableQueryLogging=()=>{try{localStorage.setItem("queryLoggingEnabled","true"),console.log(" Query logging enabled! Reload page to activate.")}catch(s){console.error("Could not enable query logging:",s)}},window.disableQueryLogging=()=>{try{localStorage.setItem("queryLoggingEnabled","false"),console.log(" Query logging disabled! Reload page to deactivate.")}catch(s){console.error("Could not disable query logging:",s)}},window.getQueryStats=Lj,window.getQueryLog=Rv,window.resetQueryCount=zj,setTimeout(()=>{Nv()?(console.log(" Query logging is ENABLED"),console.log("Commands: getQueryStats(), getQueryLog(), resetQueryCount()")):(console.log(" Query logging is DISABLED"),console.log("Run enableQueryLogging() to enable, then reload page"))},100));Wb.createRoot(document.getElementById("root")).render(o.jsx(y.StrictMode,{children:o.jsx(Mj,{})}));
