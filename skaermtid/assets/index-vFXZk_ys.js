(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(o){if(o.ep)return;o.ep=!0;const d=r(o);fetch(o.href,d)}})();function Gb(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Uc={exports:{}},gi={};var Dg;function Ib(){if(Dg)return gi;Dg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(l,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var m in o)m!=="key"&&(d[m]=o[m])}else d=o;return o=d.ref,{$$typeof:a,type:l,key:f,ref:o!==void 0?o:null,props:d}}return gi.Fragment=n,gi.jsx=r,gi.jsxs=r,gi}var Mg;function Vb(){return Mg||(Mg=1,Uc.exports=Ib()),Uc.exports}var u=Vb(),zc={exports:{}},qe={};var Ug;function Kb(){if(Ug)return qe;Ug=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function A(j,H,D){this.props=j,this.context=H,this.refs=C,this.updater=D||E}A.prototype.isReactComponent={},A.prototype.setState=function(j,H){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,H,"setState")},A.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function G(){}G.prototype=A.prototype;function N(j,H,D){this.props=j,this.context=H,this.refs=C,this.updater=D||E}var Q=N.prototype=new G;Q.constructor=N,k(Q,A.prototype),Q.isPureReactComponent=!0;var W=Array.isArray;function K(){}var T={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function B(j,H,D){var L=D.ref;return{$$typeof:a,type:j,key:H,ref:L!==void 0?L:null,props:D}}function J(j,H){return B(j.type,H,j.props)}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===a}function F(j){var H={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(D){return H[D]})}var se=/\/+/g;function P(j,H){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):H.toString(36)}function oe(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(K,K):(j.status="pending",j.then(function(H){j.status==="pending"&&(j.status="fulfilled",j.value=H)},function(H){j.status==="pending"&&(j.status="rejected",j.reason=H)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function M(j,H,D,L,te){var I=typeof j;(I==="undefined"||I==="boolean")&&(j=null);var re=!1;if(j===null)re=!0;else switch(I){case"bigint":case"string":case"number":re=!0;break;case"object":switch(j.$$typeof){case a:case n:re=!0;break;case b:return re=j._init,M(re(j._payload),H,D,L,te)}}if(re)return te=te(j),re=L===""?"."+P(j,0):L,W(te)?(D="",re!=null&&(D=re.replace(se,"$&/")+"/"),M(te,H,D,"",function(ve){return ve})):te!=null&&(O(te)&&(te=J(te,D+(te.key==null||j&&j.key===te.key?"":(""+te.key).replace(se,"$&/")+"/")+re)),H.push(te)),1;re=0;var de=L===""?".":L+":";if(W(j))for(var he=0;he<j.length;he++)L=j[he],I=de+P(L,he),re+=M(L,H,D,I,te);else if(he=x(j),typeof he=="function")for(j=he.call(j),he=0;!(L=j.next()).done;)L=L.value,I=de+P(L,he++),re+=M(L,H,D,I,te);else if(I==="object"){if(typeof j.then=="function")return M(oe(j),H,D,L,te);throw H=String(j),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return re}function $(j,H,D){if(j==null)return j;var L=[],te=0;return M(j,L,"","",function(I){return H.call(D,I,te++)}),L}function Z(j){if(j._status===-1){var H=j._result;H=H(),H.then(function(D){(j._status===0||j._status===-1)&&(j._status=1,j._result=D)},function(D){(j._status===0||j._status===-1)&&(j._status=2,j._result=D)}),j._status===-1&&(j._status=0,j._result=H)}if(j._status===1)return j._result.default;throw j._result}var V=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},fe={map:$,forEach:function(j,H,D){$(j,function(){H.apply(this,arguments)},D)},count:function(j){var H=0;return $(j,function(){H++}),H},toArray:function(j){return $(j,function(H){return H})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return qe.Activity=w,qe.Children=fe,qe.Component=A,qe.Fragment=r,qe.Profiler=o,qe.PureComponent=N,qe.StrictMode=l,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,qe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return T.H.useMemoCache(j)}},qe.cache=function(j){return function(){return j.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(j,H,D){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var L=k({},j.props),te=j.key;if(H!=null)for(I in H.key!==void 0&&(te=""+H.key),H)!z.call(H,I)||I==="key"||I==="__self"||I==="__source"||I==="ref"&&H.ref===void 0||(L[I]=H[I]);var I=arguments.length-2;if(I===1)L.children=D;else if(1<I){for(var re=Array(I),de=0;de<I;de++)re[de]=arguments[de+2];L.children=re}return B(j.type,te,L)},qe.createContext=function(j){return j={$$typeof:f,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:d,_context:j},j},qe.createElement=function(j,H,D){var L,te={},I=null;if(H!=null)for(L in H.key!==void 0&&(I=""+H.key),H)z.call(H,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(te[L]=H[L]);var re=arguments.length-2;if(re===1)te.children=D;else if(1<re){for(var de=Array(re),he=0;he<re;he++)de[he]=arguments[he+2];te.children=de}if(j&&j.defaultProps)for(L in re=j.defaultProps,re)te[L]===void 0&&(te[L]=re[L]);return B(j,I,te)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(j){return{$$typeof:m,render:j}},qe.isValidElement=O,qe.lazy=function(j){return{$$typeof:b,_payload:{_status:-1,_result:j},_init:Z}},qe.memo=function(j,H){return{$$typeof:v,type:j,compare:H===void 0?null:H}},qe.startTransition=function(j){var H=T.T,D={};T.T=D;try{var L=j(),te=T.S;te!==null&&te(D,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(K,V)}catch(I){V(I)}finally{H!==null&&D.types!==null&&(H.types=D.types),T.T=H}},qe.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},qe.use=function(j){return T.H.use(j)},qe.useActionState=function(j,H,D){return T.H.useActionState(j,H,D)},qe.useCallback=function(j,H){return T.H.useCallback(j,H)},qe.useContext=function(j){return T.H.useContext(j)},qe.useDebugValue=function(){},qe.useDeferredValue=function(j,H){return T.H.useDeferredValue(j,H)},qe.useEffect=function(j,H){return T.H.useEffect(j,H)},qe.useEffectEvent=function(j){return T.H.useEffectEvent(j)},qe.useId=function(){return T.H.useId()},qe.useImperativeHandle=function(j,H,D){return T.H.useImperativeHandle(j,H,D)},qe.useInsertionEffect=function(j,H){return T.H.useInsertionEffect(j,H)},qe.useLayoutEffect=function(j,H){return T.H.useLayoutEffect(j,H)},qe.useMemo=function(j,H){return T.H.useMemo(j,H)},qe.useOptimistic=function(j,H){return T.H.useOptimistic(j,H)},qe.useReducer=function(j,H,D){return T.H.useReducer(j,H,D)},qe.useRef=function(j){return T.H.useRef(j)},qe.useState=function(j){return T.H.useState(j)},qe.useSyncExternalStore=function(j,H,D){return T.H.useSyncExternalStore(j,H,D)},qe.useTransition=function(){return T.H.useTransition()},qe.version="19.2.3",qe}var zg;function jd(){return zg||(zg=1,zc.exports=Kb()),zc.exports}var y=jd();const rn=Gb(y);var Lc={exports:{}},vi={},qc={exports:{}},Bc={};var Lg;function Yb(){return Lg||(Lg=1,(function(a){function n(M,$){var Z=M.length;M.push($);e:for(;0<Z;){var V=Z-1>>>1,fe=M[V];if(0<o(fe,$))M[V]=$,M[Z]=fe,Z=V;else break e}}function r(M){return M.length===0?null:M[0]}function l(M){if(M.length===0)return null;var $=M[0],Z=M.pop();if(Z!==$){M[0]=Z;e:for(var V=0,fe=M.length,j=fe>>>1;V<j;){var H=2*(V+1)-1,D=M[H],L=H+1,te=M[L];if(0>o(D,Z))L<fe&&0>o(te,D)?(M[V]=te,M[L]=Z,V=L):(M[V]=D,M[H]=Z,V=H);else if(L<fe&&0>o(te,Z))M[V]=te,M[L]=Z,V=L;else break e}}return $}function o(M,$){var Z=M.sortIndex-$.sortIndex;return Z!==0?Z:M.id-$.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();a.unstable_now=function(){return f.now()-m}}var g=[],v=[],b=1,w=null,S=3,x=!1,E=!1,k=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function Q(M){for(var $=r(v);$!==null;){if($.callback===null)l(v);else if($.startTime<=M)l(v),$.sortIndex=$.expirationTime,n(g,$);else break;$=r(v)}}function W(M){if(k=!1,Q(M),!E)if(r(g)!==null)E=!0,K||(K=!0,F());else{var $=r(v);$!==null&&oe(W,$.startTime-M)}}var K=!1,T=-1,z=5,B=-1;function J(){return C?!0:!(a.unstable_now()-B<z)}function O(){if(C=!1,K){var M=a.unstable_now();B=M;var $=!0;try{e:{E=!1,k&&(k=!1,G(T),T=-1),x=!0;var Z=S;try{t:{for(Q(M),w=r(g);w!==null&&!(w.expirationTime>M&&J());){var V=w.callback;if(typeof V=="function"){w.callback=null,S=w.priorityLevel;var fe=V(w.expirationTime<=M);if(M=a.unstable_now(),typeof fe=="function"){w.callback=fe,Q(M),$=!0;break t}w===r(g)&&l(g),Q(M)}else l(g);w=r(g)}if(w!==null)$=!0;else{var j=r(v);j!==null&&oe(W,j.startTime-M),$=!1}}break e}finally{w=null,S=Z,x=!1}$=void 0}}finally{$?F():K=!1}}}var F;if(typeof N=="function")F=function(){N(O)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,P=se.port2;se.port1.onmessage=O,F=function(){P.postMessage(null)}}else F=function(){A(O,0)};function oe(M,$){T=A(function(){M(a.unstable_now())},$)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(M){M.callback=null},a.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<M?Math.floor(1e3/M):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(M){switch(S){case 1:case 2:case 3:var $=3;break;default:$=S}var Z=S;S=$;try{return M()}finally{S=Z}},a.unstable_requestPaint=function(){C=!0},a.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Z=S;S=M;try{return $()}finally{S=Z}},a.unstable_scheduleCallback=function(M,$,Z){var V=a.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?V+Z:V):Z=V,M){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Z+fe,M={id:b++,callback:$,priorityLevel:M,startTime:Z,expirationTime:fe,sortIndex:-1},Z>V?(M.sortIndex=Z,n(v,M),r(g)===null&&M===r(v)&&(k?(G(T),T=-1):k=!0,oe(W,Z-V))):(M.sortIndex=fe,n(g,M),E||x||(E=!0,K||(K=!0,F()))),M},a.unstable_shouldYield=J,a.unstable_wrapCallback=function(M){var $=S;return function(){var Z=S;S=$;try{return M.apply(this,arguments)}finally{S=Z}}}})(Bc)),Bc}var qg;function Qb(){return qg||(qg=1,qc.exports=Yb()),qc.exports}var $c={exports:{}},Qt={};var Bg;function Pb(){if(Bg)return Qt;Bg=1;var a=jd();function n(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(g,v,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:v,implementation:b}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Qt.createPortal=function(g,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(n(299));return d(g,v,null,b)},Qt.flushSync=function(g){var v=f.T,b=l.p;try{if(f.T=null,l.p=2,g)return g()}finally{f.T=v,l.p=b,l.d.f()}},Qt.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,l.d.C(g,v))},Qt.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},Qt.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var b=v.as,w=m(b,v.crossOrigin),S=typeof v.integrity=="string"?v.integrity:void 0,x=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?l.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:x}):b==="script"&&l.d.X(g,{crossOrigin:w,integrity:S,fetchPriority:x,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Qt.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=m(v.as,v.crossOrigin);l.d.M(g,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&l.d.M(g)},Qt.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,w=m(b,v.crossOrigin);l.d.L(g,b,{crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Qt.preloadModule=function(g,v){if(typeof g=="string")if(v){var b=m(v.as,v.crossOrigin);l.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else l.d.m(g)},Qt.requestFormReset=function(g){l.d.r(g)},Qt.unstable_batchedUpdates=function(g,v){return g(v)},Qt.useFormState=function(g,v,b){return f.H.useFormState(g,v,b)},Qt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Qt.version="19.2.3",Qt}var $g;function Dv(){if($g)return $c.exports;$g=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),$c.exports=Pb(),$c.exports}var Hg;function Xb(){if(Hg)return vi;Hg=1;var a=Qb(),n=jd(),r=Dv();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(d(e)!==e)throw Error(l(188))}function v(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(l(188));return t!==e?null:e}for(var s=e,i=t;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(i=c.return,i!==null){s=i;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return g(c),e;if(h===i)return g(c),t;h=h.sibling}throw Error(l(188))}if(s.return!==i.return)s=c,i=h;else{for(var p=!1,_=c.child;_;){if(_===s){p=!0,s=c,i=h;break}if(_===i){p=!0,i=c,s=h;break}_=_.sibling}if(!p){for(_=h.child;_;){if(_===s){p=!0,s=h,i=c;break}if(_===i){p=!0,i=h,s=c;break}_=_.sibling}if(!p)throw Error(l(189))}}if(s.alternate!==i)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),N=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function F(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function P(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case W:return"Suspense";case K:return"SuspenseList";case B:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case N:return e.displayName||"Context";case G:return(e._context.displayName||"Context")+".Consumer";case Q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T:return t=e.displayName||null,t!==null?t:P(e.type)||"Memo";case z:t=e._payload,e=e._init;try{return P(e(t))}catch{}}return null}var oe=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},V=[],fe=-1;function j(e){return{current:e}}function H(e){0>fe||(e.current=V[fe],V[fe]=null,fe--)}function D(e,t){fe++,V[fe]=e.current,e.current=t}var L=j(null),te=j(null),I=j(null),re=j(null);function de(e,t){switch(D(I,t),D(te,e),D(L,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ng(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ng(t),e=ag(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(L),D(L,e)}function he(){H(L),H(te),H(I)}function ve(e){e.memoizedState!==null&&D(re,e);var t=L.current,s=ag(t,e.type);t!==s&&(D(te,e),D(L,s))}function ke(e){te.current===e&&(H(L),H(te)),re.current===e&&(H(re),di._currentValue=Z)}var Ue,Me;function Re(e){if(Ue===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ue=t&&t[1]||"",Me=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+e+Me}var Oe=!1;function Be(e,t){if(!e||Oe)return"";Oe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ae){var ee=ae}Reflect.construct(e,[],ce)}else{try{ce.call()}catch(ae){ee=ae}e.call(ce.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(ce=e())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=i.DetermineComponentFrameRoot(),p=h[0],_=h[1];if(p&&_){var R=p.split(`
`),X=_.split(`
`);for(c=i=0;i<R.length&&!R[i].includes("DetermineComponentFrameRoot");)i++;for(;c<X.length&&!X[c].includes("DetermineComponentFrameRoot");)c++;if(i===R.length||c===X.length)for(i=R.length-1,c=X.length-1;1<=i&&0<=c&&R[i]!==X[c];)c--;for(;1<=i&&0<=c;i--,c--)if(R[i]!==X[c]){if(i!==1||c!==1)do if(i--,c--,0>c||R[i]!==X[c]){var ie=`
`+R[i].replace(" at new "," at ");return e.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",e.displayName)),ie}while(1<=i&&0<=c);break}}}finally{Oe=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Re(s):""}function Ee(e,t){switch(e.tag){case 26:case 27:case 5:return Re(e.type);case 16:return Re("Lazy");case 13:return e.child!==t&&t!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Be(e.type,!1);case 11:return Be(e.type.render,!1);case 1:return Be(e.type,!0);case 31:return Re("Activity");default:return""}}function De(e){try{var t="",s=null;do t+=Ee(e,s),s=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var He=Object.prototype.hasOwnProperty,ge=a.unstable_scheduleCallback,pe=a.unstable_cancelCallback,ye=a.unstable_shouldYield,ze=a.unstable_requestPaint,le=a.unstable_now,be=a.unstable_getCurrentPriorityLevel,ne=a.unstable_ImmediatePriority,_e=a.unstable_UserBlockingPriority,je=a.unstable_NormalPriority,Ke=a.unstable_LowPriority,Le=a.unstable_IdlePriority,Ct=a.log,ct=a.unstable_setDisableYieldValue,St=null,vt=null;function ft(e){if(typeof Ct=="function"&&ct(e),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(St,e)}catch{}}var dt=Math.clz32?Math.clz32:Fe,Yn=Math.log,Za=Math.LN2;function Fe(e){return e>>>=0,e===0?32:31-(Yn(e)/Za|0)|0}var Mt=256,wn=262144,et=4194304;function mt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ut(e,t,s){var i=e.pendingLanes;if(i===0)return 0;var c=0,h=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var _=i&134217727;return _!==0?(i=_&~h,i!==0?c=mt(i):(p&=_,p!==0?c=mt(p):s||(s=_&~e,s!==0&&(c=mt(s))))):(_=i&~h,_!==0?c=mt(_):p!==0?c=mt(p):s||(s=i&~e,s!==0&&(c=mt(s)))),c===0?0:t!==0&&t!==c&&(t&h)===0&&(h=c&-c,s=t&-t,h>=s||h===32&&(s&4194048)!==0)?t:c}function Xt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Jt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yt(){var e=et;return et<<=1,(et&62914560)===0&&(et=4194304),e}function Zt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Sn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function At(e,t,s,i,c,h){var p=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var _=e.entanglements,R=e.expirationTimes,X=e.hiddenUpdates;for(s=p&~s;0<s;){var ie=31-dt(s),ce=1<<ie;_[ie]=0,R[ie]=-1;var ee=X[ie];if(ee!==null)for(X[ie]=null,ie=0;ie<ee.length;ie++){var ae=ee[ie];ae!==null&&(ae.lane&=-536870913)}s&=~ce}i!==0&&Ln(e,i,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(p&~t))}function Ln(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-dt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|s&261930}function on(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-dt(s),c=1<<i;c&t|e[i]&t&&(e[i]|=t),s&=~c}}function xn(e,t){var s=t&-t;return s=(s&42)!==0?1:Fn(s),(s&(e.suspendedLanes|t))!==0?0:s}function Fn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ea(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qn(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:Tg(e.type))}function Sa(e,t){var s=$.p;try{return $.p=e,t()}finally{$.p=s}}var jn=Math.random().toString(36).slice(2),Bt="__reactFiber$"+jn,Wt="__reactProps$"+jn,js="__reactContainer$"+jn,To="__reactEvents$"+jn,Rp="__reactListeners$"+jn,Op="__reactHandles$"+jn,Gd="__reactResources$"+jn,Tr="__reactMarker$"+jn;function ko(e){delete e[Bt],delete e[Wt],delete e[To],delete e[Rp],delete e[Op]}function Es(e){var t=e[Bt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[js]||s[Bt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=cg(e);e!==null;){if(s=e[Bt])return s;e=cg(e)}return t}e=s,s=e.parentNode}return null}function Ts(e){if(e=e[Bt]||e[js]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function kr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function ks(e){var t=e[Gd];return t||(t=e[Gd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[Tr]=!0}var Id=new Set,Vd={};function Wa(e,t){Ns(e,t),Ns(e+"Capture",t)}function Ns(e,t){for(Vd[e]=t,e=0;e<t.length;e++)Id.add(t[e])}var Dp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kd={},Yd={};function Mp(e){return He.call(Yd,e)?!0:He.call(Kd,e)?!1:Dp.test(e)?Yd[e]=!0:(Kd[e]=!0,!1)}function Gi(e,t,s){if(Mp(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Ii(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function ta(e,t,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+i)}}function En(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Up(e,t,s){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){s=""+p,h.call(this,p)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function No(e){if(!e._valueTracker){var t=Qd(e)?"checked":"value";e._valueTracker=Up(e,t,""+e[t])}}function Pd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=Qd(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function Vi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zp=/[\n"\\]/g;function Tn(e){return e.replace(zp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Co(e,t,s,i,c,h,p,_){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+En(t)):e.value!==""+En(t)&&(e.value=""+En(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Ao(e,p,En(t)):s!=null?Ao(e,p,En(s)):i!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+En(_):e.removeAttribute("name")}function Xd(e,t,s,i,c,h,p,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){No(e);return}s=s!=null?""+En(s):"",t=t!=null?""+En(t):s,_||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=_?e.checked:!!i,e.defaultChecked=!!i,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),No(e)}function Ao(e,t,s){t==="number"&&Vi(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Cs(e,t,s,i){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&i&&(e[s].defaultSelected=!0)}else{for(s=""+En(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Jd(e,t,s){if(t!=null&&(t=""+En(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+En(s):""}function Zd(e,t,s,i){if(t==null){if(i!=null){if(s!=null)throw Error(l(92));if(oe(i)){if(1<i.length)throw Error(l(93));i=i[0]}s=i}s==null&&(s=""),t=s}s=En(t),e.defaultValue=s,i=e.textContent,i===s&&i!==""&&i!==null&&(e.value=i),No(e)}function As(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Lp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wd(e,t,s){var i=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,s):typeof s!="number"||s===0||Lp.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Fd(e,t,s){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,s!=null){for(var i in s)!s.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&s[c]!==i&&Wd(e,c,i)}else for(var h in t)t.hasOwnProperty(h)&&Wd(e,h,t[h])}function Ro(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ki(e){return Bp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function na(){}var Oo=null;function Do(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rs=null,Os=null;function eh(e){var t=Ts(e);if(t&&(e=t.stateNode)){var s=e[Wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Co(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Tn(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var c=i[Wt]||null;if(!c)throw Error(l(90));Co(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<s.length;t++)i=s[t],i.form===e.form&&Pd(i)}break e;case"textarea":Jd(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Cs(e,!!s.multiple,t,!1)}}}var Mo=!1;function th(e,t,s){if(Mo)return e(t,s);Mo=!0;try{var i=e(t);return i}finally{if(Mo=!1,(Rs!==null||Os!==null)&&(Ol(),Rs&&(t=Rs,e=Os,Os=Rs=null,eh(t),e)))for(t=0;t<e.length;t++)eh(e[t])}}function Nr(e,t){var s=e.stateNode;if(s===null)return null;var i=s[Wt]||null;if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(l(231,t,typeof s));return s}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=!1;if(aa)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{Uo=!1}var xa=null,zo=null,Yi=null;function nh(){if(Yi)return Yi;var e,t=zo,s=t.length,i,c="value"in xa?xa.value:xa.textContent,h=c.length;for(e=0;e<s&&t[e]===c[e];e++);var p=s-e;for(i=1;i<=p&&t[s-i]===c[h-i];i++);return Yi=c.slice(e,1<i?1-i:void 0)}function Qi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pi(){return!0}function ah(){return!1}function Ft(e){function t(s,i,c,h,p){this._reactName=s,this._targetInst=c,this.type=i,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Pi:ah,this.isPropagationStopped=ah,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),t}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=Ft(Fa),Ar=w({},Fa,{view:0,detail:0}),$p=Ft(Ar),Lo,qo,Rr,Ji=w({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$o,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rr&&(Rr&&e.type==="mousemove"?(Lo=e.screenX-Rr.screenX,qo=e.screenY-Rr.screenY):qo=Lo=0,Rr=e),Lo)},movementY:function(e){return"movementY"in e?e.movementY:qo}}),sh=Ft(Ji),Hp=w({},Ji,{dataTransfer:0}),Gp=Ft(Hp),Ip=w({},Ar,{relatedTarget:0}),Bo=Ft(Ip),Vp=w({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Kp=Ft(Vp),Yp=w({},Fa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qp=Ft(Yp),Pp=w({},Fa,{data:0}),rh=Ft(Pp),Xp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zp[e])?!!t[e]:!1}function $o(){return Wp}var Fp=w({},Ar,{key:function(e){if(e.key){var t=Xp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$o,charCode:function(e){return e.type==="keypress"?Qi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ey=Ft(Fp),ty=w({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=Ft(ty),ny=w({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$o}),ay=Ft(ny),sy=w({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ry=Ft(sy),iy=w({},Ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ly=Ft(iy),oy=w({},Fa,{newState:0,oldState:0}),uy=Ft(oy),cy=[9,13,27,32],Ho=aa&&"CompositionEvent"in window,Or=null;aa&&"documentMode"in document&&(Or=document.documentMode);var dy=aa&&"TextEvent"in window&&!Or,lh=aa&&(!Ho||Or&&8<Or&&11>=Or),oh=" ",uh=!1;function ch(e,t){switch(e){case"keyup":return cy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ds=!1;function hy(e,t){switch(e){case"compositionend":return dh(t);case"keypress":return t.which!==32?null:(uh=!0,oh);case"textInput":return e=t.data,e===oh&&uh?null:e;default:return null}}function fy(e,t){if(Ds)return e==="compositionend"||!Ho&&ch(e,t)?(e=nh(),Yi=zo=xa=null,Ds=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lh&&t.locale!=="ko"?null:t.data;default:return null}}var my={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!my[e.type]:t==="textarea"}function fh(e,t,s,i){Rs?Os?Os.push(i):Os=[i]:Rs=i,t=Bl(t,"onChange"),0<t.length&&(s=new Xi("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var Dr=null,Mr=null;function gy(e){Jm(e,0)}function Zi(e){var t=kr(e);if(Pd(t))return e}function mh(e,t){if(e==="change")return t}var gh=!1;if(aa){var Go;if(aa){var Io="oninput"in document;if(!Io){var vh=document.createElement("div");vh.setAttribute("oninput","return;"),Io=typeof vh.oninput=="function"}Go=Io}else Go=!1;gh=Go&&(!document.documentMode||9<document.documentMode)}function ph(){Dr&&(Dr.detachEvent("onpropertychange",yh),Mr=Dr=null)}function yh(e){if(e.propertyName==="value"&&Zi(Mr)){var t=[];fh(t,Mr,e,Do(e)),th(gy,t)}}function vy(e,t,s){e==="focusin"?(ph(),Dr=t,Mr=s,Dr.attachEvent("onpropertychange",yh)):e==="focusout"&&ph()}function py(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zi(Mr)}function yy(e,t){if(e==="click")return Zi(t)}function by(e,t){if(e==="input"||e==="change")return Zi(t)}function _y(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:_y;function Ur(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var c=s[i];if(!He.call(t,c)||!un(e[c],t[c]))return!1}return!0}function bh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _h(e,t){var s=bh(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=bh(s)}}function wh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Vi(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Vi(e.document)}return t}function Vo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wy=aa&&"documentMode"in document&&11>=document.documentMode,Ms=null,Ko=null,zr=null,Yo=!1;function xh(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Yo||Ms==null||Ms!==Vi(i)||(i=Ms,"selectionStart"in i&&Vo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zr&&Ur(zr,i)||(zr=i,i=Bl(Ko,"onSelect"),0<i.length&&(t=new Xi("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=Ms)))}function es(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Us={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},Qo={},jh={};aa&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function ts(e){if(Qo[e])return Qo[e];if(!Us[e])return e;var t=Us[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in jh)return Qo[e]=t[s];return e}var Eh=ts("animationend"),Th=ts("animationiteration"),kh=ts("animationstart"),Sy=ts("transitionrun"),xy=ts("transitionstart"),jy=ts("transitioncancel"),Nh=ts("transitionend"),Ch=new Map,Po="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Po.push("scrollEnd");function Bn(e,t){Ch.set(e,t),Wa(t,[e])}var Wi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},kn=[],zs=0,Xo=0;function Fi(){for(var e=zs,t=Xo=zs=0;t<e;){var s=kn[t];kn[t++]=null;var i=kn[t];kn[t++]=null;var c=kn[t];kn[t++]=null;var h=kn[t];if(kn[t++]=null,i!==null&&c!==null){var p=i.pending;p===null?c.next=c:(c.next=p.next,p.next=c),i.pending=c}h!==0&&Ah(s,c,h)}}function el(e,t,s,i){kn[zs++]=e,kn[zs++]=t,kn[zs++]=s,kn[zs++]=i,Xo|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Jo(e,t,s,i){return el(e,t,s,i),tl(e)}function ns(e,t){return el(e,null,null,t),tl(e)}function Ah(e,t,s){e.lanes|=s;var i=e.alternate;i!==null&&(i.lanes|=s);for(var c=!1,h=e.return;h!==null;)h.childLanes|=s,i=h.alternate,i!==null&&(i.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&t!==null&&(c=31-dt(s),e=h.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=s|536870912),h):null}function tl(e){if(50<si)throw si=0,rc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ls={};function Ey(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,s,i){return new Ey(e,t,s,i)}function Zo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sa(e,t){var s=e.alternate;return s===null?(s=cn(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Rh(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function nl(e,t,s,i,c,h){var p=0;if(i=e,typeof e=="function")Zo(e)&&(p=1);else if(typeof e=="string")p=Ab(e,s,L.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case B:return e=cn(31,s,t,c),e.elementType=B,e.lanes=h,e;case k:return as(s.children,c,h,t);case C:p=8,c|=24;break;case A:return e=cn(12,s,t,c|2),e.elementType=A,e.lanes=h,e;case W:return e=cn(13,s,t,c),e.elementType=W,e.lanes=h,e;case K:return e=cn(19,s,t,c),e.elementType=K,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:p=10;break e;case G:p=9;break e;case Q:p=11;break e;case T:p=14;break e;case z:p=16,i=null;break e}p=29,s=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=cn(p,s,t,c),t.elementType=e,t.type=i,t.lanes=h,t}function as(e,t,s,i){return e=cn(7,e,i,t),e.lanes=s,e}function Wo(e,t,s){return e=cn(6,e,null,t),e.lanes=s,e}function Oh(e){var t=cn(18,null,null,0);return t.stateNode=e,t}function Fo(e,t,s){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Dh=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var s=Dh.get(e);return s!==void 0?s:(t={value:e,source:t,stack:De(t)},Dh.set(e,t),t)}return{value:e,source:t,stack:De(t)}}var qs=[],Bs=0,al=null,Lr=0,Cn=[],An=0,ja=null,Qn=1,Pn="";function ra(e,t){qs[Bs++]=Lr,qs[Bs++]=al,al=e,Lr=t}function Mh(e,t,s){Cn[An++]=Qn,Cn[An++]=Pn,Cn[An++]=ja,ja=e;var i=Qn;e=Pn;var c=32-dt(i)-1;i&=~(1<<c),s+=1;var h=32-dt(t)+c;if(30<h){var p=c-c%5;h=(i&(1<<p)-1).toString(32),i>>=p,c-=p,Qn=1<<32-dt(t)+c|s<<c|i,Pn=h+e}else Qn=1<<h|s<<c|i,Pn=e}function eu(e){e.return!==null&&(ra(e,1),Mh(e,1,0))}function tu(e){for(;e===al;)al=qs[--Bs],qs[Bs]=null,Lr=qs[--Bs],qs[Bs]=null;for(;e===ja;)ja=Cn[--An],Cn[An]=null,Pn=Cn[--An],Cn[An]=null,Qn=Cn[--An],Cn[An]=null}function Uh(e,t){Cn[An++]=Qn,Cn[An++]=Pn,Cn[An++]=ja,Qn=t.id,Pn=t.overflow,ja=e}var $t=null,ot=null,Pe=!1,Ea=null,Rn=!1,nu=Error(l(519));function Ta(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qr(Nn(t,e)),nu}function zh(e){var t=e.stateNode,s=e.type,i=e.memoizedProps;switch(t[Bt]=e,t[Wt]=i,s){case"dialog":Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":case"embed":Ve("load",t);break;case"video":case"audio":for(s=0;s<ii.length;s++)Ve(ii[s],t);break;case"source":Ve("error",t);break;case"img":case"image":case"link":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"input":Ve("invalid",t),Xd(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ve("invalid",t);break;case"textarea":Ve("invalid",t),Zd(t,i.value,i.defaultValue,i.children)}s=i.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||i.suppressHydrationWarning===!0||eg(t.textContent,s)?(i.popover!=null&&(Ve("beforetoggle",t),Ve("toggle",t)),i.onScroll!=null&&Ve("scroll",t),i.onScrollEnd!=null&&Ve("scrollend",t),i.onClick!=null&&(t.onclick=na),t=!0):t=!1,t||Ta(e,!0)}function Lh(e){for($t=e.return;$t;)switch($t.tag){case 5:case 31:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:$t=$t.return}}function $s(e){if(e!==$t)return!1;if(!Pe)return Lh(e),Pe=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||_c(e.type,e.memoizedProps)),s=!s),s&&ot&&Ta(e),Lh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ot=ug(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ot=ug(e)}else t===27?(t=ot,$a(e.type)?(e=Ec,Ec=null,ot=e):ot=t):ot=$t?Dn(e.stateNode.nextSibling):null;return!0}function ss(){ot=$t=null,Pe=!1}function au(){var e=Ea;return e!==null&&(an===null?an=e:an.push.apply(an,e),Ea=null),e}function qr(e){Ea===null?Ea=[e]:Ea.push(e)}var su=j(null),rs=null,ia=null;function ka(e,t,s){D(su,t._currentValue),t._currentValue=s}function la(e){e._currentValue=su.current,H(su)}function ru(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function iu(e,t,s,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var p=c.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=c;for(var R=0;R<t.length;R++)if(_.context===t[R]){h.lanes|=s,_=h.alternate,_!==null&&(_.lanes|=s),ru(h.return,s,e),i||(p=null);break e}h=_.next}}else if(c.tag===18){if(p=c.return,p===null)throw Error(l(341));p.lanes|=s,h=p.alternate,h!==null&&(h.lanes|=s),ru(p,s,e),p=null}else p=c.child;if(p!==null)p.return=c;else for(p=c;p!==null;){if(p===e){p=null;break}if(c=p.sibling,c!==null){c.return=p.return,p=c;break}p=p.return}c=p}}function Hs(e,t,s,i){e=null;for(var c=t,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var p=c.alternate;if(p===null)throw Error(l(387));if(p=p.memoizedProps,p!==null){var _=c.type;un(c.pendingProps.value,p.value)||(e!==null?e.push(_):e=[_])}}else if(c===re.current){if(p=c.alternate,p===null)throw Error(l(387));p.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(di):e=[di])}c=c.return}e!==null&&iu(t,e,s,i),t.flags|=262144}function sl(e){for(e=e.firstContext;e!==null;){if(!un(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function is(e){rs=e,ia=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return qh(rs,e)}function rl(e,t){return rs===null&&is(e),qh(e,t)}function qh(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},ia===null){if(e===null)throw Error(l(308));ia=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ia=ia.next=t;return s}var Ty=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},ky=a.unstable_scheduleCallback,Ny=a.unstable_NormalPriority,xt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lu(){return{controller:new Ty,data:new Map,refCount:0}}function Br(e){e.refCount--,e.refCount===0&&ky(Ny,function(){e.controller.abort()})}var $r=null,ou=0,Gs=0,Is=null;function Cy(e,t){if($r===null){var s=$r=[];ou=0,Gs=dc(),Is={status:"pending",value:void 0,then:function(i){s.push(i)}}}return ou++,t.then(Bh,Bh),t}function Bh(){if(--ou===0&&$r!==null){Is!==null&&(Is.status="fulfilled");var e=$r;$r=null,Gs=0,Is=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ay(e,t){var s=[],i={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<s.length;c++)(0,s[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),i}var $h=M.S;M.S=function(e,t){jm=le(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Cy(e,t),$h!==null&&$h(e,t)};var ls=j(null);function uu(){var e=ls.current;return e!==null?e:it.pooledCache}function il(e,t){t===null?D(ls,ls.current):D(ls,t.pool)}function Hh(){var e=uu();return e===null?null:{parent:xt._currentValue,pool:e}}var Vs=Error(l(460)),cu=Error(l(474)),ll=Error(l(542)),ol={then:function(){}};function Gh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ih(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(na,na),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e;default:if(typeof t.status=="string")t.then(na,na);else{if(e=it,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e}throw us=t,Vs}}function os(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(us=s,Vs):s}}var us=null;function Vh(){if(us===null)throw Error(l(459));var e=us;return us=null,e}function Kh(e){if(e===Vs||e===ll)throw Error(l(483))}var Ks=null,Hr=0;function ul(e){var t=Hr;return Hr+=1,Ks===null&&(Ks=[]),Ih(Ks,e,t)}function Gr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function cl(e,t){throw t.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Yh(e){function t(q,U){if(e){var Y=q.deletions;Y===null?(q.deletions=[U],q.flags|=16):Y.push(U)}}function s(q,U){if(!e)return null;for(;U!==null;)t(q,U),U=U.sibling;return null}function i(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function c(q,U){return q=sa(q,U),q.index=0,q.sibling=null,q}function h(q,U,Y){return q.index=Y,e?(Y=q.alternate,Y!==null?(Y=Y.index,Y<U?(q.flags|=67108866,U):Y):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function p(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function _(q,U,Y,ue){return U===null||U.tag!==6?(U=Wo(Y,q.mode,ue),U.return=q,U):(U=c(U,Y),U.return=q,U)}function R(q,U,Y,ue){var Te=Y.type;return Te===k?ie(q,U,Y.props.children,ue,Y.key):U!==null&&(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===z&&os(Te)===U.type)?(U=c(U,Y.props),Gr(U,Y),U.return=q,U):(U=nl(Y.type,Y.key,Y.props,null,q.mode,ue),Gr(U,Y),U.return=q,U)}function X(q,U,Y,ue){return U===null||U.tag!==4||U.stateNode.containerInfo!==Y.containerInfo||U.stateNode.implementation!==Y.implementation?(U=Fo(Y,q.mode,ue),U.return=q,U):(U=c(U,Y.children||[]),U.return=q,U)}function ie(q,U,Y,ue,Te){return U===null||U.tag!==7?(U=as(Y,q.mode,ue,Te),U.return=q,U):(U=c(U,Y),U.return=q,U)}function ce(q,U,Y){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Wo(""+U,q.mode,Y),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return Y=nl(U.type,U.key,U.props,null,q.mode,Y),Gr(Y,U),Y.return=q,Y;case E:return U=Fo(U,q.mode,Y),U.return=q,U;case z:return U=os(U),ce(q,U,Y)}if(oe(U)||F(U))return U=as(U,q.mode,Y,null),U.return=q,U;if(typeof U.then=="function")return ce(q,ul(U),Y);if(U.$$typeof===N)return ce(q,rl(q,U),Y);cl(q,U)}return null}function ee(q,U,Y,ue){var Te=U!==null?U.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Te!==null?null:_(q,U,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===Te?R(q,U,Y,ue):null;case E:return Y.key===Te?X(q,U,Y,ue):null;case z:return Y=os(Y),ee(q,U,Y,ue)}if(oe(Y)||F(Y))return Te!==null?null:ie(q,U,Y,ue,null);if(typeof Y.then=="function")return ee(q,U,ul(Y),ue);if(Y.$$typeof===N)return ee(q,U,rl(q,Y),ue);cl(q,Y)}return null}function ae(q,U,Y,ue,Te){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return q=q.get(Y)||null,_(U,q,""+ue,Te);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return q=q.get(ue.key===null?Y:ue.key)||null,R(U,q,ue,Te);case E:return q=q.get(ue.key===null?Y:ue.key)||null,X(U,q,ue,Te);case z:return ue=os(ue),ae(q,U,Y,ue,Te)}if(oe(ue)||F(ue))return q=q.get(Y)||null,ie(U,q,ue,Te,null);if(typeof ue.then=="function")return ae(q,U,Y,ul(ue),Te);if(ue.$$typeof===N)return ae(q,U,Y,rl(U,ue),Te);cl(U,ue)}return null}function we(q,U,Y,ue){for(var Te=null,Je=null,Se=U,Ge=U=0,Qe=null;Se!==null&&Ge<Y.length;Ge++){Se.index>Ge?(Qe=Se,Se=null):Qe=Se.sibling;var Ze=ee(q,Se,Y[Ge],ue);if(Ze===null){Se===null&&(Se=Qe);break}e&&Se&&Ze.alternate===null&&t(q,Se),U=h(Ze,U,Ge),Je===null?Te=Ze:Je.sibling=Ze,Je=Ze,Se=Qe}if(Ge===Y.length)return s(q,Se),Pe&&ra(q,Ge),Te;if(Se===null){for(;Ge<Y.length;Ge++)Se=ce(q,Y[Ge],ue),Se!==null&&(U=h(Se,U,Ge),Je===null?Te=Se:Je.sibling=Se,Je=Se);return Pe&&ra(q,Ge),Te}for(Se=i(Se);Ge<Y.length;Ge++)Qe=ae(Se,q,Ge,Y[Ge],ue),Qe!==null&&(e&&Qe.alternate!==null&&Se.delete(Qe.key===null?Ge:Qe.key),U=h(Qe,U,Ge),Je===null?Te=Qe:Je.sibling=Qe,Je=Qe);return e&&Se.forEach(function(Ka){return t(q,Ka)}),Pe&&ra(q,Ge),Te}function Ne(q,U,Y,ue){if(Y==null)throw Error(l(151));for(var Te=null,Je=null,Se=U,Ge=U=0,Qe=null,Ze=Y.next();Se!==null&&!Ze.done;Ge++,Ze=Y.next()){Se.index>Ge?(Qe=Se,Se=null):Qe=Se.sibling;var Ka=ee(q,Se,Ze.value,ue);if(Ka===null){Se===null&&(Se=Qe);break}e&&Se&&Ka.alternate===null&&t(q,Se),U=h(Ka,U,Ge),Je===null?Te=Ka:Je.sibling=Ka,Je=Ka,Se=Qe}if(Ze.done)return s(q,Se),Pe&&ra(q,Ge),Te;if(Se===null){for(;!Ze.done;Ge++,Ze=Y.next())Ze=ce(q,Ze.value,ue),Ze!==null&&(U=h(Ze,U,Ge),Je===null?Te=Ze:Je.sibling=Ze,Je=Ze);return Pe&&ra(q,Ge),Te}for(Se=i(Se);!Ze.done;Ge++,Ze=Y.next())Ze=ae(Se,q,Ge,Ze.value,ue),Ze!==null&&(e&&Ze.alternate!==null&&Se.delete(Ze.key===null?Ge:Ze.key),U=h(Ze,U,Ge),Je===null?Te=Ze:Je.sibling=Ze,Je=Ze);return e&&Se.forEach(function(Hb){return t(q,Hb)}),Pe&&ra(q,Ge),Te}function rt(q,U,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===k&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:e:{for(var Te=Y.key;U!==null;){if(U.key===Te){if(Te=Y.type,Te===k){if(U.tag===7){s(q,U.sibling),ue=c(U,Y.props.children),ue.return=q,q=ue;break e}}else if(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===z&&os(Te)===U.type){s(q,U.sibling),ue=c(U,Y.props),Gr(ue,Y),ue.return=q,q=ue;break e}s(q,U);break}else t(q,U);U=U.sibling}Y.type===k?(ue=as(Y.props.children,q.mode,ue,Y.key),ue.return=q,q=ue):(ue=nl(Y.type,Y.key,Y.props,null,q.mode,ue),Gr(ue,Y),ue.return=q,q=ue)}return p(q);case E:e:{for(Te=Y.key;U!==null;){if(U.key===Te)if(U.tag===4&&U.stateNode.containerInfo===Y.containerInfo&&U.stateNode.implementation===Y.implementation){s(q,U.sibling),ue=c(U,Y.children||[]),ue.return=q,q=ue;break e}else{s(q,U);break}else t(q,U);U=U.sibling}ue=Fo(Y,q.mode,ue),ue.return=q,q=ue}return p(q);case z:return Y=os(Y),rt(q,U,Y,ue)}if(oe(Y))return we(q,U,Y,ue);if(F(Y)){if(Te=F(Y),typeof Te!="function")throw Error(l(150));return Y=Te.call(Y),Ne(q,U,Y,ue)}if(typeof Y.then=="function")return rt(q,U,ul(Y),ue);if(Y.$$typeof===N)return rt(q,U,rl(q,Y),ue);cl(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,U!==null&&U.tag===6?(s(q,U.sibling),ue=c(U,Y),ue.return=q,q=ue):(s(q,U),ue=Wo(Y,q.mode,ue),ue.return=q,q=ue),p(q)):s(q,U)}return function(q,U,Y,ue){try{Hr=0;var Te=rt(q,U,Y,ue);return Ks=null,Te}catch(Se){if(Se===Vs||Se===ll)throw Se;var Je=cn(29,Se,null,q.mode);return Je.lanes=ue,Je.return=q,Je}}}var cs=Yh(!0),Qh=Yh(!1),Na=!1;function du(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Aa(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(We&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=tl(e),Ah(e,null,s),t}return el(e,i,t,s),tl(e)}function Ir(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,on(e,s)}}function fu(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var p={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?c=h=p:h=h.next=p,s=s.next}while(s!==null);h===null?c=h=t:h=h.next=t}else c=h=t;s={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:i.shared,callbacks:i.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var mu=!1;function Vr(){if(mu){var e=Is;if(e!==null)throw e}}function Kr(e,t,s,i){mu=!1;var c=e.updateQueue;Na=!1;var h=c.firstBaseUpdate,p=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var R=_,X=R.next;R.next=null,p===null?h=X:p.next=X,p=R;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,_=ie.lastBaseUpdate,_!==p&&(_===null?ie.firstBaseUpdate=X:_.next=X,ie.lastBaseUpdate=R))}if(h!==null){var ce=c.baseState;p=0,ie=X=R=null,_=h;do{var ee=_.lane&-536870913,ae=ee!==_.lane;if(ae?(Ye&ee)===ee:(i&ee)===ee){ee!==0&&ee===Gs&&(mu=!0),ie!==null&&(ie=ie.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var we=e,Ne=_;ee=t;var rt=s;switch(Ne.tag){case 1:if(we=Ne.payload,typeof we=="function"){ce=we.call(rt,ce,ee);break e}ce=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ne.payload,ee=typeof we=="function"?we.call(rt,ce,ee):we,ee==null)break e;ce=w({},ce,ee);break e;case 2:Na=!0}}ee=_.callback,ee!==null&&(e.flags|=64,ae&&(e.flags|=8192),ae=c.callbacks,ae===null?c.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ie===null?(X=ie=ae,R=ce):ie=ie.next=ae,p|=ee;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;ae=_,_=ae.next,ae.next=null,c.lastBaseUpdate=ae,c.shared.pending=null}}while(!0);ie===null&&(R=ce),c.baseState=R,c.firstBaseUpdate=X,c.lastBaseUpdate=ie,h===null&&(c.shared.lanes=0),Ua|=p,e.lanes=p,e.memoizedState=ce}}function Ph(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Xh(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Ph(s[e],t)}var Ys=j(null),dl=j(0);function Jh(e,t){e=va,D(dl,e),D(Ys,t),va=e|t.baseLanes}function gu(){D(dl,va),D(Ys,Ys.current)}function vu(){va=dl.current,H(Ys),H(dl)}var dn=j(null),On=null;function Ra(e){var t=e.alternate;D(_t,_t.current&1),D(dn,e),On===null&&(t===null||Ys.current!==null||t.memoizedState!==null)&&(On=e)}function pu(e){D(_t,_t.current),D(dn,e),On===null&&(On=e)}function Zh(e){e.tag===22?(D(_t,_t.current),D(dn,e),On===null&&(On=e)):Oa()}function Oa(){D(_t,_t.current),D(dn,dn.current)}function hn(e){H(dn),On===e&&(On=null),H(_t)}var _t=j(0);function hl(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||xc(s)||jc(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oa=0,$e=null,at=null,jt=null,fl=!1,Qs=!1,ds=!1,ml=0,Yr=0,Ps=null,Ry=0;function pt(){throw Error(l(321))}function yu(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!un(e[s],t[s]))return!1;return!0}function bu(e,t,s,i,c,h){return oa=h,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?Uf:Mu,ds=!1,h=s(i,c),ds=!1,Qs&&(h=Fh(t,s,i,c)),Wh(e),h}function Wh(e){M.H=Xr;var t=at!==null&&at.next!==null;if(oa=0,jt=at=$e=null,fl=!1,Yr=0,Ps=null,t)throw Error(l(300));e===null||Et||(e=e.dependencies,e!==null&&sl(e)&&(Et=!0))}function Fh(e,t,s,i){$e=e;var c=0;do{if(Qs&&(Ps=null),Yr=0,Qs=!1,25<=c)throw Error(l(301));if(c+=1,jt=at=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}M.H=zf,h=t(s,i)}while(Qs);return h}function Oy(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?Qr(t):t,e=e.useState()[0],(at!==null?at.memoizedState:null)!==e&&($e.flags|=1024),t}function _u(){var e=ml!==0;return ml=0,e}function wu(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Su(e){if(fl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fl=!1}oa=0,jt=at=$e=null,Qs=!1,Yr=ml=0,Ps=null}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?$e.memoizedState=jt=e:jt=jt.next=e,jt}function wt(){if(at===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=jt===null?$e.memoizedState:jt.next;if(t!==null)jt=t,at=e;else{if(e===null)throw $e.alternate===null?Error(l(467)):Error(l(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},jt===null?$e.memoizedState=jt=e:jt=jt.next=e}return jt}function gl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qr(e){var t=Yr;return Yr+=1,Ps===null&&(Ps=[]),e=Ih(Ps,e,t),t=$e,(jt===null?t.memoizedState:jt.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?Uf:Mu),e}function vl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qr(e);if(e.$$typeof===N)return Ht(e)}throw Error(l(438,String(e)))}function xu(e){var t=null,s=$e.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var i=$e.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=gl(),$e.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),i=0;i<e;i++)s[i]=J;return t.index++,s}function ua(e,t){return typeof t=="function"?t(e):t}function pl(e){var t=wt();return ju(t,at,e)}function ju(e,t,s){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=s;var c=e.baseQueue,h=i.pending;if(h!==null){if(c!==null){var p=c.next;c.next=h.next,h.next=p}t.baseQueue=c=h,i.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{t=c.next;var _=p=null,R=null,X=t,ie=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?(Ye&ce)===ce:(oa&ce)===ce){var ee=X.revertLane;if(ee===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===Gs&&(ie=!0);else if((oa&ee)===ee){X=X.next,ee===Gs&&(ie=!0);continue}else ce={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(_=R=ce,p=h):R=R.next=ce,$e.lanes|=ee,Ua|=ee;ce=X.action,ds&&s(h,ce),h=X.hasEagerState?X.eagerState:s(h,ce)}else ee={lane:ce,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},R===null?(_=R=ee,p=h):R=R.next=ee,$e.lanes|=ce,Ua|=ce;X=X.next}while(X!==null&&X!==t);if(R===null?p=h:R.next=_,!un(h,e.memoizedState)&&(Et=!0,ie&&(s=Is,s!==null)))throw s;e.memoizedState=h,e.baseState=p,e.baseQueue=R,i.lastRenderedState=h}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Eu(e){var t=wt(),s=t.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var i=s.dispatch,c=s.pending,h=t.memoizedState;if(c!==null){s.pending=null;var p=c=c.next;do h=e(h,p.action),p=p.next;while(p!==c);un(h,t.memoizedState)||(Et=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,i]}function ef(e,t,s){var i=$e,c=wt(),h=Pe;if(h){if(s===void 0)throw Error(l(407));s=s()}else s=t();var p=!un((at||c).memoizedState,s);if(p&&(c.memoizedState=s,Et=!0),c=c.queue,Nu(af.bind(null,i,c,e),[e]),c.getSnapshot!==t||p||jt!==null&&jt.memoizedState.tag&1){if(i.flags|=2048,Xs(9,{destroy:void 0},nf.bind(null,i,c,s,t),null),it===null)throw Error(l(349));h||(oa&127)!==0||tf(i,t,s)}return s}function tf(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=$e.updateQueue,t===null?(t=gl(),$e.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function nf(e,t,s,i){t.value=s,t.getSnapshot=i,sf(t)&&rf(e)}function af(e,t,s){return s(function(){sf(t)&&rf(e)})}function sf(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!un(e,s)}catch{return!0}}function rf(e){var t=ns(e,2);t!==null&&sn(t,e,2)}function Tu(e){var t=Pt();if(typeof e=="function"){var s=e;if(e=s(),ds){ft(!0);try{s()}finally{ft(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:e},t}function lf(e,t,s,i){return e.baseState=s,ju(e,at,typeof i=="function"?i:ua)}function Dy(e,t,s,i,c){if(_l(e))throw Error(l(485));if(e=t.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){h.listeners.push(p)}};M.T!==null?s(!0):h.isTransition=!1,i(h),s=t.pending,s===null?(h.next=t.pending=h,of(t,h)):(h.next=s.next,t.pending=s.next=h)}}function of(e,t){var s=t.action,i=t.payload,c=e.state;if(t.isTransition){var h=M.T,p={};M.T=p;try{var _=s(c,i),R=M.S;R!==null&&R(p,_),uf(e,t,_)}catch(X){ku(e,t,X)}finally{h!==null&&p.types!==null&&(h.types=p.types),M.T=h}}else try{h=s(c,i),uf(e,t,h)}catch(X){ku(e,t,X)}}function uf(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(i){cf(e,t,i)},function(i){return ku(e,t,i)}):cf(e,t,s)}function cf(e,t,s){t.status="fulfilled",t.value=s,df(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,of(e,s)))}function ku(e,t,s){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=s,df(t),t=t.next;while(t!==i)}e.action=null}function df(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hf(e,t){return t}function ff(e,t){if(Pe){var s=it.formState;if(s!==null){e:{var i=$e;if(Pe){if(ot){t:{for(var c=ot,h=Rn;c.nodeType!==8;){if(!h){c=null;break t}if(c=Dn(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){ot=Dn(c.nextSibling),i=c.data==="F!";break e}}Ta(i)}i=!1}i&&(t=s[0])}}return s=Pt(),s.memoizedState=s.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:t},s.queue=i,s=Of.bind(null,$e,i),i.dispatch=s,i=Tu(!1),h=Du.bind(null,$e,!1,i.queue),i=Pt(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,s=Dy.bind(null,$e,c,h,s),c.dispatch=s,i.memoizedState=e,[t,s,!1]}function mf(e){var t=wt();return gf(t,at,e)}function gf(e,t,s){if(t=ju(e,t,hf)[0],e=pl(ua)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Qr(t)}catch(p){throw p===Vs?ll:p}else i=t;t=wt();var c=t.queue,h=c.dispatch;return s!==t.memoizedState&&($e.flags|=2048,Xs(9,{destroy:void 0},My.bind(null,c,s),null)),[i,h,e]}function My(e,t){e.action=t}function vf(e){var t=wt(),s=at;if(s!==null)return gf(t,s,e);wt(),t=t.memoizedState,s=wt();var i=s.queue.dispatch;return s.memoizedState=e,[t,i,!1]}function Xs(e,t,s,i){return e={tag:e,create:s,deps:i,inst:t,next:null},t=$e.updateQueue,t===null&&(t=gl(),$e.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e),e}function pf(){return wt().memoizedState}function yl(e,t,s,i){var c=Pt();$e.flags|=e,c.memoizedState=Xs(1|t,{destroy:void 0},s,i===void 0?null:i)}function bl(e,t,s,i){var c=wt();i=i===void 0?null:i;var h=c.memoizedState.inst;at!==null&&i!==null&&yu(i,at.memoizedState.deps)?c.memoizedState=Xs(t,h,s,i):($e.flags|=e,c.memoizedState=Xs(1|t,h,s,i))}function yf(e,t){yl(8390656,8,e,t)}function Nu(e,t){bl(2048,8,e,t)}function Uy(e){$e.flags|=4;var t=$e.updateQueue;if(t===null)t=gl(),$e.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function bf(e){var t=wt().memoizedState;return Uy({ref:t,nextImpl:e}),function(){if((We&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function _f(e,t){return bl(4,2,e,t)}function wf(e,t){return bl(4,4,e,t)}function Sf(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xf(e,t,s){s=s!=null?s.concat([e]):null,bl(4,4,Sf.bind(null,t,e),s)}function Cu(){}function jf(e,t){var s=wt();t=t===void 0?null:t;var i=s.memoizedState;return t!==null&&yu(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function Ef(e,t){var s=wt();t=t===void 0?null:t;var i=s.memoizedState;if(t!==null&&yu(t,i[1]))return i[0];if(i=e(),ds){ft(!0);try{e()}finally{ft(!1)}}return s.memoizedState=[i,t],i}function Au(e,t,s){return s===void 0||(oa&1073741824)!==0&&(Ye&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Tm(),$e.lanes|=e,Ua|=e,s)}function Tf(e,t,s,i){return un(s,t)?s:Ys.current!==null?(e=Au(e,s,i),un(e,t)||(Et=!0),e):(oa&42)===0||(oa&1073741824)!==0&&(Ye&261930)===0?(Et=!0,e.memoizedState=s):(e=Tm(),$e.lanes|=e,Ua|=e,t)}function kf(e,t,s,i,c){var h=$.p;$.p=h!==0&&8>h?h:8;var p=M.T,_={};M.T=_,Du(e,!1,t,s);try{var R=c(),X=M.S;if(X!==null&&X(_,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ie=Ay(R,i);Pr(e,t,ie,gn(e))}else Pr(e,t,i,gn(e))}catch(ce){Pr(e,t,{then:function(){},status:"rejected",reason:ce},gn())}finally{$.p=h,p!==null&&_.types!==null&&(p.types=_.types),M.T=p}}function zy(){}function Ru(e,t,s,i){if(e.tag!==5)throw Error(l(476));var c=Nf(e).queue;kf(e,c,t,Z,s===null?zy:function(){return Cf(e),s(i)})}function Nf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:Z},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Cf(e){var t=Nf(e);t.next===null&&(t=e.alternate.memoizedState),Pr(e,t.next.queue,{},gn())}function Ou(){return Ht(di)}function Af(){return wt().memoizedState}function Rf(){return wt().memoizedState}function Ly(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=gn();e=Ca(s);var i=Aa(t,e,s);i!==null&&(sn(i,t,s),Ir(i,t,s)),t={cache:lu()},e.payload=t;return}t=t.return}}function qy(e,t,s){var i=gn();s={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},_l(e)?Df(t,s):(s=Jo(e,t,s,i),s!==null&&(sn(s,e,i),Mf(s,t,i)))}function Of(e,t,s){var i=gn();Pr(e,t,s,i)}function Pr(e,t,s,i){var c={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(_l(e))Df(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,_=h(p,s);if(c.hasEagerState=!0,c.eagerState=_,un(_,p))return el(e,t,c,0),it===null&&Fi(),!1}catch{}if(s=Jo(e,t,c,i),s!==null)return sn(s,e,i),Mf(s,t,i),!0}return!1}function Du(e,t,s,i){if(i={lane:2,revertLane:dc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},_l(e)){if(t)throw Error(l(479))}else t=Jo(e,s,i,2),t!==null&&sn(t,e,2)}function _l(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function Df(e,t){Qs=fl=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Mf(e,t,s){if((s&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,on(e,s)}}var Xr={readContext:Ht,use:vl,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};Xr.useEffectEvent=pt;var Uf={readContext:Ht,use:vl,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:yf,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,yl(4194308,4,Sf.bind(null,t,e),s)},useLayoutEffect:function(e,t){return yl(4194308,4,e,t)},useInsertionEffect:function(e,t){yl(4,2,e,t)},useMemo:function(e,t){var s=Pt();t=t===void 0?null:t;var i=e();if(ds){ft(!0);try{e()}finally{ft(!1)}}return s.memoizedState=[i,t],i},useReducer:function(e,t,s){var i=Pt();if(s!==void 0){var c=s(t);if(ds){ft(!0);try{s(t)}finally{ft(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=qy.bind(null,$e,e),[i.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:function(e){e=Tu(e);var t=e.queue,s=Of.bind(null,$e,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Cu,useDeferredValue:function(e,t){var s=Pt();return Au(s,e,t)},useTransition:function(){var e=Tu(!1);return e=kf.bind(null,$e,e.queue,!0,!1),Pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var i=$e,c=Pt();if(Pe){if(s===void 0)throw Error(l(407));s=s()}else{if(s=t(),it===null)throw Error(l(349));(Ye&127)!==0||tf(i,t,s)}c.memoizedState=s;var h={value:s,getSnapshot:t};return c.queue=h,yf(af.bind(null,i,h,e),[e]),i.flags|=2048,Xs(9,{destroy:void 0},nf.bind(null,i,h,s,t),null),s},useId:function(){var e=Pt(),t=it.identifierPrefix;if(Pe){var s=Pn,i=Qn;s=(i&~(1<<32-dt(i)-1)).toString(32)+s,t="_"+t+"R_"+s,s=ml++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=Ry++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ou,useFormState:ff,useActionState:ff,useOptimistic:function(e){var t=Pt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Du.bind(null,$e,!0,s),s.dispatch=t,[e,t]},useMemoCache:xu,useCacheRefresh:function(){return Pt().memoizedState=Ly.bind(null,$e)},useEffectEvent:function(e){var t=Pt(),s={impl:e};return t.memoizedState=s,function(){if((We&2)!==0)throw Error(l(440));return s.impl.apply(void 0,arguments)}}},Mu={readContext:Ht,use:vl,useCallback:jf,useContext:Ht,useEffect:Nu,useImperativeHandle:xf,useInsertionEffect:_f,useLayoutEffect:wf,useMemo:Ef,useReducer:pl,useRef:pf,useState:function(){return pl(ua)},useDebugValue:Cu,useDeferredValue:function(e,t){var s=wt();return Tf(s,at.memoizedState,e,t)},useTransition:function(){var e=pl(ua)[0],t=wt().memoizedState;return[typeof e=="boolean"?e:Qr(e),t]},useSyncExternalStore:ef,useId:Af,useHostTransitionStatus:Ou,useFormState:mf,useActionState:mf,useOptimistic:function(e,t){var s=wt();return lf(s,at,e,t)},useMemoCache:xu,useCacheRefresh:Rf};Mu.useEffectEvent=bf;var zf={readContext:Ht,use:vl,useCallback:jf,useContext:Ht,useEffect:Nu,useImperativeHandle:xf,useInsertionEffect:_f,useLayoutEffect:wf,useMemo:Ef,useReducer:Eu,useRef:pf,useState:function(){return Eu(ua)},useDebugValue:Cu,useDeferredValue:function(e,t){var s=wt();return at===null?Au(s,e,t):Tf(s,at.memoizedState,e,t)},useTransition:function(){var e=Eu(ua)[0],t=wt().memoizedState;return[typeof e=="boolean"?e:Qr(e),t]},useSyncExternalStore:ef,useId:Af,useHostTransitionStatus:Ou,useFormState:vf,useActionState:vf,useOptimistic:function(e,t){var s=wt();return at!==null?lf(s,at,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:xu,useCacheRefresh:Rf};zf.useEffectEvent=bf;function Uu(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:w({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var zu={enqueueSetState:function(e,t,s){e=e._reactInternals;var i=gn(),c=Ca(i);c.payload=t,s!=null&&(c.callback=s),t=Aa(e,c,i),t!==null&&(sn(t,e,i),Ir(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=gn(),c=Ca(i);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=Aa(e,c,i),t!==null&&(sn(t,e,i),Ir(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=gn(),i=Ca(s);i.tag=2,t!=null&&(i.callback=t),t=Aa(e,i,s),t!==null&&(sn(t,e,s),Ir(t,e,s))}};function Lf(e,t,s,i,c,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,p):t.prototype&&t.prototype.isPureReactComponent?!Ur(s,i)||!Ur(c,h):!0}function qf(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&zu.enqueueReplaceState(t,t.state,null)}function hs(e,t){var s=t;if("ref"in t){s={};for(var i in t)i!=="ref"&&(s[i]=t[i])}if(e=e.defaultProps){s===t&&(s=w({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}function Bf(e){Wi(e)}function $f(e){console.error(e)}function Hf(e){Wi(e)}function wl(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Gf(e,t,s){try{var i=e.onCaughtError;i(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Lu(e,t,s){return s=Ca(s),s.tag=3,s.payload={element:null},s.callback=function(){wl(e,t)},s}function If(e){return e=Ca(e),e.tag=3,e}function Vf(e,t,s,i){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;e.payload=function(){return c(h)},e.callback=function(){Gf(t,s,i)}}var p=s.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Gf(t,s,i),typeof c!="function"&&(za===null?za=new Set([this]):za.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})})}function By(e,t,s,i,c){if(s.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=s.alternate,t!==null&&Hs(t,s,c,!0),s=dn.current,s!==null){switch(s.tag){case 31:case 13:return On===null?Dl():s.alternate===null&&yt===0&&(yt=3),s.flags&=-257,s.flags|=65536,s.lanes=c,i===ol?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([i]):t.add(i),oc(e,i,c)),!1;case 22:return s.flags|=65536,i===ol?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([i]):s.add(i)),oc(e,i,c)),!1}throw Error(l(435,s.tag))}return oc(e,i,c),Dl(),!1}if(Pe)return t=dn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==nu&&(e=Error(l(422),{cause:i}),qr(Nn(e,s)))):(i!==nu&&(t=Error(l(423),{cause:i}),qr(Nn(t,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=Nn(i,s),c=Lu(e.stateNode,i,c),fu(e,c),yt!==4&&(yt=2)),!1;var h=Error(l(520),{cause:i});if(h=Nn(h,s),ai===null?ai=[h]:ai.push(h),yt!==4&&(yt=2),t===null)return!0;i=Nn(i,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=Lu(s.stateNode,i,e),fu(s,e),!1;case 1:if(t=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(za===null||!za.has(h))))return s.flags|=65536,c&=-c,s.lanes|=c,c=If(c),Vf(c,e,s,i),fu(s,c),!1}s=s.return}while(s!==null);return!1}var qu=Error(l(461)),Et=!1;function Gt(e,t,s,i){t.child=e===null?Qh(t,null,s,i):cs(t,e.child,s,i)}function Kf(e,t,s,i,c){s=s.render;var h=t.ref;if("ref"in i){var p={};for(var _ in i)_!=="ref"&&(p[_]=i[_])}else p=i;return is(t),i=bu(e,t,s,p,h,c),_=_u(),e!==null&&!Et?(wu(e,t,c),ca(e,t,c)):(Pe&&_&&eu(t),t.flags|=1,Gt(e,t,i,c),t.child)}function Yf(e,t,s,i,c){if(e===null){var h=s.type;return typeof h=="function"&&!Zo(h)&&h.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=h,Qf(e,t,h,i,c)):(e=nl(s.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Yu(e,c)){var p=h.memoizedProps;if(s=s.compare,s=s!==null?s:Ur,s(p,i)&&e.ref===t.ref)return ca(e,t,c)}return t.flags|=1,e=sa(h,i),e.ref=t.ref,e.return=t,t.child=e}function Qf(e,t,s,i,c){if(e!==null){var h=e.memoizedProps;if(Ur(h,i)&&e.ref===t.ref)if(Et=!1,t.pendingProps=i=h,Yu(e,c))(e.flags&131072)!==0&&(Et=!0);else return t.lanes=e.lanes,ca(e,t,c)}return Bu(e,t,s,i,c)}function Pf(e,t,s,i){var c=i.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;i=c&~h}else i=0,t.child=null;return Xf(e,t,h,s,i)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&il(t,h!==null?h.cachePool:null),h!==null?Jh(t,h):gu(),Zh(t);else return i=t.lanes=536870912,Xf(e,t,h!==null?h.baseLanes|s:s,s,i)}else h!==null?(il(t,h.cachePool),Jh(t,h),Oa(),t.memoizedState=null):(e!==null&&il(t,null),gu(),Oa());return Gt(e,t,c,s),t.child}function Jr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Xf(e,t,s,i,c){var h=uu();return h=h===null?null:{parent:xt._currentValue,pool:h},t.memoizedState={baseLanes:s,cachePool:h},e!==null&&il(t,null),gu(),Zh(t),e!==null&&Hs(e,t,i,!0),t.childLanes=c,null}function Sl(e,t){return t=jl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Jf(e,t,s){return cs(t,e.child,null,s),e=Sl(t,t.pendingProps),e.flags|=2,hn(t),t.memoizedState=null,e}function $y(e,t,s){var i=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Pe){if(i.mode==="hidden")return e=Sl(t,i),t.lanes=536870912,Jr(null,e);if(pu(t),(e=ot)?(e=og(e,Rn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ja!==null?{id:Qn,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},s=Oh(e),s.return=t,t.child=s,$t=t,ot=null)):e=null,e===null)throw Ta(t);return t.lanes=536870912,null}return Sl(t,i)}var h=e.memoizedState;if(h!==null){var p=h.dehydrated;if(pu(t),c)if(t.flags&256)t.flags&=-257,t=Jf(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Et||Hs(e,t,s,!1),c=(s&e.childLanes)!==0,Et||c){if(i=it,i!==null&&(p=xn(i,s),p!==0&&p!==h.retryLane))throw h.retryLane=p,ns(e,p),sn(i,e,p),qu;Dl(),t=Jf(e,t,s)}else e=h.treeContext,ot=Dn(p.nextSibling),$t=t,Pe=!0,Ea=null,Rn=!1,e!==null&&Uh(t,e),t=Sl(t,i),t.flags|=4096;return t}return e=sa(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function xl(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(l(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Bu(e,t,s,i,c){return is(t),s=bu(e,t,s,i,void 0,c),i=_u(),e!==null&&!Et?(wu(e,t,c),ca(e,t,c)):(Pe&&i&&eu(t),t.flags|=1,Gt(e,t,s,c),t.child)}function Zf(e,t,s,i,c,h){return is(t),t.updateQueue=null,s=Fh(t,i,s,c),Wh(e),i=_u(),e!==null&&!Et?(wu(e,t,h),ca(e,t,h)):(Pe&&i&&eu(t),t.flags|=1,Gt(e,t,s,h),t.child)}function Wf(e,t,s,i,c){if(is(t),t.stateNode===null){var h=Ls,p=s.contextType;typeof p=="object"&&p!==null&&(h=Ht(p)),h=new s(i,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=zu,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=i,h.state=t.memoizedState,h.refs={},du(t),p=s.contextType,h.context=typeof p=="object"&&p!==null?Ht(p):Ls,h.state=t.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Uu(t,s,p,i),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(p=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),p!==h.state&&zu.enqueueReplaceState(h,h.state,null),Kr(t,i,h,c),Vr(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){h=t.stateNode;var _=t.memoizedProps,R=hs(s,_);h.props=R;var X=h.context,ie=s.contextType;p=Ls,typeof ie=="object"&&ie!==null&&(p=Ht(ie));var ce=s.getDerivedStateFromProps;ie=typeof ce=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,ie||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||X!==p)&&qf(t,h,i,p),Na=!1;var ee=t.memoizedState;h.state=ee,Kr(t,i,h,c),Vr(),X=t.memoizedState,_||ee!==X||Na?(typeof ce=="function"&&(Uu(t,s,ce,i),X=t.memoizedState),(R=Na||Lf(t,s,R,i,ee,X,p))?(ie||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=X),h.props=i,h.state=X,h.context=p,i=R):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,hu(e,t),p=t.memoizedProps,ie=hs(s,p),h.props=ie,ce=t.pendingProps,ee=h.context,X=s.contextType,R=Ls,typeof X=="object"&&X!==null&&(R=Ht(X)),_=s.getDerivedStateFromProps,(X=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==ce||ee!==R)&&qf(t,h,i,R),Na=!1,ee=t.memoizedState,h.state=ee,Kr(t,i,h,c),Vr();var ae=t.memoizedState;p!==ce||ee!==ae||Na||e!==null&&e.dependencies!==null&&sl(e.dependencies)?(typeof _=="function"&&(Uu(t,s,_,i),ae=t.memoizedState),(ie=Na||Lf(t,s,ie,i,ee,ae,R)||e!==null&&e.dependencies!==null&&sl(e.dependencies))?(X||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,ae,R),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,ae,R)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&ee===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=ae),h.props=i,h.state=ae,h.context=R,i=ie):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&ee===e.memoizedState||(t.flags|=1024),i=!1)}return h=i,xl(e,t),i=(t.flags&128)!==0,h||i?(h=t.stateNode,s=i&&typeof s.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&i?(t.child=cs(t,e.child,null,c),t.child=cs(t,null,s,c)):Gt(e,t,s,c),t.memoizedState=h.state,e=t.child):e=ca(e,t,c),e}function Ff(e,t,s,i){return ss(),t.flags|=256,Gt(e,t,s,i),t.child}var $u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hu(e){return{baseLanes:e,cachePool:Hh()}}function Gu(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=mn),e}function em(e,t,s){var i=t.pendingProps,c=!1,h=(t.flags&128)!==0,p;if((p=h)||(p=e!==null&&e.memoizedState===null?!1:(_t.current&2)!==0),p&&(c=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Pe){if(c?Ra(t):Oa(),(e=ot)?(e=og(e,Rn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ja!==null?{id:Qn,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},s=Oh(e),s.return=t,t.child=s,$t=t,ot=null)):e=null,e===null)throw Ta(t);return jc(e)?t.lanes=32:t.lanes=536870912,null}var _=i.children;return i=i.fallback,c?(Oa(),c=t.mode,_=jl({mode:"hidden",children:_},c),i=as(i,c,s,null),_.return=t,i.return=t,_.sibling=i,t.child=_,i=t.child,i.memoizedState=Hu(s),i.childLanes=Gu(e,p,s),t.memoizedState=$u,Jr(null,i)):(Ra(t),Iu(t,_))}var R=e.memoizedState;if(R!==null&&(_=R.dehydrated,_!==null)){if(h)t.flags&256?(Ra(t),t.flags&=-257,t=Vu(e,t,s)):t.memoizedState!==null?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),_=i.fallback,c=t.mode,i=jl({mode:"visible",children:i.children},c),_=as(_,c,s,null),_.flags|=2,i.return=t,_.return=t,i.sibling=_,t.child=i,cs(t,e.child,null,s),i=t.child,i.memoizedState=Hu(s),i.childLanes=Gu(e,p,s),t.memoizedState=$u,t=Jr(null,i));else if(Ra(t),jc(_)){if(p=_.nextSibling&&_.nextSibling.dataset,p)var X=p.dgst;p=X,i=Error(l(419)),i.stack="",i.digest=p,qr({value:i,source:null,stack:null}),t=Vu(e,t,s)}else if(Et||Hs(e,t,s,!1),p=(s&e.childLanes)!==0,Et||p){if(p=it,p!==null&&(i=xn(p,s),i!==0&&i!==R.retryLane))throw R.retryLane=i,ns(e,i),sn(p,e,i),qu;xc(_)||Dl(),t=Vu(e,t,s)}else xc(_)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,ot=Dn(_.nextSibling),$t=t,Pe=!0,Ea=null,Rn=!1,e!==null&&Uh(t,e),t=Iu(t,i.children),t.flags|=4096);return t}return c?(Oa(),_=i.fallback,c=t.mode,R=e.child,X=R.sibling,i=sa(R,{mode:"hidden",children:i.children}),i.subtreeFlags=R.subtreeFlags&65011712,X!==null?_=sa(X,_):(_=as(_,c,s,null),_.flags|=2),_.return=t,i.return=t,i.sibling=_,t.child=i,Jr(null,i),i=t.child,_=e.child.memoizedState,_===null?_=Hu(s):(c=_.cachePool,c!==null?(R=xt._currentValue,c=c.parent!==R?{parent:R,pool:R}:c):c=Hh(),_={baseLanes:_.baseLanes|s,cachePool:c}),i.memoizedState=_,i.childLanes=Gu(e,p,s),t.memoizedState=$u,Jr(e.child,i)):(Ra(t),s=e.child,e=s.sibling,s=sa(s,{mode:"visible",children:i.children}),s.return=t,s.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=s,t.memoizedState=null,s)}function Iu(e,t){return t=jl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function jl(e,t){return e=cn(22,e,null,t),e.lanes=0,e}function Vu(e,t,s){return cs(t,e.child,null,s),e=Iu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tm(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),ru(e.return,t,s)}function Ku(e,t,s,i,c,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:c,treeForkCount:h}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=i,p.tail=s,p.tailMode=c,p.treeForkCount=h)}function nm(e,t,s){var i=t.pendingProps,c=i.revealOrder,h=i.tail;i=i.children;var p=_t.current,_=(p&2)!==0;if(_?(p=p&1|2,t.flags|=128):p&=1,D(_t,p),Gt(e,t,i,s),i=Pe?Lr:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tm(e,s,t);else if(e.tag===19)tm(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&hl(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Ku(t,!1,c,s,h,i);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&hl(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Ku(t,!0,s,null,h,i);break;case"together":Ku(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function ca(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ua|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Hs(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,s=sa(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=sa(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Yu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&sl(e)))}function Hy(e,t,s){switch(t.tag){case 3:de(t,t.stateNode.containerInfo),ka(t,xt,e.memoizedState.cache),ss();break;case 27:case 5:ve(t);break;case 4:de(t,t.stateNode.containerInfo);break;case 10:ka(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,pu(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ra(t),t.flags|=128,null):(s&t.child.childLanes)!==0?em(e,t,s):(Ra(t),e=ca(e,t,s),e!==null?e.sibling:null);Ra(t);break;case 19:var c=(e.flags&128)!==0;if(i=(s&t.childLanes)!==0,i||(Hs(e,t,s,!1),i=(s&t.childLanes)!==0),c){if(i)return nm(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),D(_t,_t.current),i)break;return null;case 22:return t.lanes=0,Pf(e,t,s,t.pendingProps);case 24:ka(t,xt,e.memoizedState.cache)}return ca(e,t,s)}function am(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Et=!0;else{if(!Yu(e,s)&&(t.flags&128)===0)return Et=!1,Hy(e,t,s);Et=(e.flags&131072)!==0}else Et=!1,Pe&&(t.flags&1048576)!==0&&Mh(t,Lr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=os(t.elementType),t.type=e,typeof e=="function")Zo(e)?(i=hs(e,i),t.tag=1,t=Wf(null,t,e,i,s)):(t.tag=0,t=Bu(null,t,e,i,s));else{if(e!=null){var c=e.$$typeof;if(c===Q){t.tag=11,t=Kf(null,t,e,i,s);break e}else if(c===T){t.tag=14,t=Yf(null,t,e,i,s);break e}}throw t=P(e)||e,Error(l(306,t,""))}}return t;case 0:return Bu(e,t,t.type,t.pendingProps,s);case 1:return i=t.type,c=hs(i,t.pendingProps),Wf(e,t,i,c,s);case 3:e:{if(de(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var h=t.memoizedState;c=h.element,hu(e,t),Kr(t,i,null,s);var p=t.memoizedState;if(i=p.cache,ka(t,xt,i),i!==h.cache&&iu(t,[xt],s,!0),Vr(),i=p.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Ff(e,t,i,s);break e}else if(i!==c){c=Nn(Error(l(424)),t),qr(c),t=Ff(e,t,i,s);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ot=Dn(e.firstChild),$t=t,Pe=!0,Ea=null,Rn=!0,s=Qh(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ss(),i===c){t=ca(e,t,s);break e}Gt(e,t,i,s)}t=t.child}return t;case 26:return xl(e,t),e===null?(s=mg(t.type,null,t.pendingProps,null))?t.memoizedState=s:Pe||(s=t.type,e=t.pendingProps,i=$l(I.current).createElement(s),i[Bt]=t,i[Wt]=e,It(i,s,e),zt(i),t.stateNode=i):t.memoizedState=mg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ve(t),e===null&&Pe&&(i=t.stateNode=dg(t.type,t.pendingProps,I.current),$t=t,Rn=!0,c=ot,$a(t.type)?(Ec=c,ot=Dn(i.firstChild)):ot=c),Gt(e,t,t.pendingProps.children,s),xl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Pe&&((c=i=ot)&&(i=pb(i,t.type,t.pendingProps,Rn),i!==null?(t.stateNode=i,$t=t,ot=Dn(i.firstChild),Rn=!1,c=!0):c=!1),c||Ta(t)),ve(t),c=t.type,h=t.pendingProps,p=e!==null?e.memoizedProps:null,i=h.children,_c(c,h)?i=null:p!==null&&_c(c,p)&&(t.flags|=32),t.memoizedState!==null&&(c=bu(e,t,Oy,null,null,s),di._currentValue=c),xl(e,t),Gt(e,t,i,s),t.child;case 6:return e===null&&Pe&&((e=s=ot)&&(s=yb(s,t.pendingProps,Rn),s!==null?(t.stateNode=s,$t=t,ot=null,e=!0):e=!1),e||Ta(t)),null;case 13:return em(e,t,s);case 4:return de(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=cs(t,null,i,s):Gt(e,t,i,s),t.child;case 11:return Kf(e,t,t.type,t.pendingProps,s);case 7:return Gt(e,t,t.pendingProps,s),t.child;case 8:return Gt(e,t,t.pendingProps.children,s),t.child;case 12:return Gt(e,t,t.pendingProps.children,s),t.child;case 10:return i=t.pendingProps,ka(t,t.type,i.value),Gt(e,t,i.children,s),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,is(t),c=Ht(c),i=i(c),t.flags|=1,Gt(e,t,i,s),t.child;case 14:return Yf(e,t,t.type,t.pendingProps,s);case 15:return Qf(e,t,t.type,t.pendingProps,s);case 19:return nm(e,t,s);case 31:return $y(e,t,s);case 22:return Pf(e,t,s,t.pendingProps);case 24:return is(t),i=Ht(xt),e===null?(c=uu(),c===null&&(c=it,h=lu(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=s),c=h),t.memoizedState={parent:i,cache:c},du(t),ka(t,xt,c)):((e.lanes&s)!==0&&(hu(e,t),Kr(t,null,null,s),Vr()),c=e.memoizedState,h=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ka(t,xt,i)):(i=h.cache,ka(t,xt,i),i!==c.cache&&iu(t,[xt],s,!0))),Gt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function da(e){e.flags|=4}function Qu(e,t,s,i,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Am())e.flags|=8192;else throw us=ol,cu}else e.flags&=-16777217}function sm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!bg(t))if(Am())e.flags|=8192;else throw us=ol,cu}function El(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Yt():536870912,e.lanes|=t,Fs|=t)}function Zr(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function Gy(e,t,s){var i=t.pendingProps;switch(tu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return ut(t),null;case 3:return s=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),la(xt),he(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&($s(t)?da(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,au())),ut(t),null;case 26:var c=t.type,h=t.memoizedState;return e===null?(da(t),h!==null?(ut(t),sm(t,h)):(ut(t),Qu(t,c,null,i,s))):h?h!==e.memoizedState?(da(t),ut(t),sm(t,h)):(ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&da(t),ut(t),Qu(t,c,e,i,s)),null;case 27:if(ke(t),s=I.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&da(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return ut(t),null}e=L.current,$s(t)?zh(t):(e=dg(c,i,s),t.stateNode=e,da(t))}return ut(t),null;case 5:if(ke(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&da(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return ut(t),null}if(h=L.current,$s(t))zh(t);else{var p=$l(I.current);switch(h){case 1:h=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=p.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof i.is=="string"?p.createElement("select",{is:i.is}):p.createElement("select"),i.multiple?h.multiple=!0:i.size&&(h.size=i.size);break;default:h=typeof i.is=="string"?p.createElement(c,{is:i.is}):p.createElement(c)}}h[Bt]=t,h[Wt]=i;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)h.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=h;e:switch(It(h,c,i),c){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&da(t)}}return ut(t),Qu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&da(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=I.current,$s(t)){if(e=t.stateNode,s=t.memoizedProps,i=null,c=$t,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[Bt]=t,e=!!(e.nodeValue===s||i!==null&&i.suppressHydrationWarning===!0||eg(e.nodeValue,s)),e||Ta(t,!0)}else e=$l(e).createTextNode(i),e[Bt]=t,t.stateNode=e}return ut(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(i=$s(t),s!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Bt]=t}else ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),e=!1}else s=au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(hn(t),t):(hn(t),null);if((t.flags&128)!==0)throw Error(l(558))}return ut(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=$s(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[Bt]=t}else ss(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ut(t),c=!1}else c=au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(hn(t),t):(hn(t),null)}return hn(t),(t.flags&128)!==0?(t.lanes=s,t):(s=i!==null,e=e!==null&&e.memoizedState!==null,s&&(i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==c&&(i.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),El(t,t.updateQueue),ut(t),null);case 4:return he(),e===null&&gc(t.stateNode.containerInfo),ut(t),null;case 10:return la(t.type),ut(t),null;case 19:if(H(_t),i=t.memoizedState,i===null)return ut(t),null;if(c=(t.flags&128)!==0,h=i.rendering,h===null)if(c)Zr(i,!1);else{if(yt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=hl(e),h!==null){for(t.flags|=128,Zr(i,!1),e=h.updateQueue,t.updateQueue=e,El(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Rh(s,e),s=s.sibling;return D(_t,_t.current&1|2),Pe&&ra(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&le()>Al&&(t.flags|=128,c=!0,Zr(i,!1),t.lanes=4194304)}else{if(!c)if(e=hl(h),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,El(t,e),Zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!Pe)return ut(t),null}else 2*le()-i.renderingStartTime>Al&&s!==536870912&&(t.flags|=128,c=!0,Zr(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=le(),e.sibling=null,s=_t.current,D(_t,c?s&1|2:s&1),Pe&&ra(t,i.treeForkCount),e):(ut(t),null);case 22:case 23:return hn(t),vu(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(s&536870912)!==0&&(t.flags&128)===0&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),s=t.updateQueue,s!==null&&El(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==s&&(t.flags|=2048),e!==null&&H(ls),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),la(xt),ut(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function Iy(e,t){switch(tu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return la(xt),he(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ke(t),null;case 31:if(t.memoizedState!==null){if(hn(t),t.alternate===null)throw Error(l(340));ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(hn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(_t),null;case 4:return he(),null;case 10:return la(t.type),null;case 22:case 23:return hn(t),vu(),e!==null&&H(ls),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return la(xt),null;case 25:return null;default:return null}}function rm(e,t){switch(tu(t),t.tag){case 3:la(xt),he();break;case 26:case 27:case 5:ke(t);break;case 4:he();break;case 31:t.memoizedState!==null&&hn(t);break;case 13:hn(t);break;case 19:H(_t);break;case 10:la(t.type);break;case 22:case 23:hn(t),vu(),e!==null&&H(ls);break;case 24:la(xt)}}function Wr(e,t){try{var s=t.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var c=i.next;s=c;do{if((s.tag&e)===e){i=void 0;var h=s.create,p=s.inst;i=h(),p.destroy=i}s=s.next}while(s!==c)}}catch(_){nt(t,t.return,_)}}function Da(e,t,s){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var h=c.next;i=h;do{if((i.tag&e)===e){var p=i.inst,_=p.destroy;if(_!==void 0){p.destroy=void 0,c=t;var R=s,X=_;try{X()}catch(ie){nt(c,R,ie)}}}i=i.next}while(i!==h)}}catch(ie){nt(t,t.return,ie)}}function im(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Xh(t,s)}catch(i){nt(e,e.return,i)}}}function lm(e,t,s){s.props=hs(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(i){nt(e,t,i)}}function Fr(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof s=="function"?e.refCleanup=s(i):s.current=i}}catch(c){nt(e,t,c)}}function Xn(e,t){var s=e.ref,i=e.refCleanup;if(s!==null)if(typeof i=="function")try{i()}catch(c){nt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){nt(e,t,c)}else s.current=null}function om(e){var t=e.type,s=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&i.focus();break e;case"img":s.src?i.src=s.src:s.srcSet&&(i.srcset=s.srcSet)}}catch(c){nt(e,e.return,c)}}function Pu(e,t,s){try{var i=e.stateNode;db(i,e.type,s,t),i[Wt]=t}catch(c){nt(e,e.return,c)}}function um(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$a(e.type)||e.tag===4}function Xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$a(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ju(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=na));else if(i!==4&&(i===27&&$a(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Ju(e,t,s),e=e.sibling;e!==null;)Ju(e,t,s),e=e.sibling}function Tl(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(i===27&&$a(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Tl(e,t,s),e=e.sibling;e!==null;)Tl(e,t,s),e=e.sibling}function cm(e){var t=e.stateNode,s=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);It(t,i,s),t[Bt]=e,t[Wt]=s}catch(h){nt(e,e.return,h)}}var ha=!1,Tt=!1,Zu=!1,dm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Vy(e,t){if(e=e.containerInfo,yc=Ql,e=Sh(e),Vo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var c=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var p=0,_=-1,R=-1,X=0,ie=0,ce=e,ee=null;t:for(;;){for(var ae;ce!==s||c!==0&&ce.nodeType!==3||(_=p+c),ce!==h||i!==0&&ce.nodeType!==3||(R=p+i),ce.nodeType===3&&(p+=ce.nodeValue.length),(ae=ce.firstChild)!==null;)ee=ce,ce=ae;for(;;){if(ce===e)break t;if(ee===s&&++X===c&&(_=p),ee===h&&++ie===i&&(R=p),(ae=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=ae}s=_===-1||R===-1?null:{start:_,end:R}}else s=null}s=s||{start:0,end:0}}else s=null;for(bc={focusedElem:e,selectionRange:s},Ql=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)c=e[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=t,c=h.memoizedProps,h=h.memoizedState,i=s.stateNode;try{var we=hs(s.type,c);e=i.getSnapshotBeforeUpdate(we,h),i.__reactInternalSnapshotBeforeUpdate=e}catch(Ne){nt(s,s.return,Ne)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Sc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Sc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function hm(e,t,s){var i=s.flags;switch(s.tag){case 0:case 11:case 15:ma(e,s),i&4&&Wr(5,s);break;case 1:if(ma(e,s),i&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(p){nt(s,s.return,p)}else{var c=hs(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){nt(s,s.return,p)}}i&64&&im(s),i&512&&Fr(s,s.return);break;case 3:if(ma(e,s),i&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Xh(e,t)}catch(p){nt(s,s.return,p)}}break;case 27:t===null&&i&4&&cm(s);case 26:case 5:ma(e,s),t===null&&i&4&&om(s),i&512&&Fr(s,s.return);break;case 12:ma(e,s);break;case 31:ma(e,s),i&4&&gm(e,s);break;case 13:ma(e,s),i&4&&vm(e,s),i&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Fy.bind(null,s),bb(e,s))));break;case 22:if(i=s.memoizedState!==null||ha,!i){t=t!==null&&t.memoizedState!==null||Tt,c=ha;var h=Tt;ha=i,(Tt=t)&&!h?ga(e,s,(s.subtreeFlags&8772)!==0):ma(e,s),ha=c,Tt=h}break;case 30:break;default:ma(e,s)}}function fm(e){var t=e.alternate;t!==null&&(e.alternate=null,fm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ko(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ht=null,en=!1;function fa(e,t,s){for(s=s.child;s!==null;)mm(e,t,s),s=s.sibling}function mm(e,t,s){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(St,s)}catch{}switch(s.tag){case 26:Tt||Xn(s,t),fa(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Tt||Xn(s,t);var i=ht,c=en;$a(s.type)&&(ht=s.stateNode,en=!1),fa(e,t,s),oi(s.stateNode),ht=i,en=c;break;case 5:Tt||Xn(s,t);case 6:if(i=ht,c=en,ht=null,fa(e,t,s),ht=i,en=c,ht!==null)if(en)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(s.stateNode)}catch(h){nt(s,t,h)}else try{ht.removeChild(s.stateNode)}catch(h){nt(s,t,h)}break;case 18:ht!==null&&(en?(e=ht,ig(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),lr(e)):ig(ht,s.stateNode));break;case 4:i=ht,c=en,ht=s.stateNode.containerInfo,en=!0,fa(e,t,s),ht=i,en=c;break;case 0:case 11:case 14:case 15:Da(2,s,t),Tt||Da(4,s,t),fa(e,t,s);break;case 1:Tt||(Xn(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"&&lm(s,t,i)),fa(e,t,s);break;case 21:fa(e,t,s);break;case 22:Tt=(i=Tt)||s.memoizedState!==null,fa(e,t,s),Tt=i;break;default:fa(e,t,s)}}function gm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{lr(e)}catch(s){nt(t,t.return,s)}}}function vm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{lr(e)}catch(s){nt(t,t.return,s)}}function Ky(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new dm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new dm),t;default:throw Error(l(435,e.tag))}}function kl(e,t){var s=Ky(e);t.forEach(function(i){if(!s.has(i)){s.add(i);var c=eb.bind(null,e,i);i.then(c,c)}})}function tn(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var c=s[i],h=e,p=t,_=p;e:for(;_!==null;){switch(_.tag){case 27:if($a(_.type)){ht=_.stateNode,en=!1;break e}break;case 5:ht=_.stateNode,en=!1;break e;case 3:case 4:ht=_.stateNode.containerInfo,en=!0;break e}_=_.return}if(ht===null)throw Error(l(160));mm(h,p,c),ht=null,en=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)pm(t,e),t=t.sibling}var $n=null;function pm(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),i&4&&(Da(3,e,e.return),Wr(3,e),Da(5,e,e.return));break;case 1:tn(t,e),nn(e),i&512&&(Tt||s===null||Xn(s,s.return)),i&64&&ha&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?i:s.concat(i))));break;case 26:var c=$n;if(tn(t,e),nn(e),i&512&&(Tt||s===null||Xn(s,s.return)),i&4){var h=s!==null?s.memoizedState:null;if(i=e.memoizedState,s===null)if(i===null)if(e.stateNode===null){e:{i=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Tr]||h[Bt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(i),c.head.insertBefore(h,c.querySelector("head > title"))),It(h,i,s),h[Bt]=e,zt(h),i=h;break e;case"link":var p=pg("link","href",c).get(i+(s.href||""));if(p){for(var _=0;_<p.length;_++)if(h=p[_],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){p.splice(_,1);break t}}h=c.createElement(i),It(h,i,s),c.head.appendChild(h);break;case"meta":if(p=pg("meta","content",c).get(i+(s.content||""))){for(_=0;_<p.length;_++)if(h=p[_],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){p.splice(_,1);break t}}h=c.createElement(i),It(h,i,s),c.head.appendChild(h);break;default:throw Error(l(468,i))}h[Bt]=e,zt(h),i=h}e.stateNode=i}else yg(c,e.type,e.stateNode);else e.stateNode=vg(c,i,e.memoizedProps);else h!==i?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,i===null?yg(c,e.type,e.stateNode):vg(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Pu(e,e.memoizedProps,s.memoizedProps)}break;case 27:tn(t,e),nn(e),i&512&&(Tt||s===null||Xn(s,s.return)),s!==null&&i&4&&Pu(e,e.memoizedProps,s.memoizedProps);break;case 5:if(tn(t,e),nn(e),i&512&&(Tt||s===null||Xn(s,s.return)),e.flags&32){c=e.stateNode;try{As(c,"")}catch(we){nt(e,e.return,we)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,Pu(e,c,s!==null?s.memoizedProps:c)),i&1024&&(Zu=!0);break;case 6:if(tn(t,e),nn(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,s=e.stateNode;try{s.nodeValue=i}catch(we){nt(e,e.return,we)}}break;case 3:if(Il=null,c=$n,$n=Hl(t.containerInfo),tn(t,e),$n=c,nn(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{lr(t.containerInfo)}catch(we){nt(e,e.return,we)}Zu&&(Zu=!1,ym(e));break;case 4:i=$n,$n=Hl(e.stateNode.containerInfo),tn(t,e),nn(e),$n=i;break;case 12:tn(t,e),nn(e);break;case 31:tn(t,e),nn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Cl=le()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 22:c=e.memoizedState!==null;var R=s!==null&&s.memoizedState!==null,X=ha,ie=Tt;if(ha=X||c,Tt=ie||R,tn(t,e),Tt=ie,ha=X,nn(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(s===null||R||ha||Tt||fs(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){R=s=t;try{if(h=R.stateNode,c)p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{_=R.stateNode;var ce=R.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;_.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(we){nt(R,R.return,we)}}}else if(t.tag===6){if(s===null){R=t;try{R.stateNode.nodeValue=c?"":R.memoizedProps}catch(we){nt(R,R.return,we)}}}else if(t.tag===18){if(s===null){R=t;try{var ae=R.stateNode;c?lg(ae,!0):lg(R.stateNode,!1)}catch(we){nt(R,R.return,we)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(s=i.retryQueue,s!==null&&(i.retryQueue=null,kl(e,s))));break;case 19:tn(t,e),nn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 30:break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{for(var s,i=e.return;i!==null;){if(um(i)){s=i;break}i=i.return}if(s==null)throw Error(l(160));switch(s.tag){case 27:var c=s.stateNode,h=Xu(e);Tl(e,h,c);break;case 5:var p=s.stateNode;s.flags&32&&(As(p,""),s.flags&=-33);var _=Xu(e);Tl(e,_,p);break;case 3:case 4:var R=s.stateNode.containerInfo,X=Xu(e);Ju(e,X,R);break;default:throw Error(l(161))}}catch(ie){nt(e,e.return,ie)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ym(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ym(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ma(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)hm(e,t.alternate,t),t=t.sibling}function fs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Da(4,t,t.return),fs(t);break;case 1:Xn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&lm(t,t.return,s),fs(t);break;case 27:oi(t.stateNode);case 26:case 5:Xn(t,t.return),fs(t);break;case 22:t.memoizedState===null&&fs(t);break;case 30:fs(t);break;default:fs(t)}e=e.sibling}}function ga(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,h=t,p=h.flags;switch(h.tag){case 0:case 11:case 15:ga(c,h,s),Wr(4,h);break;case 1:if(ga(c,h,s),i=h,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(X){nt(i,i.return,X)}if(i=h,c=i.updateQueue,c!==null){var _=i.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)Ph(R[c],_)}catch(X){nt(i,i.return,X)}}s&&p&64&&im(h),Fr(h,h.return);break;case 27:cm(h);case 26:case 5:ga(c,h,s),s&&i===null&&p&4&&om(h),Fr(h,h.return);break;case 12:ga(c,h,s);break;case 31:ga(c,h,s),s&&p&4&&gm(c,h);break;case 13:ga(c,h,s),s&&p&4&&vm(c,h);break;case 22:h.memoizedState===null&&ga(c,h,s),Fr(h,h.return);break;case 30:break;default:ga(c,h,s)}t=t.sibling}}function Wu(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Br(s))}function Fu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Br(e))}function Hn(e,t,s,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bm(e,t,s,i),t=t.sibling}function bm(e,t,s,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Hn(e,t,s,i),c&2048&&Wr(9,t);break;case 1:Hn(e,t,s,i);break;case 3:Hn(e,t,s,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Br(e)));break;case 12:if(c&2048){Hn(e,t,s,i),e=t.stateNode;try{var h=t.memoizedProps,p=h.id,_=h.onPostCommit;typeof _=="function"&&_(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){nt(t,t.return,R)}}else Hn(e,t,s,i);break;case 31:Hn(e,t,s,i);break;case 13:Hn(e,t,s,i);break;case 23:break;case 22:h=t.stateNode,p=t.alternate,t.memoizedState!==null?h._visibility&2?Hn(e,t,s,i):ei(e,t):h._visibility&2?Hn(e,t,s,i):(h._visibility|=2,Js(e,t,s,i,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Wu(p,t);break;case 24:Hn(e,t,s,i),c&2048&&Fu(t.alternate,t);break;default:Hn(e,t,s,i)}}function Js(e,t,s,i,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,p=t,_=s,R=i,X=p.flags;switch(p.tag){case 0:case 11:case 15:Js(h,p,_,R,c),Wr(8,p);break;case 23:break;case 22:var ie=p.stateNode;p.memoizedState!==null?ie._visibility&2?Js(h,p,_,R,c):ei(h,p):(ie._visibility|=2,Js(h,p,_,R,c)),c&&X&2048&&Wu(p.alternate,p);break;case 24:Js(h,p,_,R,c),c&&X&2048&&Fu(p.alternate,p);break;default:Js(h,p,_,R,c)}t=t.sibling}}function ei(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,i=t,c=i.flags;switch(i.tag){case 22:ei(s,i),c&2048&&Wu(i.alternate,i);break;case 24:ei(s,i),c&2048&&Fu(i.alternate,i);break;default:ei(s,i)}t=t.sibling}}var ti=8192;function Zs(e,t,s){if(e.subtreeFlags&ti)for(e=e.child;e!==null;)_m(e,t,s),e=e.sibling}function _m(e,t,s){switch(e.tag){case 26:Zs(e,t,s),e.flags&ti&&e.memoizedState!==null&&Rb(s,$n,e.memoizedState,e.memoizedProps);break;case 5:Zs(e,t,s);break;case 3:case 4:var i=$n;$n=Hl(e.stateNode.containerInfo),Zs(e,t,s),$n=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ti,ti=16777216,Zs(e,t,s),ti=i):Zs(e,t,s));break;default:Zs(e,t,s)}}function wm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ni(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];Lt=i,xm(i,e)}wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sm(e),e=e.sibling}function Sm(e){switch(e.tag){case 0:case 11:case 15:ni(e),e.flags&2048&&Da(9,e,e.return);break;case 3:ni(e);break;case 12:ni(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Nl(e)):ni(e);break;default:ni(e)}}function Nl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];Lt=i,xm(i,e)}wm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Da(8,t,t.return),Nl(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Nl(t));break;default:Nl(t)}e=e.sibling}}function xm(e,t){for(;Lt!==null;){var s=Lt;switch(s.tag){case 0:case 11:case 15:Da(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var i=s.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Br(s.memoizedState.cache)}if(i=s.child,i!==null)i.return=s,Lt=i;else e:for(s=e;Lt!==null;){i=Lt;var c=i.sibling,h=i.return;if(fm(i),i===s){Lt=null;break e}if(c!==null){c.return=h,Lt=c;break e}Lt=h}}}var Yy={getCacheForType:function(e){var t=Ht(xt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Ht(xt).controller.signal}},Qy=typeof WeakMap=="function"?WeakMap:Map,We=0,it=null,Ie=null,Ye=0,tt=0,fn=null,Ma=!1,Ws=!1,ec=!1,va=0,yt=0,Ua=0,ms=0,tc=0,mn=0,Fs=0,ai=null,an=null,nc=!1,Cl=0,jm=0,Al=1/0,Rl=null,za=null,Rt=0,La=null,er=null,pa=0,ac=0,sc=null,Em=null,si=0,rc=null;function gn(){return(We&2)!==0&&Ye!==0?Ye&-Ye:M.T!==null?dc():qn()}function Tm(){if(mn===0)if((Ye&536870912)===0||Pe){var e=wn;wn<<=1,(wn&3932160)===0&&(wn=262144),mn=e}else mn=536870912;return e=dn.current,e!==null&&(e.flags|=32),mn}function sn(e,t,s){(e===it&&(tt===2||tt===9)||e.cancelPendingCommit!==null)&&(tr(e,0),qa(e,Ye,mn,!1)),Sn(e,s),((We&2)===0||e!==it)&&(e===it&&((We&2)===0&&(ms|=s),yt===4&&qa(e,Ye,mn,!1)),Jn(e))}function km(e,t,s){if((We&6)!==0)throw Error(l(327));var i=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Xt(e,t),c=i?Jy(e,t):lc(e,t,!0),h=i;do{if(c===0){Ws&&!i&&qa(e,t,0,!1);break}else{if(s=e.current.alternate,h&&!Py(s)){c=lc(e,t,!1),h=!1;continue}if(c===2){if(h=t,e.errorRecoveryDisabledLanes&h)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var _=e;c=ai;var R=_.current.memoizedState.isDehydrated;if(R&&(tr(_,p).flags|=256),p=lc(_,p,!1),p!==2){if(ec&&!R){_.errorRecoveryDisabledLanes|=h,ms|=h,c=4;break e}h=an,an=c,h!==null&&(an===null?an=h:an.push.apply(an,h))}c=p}if(h=!1,c!==2)continue}}if(c===1){tr(e,0),qa(e,t,0,!0);break}e:{switch(i=e,h=c,h){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:qa(i,t,mn,!Ma);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(c=Cl+300-le(),10<c)){if(qa(i,t,mn,!Ma),Ut(i,0,!0)!==0)break e;pa=t,i.timeoutHandle=sg(Nm.bind(null,i,s,an,Rl,nc,t,mn,ms,Fs,Ma,h,"Throttled",-0,0),c);break e}Nm(i,s,an,Rl,nc,t,mn,ms,Fs,Ma,h,null,-0,0)}}break}while(!0);Jn(e)}function Nm(e,t,s,i,c,h,p,_,R,X,ie,ce,ee,ae){if(e.timeoutHandle=-1,ce=t.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:na},_m(t,h,ce);var we=(h&62914560)===h?Cl-le():(h&4194048)===h?jm-le():0;if(we=Ob(ce,we),we!==null){pa=h,e.cancelPendingCommit=we(zm.bind(null,e,t,h,s,i,c,p,_,R,ie,ce,null,ee,ae)),qa(e,h,p,!X);return}}zm(e,t,h,s,i,c,p,_,R)}function Py(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var i=0;i<s.length;i++){var c=s[i],h=c.getSnapshot;c=c.value;try{if(!un(h(),c))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qa(e,t,s,i){t&=~tc,t&=~ms,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var h=31-dt(c),p=1<<h;i[h]=-1,c&=~p}s!==0&&Ln(e,s,t)}function Ol(){return(We&6)===0?(ri(0),!1):!0}function ic(){if(Ie!==null){if(tt===0)var e=Ie.return;else e=Ie,ia=rs=null,Su(e),Ks=null,Hr=0,e=Ie;for(;e!==null;)rm(e.alternate,e),e=e.return;Ie=null}}function tr(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,mb(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),pa=0,ic(),it=e,Ie=s=sa(e.current,null),Ye=t,tt=0,fn=null,Ma=!1,Ws=Xt(e,t),ec=!1,Fs=mn=tc=ms=Ua=yt=0,an=ai=null,nc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-dt(i),h=1<<c;t|=e[c],i&=~h}return va=t,Fi(),s}function Cm(e,t){$e=null,M.H=Xr,t===Vs||t===ll?(t=Vh(),tt=3):t===cu?(t=Vh(),tt=4):tt=t===qu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,fn=t,Ie===null&&(yt=1,wl(e,Nn(t,e.current)))}function Am(){var e=dn.current;return e===null?!0:(Ye&4194048)===Ye?On===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?e===On:!1}function Rm(){var e=M.H;return M.H=Xr,e===null?Xr:e}function Om(){var e=M.A;return M.A=Yy,e}function Dl(){yt=4,Ma||(Ye&4194048)!==Ye&&dn.current!==null||(Ws=!0),(Ua&134217727)===0&&(ms&134217727)===0||it===null||qa(it,Ye,mn,!1)}function lc(e,t,s){var i=We;We|=2;var c=Rm(),h=Om();(it!==e||Ye!==t)&&(Rl=null,tr(e,t)),t=!1;var p=yt;e:do try{if(tt!==0&&Ie!==null){var _=Ie,R=fn;switch(tt){case 8:ic(),p=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(t=!0);var X=tt;if(tt=0,fn=null,nr(e,_,R,X),s&&Ws){p=0;break e}break;default:X=tt,tt=0,fn=null,nr(e,_,R,X)}}Xy(),p=yt;break}catch(ie){Cm(e,ie)}while(!0);return t&&e.shellSuspendCounter++,ia=rs=null,We=i,M.H=c,M.A=h,Ie===null&&(it=null,Ye=0,Fi()),p}function Xy(){for(;Ie!==null;)Dm(Ie)}function Jy(e,t){var s=We;We|=2;var i=Rm(),c=Om();it!==e||Ye!==t?(Rl=null,Al=le()+500,tr(e,t)):Ws=Xt(e,t);e:do try{if(tt!==0&&Ie!==null){t=Ie;var h=fn;t:switch(tt){case 1:tt=0,fn=null,nr(e,t,h,1);break;case 2:case 9:if(Gh(h)){tt=0,fn=null,Mm(t);break}t=function(){tt!==2&&tt!==9||it!==e||(tt=7),Jn(e)},h.then(t,t);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Gh(h)?(tt=0,fn=null,Mm(t)):(tt=0,fn=null,nr(e,t,h,7));break;case 5:var p=null;switch(Ie.tag){case 26:p=Ie.memoizedState;case 5:case 27:var _=Ie;if(p?bg(p):_.stateNode.complete){tt=0,fn=null;var R=_.sibling;if(R!==null)Ie=R;else{var X=_.return;X!==null?(Ie=X,Ml(X)):Ie=null}break t}}tt=0,fn=null,nr(e,t,h,5);break;case 6:tt=0,fn=null,nr(e,t,h,6);break;case 8:ic(),yt=6;break e;default:throw Error(l(462))}}Zy();break}catch(ie){Cm(e,ie)}while(!0);return ia=rs=null,M.H=i,M.A=c,We=s,Ie!==null?0:(it=null,Ye=0,Fi(),yt)}function Zy(){for(;Ie!==null&&!ye();)Dm(Ie)}function Dm(e){var t=am(e.alternate,e,va);e.memoizedProps=e.pendingProps,t===null?Ml(e):Ie=t}function Mm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Zf(s,t,t.pendingProps,t.type,void 0,Ye);break;case 11:t=Zf(s,t,t.pendingProps,t.type.render,t.ref,Ye);break;case 5:Su(t);default:rm(s,t),t=Ie=Rh(t,va),t=am(s,t,va)}e.memoizedProps=e.pendingProps,t===null?Ml(e):Ie=t}function nr(e,t,s,i){ia=rs=null,Su(t),Ks=null,Hr=0;var c=t.return;try{if(By(e,c,t,s,Ye)){yt=1,wl(e,Nn(s,e.current)),Ie=null;return}}catch(h){if(c!==null)throw Ie=c,h;yt=1,wl(e,Nn(s,e.current)),Ie=null;return}t.flags&32768?(Pe||i===1?e=!0:Ws||(Ye&536870912)!==0?e=!1:(Ma=e=!0,(i===2||i===9||i===3||i===6)&&(i=dn.current,i!==null&&i.tag===13&&(i.flags|=16384))),Um(t,e)):Ml(t)}function Ml(e){var t=e;do{if((t.flags&32768)!==0){Um(t,Ma);return}e=t.return;var s=Gy(t.alternate,t,va);if(s!==null){Ie=s;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);yt===0&&(yt=5)}function Um(e,t){do{var s=Iy(e.alternate,e);if(s!==null){s.flags&=32767,Ie=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Ie=e;return}Ie=e=s}while(e!==null);yt=6,Ie=null}function zm(e,t,s,i,c,h,p,_,R){e.cancelPendingCommit=null;do Ul();while(Rt!==0);if((We&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(h=t.lanes|t.childLanes,h|=Xo,At(e,s,h,p,_,R),e===it&&(Ie=it=null,Ye=0),er=t,La=e,pa=s,ac=h,sc=c,Em=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,tb(je,function(){return Hm(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=M.T,M.T=null,c=$.p,$.p=2,p=We,We|=4;try{Vy(e,t,s)}finally{We=p,$.p=c,M.T=i}}Rt=1,Lm(),qm(),Bm()}}function Lm(){if(Rt===1){Rt=0;var e=La,t=er,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=M.T,M.T=null;var i=$.p;$.p=2;var c=We;We|=4;try{pm(t,e);var h=bc,p=Sh(e.containerInfo),_=h.focusedElem,R=h.selectionRange;if(p!==_&&_&&_.ownerDocument&&wh(_.ownerDocument.documentElement,_)){if(R!==null&&Vo(_)){var X=R.start,ie=R.end;if(ie===void 0&&(ie=X),"selectionStart"in _)_.selectionStart=X,_.selectionEnd=Math.min(ie,_.value.length);else{var ce=_.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),we=_.textContent.length,Ne=Math.min(R.start,we),rt=R.end===void 0?Ne:Math.min(R.end,we);!ae.extend&&Ne>rt&&(p=rt,rt=Ne,Ne=p);var q=_h(_,Ne),U=_h(_,rt);if(q&&U&&(ae.rangeCount!==1||ae.anchorNode!==q.node||ae.anchorOffset!==q.offset||ae.focusNode!==U.node||ae.focusOffset!==U.offset)){var Y=ce.createRange();Y.setStart(q.node,q.offset),ae.removeAllRanges(),Ne>rt?(ae.addRange(Y),ae.extend(U.node,U.offset)):(Y.setEnd(U.node,U.offset),ae.addRange(Y))}}}}for(ce=[],ae=_;ae=ae.parentNode;)ae.nodeType===1&&ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ce.length;_++){var ue=ce[_];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Ql=!!yc,bc=yc=null}finally{We=c,$.p=i,M.T=s}}e.current=t,Rt=2}}function qm(){if(Rt===2){Rt=0;var e=La,t=er,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=M.T,M.T=null;var i=$.p;$.p=2;var c=We;We|=4;try{hm(e,t.alternate,t)}finally{We=c,$.p=i,M.T=s}}Rt=3}}function Bm(){if(Rt===4||Rt===3){Rt=0,ze();var e=La,t=er,s=pa,i=Em;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Rt=5:(Rt=0,er=La=null,$m(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(za=null),ea(s),t=t.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(St,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=M.T,c=$.p,$.p=2,M.T=null;try{for(var h=e.onRecoverableError,p=0;p<i.length;p++){var _=i[p];h(_.value,{componentStack:_.stack})}}finally{M.T=t,$.p=c}}(pa&3)!==0&&Ul(),Jn(e),c=e.pendingLanes,(s&261930)!==0&&(c&42)!==0?e===rc?si++:(si=0,rc=e):si=0,ri(0)}}function $m(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Br(t)))}function Ul(){return Lm(),qm(),Bm(),Hm()}function Hm(){if(Rt!==5)return!1;var e=La,t=ac;ac=0;var s=ea(pa),i=M.T,c=$.p;try{$.p=32>s?32:s,M.T=null,s=sc,sc=null;var h=La,p=pa;if(Rt=0,er=La=null,pa=0,(We&6)!==0)throw Error(l(331));var _=We;if(We|=4,Sm(h.current),bm(h,h.current,p,s),We=_,ri(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(St,h)}catch{}return!0}finally{$.p=c,M.T=i,$m(e,t)}}function Gm(e,t,s){t=Nn(s,t),t=Lu(e.stateNode,t,2),e=Aa(e,t,2),e!==null&&(Sn(e,2),Jn(e))}function nt(e,t,s){if(e.tag===3)Gm(e,e,s);else for(;t!==null;){if(t.tag===3){Gm(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(za===null||!za.has(i))){e=Nn(s,e),s=If(2),i=Aa(t,s,2),i!==null&&(Vf(s,i,t,e),Sn(i,2),Jn(i));break}}t=t.return}}function oc(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new Qy;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(s)||(ec=!0,c.add(s),e=Wy.bind(null,e,t,s),t.then(e,e))}function Wy(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,it===e&&(Ye&s)===s&&(yt===4||yt===3&&(Ye&62914560)===Ye&&300>le()-Cl?(We&2)===0&&tr(e,0):tc|=s,Fs===Ye&&(Fs=0)),Jn(e)}function Im(e,t){t===0&&(t=Yt()),e=ns(e,t),e!==null&&(Sn(e,t),Jn(e))}function Fy(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Im(e,s)}function eb(e,t){var s=0;switch(e.tag){case 31:case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),Im(e,s)}function tb(e,t){return ge(e,t)}var zl=null,ar=null,uc=!1,Ll=!1,cc=!1,Ba=0;function Jn(e){e!==ar&&e.next===null&&(ar===null?zl=ar=e:ar=ar.next=e),Ll=!0,uc||(uc=!0,ab())}function ri(e,t){if(!cc&&Ll){cc=!0;do for(var s=!1,i=zl;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var h=0;else{var p=i.suspendedLanes,_=i.pingedLanes;h=(1<<31-dt(42|e)+1)-1,h&=c&~(p&~_),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,Qm(i,h))}else h=Ye,h=Ut(i,i===it?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(h&3)===0||Xt(i,h)||(s=!0,Qm(i,h));i=i.next}while(s);cc=!1}}function nb(){Vm()}function Vm(){Ll=uc=!1;var e=0;Ba!==0&&fb()&&(e=Ba);for(var t=le(),s=null,i=zl;i!==null;){var c=i.next,h=Km(i,t);h===0?(i.next=null,s===null?zl=c:s.next=c,c===null&&(ar=s)):(s=i,(e!==0||(h&3)!==0)&&(Ll=!0)),i=c}Rt!==0&&Rt!==5||ri(e),Ba!==0&&(Ba=0)}function Km(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var p=31-dt(h),_=1<<p,R=c[p];R===-1?((_&s)===0||(_&i)!==0)&&(c[p]=Jt(_,t)):R<=t&&(e.expiredLanes|=_),h&=~_}if(t=it,s=Ye,s=Ut(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,s===0||e===t&&(tt===2||tt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&pe(i),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Xt(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(i!==null&&pe(i),ea(s)){case 2:case 8:s=_e;break;case 32:s=je;break;case 268435456:s=Le;break;default:s=je}return i=Ym.bind(null,e),s=ge(s,i),e.callbackPriority=t,e.callbackNode=s,t}return i!==null&&i!==null&&pe(i),e.callbackPriority=2,e.callbackNode=null,2}function Ym(e,t){if(Rt!==0&&Rt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Ul()&&e.callbackNode!==s)return null;var i=Ye;return i=Ut(e,e===it?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(km(e,i,t),Km(e,le()),e.callbackNode!=null&&e.callbackNode===s?Ym.bind(null,e):null)}function Qm(e,t){if(Ul())return null;km(e,t,!0)}function ab(){gb(function(){(We&6)!==0?ge(ne,nb):Vm()})}function dc(){if(Ba===0){var e=Gs;e===0&&(e=Mt,Mt<<=1,(Mt&261888)===0&&(Mt=256)),Ba=e}return Ba}function Pm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ki(""+e)}function Xm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function sb(e,t,s,i,c){if(t==="submit"&&s&&s.stateNode===c){var h=Pm((c[Wt]||null).action),p=i.submitter;p&&(t=(t=p[Wt]||null)?Pm(t.formAction):p.getAttribute("formAction"),t!==null&&(h=t,p=null));var _=new Xi("action","action",null,i,c);e.push({event:_,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ba!==0){var R=p?Xm(c,p):new FormData(c);Ru(s,{pending:!0,data:R,method:c.method,action:h},null,R)}}else typeof h=="function"&&(_.preventDefault(),R=p?Xm(c,p):new FormData(c),Ru(s,{pending:!0,data:R,method:c.method,action:h},h,R))},currentTarget:c}]})}}for(var hc=0;hc<Po.length;hc++){var fc=Po[hc],rb=fc.toLowerCase(),ib=fc[0].toUpperCase()+fc.slice(1);Bn(rb,"on"+ib)}Bn(Eh,"onAnimationEnd"),Bn(Th,"onAnimationIteration"),Bn(kh,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(Sy,"onTransitionRun"),Bn(xy,"onTransitionStart"),Bn(jy,"onTransitionCancel"),Bn(Nh,"onTransitionEnd"),Ns("onMouseEnter",["mouseout","mouseover"]),Ns("onMouseLeave",["mouseout","mouseover"]),Ns("onPointerEnter",["pointerout","pointerover"]),Ns("onPointerLeave",["pointerout","pointerover"]),Wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ii));function Jm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],c=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var p=i.length-1;0<=p;p--){var _=i[p],R=_.instance,X=_.currentTarget;if(_=_.listener,R!==h&&c.isPropagationStopped())break e;h=_,c.currentTarget=X;try{h(c)}catch(ie){Wi(ie)}c.currentTarget=null,h=R}else for(p=0;p<i.length;p++){if(_=i[p],R=_.instance,X=_.currentTarget,_=_.listener,R!==h&&c.isPropagationStopped())break e;h=_,c.currentTarget=X;try{h(c)}catch(ie){Wi(ie)}c.currentTarget=null,h=R}}}}function Ve(e,t){var s=t[To];s===void 0&&(s=t[To]=new Set);var i=e+"__bubble";s.has(i)||(Zm(t,e,2,!1),s.add(i))}function mc(e,t,s){var i=0;t&&(i|=4),Zm(s,e,i,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function gc(e){if(!e[ql]){e[ql]=!0,Id.forEach(function(s){s!=="selectionchange"&&(lb.has(s)||mc(s,!1,e),mc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,mc("selectionchange",!1,t))}}function Zm(e,t,s,i){switch(Tg(t)){case 2:var c=Ub;break;case 8:c=zb;break;default:c=Ac}s=c.bind(null,t,s,e),c=void 0,!Uo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function vc(e,t,s,i,c){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var _=i.stateNode.containerInfo;if(_===c)break;if(p===4)for(p=i.return;p!==null;){var R=p.tag;if((R===3||R===4)&&p.stateNode.containerInfo===c)return;p=p.return}for(;_!==null;){if(p=Es(_),p===null)return;if(R=p.tag,R===5||R===6||R===26||R===27){i=h=p;continue e}_=_.parentNode}}i=i.return}th(function(){var X=h,ie=Do(s),ce=[];e:{var ee=Ch.get(e);if(ee!==void 0){var ae=Xi,we=e;switch(e){case"keypress":if(Qi(s)===0)break e;case"keydown":case"keyup":ae=ey;break;case"focusin":we="focus",ae=Bo;break;case"focusout":we="blur",ae=Bo;break;case"beforeblur":case"afterblur":ae=Bo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Gp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=ay;break;case Eh:case Th:case kh:ae=Kp;break;case Nh:ae=ry;break;case"scroll":case"scrollend":ae=$p;break;case"wheel":ae=ly;break;case"copy":case"cut":case"paste":ae=Qp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ih;break;case"toggle":case"beforetoggle":ae=uy}var Ne=(t&4)!==0,rt=!Ne&&(e==="scroll"||e==="scrollend"),q=Ne?ee!==null?ee+"Capture":null:ee;Ne=[];for(var U=X,Y;U!==null;){var ue=U;if(Y=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Y===null||q===null||(ue=Nr(U,q),ue!=null&&Ne.push(li(U,ue,Y))),rt)break;U=U.return}0<Ne.length&&(ee=new ae(ee,we,null,s,ie),ce.push({event:ee,listeners:Ne}))}}if((t&7)===0){e:{if(ee=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",ee&&s!==Oo&&(we=s.relatedTarget||s.fromElement)&&(Es(we)||we[js]))break e;if((ae||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(we=s.relatedTarget||s.toElement,ae=X,we=we?Es(we):null,we!==null&&(rt=d(we),Ne=we.tag,we!==rt||Ne!==5&&Ne!==27&&Ne!==6)&&(we=null)):(ae=null,we=X),ae!==we)){if(Ne=sh,ue="onMouseLeave",q="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=ih,ue="onPointerLeave",q="onPointerEnter",U="pointer"),rt=ae==null?ee:kr(ae),Y=we==null?ee:kr(we),ee=new Ne(ue,U+"leave",ae,s,ie),ee.target=rt,ee.relatedTarget=Y,ue=null,Es(ie)===X&&(Ne=new Ne(q,U+"enter",we,s,ie),Ne.target=Y,Ne.relatedTarget=rt,ue=Ne),rt=ue,ae&&we)t:{for(Ne=ob,q=ae,U=we,Y=0,ue=q;ue;ue=Ne(ue))Y++;ue=0;for(var Te=U;Te;Te=Ne(Te))ue++;for(;0<Y-ue;)q=Ne(q),Y--;for(;0<ue-Y;)U=Ne(U),ue--;for(;Y--;){if(q===U||U!==null&&q===U.alternate){Ne=q;break t}q=Ne(q),U=Ne(U)}Ne=null}else Ne=null;ae!==null&&Wm(ce,ee,ae,Ne,!1),we!==null&&rt!==null&&Wm(ce,rt,we,Ne,!0)}}e:{if(ee=X?kr(X):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var Je=mh;else if(hh(ee))if(gh)Je=by;else{Je=py;var Se=vy}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?X&&Ro(X.elementType)&&(Je=mh):Je=yy;if(Je&&(Je=Je(e,X))){fh(ce,Je,s,ie);break e}Se&&Se(e,ee,X),e==="focusout"&&X&&ee.type==="number"&&X.memoizedProps.value!=null&&Ao(ee,"number",ee.value)}switch(Se=X?kr(X):window,e){case"focusin":(hh(Se)||Se.contentEditable==="true")&&(Ms=Se,Ko=X,zr=null);break;case"focusout":zr=Ko=Ms=null;break;case"mousedown":Yo=!0;break;case"contextmenu":case"mouseup":case"dragend":Yo=!1,xh(ce,s,ie);break;case"selectionchange":if(wy)break;case"keydown":case"keyup":xh(ce,s,ie)}var Ge;if(Ho)e:{switch(e){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Ds?ch(e,s)&&(Qe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Qe="onCompositionStart");Qe&&(lh&&s.locale!=="ko"&&(Ds||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Ds&&(Ge=nh()):(xa=ie,zo="value"in xa?xa.value:xa.textContent,Ds=!0)),Se=Bl(X,Qe),0<Se.length&&(Qe=new rh(Qe,e,null,s,ie),ce.push({event:Qe,listeners:Se}),Ge?Qe.data=Ge:(Ge=dh(s),Ge!==null&&(Qe.data=Ge)))),(Ge=dy?hy(e,s):fy(e,s))&&(Qe=Bl(X,"onBeforeInput"),0<Qe.length&&(Se=new rh("onBeforeInput","beforeinput",null,s,ie),ce.push({event:Se,listeners:Qe}),Se.data=Ge)),sb(ce,e,X,s,ie)}Jm(ce,t)})}function li(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Bl(e,t){for(var s=t+"Capture",i=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Nr(e,s),c!=null&&i.unshift(li(e,c,h)),c=Nr(e,t),c!=null&&i.push(li(e,c,h))),e.tag===3)return i;e=e.return}return[]}function ob(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wm(e,t,s,i,c){for(var h=t._reactName,p=[];s!==null&&s!==i;){var _=s,R=_.alternate,X=_.stateNode;if(_=_.tag,R!==null&&R===i)break;_!==5&&_!==26&&_!==27||X===null||(R=X,c?(X=Nr(s,h),X!=null&&p.unshift(li(s,X,R))):c||(X=Nr(s,h),X!=null&&p.push(li(s,X,R)))),s=s.return}p.length!==0&&e.push({event:t,listeners:p})}var ub=/\r\n?/g,cb=/\u0000|\uFFFD/g;function Fm(e){return(typeof e=="string"?e:""+e).replace(ub,`
`).replace(cb,"")}function eg(e,t){return t=Fm(t),Fm(e)===t}function st(e,t,s,i,c,h){switch(s){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||As(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&As(e,""+i);break;case"className":Ii(e,"class",i);break;case"tabIndex":Ii(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ii(e,s,i);break;case"style":Fd(e,i,h);break;case"data":if(t!=="object"){Ii(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=Ki(""+i),e.setAttribute(s,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(t!=="input"&&st(e,t,"name",c.name,c,null),st(e,t,"formEncType",c.formEncType,c,null),st(e,t,"formMethod",c.formMethod,c,null),st(e,t,"formTarget",c.formTarget,c,null)):(st(e,t,"encType",c.encType,c,null),st(e,t,"method",c.method,c,null),st(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=Ki(""+i),e.setAttribute(s,i);break;case"onClick":i!=null&&(e.onclick=na);break;case"onScroll":i!=null&&Ve("scroll",e);break;case"onScrollEnd":i!=null&&Ve("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(s=i.__html,s!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}s=Ki(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""+i):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":i===!0?e.setAttribute(s,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,i):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(s,i):e.removeAttribute(s);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(s):e.setAttribute(s,i);break;case"popover":Ve("beforetoggle",e),Ve("toggle",e),Gi(e,"popover",i);break;case"xlinkActuate":ta(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ta(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ta(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ta(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ta(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ta(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ta(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ta(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ta(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Gi(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=qp.get(s)||s,Gi(e,s,i))}}function pc(e,t,s,i,c,h){switch(s){case"style":Fd(e,i,h);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(s=i.__html,s!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"children":typeof i=="string"?As(e,i):(typeof i=="number"||typeof i=="bigint")&&As(e,""+i);break;case"onScroll":i!=null&&Ve("scroll",e);break;case"onScrollEnd":i!=null&&Ve("scrollend",e);break;case"onClick":i!=null&&(e.onclick=na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),t=s.slice(2,c?s.length-7:void 0),h=e[Wt]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(t,h,c),typeof i=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,i,c);break e}s in e?e[s]=i:i===!0?e.setAttribute(s,""):Gi(e,s,i)}}}function It(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",e),Ve("load",e);var i=!1,c=!1,h;for(h in s)if(s.hasOwnProperty(h)){var p=s[h];if(p!=null)switch(h){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:st(e,t,h,p,s,null)}}c&&st(e,t,"srcSet",s.srcSet,s,null),i&&st(e,t,"src",s.src,s,null);return;case"input":Ve("invalid",e);var _=h=p=c=null,R=null,X=null;for(i in s)if(s.hasOwnProperty(i)){var ie=s[i];if(ie!=null)switch(i){case"name":c=ie;break;case"type":p=ie;break;case"checked":R=ie;break;case"defaultChecked":X=ie;break;case"value":h=ie;break;case"defaultValue":_=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(l(137,t));break;default:st(e,t,i,ie,s,null)}}Xd(e,h,_,R,X,p,c,!1);return;case"select":Ve("invalid",e),i=p=h=null;for(c in s)if(s.hasOwnProperty(c)&&(_=s[c],_!=null))switch(c){case"value":h=_;break;case"defaultValue":p=_;break;case"multiple":i=_;default:st(e,t,c,_,s,null)}t=h,s=p,e.multiple=!!i,t!=null?Cs(e,!!i,t,!1):s!=null&&Cs(e,!!i,s,!0);return;case"textarea":Ve("invalid",e),h=c=i=null;for(p in s)if(s.hasOwnProperty(p)&&(_=s[p],_!=null))switch(p){case"value":i=_;break;case"defaultValue":c=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:st(e,t,p,_,s,null)}Zd(e,i,c,h);return;case"option":for(R in s)s.hasOwnProperty(R)&&(i=s[R],i!=null)&&(R==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":st(e,t,R,i,s,null));return;case"dialog":Ve("beforetoggle",e),Ve("toggle",e),Ve("cancel",e),Ve("close",e);break;case"iframe":case"object":Ve("load",e);break;case"video":case"audio":for(i=0;i<ii.length;i++)Ve(ii[i],e);break;case"image":Ve("error",e),Ve("load",e);break;case"details":Ve("toggle",e);break;case"embed":case"source":case"link":Ve("error",e),Ve("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in s)if(s.hasOwnProperty(X)&&(i=s[X],i!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:st(e,t,X,i,s,null)}return;default:if(Ro(t)){for(ie in s)s.hasOwnProperty(ie)&&(i=s[ie],i!==void 0&&pc(e,t,ie,i,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(i=s[_],i!=null&&st(e,t,_,i,s,null))}function db(e,t,s,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,p=null,_=null,R=null,X=null,ie=null;for(ae in s){var ce=s[ae];if(s.hasOwnProperty(ae)&&ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":R=ce;default:i.hasOwnProperty(ae)||st(e,t,ae,null,i,ce)}}for(var ee in i){var ae=i[ee];if(ce=s[ee],i.hasOwnProperty(ee)&&(ae!=null||ce!=null))switch(ee){case"type":h=ae;break;case"name":c=ae;break;case"checked":X=ae;break;case"defaultChecked":ie=ae;break;case"value":p=ae;break;case"defaultValue":_=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(l(137,t));break;default:ae!==ce&&st(e,t,ee,ae,i,ce)}}Co(e,p,_,R,X,ie,h,c);return;case"select":ae=p=_=ee=null;for(h in s)if(R=s[h],s.hasOwnProperty(h)&&R!=null)switch(h){case"value":break;case"multiple":ae=R;default:i.hasOwnProperty(h)||st(e,t,h,null,i,R)}for(c in i)if(h=i[c],R=s[c],i.hasOwnProperty(c)&&(h!=null||R!=null))switch(c){case"value":ee=h;break;case"defaultValue":_=h;break;case"multiple":p=h;default:h!==R&&st(e,t,c,h,i,R)}t=_,s=p,i=ae,ee!=null?Cs(e,!!s,ee,!1):!!i!=!!s&&(t!=null?Cs(e,!!s,t,!0):Cs(e,!!s,s?[]:"",!1));return;case"textarea":ae=ee=null;for(_ in s)if(c=s[_],s.hasOwnProperty(_)&&c!=null&&!i.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:st(e,t,_,null,i,c)}for(p in i)if(c=i[p],h=s[p],i.hasOwnProperty(p)&&(c!=null||h!=null))switch(p){case"value":ee=c;break;case"defaultValue":ae=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==h&&st(e,t,p,c,i,h)}Jd(e,ee,ae);return;case"option":for(var we in s)ee=s[we],s.hasOwnProperty(we)&&ee!=null&&!i.hasOwnProperty(we)&&(we==="selected"?e.selected=!1:st(e,t,we,null,i,ee));for(R in i)ee=i[R],ae=s[R],i.hasOwnProperty(R)&&ee!==ae&&(ee!=null||ae!=null)&&(R==="selected"?e.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":st(e,t,R,ee,i,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in s)ee=s[Ne],s.hasOwnProperty(Ne)&&ee!=null&&!i.hasOwnProperty(Ne)&&st(e,t,Ne,null,i,ee);for(X in i)if(ee=i[X],ae=s[X],i.hasOwnProperty(X)&&ee!==ae&&(ee!=null||ae!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(l(137,t));break;default:st(e,t,X,ee,i,ae)}return;default:if(Ro(t)){for(var rt in s)ee=s[rt],s.hasOwnProperty(rt)&&ee!==void 0&&!i.hasOwnProperty(rt)&&pc(e,t,rt,void 0,i,ee);for(ie in i)ee=i[ie],ae=s[ie],!i.hasOwnProperty(ie)||ee===ae||ee===void 0&&ae===void 0||pc(e,t,ie,ee,i,ae);return}}for(var q in s)ee=s[q],s.hasOwnProperty(q)&&ee!=null&&!i.hasOwnProperty(q)&&st(e,t,q,null,i,ee);for(ce in i)ee=i[ce],ae=s[ce],!i.hasOwnProperty(ce)||ee===ae||ee==null&&ae==null||st(e,t,ce,ee,i,ae)}function tg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),i=0;i<s.length;i++){var c=s[i],h=c.transferSize,p=c.initiatorType,_=c.duration;if(h&&_&&tg(p)){for(p=0,_=c.responseEnd,i+=1;i<s.length;i++){var R=s[i],X=R.startTime;if(X>_)break;var ie=R.transferSize,ce=R.initiatorType;ie&&tg(ce)&&(R=R.responseEnd,p+=ie*(R<_?1:(_-X)/(R-X)))}if(--i,t+=8*(h+p)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yc=null,bc=null;function $l(e){return e.nodeType===9?e:e.ownerDocument}function ng(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ag(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function _c(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wc=null;function fb(){var e=window.event;return e&&e.type==="popstate"?e===wc?!1:(wc=e,!0):(wc=null,!1)}var sg=typeof setTimeout=="function"?setTimeout:void 0,mb=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,gb=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(e){return rg.resolve(null).then(e).catch(vb)}:sg;function vb(e){setTimeout(function(){throw e})}function $a(e){return e==="head"}function ig(e,t){var s=t,i=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(i===0){e.removeChild(c),lr(t);return}i--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")i++;else if(s==="html")oi(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,oi(s);for(var h=s.firstChild;h;){var p=h.nextSibling,_=h.nodeName;h[Tr]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=p}}else s==="body"&&oi(e.ownerDocument.body);s=c}while(s);lr(t)}function lg(e,t){var s=e;e=0;do{var i=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=i}while(s)}function Sc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Sc(s),ko(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function pb(e,t,s,i){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Tr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function yb(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Dn(e.nextSibling),e===null))return null;return e}function og(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function xc(e){return e.data==="$?"||e.data==="$~"}function jc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bb(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var i=function(){t(),s.removeEventListener("DOMContentLoaded",i)};s.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ec=null;function ug(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Dn(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function dg(e,t,s){switch(t=$l(s),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function oi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ko(e)}var Mn=new Map,hg=new Set;function Hl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ya=$.d;$.d={f:_b,r:wb,D:Sb,C:xb,L:jb,m:Eb,X:kb,S:Tb,M:Nb};function _b(){var e=ya.f(),t=Ol();return e||t}function wb(e){var t=Ts(e);t!==null&&t.tag===5&&t.type==="form"?Cf(t):ya.r(e)}var sr=typeof document>"u"?null:document;function fg(e,t,s){var i=sr;if(i&&typeof t=="string"&&t){var c=Tn(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),hg.has(c)||(hg.add(c),e={rel:e,crossOrigin:s,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),It(t,"link",e),zt(t),i.head.appendChild(t)))}}function Sb(e){ya.D(e),fg("dns-prefetch",e,null)}function xb(e,t){ya.C(e,t),fg("preconnect",e,t)}function jb(e,t,s){ya.L(e,t,s);var i=sr;if(i&&e&&t){var c='link[rel="preload"][as="'+Tn(t)+'"]';t==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Tn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Tn(s.imageSizes)+'"]')):c+='[href="'+Tn(e)+'"]';var h=c;switch(t){case"style":h=rr(e);break;case"script":h=ir(e)}Mn.has(h)||(e=w({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Mn.set(h,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(ui(h))||t==="script"&&i.querySelector(ci(h))||(t=i.createElement("link"),It(t,"link",e),zt(t),i.head.appendChild(t)))}}function Eb(e,t){ya.m(e,t);var s=sr;if(s&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Tn(i)+'"][href="'+Tn(e)+'"]',h=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ir(e)}if(!Mn.has(h)&&(e=w({rel:"modulepreload",href:e},t),Mn.set(h,e),s.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ci(h)))return}i=s.createElement("link"),It(i,"link",e),zt(i),s.head.appendChild(i)}}}function Tb(e,t,s){ya.S(e,t,s);var i=sr;if(i&&e){var c=ks(i).hoistableStyles,h=rr(e);t=t||"default";var p=c.get(h);if(!p){var _={loading:0,preload:null};if(p=i.querySelector(ui(h)))_.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Mn.get(h))&&Tc(e,s);var R=p=i.createElement("link");zt(R),It(R,"link",e),R._p=new Promise(function(X,ie){R.onload=X,R.onerror=ie}),R.addEventListener("load",function(){_.loading|=1}),R.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Gl(p,t,i)}p={type:"stylesheet",instance:p,count:1,state:_},c.set(h,p)}}}function kb(e,t){ya.X(e,t);var s=sr;if(s&&e){var i=ks(s).hoistableScripts,c=ir(e),h=i.get(c);h||(h=s.querySelector(ci(c)),h||(e=w({src:e,async:!0},t),(t=Mn.get(c))&&kc(e,t),h=s.createElement("script"),zt(h),It(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function Nb(e,t){ya.M(e,t);var s=sr;if(s&&e){var i=ks(s).hoistableScripts,c=ir(e),h=i.get(c);h||(h=s.querySelector(ci(c)),h||(e=w({src:e,async:!0,type:"module"},t),(t=Mn.get(c))&&kc(e,t),h=s.createElement("script"),zt(h),It(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},i.set(c,h))}}function mg(e,t,s,i){var c=(c=I.current)?Hl(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=rr(s.href),s=ks(c).hoistableStyles,i=s.get(t),i||(i={type:"style",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=rr(s.href);var h=ks(c).hoistableStyles,p=h.get(e);if(p||(c=c.ownerDocument||c,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,p),(h=c.querySelector(ui(e)))&&!h._p&&(p.instance=h,p.state.loading=5),Mn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Mn.set(e,s),h||Cb(c,e,s,p.state))),t&&i===null)throw Error(l(528,""));return p}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ir(s),s=ks(c).hoistableScripts,i=s.get(t),i||(i={type:"script",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function rr(e){return'href="'+Tn(e)+'"'}function ui(e){return'link[rel="stylesheet"]['+e+"]"}function gg(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Cb(e,t,s,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),It(t,"link",s),zt(t),e.head.appendChild(t))}function ir(e){return'[src="'+Tn(e)+'"]'}function ci(e){return"script[async]"+e}function vg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Tn(s.href)+'"]');if(i)return t.instance=i,zt(i),i;var c=w({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),zt(i),It(i,"style",c),Gl(i,s.precedence,e),t.instance=i;case"stylesheet":c=rr(s.href);var h=e.querySelector(ui(c));if(h)return t.state.loading|=4,t.instance=h,zt(h),h;i=gg(s),(c=Mn.get(c))&&Tc(i,c),h=(e.ownerDocument||e).createElement("link"),zt(h);var p=h;return p._p=new Promise(function(_,R){p.onload=_,p.onerror=R}),It(h,"link",i),t.state.loading|=4,Gl(h,s.precedence,e),t.instance=h;case"script":return h=ir(s.src),(c=e.querySelector(ci(h)))?(t.instance=c,zt(c),c):(i=s,(c=Mn.get(h))&&(i=w({},s),kc(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),zt(c),It(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Gl(i,s.precedence,e));return t.instance}function Gl(e,t,s){for(var i=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,h=c,p=0;p<i.length;p++){var _=i[p];if(_.dataset.precedence===t)h=_;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Tc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function kc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Il=null;function pg(e,t,s){if(Il===null){var i=new Map,c=Il=new Map;c.set(s,i)}else c=Il,i=c.get(s),i||(i=new Map,c.set(s,i));if(i.has(e))return i;for(i.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var h=s[c];if(!(h[Tr]||h[Bt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var p=h.getAttribute(t)||"";p=e+p;var _=i.get(p);_?_.push(h):i.set(p,[h])}}return i}function yg(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function Ab(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function bg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Rb(e,t,s,i){if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=rr(i.href),h=t.querySelector(ui(c));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Vl.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=h,zt(h);return}h=t.ownerDocument||t,i=gg(i),(c=Mn.get(c))&&Tc(i,c),h=h.createElement("link"),zt(h);var p=h;p._p=new Promise(function(_,R){p.onload=_,p.onerror=R}),It(h,"link",i),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Vl.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Nc=0;function Ob(e,t){return e.stylesheets&&e.count===0&&Yl(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var i=setTimeout(function(){if(e.stylesheets&&Yl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Nc===0&&(Nc=62500*hb());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Yl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Nc?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(c)}}:null}function Vl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Yl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,t.forEach(Db,e),Kl=null,Vl.call(e))}function Db(e,t){if(!(t.state.loading&4)){var s=Kl.get(e);if(s)var i=s.get(null);else{s=new Map,Kl.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var p=c[h];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(s.set(p.dataset.precedence,p),i=p)}i&&s.set(null,i)}c=t.instance,p=c.getAttribute("data-precedence"),h=s.get(p)||i,h===i&&s.set(null,c),s.set(p,c),this.count++,i=Vl.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var di={$$typeof:N,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Mb(e,t,s,i,c,h,p,_,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.hiddenUpdates=Zt(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function _g(e,t,s,i,c,h,p,_,R,X,ie,ce){return e=new Mb(e,t,s,p,R,X,ie,ce,_),t=1,h===!0&&(t|=24),h=cn(3,null,null,t),e.current=h,h.stateNode=e,t=lu(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:i,isDehydrated:s,cache:t},du(h),e}function wg(e){return e?(e=Ls,e):Ls}function Sg(e,t,s,i,c,h){c=wg(c),i.context===null?i.context=c:i.pendingContext=c,i=Ca(t),i.payload={element:s},h=h===void 0?null:h,h!==null&&(i.callback=h),s=Aa(e,i,t),s!==null&&(sn(s,e,t),Ir(s,e,t))}function xg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Cc(e,t){xg(e,t),(e=e.alternate)&&xg(e,t)}function jg(e){if(e.tag===13||e.tag===31){var t=ns(e,67108864);t!==null&&sn(t,e,67108864),Cc(e,67108864)}}function Eg(e){if(e.tag===13||e.tag===31){var t=gn();t=Fn(t);var s=ns(e,t);s!==null&&sn(s,e,t),Cc(e,t)}}var Ql=!0;function Ub(e,t,s,i){var c=M.T;M.T=null;var h=$.p;try{$.p=2,Ac(e,t,s,i)}finally{$.p=h,M.T=c}}function zb(e,t,s,i){var c=M.T;M.T=null;var h=$.p;try{$.p=8,Ac(e,t,s,i)}finally{$.p=h,M.T=c}}function Ac(e,t,s,i){if(Ql){var c=Rc(i);if(c===null)vc(e,t,i,Pl,s),kg(e,i);else if(qb(c,e,t,s,i))i.stopPropagation();else if(kg(e,i),t&4&&-1<Lb.indexOf(e)){for(;c!==null;){var h=Ts(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=mt(h.pendingLanes);if(p!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;p;){var R=1<<31-dt(p);_.entanglements[1]|=R,p&=~R}Jn(h),(We&6)===0&&(Al=le()+500,ri(0))}}break;case 31:case 13:_=ns(h,2),_!==null&&sn(_,h,2),Ol(),Cc(h,2)}if(h=Rc(i),h===null&&vc(e,t,i,Pl,s),h===c)break;c=h}c!==null&&i.stopPropagation()}else vc(e,t,i,null,s)}}function Rc(e){return e=Do(e),Oc(e)}var Pl=null;function Oc(e){if(Pl=null,e=Es(e),e!==null){var t=d(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Pl=e,null}function Tg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(be()){case ne:return 2;case _e:return 8;case je:case Ke:return 32;case Le:return 268435456;default:return 32}default:return 32}}var Dc=!1,Ha=null,Ga=null,Ia=null,hi=new Map,fi=new Map,Va=[],Lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kg(e,t){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":hi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(t.pointerId)}}function mi(e,t,s,i,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Ts(t),t!==null&&jg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function qb(e,t,s,i,c){switch(t){case"focusin":return Ha=mi(Ha,e,t,s,i,c),!0;case"dragenter":return Ga=mi(Ga,e,t,s,i,c),!0;case"mouseover":return Ia=mi(Ia,e,t,s,i,c),!0;case"pointerover":var h=c.pointerId;return hi.set(h,mi(hi.get(h)||null,e,t,s,i,c)),!0;case"gotpointercapture":return h=c.pointerId,fi.set(h,mi(fi.get(h)||null,e,t,s,i,c)),!0}return!1}function Ng(e){var t=Es(e.target);if(t!==null){var s=d(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Sa(e.priority,function(){Eg(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,Sa(e.priority,function(){Eg(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Rc(e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);Oo=i,s.target.dispatchEvent(i),Oo=null}else return t=Ts(s),t!==null&&jg(t),e.blockedOn=s,!1;t.shift()}return!0}function Cg(e,t,s){Xl(e)&&s.delete(t)}function Bb(){Dc=!1,Ha!==null&&Xl(Ha)&&(Ha=null),Ga!==null&&Xl(Ga)&&(Ga=null),Ia!==null&&Xl(Ia)&&(Ia=null),hi.forEach(Cg),fi.forEach(Cg)}function Jl(e,t){e.blockedOn===t&&(e.blockedOn=null,Dc||(Dc=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bb)))}var Zl=null;function Ag(e){Zl!==e&&(Zl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Zl===e&&(Zl=null);for(var t=0;t<e.length;t+=3){var s=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(Oc(i||s)===null)continue;break}var h=Ts(s);h!==null&&(e.splice(t,3),t-=3,Ru(h,{pending:!0,data:c,method:s.method,action:i},i,c))}}))}function lr(e){function t(R){return Jl(R,e)}Ha!==null&&Jl(Ha,e),Ga!==null&&Jl(Ga,e),Ia!==null&&Jl(Ia,e),hi.forEach(t),fi.forEach(t);for(var s=0;s<Va.length;s++){var i=Va[s];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Va.length&&(s=Va[0],s.blockedOn===null);)Ng(s),s.blockedOn===null&&Va.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(i=0;i<s.length;i+=3){var c=s[i],h=s[i+1],p=c[Wt]||null;if(typeof h=="function")p||Ag(s);else if(p){var _=null;if(h&&h.hasAttribute("formAction")){if(c=h,p=h[Wt]||null)_=p.formAction;else if(Oc(c)!==null)continue}else _=p.action;typeof _=="function"?s[i+1]=_:(s.splice(i,3),i-=3),Ag(s)}}}function Rg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(p){return c=p})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),i||setTimeout(s,20)}function s(){if(!i&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Mc(e){this._internalRoot=e}Wl.prototype.render=Mc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var s=t.current,i=gn();Sg(s,i,e,t,null,null)},Wl.prototype.unmount=Mc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sg(e.current,2,null,e,null,null),Ol(),t[js]=null}};function Wl(e){this._internalRoot=e}Wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=qn();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Va.length&&t!==0&&t<Va[s].priority;s++);Va.splice(s,0,e),s===0&&Ng(e)}};var Og=n.version;if(Og!=="19.2.3")throw Error(l(527,Og,"19.2.3"));$.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=v(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var $b={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{St=Fl.inject($b),vt=Fl}catch{}}return vi.createRoot=function(e,t){if(!o(e))throw Error(l(299));var s=!1,i="",c=Bf,h=$f,p=Hf;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=_g(e,1,!1,null,null,s,i,null,c,h,p,Rg),e[js]=t.current,gc(e),new Mc(t)},vi.hydrateRoot=function(e,t,s){if(!o(e))throw Error(l(299));var i=!1,c="",h=Bf,p=$f,_=Hf,R=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.formState!==void 0&&(R=s.formState)),t=_g(e,1,!0,t,s??null,i,c,R,h,p,_,Rg),t.context=wg(null),s=t.current,i=gn(),i=Fn(i),c=Ca(i),c.callback=null,Aa(s,c,i),s=i,t.current.lanes=s,Sn(t,s),Jn(t),e[js]=t.current,gc(e),new Wl(t)},vi.version="19.2.3",vi}var Gg;function Jb(){if(Gg)return Lc.exports;Gg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Lc.exports=Xb(),Lc.exports}var Zb=Jb();const Nt=30;function Sr(a){return a.toLocaleTimeString("da-DK",{hour:"2-digit",minute:"2-digit",hour12:!1})}function Hc(a){const n=Math.floor(a/60),r=a%60;return`${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function Wb(a){if(a.length===0)return new Date;let n=null;for(const r of a){if(!r.startTime||r.isPaused)continue;const l=new Date(r.startTime.getTime()+r.durationMinutes*60*1e3);(!n||l>n)&&(n=l)}return n||new Date}function Un(a,n,r=Nt){if(a.length===0&&n.length===0)return[];const l=[];let o=Wb(a);return n.forEach((d,f)=>{l.push(new Date(o)),o=new Date(o.getTime()+r*60*1e3)}),l}function Zn(a){if(!a.startTime)return a.durationMinutes*60;if(a.isPaused&&a.remainingSecondsWhenPaused!==void 0)return a.remainingSecondsWhenPaused;const n=a.startTime.getTime()+a.durationMinutes*60*1e3,r=Date.now();return Math.max(0,Math.floor((n-r)/1e3))}function bo(a,n){var r={};for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&n.indexOf(l)<0&&(r[l]=a[l]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(a);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(a,l[o])&&(r[l[o]]=a[l[o]]);return r}function Fb(a,n,r,l){function o(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function m(b){try{v(l.next(b))}catch(w){f(w)}}function g(b){try{v(l.throw(b))}catch(w){f(w)}}function v(b){b.done?d(b.value):o(b.value).then(m,g)}v((l=l.apply(a,n||[])).next())})}const e_=a=>a?(...n)=>a(...n):(...n)=>fetch(...n);class Ed extends Error{constructor(n,r="FunctionsError",l){super(n),this.name=r,this.context=l}}class t_ extends Ed{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Ig extends Ed{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Vg extends Ed{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var id;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(id||(id={}));class n_{constructor(n,{headers:r={},customFetch:l,region:o=id.Any}={}){this.url=n,this.headers=r,this.region=o,this.fetch=e_(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Fb(this,arguments,void 0,function*(r,l={}){var o;let d,f;try{const{headers:m,method:g,body:v,signal:b,timeout:w}=l;let S={},{region:x}=l;x||(x=this.region);const E=new URL(`${this.url}/${r}`);x&&x!=="any"&&(S["x-region"]=x,E.searchParams.set("forceFunctionRegion",x));let k;v&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",k=v):typeof v=="string"?(S["Content-Type"]="text/plain",k=v):typeof FormData<"u"&&v instanceof FormData?k=v:(S["Content-Type"]="application/json",k=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?k=JSON.stringify(v):k=v;let C=b;w&&(f=new AbortController,d=setTimeout(()=>f.abort(),w),b?(C=f.signal,b.addEventListener("abort",()=>f.abort())):C=f.signal);const A=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),m),body:k,signal:C}).catch(W=>{throw new t_(W)}),G=A.headers.get("x-relay-error");if(G&&G==="true")throw new Ig(A);if(!A.ok)throw new Vg(A);let N=((o=A.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),Q;return N==="application/json"?Q=yield A.json():N==="application/octet-stream"||N==="application/pdf"?Q=yield A.blob():N==="text/event-stream"?Q=A:N==="multipart/form-data"?Q=yield A.formData():Q=yield A.text(),{data:Q,error:null,response:A}}catch(m){return{data:null,error:m,response:m instanceof Vg||m instanceof Ig?m.context:void 0}}finally{d&&clearTimeout(d)}})}}var a_=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},s_=class{constructor(a){var n,r;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(n=a.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=a.signal,this.isMaybeSingle=(r=a.isMaybeSingle)!==null&&r!==void 0?r:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,n){return this.headers=new Headers(this.headers),this.headers.set(a,n),this}then(a,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,m=null,g=null,v=d.status,b=d.statusText;if(d.ok){var w,S;if(r.method!=="HEAD"){var x;const A=await d.text();A===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?m=A:m=JSON.parse(A))}const k=(w=r.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),C=(S=d.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");k&&C&&C.length>1&&(g=parseInt(C[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,v=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var E;const k=await d.text();try{f=JSON.parse(k),Array.isArray(f)&&d.status===404&&(m=[],f=null,v=200,b="OK")}catch{d.status===404&&k===""?(v=204,b="No Content"):f={message:k}}if(f&&r.isMaybeSingle&&(!(f==null||(E=f.details)===null||E===void 0)&&E.includes("0 rows"))&&(f=null,v=200,b="OK"),f&&r.shouldThrowOnError)throw new a_(f)}return{error:f,data:m,count:g,status:v,statusText:b}});return this.shouldThrowOnError||(o=o.catch(d=>{var f;let m="";const g=d?.cause;if(g){var v,b,w,S;const E=(v=g?.message)!==null&&v!==void 0?v:"",k=(b=g?.code)!==null&&b!==void 0?b:"";m=`${(w=d?.name)!==null&&w!==void 0?w:"FetchError"}: ${d?.message}`,m+=`

Caused by: ${(S=g?.name)!==null&&S!==void 0?S:"Error"}: ${E}`,k&&(m+=` (${k})`),g?.stack&&(m+=`
${g.stack}`)}else{var x;m=(x=d?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,n)}returns(){return this}overrideTypes(){return this}},r_=class extends s_{select(a){let n=!1;const r=(a??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:n=!0,nullsFirst:r,foreignTable:l,referencedTable:o=l}={}){const d=o?`${o}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${a}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:n,referencedTable:r=n}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,n,{foreignTable:r,referencedTable:l=r}={}){const o=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${a}`),this.url.searchParams.set(d,`${n-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:n=!1,settings:r=!1,buffers:l=!1,wal:o=!1,format:d="text"}={}){var f;const m=[a?"analyze":null,n?"verbose":null,r?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const Kg=new RegExp("[,()]");var mr=class extends r_{eq(a,n){return this.url.searchParams.append(a,`eq.${n}`),this}neq(a,n){return this.url.searchParams.append(a,`neq.${n}`),this}gt(a,n){return this.url.searchParams.append(a,`gt.${n}`),this}gte(a,n){return this.url.searchParams.append(a,`gte.${n}`),this}lt(a,n){return this.url.searchParams.append(a,`lt.${n}`),this}lte(a,n){return this.url.searchParams.append(a,`lte.${n}`),this}like(a,n){return this.url.searchParams.append(a,`like.${n}`),this}likeAllOf(a,n){return this.url.searchParams.append(a,`like(all).{${n.join(",")}}`),this}likeAnyOf(a,n){return this.url.searchParams.append(a,`like(any).{${n.join(",")}}`),this}ilike(a,n){return this.url.searchParams.append(a,`ilike.${n}`),this}ilikeAllOf(a,n){return this.url.searchParams.append(a,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(a,n){return this.url.searchParams.append(a,`ilike(any).{${n.join(",")}}`),this}regexMatch(a,n){return this.url.searchParams.append(a,`match.${n}`),this}regexIMatch(a,n){return this.url.searchParams.append(a,`imatch.${n}`),this}is(a,n){return this.url.searchParams.append(a,`is.${n}`),this}isDistinct(a,n){return this.url.searchParams.append(a,`isdistinct.${n}`),this}in(a,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&Kg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${r})`),this}notIn(a,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&Kg.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`not.in.(${r})`),this}contains(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cs.{${n.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(n)}`),this}containedBy(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cd.{${n.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(n)}`),this}rangeGt(a,n){return this.url.searchParams.append(a,`sr.${n}`),this}rangeGte(a,n){return this.url.searchParams.append(a,`nxl.${n}`),this}rangeLt(a,n){return this.url.searchParams.append(a,`sl.${n}`),this}rangeLte(a,n){return this.url.searchParams.append(a,`nxr.${n}`),this}rangeAdjacent(a,n){return this.url.searchParams.append(a,`adj.${n}`),this}overlaps(a,n){return typeof n=="string"?this.url.searchParams.append(a,`ov.${n}`):this.url.searchParams.append(a,`ov.{${n.join(",")}}`),this}textSearch(a,n,{config:r,type:l}={}){let o="";l==="plain"?o="pl":l==="phrase"?o="ph":l==="websearch"&&(o="w");const d=r===void 0?"":`(${r})`;return this.url.searchParams.append(a,`${o}fts${d}.${n}`),this}match(a){return Object.entries(a).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(a,n,r){return this.url.searchParams.append(a,`not.${n}.${r}`),this}or(a,{foreignTable:n,referencedTable:r=n}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,n,r){return this.url.searchParams.append(a,`${n}.${r}`),this}},i_=class{constructor(a,{headers:n={},schema:r,fetch:l}){this.url=a,this.headers=new Headers(n),this.schema=r,this.fetch=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,n){const{head:r=!1,count:l}=n??{},o=r?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(v=>/\s/.test(v)&&!d?"":(v==='"'&&(d=!d),v)).join(""),{url:m,headers:g}=this.cloneRequestState();return m.searchParams.set("select",f),l&&g.append("Prefer",`count=${l}`),new mr({method:o,url:m,headers:g,schema:this.schema,fetch:this.fetch})}insert(a,{count:n,defaultToNull:r=!0}={}){var l;const o="POST",{url:d,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(m.length>0){const g=[...new Set(m)].map(v=>`"${v}"`);d.searchParams.set("columns",g.join(","))}}return new mr({method:o,url:d,headers:f,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:n,ignoreDuplicates:r=!1,count:l,defaultToNull:o=!0}={}){var d;const f="POST",{url:m,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&m.searchParams.set("on_conflict",n),l&&g.append("Prefer",`count=${l}`),o||g.append("Prefer","missing=default"),Array.isArray(a)){const v=a.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(v.length>0){const b=[...new Set(v)].map(w=>`"${w}"`);m.searchParams.set("columns",b.join(","))}}return new mr({method:f,url:m,headers:g,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:n}={}){var r;const l="PATCH",{url:o,headers:d}=this.cloneRequestState();return n&&d.append("Prefer",`count=${n}`),new mr({method:l,url:o,headers:d,schema:this.schema,body:a,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:a}={}){var n;const r="DELETE",{url:l,headers:o}=this.cloneRequestState();return a&&o.append("Prefer",`count=${a}`),new mr({method:r,url:l,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},l_=class Mv{constructor(n,{headers:r={},schema:l,fetch:o}={}){this.url=n,this.headers=new Headers(r),this.schemaName=l,this.fetch=o}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new i_(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new Mv(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:l=!1,get:o=!1,count:d}={}){var f;let m;const g=new URL(`${this.url}/rpc/${n}`);let v;const b=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(b)),w=l&&Object.values(r).some(b);w?(m="POST",v=r):l||o?(m=l?"HEAD":"GET",Object.entries(r).filter(([x,E])=>E!==void 0).map(([x,E])=>[x,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([x,E])=>{g.searchParams.append(x,E)})):(m="POST",v=r);const S=new Headers(this.headers);return w?S.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&S.set("Prefer",`count=${d}`),new mr({method:m,url:g,headers:S,schema:this.schemaName,body:v,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class o_{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const o=l.node,d=parseInt(o.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const l=this.getWebSocketConstructor();return new l(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const u_="2.90.1",c_=`realtime-js/${u_}`,Uv="1.0.0",d_="2.0.0",Yg=Uv,ld=1e4,h_=1e3,f_=100;var Qa;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Qa||(Qa={}));var Ot;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(Ot||(Ot={}));var Vn;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(Vn||(Vn={}));var od;(function(a){a.websocket="websocket"})(od||(od={}));var bs;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(bs||(bs={}));class m_{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,l;const o=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var r,l;const o=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,l){var o,d;const f=n.topic,m=(o=n.ref)!==null&&o!==void 0?o:"",g=(d=n.join_ref)!==null&&d!==void 0?d:"",v=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+m.length+f.length+v.length+w.length,x=new ArrayBuffer(this.HEADER_LENGTH+S);let E=new DataView(x),k=0;E.setUint8(k++,this.KINDS.userBroadcastPush),E.setUint8(k++,g.length),E.setUint8(k++,m.length),E.setUint8(k++,f.length),E.setUint8(k++,v.length),E.setUint8(k++,w.length),E.setUint8(k++,r),Array.from(g,A=>E.setUint8(k++,A.charCodeAt(0))),Array.from(m,A=>E.setUint8(k++,A.charCodeAt(0))),Array.from(f,A=>E.setUint8(k++,A.charCodeAt(0))),Array.from(v,A=>E.setUint8(k++,A.charCodeAt(0))),Array.from(w,A=>E.setUint8(k++,A.charCodeAt(0)));var C=new Uint8Array(x.byteLength+l.byteLength);return C.set(new Uint8Array(x),0),C.set(new Uint8Array(l),x.byteLength),C.buffer}decode(n,r){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return r(l)}if(typeof n=="string"){const l=JSON.parse(n),[o,d,f,m,g]=l;return r({join_ref:o,ref:d,topic:f,event:m,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),l=r.getUint8(0),o=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,o)}_decodeUserBroadcast(n,r,l){const o=r.getUint8(1),d=r.getUint8(2),f=r.getUint8(3),m=r.getUint8(4);let g=this.HEADER_LENGTH+4;const v=l.decode(n.slice(g,g+o));g=g+o;const b=l.decode(n.slice(g,g+d));g=g+d;const w=l.decode(n.slice(g,g+f));g=g+f;const S=n.slice(g,n.byteLength),x=m===this.JSON_ENCODING?JSON.parse(l.decode(S)):S,E={type:this.BROADCAST_EVENT,event:b,payload:x};return f>0&&(E.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([l])=>r.includes(l)))}}class zv{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var lt;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(lt||(lt={}));const Qg=(a,n,r={})=>{var l;const o=(l=r.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=g_(f,a,n,o),d),{}):{}},g_=(a,n,r,l)=>{const o=n.find(m=>m.name===a),d=o?.type,f=r[a];return d&&!l.includes(d)?Lv(d,f):ud(f)},Lv=(a,n)=>{if(a.charAt(0)==="_"){const r=a.slice(1,a.length);return b_(n,r)}switch(a){case lt.bool:return v_(n);case lt.float4:case lt.float8:case lt.int2:case lt.int4:case lt.int8:case lt.numeric:case lt.oid:return p_(n);case lt.json:case lt.jsonb:return y_(n);case lt.timestamp:return __(n);case lt.abstime:case lt.date:case lt.daterange:case lt.int4range:case lt.int8range:case lt.money:case lt.reltime:case lt.text:case lt.time:case lt.timestamptz:case lt.timetz:case lt.tsrange:case lt.tstzrange:return ud(n);default:return ud(n)}},ud=a=>a,v_=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},p_=a=>{if(typeof a=="string"){const n=parseFloat(a);if(!Number.isNaN(n))return n}return a},y_=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},b_=(a,n)=>{if(typeof a!="string")return a;const r=a.length-1,l=a[r];if(a[0]==="{"&&l==="}"){let d;const f=a.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>Lv(n,m))}return a},__=a=>typeof a=="string"?a.replace(" ","T"):a,qv=a=>{const n=new URL(a);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Gc{constructor(n,r,l={},o=ld){this.channel=n,this.event=r,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var l;return this._hasReceived(n)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Pg;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Pg||(Pg={}));class wi{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wi.syncState(this.state,o,d,f),this.pendingDiffs.forEach(g=>{this.state=wi.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},o=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=wi.syncDiff(this.state,o,d,f),m())}),this.onJoin((o,d,f)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:d,newPresences:f})}),this.onLeave((o,d,f)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,l,o){const d=this.cloneDeep(n),f=this.transformState(r),m={},g={};return this.map(d,(v,b)=>{f[v]||(g[v]=b)}),this.map(f,(v,b)=>{const w=d[v];if(w){const S=b.map(C=>C.presence_ref),x=w.map(C=>C.presence_ref),E=b.filter(C=>x.indexOf(C.presence_ref)<0),k=w.filter(C=>S.indexOf(C.presence_ref)<0);E.length>0&&(m[v]=E),k.length>0&&(g[v]=k)}else m[v]=b}),this.syncDiff(d,{joins:m,leaves:g},l,o)}static syncDiff(n,r,l,o){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(d,(m,g)=>{var v;const b=(v=n[m])!==null&&v!==void 0?v:[];if(n[m]=this.cloneDeep(g),b.length>0){const w=n[m].map(x=>x.presence_ref),S=b.filter(x=>w.indexOf(x.presence_ref)<0);n[m].unshift(...S)}l(m,b,g)}),this.map(f,(m,g)=>{let v=n[m];if(!v)return;const b=g.map(w=>w.presence_ref);v=v.filter(w=>b.indexOf(w.presence_ref)<0),n[m]=v,o(m,v,g),v.length===0&&delete n[m]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(l=>r(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,l)=>{const o=n[l];return"metas"in o?r[l]=o.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[l]=o,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xg;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Xg||(Xg={}));var Si;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Si||(Si={}));var ba;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(ba||(ba={}));class yr{constructor(n,r={config:{}},l){var o,d;if(this.topic=n,this.params=r,this.socket=l,this.bindings={},this.state=Ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gc(this,Vn.join,this.params,this.timeout),this.rejoinTimer=new zv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ot.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vn.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new wi(this),this.broadcastEndpointURL=qv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var l,o,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Ot.closed){const{config:{broadcast:f,presence:m,private:g}}=this.params,v=(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(x=>x.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[Si.PRESENCE]&&this.bindings[Si.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},S={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>n?.(ba.CHANNEL_ERROR,x)),this._onClose(()=>n?.(ba.CLOSED)),this.updateJoinPayload(Object.assign({config:S},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){n?.(ba.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,C=(E=k?.length)!==null&&E!==void 0?E:0,A=[];for(let G=0;G<C;G++){const N=k[G],{filter:{event:Q,schema:W,table:K,filter:T}}=N,z=x&&x[G];if(z&&z.event===Q&&yr.isFilterValueEqual(z.schema,W)&&yr.isFilterValueEqual(z.table,K)&&yr.isFilterValueEqual(z.filter,T))A.push(Object.assign(Object.assign({},N),{id:z.id}));else{this.unsubscribe(),this.state=Ot.errored,n?.(ba.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,n&&n(ba.SUBSCRIBED);return}}).receive("error",x=>{this.state=Ot.errored,n?.(ba.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{n?.(ba.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,l){return this.state===Ot.joined&&n===Si.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,l)}async httpSend(n,r,l={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(o=l.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const v=await m.json();g=v.error||v.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var l,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=v.body)===null||o===void 0?void 0:o.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,g;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),v.receive("ok",()=>d("ok")),v.receive("error",()=>d("error")),v.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ot.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(o=>{l=new Gc(this,Vn.leave,{},n),l.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ot.closed,this.bindings={}}async _fetchWithTimeout(n,r,l){const o=new AbortController,d=setTimeout(()=>o.abort(),l),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(d),f}_push(n,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Gc(this,n,r,l);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>f_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,l){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,l){var o,d;const f=n.toLocaleLowerCase(),{close:m,error:g,leave:v,join:b}=Vn;if(l&&[m,g,v,b].indexOf(f)>=0&&l!==this._joinRef())return;let S=this._onMessage(f,r,l);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var E,k,C;return((E=x.filter)===null||E===void 0?void 0:E.event)==="*"||((C=(k=x.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===f}).map(x=>x.callback(S,l)):(d=this.bindings[f])===null||d===void 0||d.filter(x=>{var E,k,C,A,G,N,Q,W;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in x){const K=x.id,T=(E=x.filter)===null||E===void 0?void 0:E.event;return K&&((k=r.ids)===null||k===void 0?void 0:k.includes(K))&&(T==="*"||T?.toLocaleLowerCase()===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))&&(!(!((A=x.filter)===null||A===void 0)&&A.table)||x.filter.table===((G=r.data)===null||G===void 0?void 0:G.table))}else{const K=(Q=(N=x?.filter)===null||N===void 0?void 0:N.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase();return K==="*"||K===((W=r?.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===f}).map(x=>{if(typeof S=="object"&&"ids"in S){const E=S.data,{schema:k,table:C,commit_timestamp:A,type:G,errors:N}=E;S=Object.assign(Object.assign({},{schema:k,table:C,commit_timestamp:A,eventType:G,new:{},old:{},errors:N}),this._getPayloadRecords(E))}x.callback(S,l)})}_isClosed(){return this.state===Ot.closed}_isJoined(){return this.state===Ot.joined}_isJoining(){return this.state===Ot.joining}_isLeaving(){return this.state===Ot.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,l){const o=n.toLocaleLowerCase(),d={type:o,filter:r,callback:l};return this.bindings[o]?this.bindings[o].push(d):this.bindings[o]=[d],this}_off(n,r){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(o=>{var d;return!(((d=o.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===l&&yr.isEqual(o.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const l in n)if(n[l]!==r[l])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Vn.close,{},n)}_onError(n){this._on(Vn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ot.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Qg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Qg(n.columns,n.old_record)),r}}const Ic=()=>{},eo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},w_=[1e3,2e3,5e3,1e4],S_=1e4,x_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class j_{constructor(n,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ld,this.transport=null,this.heartbeatIntervalMs=eo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ic,this.ref=0,this.reconnectTimer=null,this.vsn=Yg,this.logger=Ic,this.conn=null,this.sendBuffer=[],this.serializer=new m_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...d)=>o(...d):(...d)=>fetch(...d),!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${od.websocket}`,this.httpEndpoint=qv(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=o_.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,l){this.logger(n,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Qa.connecting:return bs.Connecting;case Qa.open:return bs.Open;case Qa.closing:return bs.Closing;default:return bs.Closed}}isConnected(){return this.connectionState()===bs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const l=`realtime:${n}`,o=this.getChannels().find(d=>d.topic===l);if(o)return o;{const d=new yr(`realtime:${n}`,r,this);return this.channels.push(d),d}}push(n){const{topic:r,event:l,payload:o,ref:d}=n,f=()=>{this.encode(n,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${r} ${l} (${d})`,o),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(h_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},eo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",v)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:o,payload:d,ref:f}=r,m=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${l} ${o} ${m}`.trim(),d),this.channels.filter(v=>v._isMember(l)).forEach(v=>v._trigger(o,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Qa.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qa.open||this.conn.readyState===Qa.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Vn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const l=n.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${n}${l}${o}`}_workerObjectUrl(n){let r;if(n)r=n;else{const l=new Blob([x_],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,l=!1;if(n)r=n,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const d={access_token:r,version:c_};r&&o.updateJoinPayload(d),o.joinedOnce&&o._isJoined()&&o._push(Vn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(r)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new zv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},eo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,l,o,d,f,m,g,v,b,w,S,x;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=n?.timeout)!==null&&l!==void 0?l:ld,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:eo.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:Ic,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:Yg,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=n?.reconnectAfterMs)!==null&&v!==void 0?v:(E=>w_[E-1]||S_),this.vsn){case Uv:this.encode=(b=n?.encode)!==null&&b!==void 0?b:((E,k)=>k(JSON.stringify(E))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((E,k)=>k(JSON.parse(E)));break;case d_:this.encode=(S=n?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Ni=class extends Error{constructor(a,n){super(a),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function E_(a,n,r){const l=new URL(n,a);if(r)for(const[o,d]of Object.entries(r))d!==void 0&&l.searchParams.set(o,d);return l.toString()}async function T_(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function k_(a){const n=a.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:o,body:d,headers:f}){const m=E_(a.baseUrl,l,o),g=await T_(a.auth),v=await n(m,{method:r,headers:{...d?{"Content-Type":"application/json"}:{},...g,...f},body:d?JSON.stringify(d):void 0}),b=await v.text(),w=(v.headers.get("content-type")||"").includes("application/json"),S=w&&b?JSON.parse(b):b;if(!v.ok){const x=w?S:void 0,E=x?.error;throw new Ni(E?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:E?.type,icebergCode:E?.code,details:x})}return{status:v.status,headers:v.headers,data:S}}}}function to(a){return a.join("")}var N_=class{constructor(a,n=""){this.client=a,this.prefix=n}async listNamespaces(a){const n=a?{parent:to(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(a,n){const r={namespace:a.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${to(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${to(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${to(a.namespace)}`}),!0}catch(n){if(n instanceof Ni&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(a,n){try{return await this.createNamespace(a,n)}catch(r){if(r instanceof Ni&&r.status===409)return;throw r}}};function or(a){return a.join("")}var C_=class{constructor(a,n="",r){this.client=a,this.prefix=n,this.accessDelegation=r}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${or(a.namespace)}/tables`})).data.identifiers}async createTable(a,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${or(a.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(a,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${or(a.namespace)}/tables/${a.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(a,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${or(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${or(a.namespace)}/tables/${a.name}`,headers:n})).data.metadata}async tableExists(a){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${or(a.namespace)}/tables/${a.name}`,headers:n}),!0}catch(r){if(r instanceof Ni&&r.status===404)return!1;throw r}}async createTableIfNotExists(a,n){try{return await this.createTable(a,n)}catch(r){if(r instanceof Ni&&r.status===409)return await this.loadTable({namespace:a.namespace,name:n.name});throw r}}},A_=class{constructor(a){let n="v1";a.catalogName&&(n+=`/${a.catalogName}`);const r=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=k_({baseUrl:r,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new N_(this.client,n),this.tableOps=new C_(this.client,n,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,n){return this.namespaceOps.createNamespace(a,n)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,n){return this.tableOps.createTable(a,n)}async updateTable(a,n){return this.tableOps.updateTable(a,n)}async dropTable(a,n){await this.tableOps.dropTable(a,n)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,n){return this.namespaceOps.createNamespaceIfNotExists(a,n)}async createTableIfNotExists(a,n){return this.tableOps.createTableIfNotExists(a,n)}},_o=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function gt(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var R_=class extends _o{constructor(a,n,r){super(a),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},cd=class extends _o{constructor(a,n){super(a),this.name="StorageUnknownError",this.originalError=n}};const Td=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),O_=()=>Response,dd=a=>{if(Array.isArray(a))return a.map(r=>dd(r));if(typeof a=="function"||a!==Object(a))return a;const n={};return Object.entries(a).forEach(([r,l])=>{const o=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[o]=dd(l)}),n},D_=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},M_=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function Ci(a){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ci(a)}function U_(a,n){if(Ci(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var l=r.call(a,n);if(Ci(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function z_(a){var n=U_(a,"string");return Ci(n)=="symbol"?n:n+""}function L_(a,n,r){return(n=z_(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function Jg(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);n&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),r.push.apply(r,l)}return r}function Ae(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Jg(Object(r),!0).forEach(function(l){L_(a,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Jg(Object(r)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(r,l))})}return a}const Vc=a=>{var n;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(n=a.error)===null||n===void 0?void 0:n.message)||JSON.stringify(a)},q_=async(a,n,r)=>{a instanceof await O_()&&!r?.noResolveJson?a.json().then(l=>{const o=a.status||500,d=l?.statusCode||o+"";n(new R_(Vc(l),o,d))}).catch(l=>{n(new cd(Vc(l),l))}):n(new cd(Vc(a),a))},B_=(a,n,r,l)=>{const o={method:a,headers:n?.headers||{}};return a==="GET"||!l?o:(D_(l)?(o.headers=Ae({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(l)):o.body=l,n?.duplex&&(o.duplex=n.duplex),Ae(Ae({},o),r))};async function qi(a,n,r,l,o,d){return new Promise((f,m)=>{a(r,B_(n,l,o,d)).then(g=>{if(!g.ok)throw g;return l?.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>q_(g,m,l))})}async function Ai(a,n,r,l){return qi(a,"GET",n,r,l)}async function In(a,n,r,l,o){return qi(a,"POST",n,l,o,r)}async function hd(a,n,r,l,o){return qi(a,"PUT",n,l,o,r)}async function $_(a,n,r,l){return qi(a,"HEAD",n,Ae(Ae({},r),{},{noResolveJson:!0}),l)}async function kd(a,n,r,l,o){return qi(a,"DELETE",n,l,o,r)}var H_=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n}then(a,n){return this.execute().then(a,n)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}}};let Bv;Bv=Symbol.toStringTag;var G_=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n,this[Bv]="BlobDownloadBuilder",this.promise=null}asStream(){return new H_(this.downloadFn,this.shouldThrowOnError)}then(a,n){return this.getPromise().then(a,n)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}}};const I_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var V_=class{constructor(a,n={},r,l){this.shouldThrowOnError=!1,this.url=a,this.headers=n,this.bucketId=r,this.fetch=Td(l)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,n,r,l){var o=this;try{let d;const f=Ae(Ae({},Zg),l);let m=Ae(Ae({},o.headers),a==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",o.encodeMetadata(g)),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),g&&!d.has("metadata")&&d.append("metadata",o.encodeMetadata(g))):(d=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,g&&(m["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),l?.headers&&(m=Ae(Ae({},m),l.headers));const v=o._removeEmptyFolders(n),b=o._getFinalPath(v),w=await(a=="PUT"?hd:In)(o.fetch,`${o.url}/object/${b}`,d,Ae({headers:m},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:v,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(gt(d))return{data:null,error:d};throw d}}async upload(a,n,r){return this.uploadOrUpdate("POST",a,n,r)}async uploadToSignedUrl(a,n,r,l){var o=this;const d=o._removeEmptyFolders(a),f=o._getFinalPath(d),m=new URL(o.url+`/object/upload/sign/${f}`);m.searchParams.set("token",n);try{let g;const v=Ae({upsert:Zg.upsert},l),b=Ae(Ae({},o.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",v.cacheControl)):(g=r,b["cache-control"]=`max-age=${v.cacheControl}`,b["content-type"]=v.contentType),{data:{path:d,fullPath:(await hd(o.fetch,m.toString(),g,{headers:b})).Key},error:null}}catch(g){if(o.shouldThrowOnError)throw g;if(gt(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(a,n){var r=this;try{let l=r._getFinalPath(a);const o=Ae({},r.headers);n?.upsert&&(o["x-upsert"]="true");const d=await In(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:o}),f=new URL(r.url+d.url),m=f.searchParams.get("token");if(!m)throw new _o("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:m},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}}async update(a,n,r){return this.uploadOrUpdate("PUT",a,n,r)}async move(a,n,r){var l=this;try{return{data:await In(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:a,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers}),error:null}}catch(o){if(l.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async copy(a,n,r){var l=this;try{return{data:{path:(await In(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:a,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers})).Key},error:null}}catch(o){if(l.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async createSignedUrl(a,n,r){var l=this;try{let o=l._getFinalPath(a),d=await In(l.fetch,`${l.url}/object/sign/${o}`,Ae({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:l.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return d={signedUrl:encodeURI(`${l.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(o){if(l.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async createSignedUrls(a,n,r){var l=this;try{const o=await In(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:n,paths:a},{headers:l.headers}),d=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(f=>Ae(Ae({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${d}`):null})),error:null}}catch(o){if(l.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}download(a,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),o=l?`?${l}`:"",d=this._getFinalPath(a),f=()=>Ai(this.fetch,`${this.url}/${r}/${d}${o}`,{headers:this.headers,noResolveJson:!0});return new G_(f,this.shouldThrowOnError)}async info(a){var n=this;const r=n._getFinalPath(a);try{return{data:dd(await Ai(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}}async exists(a){var n=this;const r=n._getFinalPath(a);try{return await $_(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(gt(l)&&l instanceof cd){const o=l.originalError;if([400,404].includes(o?.status))return{data:!1,error:l}}throw l}}getPublicUrl(a,n){const r=this._getFinalPath(a),l=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&l.push(o);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&l.push(f);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${m}`)}}}async remove(a){var n=this;try{return{data:await kd(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:a},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}async list(a,n,r){var l=this;try{const o=Ae(Ae(Ae({},I_),n),{},{prefix:a||""});return{data:await In(l.fetch,`${l.url}/object/list/${l.bucketId}`,o,{headers:l.headers},r),error:null}}catch(o){if(l.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async listV2(a,n){var r=this;try{const l=Ae({},a);return{data:await In(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},n),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const n=[];return a.width&&n.push(`width=${a.width}`),a.height&&n.push(`height=${a.height}`),a.resize&&n.push(`resize=${a.resize}`),a.format&&n.push(`format=${a.format}`),a.quality&&n.push(`quality=${a.quality}`),n.join("&")}};const $v="2.90.1",Hv={"X-Client-Info":`storage-js/${$v}`};var K_=class{constructor(a,n={},r,l){this.shouldThrowOnError=!1;const o=new URL(a);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Ae(Ae({},Hv),n),this.fetch=Td(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){var n=this;try{const r=n.listBucketOptionsToQueryString(a);return{data:await Ai(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}async getBucket(a){var n=this;try{return{data:await Ai(n.fetch,`${n.url}/bucket/${a}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}async createBucket(a,n={public:!1}){var r=this;try{return{data:await In(r.fetch,`${r.url}/bucket`,{id:a,name:a,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}}async updateBucket(a,n){var r=this;try{return{data:await hd(r.fetch,`${r.url}/bucket/${a}`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}}async emptyBucket(a){var n=this;try{return{data:await In(n.fetch,`${n.url}/bucket/${a}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}async deleteBucket(a){var n=this;try{return{data:await kd(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(a){const n={};return a&&("limit"in a&&(n.limit=String(a.limit)),"offset"in a&&(n.offset=String(a.offset)),a.search&&(n.search=a.search),a.sortColumn&&(n.sortColumn=a.sortColumn),a.sortOrder&&(n.sortOrder=a.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Y_=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Ae(Ae({},Hv),n),this.fetch=Td(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var n=this;try{return{data:await In(n.fetch,`${n.url}/bucket`,{name:a},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}async listBuckets(a){var n=this;try{const r=new URLSearchParams;a?.limit!==void 0&&r.set("limit",a.limit.toString()),a?.offset!==void 0&&r.set("offset",a.offset.toString()),a?.sortColumn&&r.set("sortColumn",a.sortColumn),a?.sortOrder&&r.set("sortOrder",a.sortOrder),a?.search&&r.set("search",a.search);const l=r.toString(),o=l?`${n.url}/bucket?${l}`:`${n.url}/bucket`;return{data:await Ai(n.fetch,o,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}async deleteBucket(a){var n=this;try{return{data:await kd(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}from(a){var n=this;if(!M_(a))throw new _o("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new A_({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(o,d){const f=o[d];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(o,m),error:null}}catch(g){if(l)throw g;return{data:null,error:g}}}}})}};const Nd={"X-Client-Info":`storage-js/${$v}`,"Content-Type":"application/json"};var Gv=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function pn(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}var Kc=class extends Gv{constructor(a,n,r){super(a),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Q_=class extends Gv{constructor(a,n){super(a),this.name="StorageVectorsUnknownError",this.originalError=n}};const Cd=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),P_=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},Wg=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),X_=async(a,n,r)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!r?.noResolveJson){const l=a.status||500,o=a;if(typeof o.json=="function")o.json().then(d=>{const f=d?.statusCode||d?.code||l+"";n(new Kc(Wg(d),l,f))}).catch(()=>{const d=l+"";n(new Kc(o.statusText||`HTTP ${l} error`,l,d))});else{const d=l+"";n(new Kc(o.statusText||`HTTP ${l} error`,l,d))}}else n(new Q_(Wg(a),a))},J_=(a,n,r,l)=>{const o={method:a,headers:n?.headers||{}};return l?(P_(l)?(o.headers=Ae({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(l)):o.body=l,Ae(Ae({},o),r)):o};async function Z_(a,n,r,l,o,d){return new Promise((f,m)=>{a(r,J_(n,l,o,d)).then(g=>{if(!g.ok)throw g;if(l?.noResolveJson)return g;const v=g.headers.get("content-type");return!v||!v.includes("application/json")?{}:g.json()}).then(g=>f(g)).catch(g=>X_(g,m,l))})}async function yn(a,n,r,l,o){return Z_(a,"POST",n,l,o,r)}var W_=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Ae(Ae({},Nd),n),this.fetch=Cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){var n=this;try{return{data:await yn(n.fetch,`${n.url}/CreateIndex`,a,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async getIndex(a,n){var r=this;try{return{data:await yn(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:a,indexName:n},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(pn(l))return{data:null,error:l};throw l}}async listIndexes(a){var n=this;try{return{data:await yn(n.fetch,`${n.url}/ListIndexes`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async deleteIndex(a,n){var r=this;try{return{data:await yn(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:a,indexName:n},{headers:r.headers})||{},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(pn(l))return{data:null,error:l};throw l}}},F_=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Ae(Ae({},Nd),n),this.fetch=Cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){var n=this;try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await yn(n.fetch,`${n.url}/PutVectors`,a,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async getVectors(a){var n=this;try{return{data:await yn(n.fetch,`${n.url}/GetVectors`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async listVectors(a){var n=this;try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await yn(n.fetch,`${n.url}/ListVectors`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async queryVectors(a){var n=this;try{return{data:await yn(n.fetch,`${n.url}/QueryVectors`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async deleteVectors(a){var n=this;try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await yn(n.fetch,`${n.url}/DeleteVectors`,a,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}},e0=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Ae(Ae({},Nd),n),this.fetch=Cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var n=this;try{return{data:await yn(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async getBucket(a){var n=this;try{return{data:await yn(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:a},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async listBuckets(a={}){var n=this;try{return{data:await yn(n.fetch,`${n.url}/ListVectorBuckets`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}async deleteBucket(a){var n=this;try{return{data:await yn(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pn(r))return{data:null,error:r};throw r}}},t0=class extends e0{constructor(a,n={}){super(a,n.headers||{},n.fetch)}from(a){return new n0(this.url,this.headers,a,this.fetch)}async createBucket(a){var n=()=>super.createBucket,r=this;return n().call(r,a)}async getBucket(a){var n=()=>super.getBucket,r=this;return n().call(r,a)}async listBuckets(a={}){var n=()=>super.listBuckets,r=this;return n().call(r,a)}async deleteBucket(a){var n=()=>super.deleteBucket,r=this;return n().call(r,a)}},n0=class extends W_{constructor(a,n,r,l){super(a,n,l),this.vectorBucketName=r}async createIndex(a){var n=()=>super.createIndex,r=this;return n().call(r,Ae(Ae({},a),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(a={}){var n=()=>super.listIndexes,r=this;return n().call(r,Ae(Ae({},a),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(a){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,a)}async deleteIndex(a){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,a)}index(a){return new a0(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},a0=class extends F_{constructor(a,n,r,l,o){super(a,n,o),this.vectorBucketName=r,this.indexName=l}async putVectors(a){var n=()=>super.putVectors,r=this;return n().call(r,Ae(Ae({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(a){var n=()=>super.getVectors,r=this;return n().call(r,Ae(Ae({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(a={}){var n=()=>super.listVectors,r=this;return n().call(r,Ae(Ae({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(a){var n=()=>super.queryVectors,r=this;return n().call(r,Ae(Ae({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(a){var n=()=>super.deleteVectors,r=this;return n().call(r,Ae(Ae({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},s0=class extends K_{constructor(a,n={},r,l){super(a,n,r,l)}from(a){return new V_(this.url,this.headers,a,this.fetch)}get vectors(){return new t0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Y_(this.url+"/iceberg",this.headers,this.fetch)}};const Iv="2.90.1",gr=30*1e3,fd=3,Yc=fd*gr,r0="http://localhost:9999",i0="supabase.auth.token",l0={"X-Client-Info":`gotrue-js/${Iv}`},md="X-Supabase-Api-Version",Vv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},o0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,u0=600*1e3;class Ri extends Error{constructor(n,r,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function xe(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class c0 extends Ri{constructor(n,r,l){super(n,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function d0(a){return xe(a)&&a.name==="AuthApiError"}class _s extends Ri{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class _a extends Ri{constructor(n,r,l,o){super(n,l,o),this.name=r,this.status=l}}class vn extends _a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h0(a){return xe(a)&&a.name==="AuthSessionMissingError"}class ur extends _a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class no extends _a{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class ao extends _a{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function f0(a){return xe(a)&&a.name==="AuthImplicitGrantRedirectError"}class Fg extends _a{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class m0 extends _a{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class gd extends _a{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Qc(a){return xe(a)&&a.name==="AuthRetryableFetchError"}class ev extends _a{constructor(n,r,l){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class vd extends _a{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tv=` 	
\r=`.split(""),g0=(()=>{const a=new Array(128);for(let n=0;n<a.length;n+=1)a[n]=-1;for(let n=0;n<tv.length;n+=1)a[tv[n].charCodeAt(0)]=-2;for(let n=0;n<uo.length;n+=1)a[uo[n].charCodeAt(0)]=n;return a})();function nv(a,n,r){if(a!==null)for(n.queue=n.queue<<8|a,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(uo[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(uo[l]),n.queuedBits-=6}}function Kv(a,n,r){const l=g0[a];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function av(a){const n=[],r=f=>{n.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},d=f=>{y0(f,l,r)};for(let f=0;f<a.length;f+=1)Kv(a.charCodeAt(f),o,d);return n.join("")}function v0(a,n){if(a<=127){n(a);return}else if(a<=2047){n(192|a>>6),n(128|a&63);return}else if(a<=65535){n(224|a>>12),n(128|a>>6&63),n(128|a&63);return}else if(a<=1114111){n(240|a>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function p0(a,n){for(let r=0;r<a.length;r+=1){let l=a.charCodeAt(r);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(a.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}v0(l,n)}}function y0(a,n,r){if(n.utf8seq===0){if(a<=127){r(a);return}for(let l=1;l<6;l+=1)if((a>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=a&31;else if(n.utf8seq===3)n.codepoint=a&15;else if(n.utf8seq===4)n.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|a&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function _r(a){const n=[],r={queue:0,queuedBits:0},l=o=>{n.push(o)};for(let o=0;o<a.length;o+=1)Kv(a.charCodeAt(o),r,l);return new Uint8Array(n)}function b0(a){const n=[];return p0(a,r=>n.push(r)),new Uint8Array(n)}function Ss(a){const n=[],r={queue:0,queuedBits:0},l=o=>{n.push(o)};return a.forEach(o=>nv(o,r,l)),nv(null,r,l),n.join("")}function _0(a){return Math.round(Date.now()/1e3)+a}function w0(){return Symbol("auth-callback")}const Kt=()=>typeof window<"u"&&typeof document<"u",gs={tested:!1,writable:!1},Yv=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gs.tested)return gs.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),gs.tested=!0,gs.writable=!0}catch{gs.tested=!0,gs.writable=!1}return gs.writable};function S0(a){const n={},r=new URL(a);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,d)=>{n[d]=o})}catch{}return r.searchParams.forEach((l,o)=>{n[o]=l}),n}const Qv=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),x0=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",vr=async(a,n,r)=>{await a.setItem(n,JSON.stringify(r))},vs=async(a,n)=>{const r=await a.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Vt=async(a,n)=>{await a.removeItem(n)};class wo{constructor(){this.promise=new wo.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}wo.promiseConstructor=Promise;function Pc(a){const n=a.split(".");if(n.length!==3)throw new vd("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!o0.test(n[l]))throw new vd("JWT not in base64url format");return{header:JSON.parse(av(n[0])),payload:JSON.parse(av(n[1])),signature:_r(n[2]),raw:{header:n[0],payload:n[1]}}}async function j0(a){return await new Promise(n=>{setTimeout(()=>n(null),a)})}function E0(a,n){return new Promise((l,o)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await a(d);if(!n(d,null,f)){l(f);return}}catch(f){if(!n(d,f)){o(f);return}}})()})}function T0(a){return("0"+a.toString(16)).substr(-2)}function k0(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let o="";for(let d=0;d<56;d++)o+=r.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(n),Array.from(n,T0).join("")}async function N0(a){const r=new TextEncoder().encode(a),l=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(l);return Array.from(o).map(d=>String.fromCharCode(d)).join("")}async function C0(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const r=await N0(a);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cr(a,n,r=!1){const l=k0();let o=l;r&&(o+="/PASSWORD_RECOVERY"),await vr(a,`${n}-code-verifier`,o);const d=await C0(l);return[d,l===d?"plain":"s256"]}const A0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function R0(a){const n=a.headers.get(md);if(!n||!n.match(A0))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function O0(a){if(!a)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(a<=n)throw new Error("JWT has expired")}function D0(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const M0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function dr(a){if(!M0.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xc(){const a={};return new Proxy(a,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function U0(a,n){return new Proxy(a,{get:(r,l,o)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,o)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,l,o)}})}function sv(a){return JSON.parse(JSON.stringify(a))}const ys=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),z0=[502,503,504];async function rv(a){var n;if(!x0(a))throw new gd(ys(a),0);if(z0.includes(a.status))throw new gd(ys(a),a.status);let r;try{r=await a.json()}catch(d){throw new _s(ys(d),d)}let l;const o=R0(a);if(o&&o.getTime()>=Vv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new ev(ys(r),a.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new vn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new ev(ys(r),a.status,r.weak_password.reasons);throw new c0(ys(r),a.status||500,l)}const L0=(a,n,r,l)=>{const o={method:a,headers:n?.headers||{}};return a==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),r))};async function Ce(a,n,r,l){var o;const d=Object.assign({},l?.headers);d[md]||(d[md]=Vv["2024-01-01"].name),l?.jwt&&(d.Authorization=`Bearer ${l.jwt}`);const f=(o=l?.query)!==null&&o!==void 0?o:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await q0(a,n,r+m,{headers:d,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(g):{data:Object.assign({},g),error:null}}async function q0(a,n,r,l,o,d){const f=L0(n,l,o,d);let m;try{m=await a(r,Object.assign({},f))}catch(g){throw console.error(g),new gd(ys(g),0)}if(m.ok||await rv(m),l?.noResolveJson)return m;try{return await m.json()}catch(g){await rv(g)}}function Gn(a){var n;let r=null;H0(a)&&(r=Object.assign({},a),a.expires_at||(r.expires_at=_0(a.expires_in)));const l=(n=a.user)!==null&&n!==void 0?n:a;return{data:{session:r,user:l},error:null}}function iv(a){const n=Gn(a);return!n.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(n.data.weak_password=a.weak_password),n}function Ja(a){var n;return{data:{user:(n=a.user)!==null&&n!==void 0?n:a},error:null}}function B0(a){return{data:a,error:null}}function $0(a){const{action_link:n,email_otp:r,hashed_token:l,redirect_to:o,verification_type:d}=a,f=bo(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:r,hashed_token:l,redirect_to:o,verification_type:d},g=Object.assign({},f);return{data:{properties:m,user:g},error:null}}function lv(a){return a}function H0(a){return a.access_token&&a.refresh_token&&a.expires_in}const Jc=["global","local","others"];class G0{constructor({url:n="",headers:r={},fetch:l}){this.url=n,this.headers=r,this.fetch=Qv(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Jc[0]){if(Jc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jc.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,r={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ja})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:r}=n,l=bo(n,["options"]),o=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(o.new_email=l?.newEmail,delete o.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:$0,redirectTo:r?.redirectTo})}catch(r){if(xe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ja})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,l,o,d,f,m,g;try{const v={nextPage:null,lastPage:0,total:0},b=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(d=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&d!==void 0?d:""},xform:lv});if(b.error)throw b.error;const w=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(E=>{const k=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);v[`${C}Page`]=k}),v.total=parseInt(S)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(xe(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){dr(n);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ja})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){dr(n);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Ja})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,r=!1){dr(n);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ja})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){dr(n.userId);try{const{data:r,error:l}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:l}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _deleteFactor(n){dr(n.userId),dr(n.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,l,o,d,f,m,g;try{const v={nextPage:null,lastPage:0,total:0},b=await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(d=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&d!==void 0?d:""},xform:lv});if(b.error)throw b.error;const w=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,x=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(E=>{const k=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);v[`${C}Page`]=k}),v.total=parseInt(S)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(xe(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(xe(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}}function ov(a={}){return{getItem:n=>a[n]||null,setItem:(n,r)=>{a[n]=r},removeItem:n=>{delete a[n]}}}const hr={debug:!!(globalThis&&Yv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Pv extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class I0 extends Pv{}async function V0(a,n,r){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),hr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,o.name);try{return await r()}finally{hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,o.name)}}else{if(n===0)throw hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new I0(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(hr.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function K0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Xv(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function Y0(a){return parseInt(a,16)}function Q0(a){const n=new TextEncoder().encode(a);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function P0(a){var n;const{chainId:r,domain:l,expirationTime:o,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:g,resources:v,scheme:b,uri:w,version:S}=a;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((n=a.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const x=Xv(a.address),E=b?`${b}://${l}`:l,k=a.statement?`${a.statement}
`:"",C=`${E} wants you to sign in with your Ethereum account:
${x}

${k}`;let A=`URI: ${w}
Version: ${S}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(o&&(A+=`
Expiration Time: ${o.toISOString()}`),m&&(A+=`
Not Before: ${m.toISOString()}`),g&&(A+=`
Request ID: ${g}`),v){let G=`
Resources:`;for(const N of v){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);G+=`
- ${N}`}A+=G}return`${C}
${A}`}class kt extends Error{constructor({message:n,code:r,cause:l,name:o}){var d;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(d=o??(l instanceof Error?l.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class co extends kt{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function X0({error:a,options:n}){var r,l,o;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(n.mediation==="conditional"&&((l=d.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new kt({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const f=window.location.hostname;if(Jv(f)){if(d.rp.id!==f)return new kt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function J0({error:a,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new kt({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const l=window.location.hostname;if(Jv(l)){if(r.rpId!==l)return new kt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class Z0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const W0=new Z0;function F0(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:n,user:r,excludeCredentials:l}=a,o=bo(a,["challenge","user","excludeCredentials"]),d=_r(n).buffer,f=Object.assign(Object.assign({},r),{id:_r(r.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:d,user:f});if(l&&l.length>0){m.excludeCredentials=new Array(l.length);for(let g=0;g<l.length;g++){const v=l[g];m.excludeCredentials[g]=Object.assign(Object.assign({},v),{id:_r(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return m}function ew(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:n,allowCredentials:r}=a,l=bo(a,["challenge","allowCredentials"]),o=_r(n).buffer,d=Object.assign(Object.assign({},l),{challenge:o});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const m=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:_r(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function tw(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a;return{id:a.id,rawId:a.id,response:{attestationObject:Ss(new Uint8Array(a.response.attestationObject)),clientDataJSON:Ss(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function nw(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a,l=a.getClientExtensionResults(),o=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Ss(new Uint8Array(o.authenticatorData)),clientDataJSON:Ss(new Uint8Array(o.clientDataJSON)),signature:Ss(new Uint8Array(o.signature)),userHandle:o.userHandle?Ss(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Jv(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function uv(){var a,n;return!!(Kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function aw(a){try{const n=await navigator.credentials.create(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new co("Browser returned unexpected credential type",n)}:{data:null,error:new co("Empty credential response",n)}}catch(n){return{data:null,error:X0({error:n,options:a})}}}async function sw(a){try{const n=await navigator.credentials.get(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new co("Browser returned unexpected credential type",n)}:{data:null,error:new co("Empty credential response",n)}}catch(n){return{data:null,error:J0({error:n,options:a})}}}const rw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},iw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ho(...a){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),l={};for(const o of a)if(o)for(const d in o){const f=o[d];if(f!==void 0)if(Array.isArray(f))l[d]=f;else if(r(f))l[d]=f;else if(n(f)){const m=l[d];n(m)?l[d]=ho(m,f):l[d]=ho(f)}else l[d]=f}return l}function lw(a,n){return ho(rw,a,n||{})}function ow(a,n){return ho(iw,a,n||{})}class uw{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:l,signal:o},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:m};const g=o??W0.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:v}=f.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${l}`),v.displayName||(v.displayName=v.name)}switch(f.webauthn.type){case"create":{const v=lw(f.webauthn.credential_options.publicKey,d?.create),{data:b,error:w}=await aw({publicKey:v,signal:g});return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const v=ow(f.webauthn.credential_options.publicKey,d?.request),{data:b,error:w}=await sw(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:v,signal:g}));return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new _s("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},d){if(!r)return{data:null,error:new Ri("rpId is required for WebAuthn authentication")};try{if(!uv())return{data:null,error:new _s("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:l},signal:o},{request:d});if(!f)return{data:null,error:m};const{webauthn:g}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:l,credential_response:g.credential_response}})}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new _s("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},d){if(!r)return{data:null,error:new Ri("rpId is required for WebAuthn registration")};try{if(!uv())return{data:null,error:new _s("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===n&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:m};const{data:g,error:v}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:o},{create:d});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:l,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:v}}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new _s("Unexpected error in register",f)}}}}K0();const cw={url:r0,storageKey:i0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:l0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function cv(a,n,r){return await r()}const fr={};class Oi{get jwks(){var n,r;return(r=(n=fr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=fr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{cachedAt:n})}constructor(n){var r,l,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},cw),n);if(this.storageKey=d.storageKey,this.instanceID=(r=Oi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Oi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&Kt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new G0({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Qv(d.fetch),this.lock=d.lock||cv,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&Kt()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=V0:this.lock=cv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Yv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ov(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=ov(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Iv}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},l="none";if(Kt()&&(r=S0(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),Kt()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:d}=await this._getSessionFromURL(r,l);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),f0(d)){const g=(n=d.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:f,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return xe(r)?this._returnResult({error:r}):this._returnResult({error:new _s("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,l,o;try{const d=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Gn}),{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(d){if(xe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(n){var r,l,o;try{let d;if("email"in n){const{email:b,password:w,options:S}=n;let x=null,E=null;this.flowType==="pkce"&&([x,E]=await cr(this.storage,this.storageKey)),d=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:b,password:w,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:x,code_challenge_method:E},xform:Gn})}else if("phone"in n){const{phone:b,password:w,options:S}=n;d=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(l=S?.data)!==null&&l!==void 0?l:{},channel:(o=S?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:Gn})}else throw new no("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return await Vt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(d){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),xe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(n){try{let r;if("email"in n){const{email:d,password:f,options:m}=n;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:iv})}else if("phone"in n){const{phone:d,password:f,options:m}=n;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:iv})}else throw new no("You must provide either an email or phone number and a password");const{data:l,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!l||!l.session||!l.user){const d=new ur;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,l,o,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,l,o,d,f,m,g,v,b,w,S;let x,E;if("message"in n)x=n.message,E=n.signature;else{const{chain:k,wallet:C,statement:A,options:G}=n;let N;if(Kt())if(typeof C=="object")N=C;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")N=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!G?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=C}const Q=new URL((r=G?.url)!==null&&r!==void 0?r:window.location.href),W=await N.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=Xv(W[0]);let T=(l=G?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!T){const B=await N.request({method:"eth_chainId"});T=Y0(B)}const z={domain:Q.host,address:K,statement:A,uri:Q.href,version:"1",chainId:T,nonce:(o=G?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(f=(d=G?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=G?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=G?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=G?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(b=G?.signInWithEthereum)===null||b===void 0?void 0:b.resources};x=P0(z),E=await N.request({method:"personal_sign",params:[Q0(x),K]})}try{const{data:k,error:C}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:E},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Gn});if(C)throw C;if(!k||!k.session||!k.user){const A=new ur;return this._returnResult({data:{user:null,session:null},error:A})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:C})}catch(k){if(xe(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(n){var r,l,o,d,f,m,g,v,b,w,S,x;let E,k;if("message"in n)E=n.message,k=n.signature;else{const{chain:C,wallet:A,statement:G,options:N}=n;let Q;if(Kt())if(typeof A=="object")Q=A;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))Q=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=A}const W=new URL((r=N?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Q&&Q.signIn){const K=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),G?{statement:G}:null));let T;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")T=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)T=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)E=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),k=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${W.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...G?["",G,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(o=(l=N?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((d=N?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((f=N?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((m=N?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((g=N?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((v=N?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((w=(b=N?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...N.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const K=await Q.signMessage(new TextEncoder().encode(E),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=K}}try{const{data:C,error:A}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Ss(k)},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Gn});if(A)throw A;if(!C||!C.session||!C.user){const G=new ur;return this._returnResult({data:{user:null,session:null},error:G})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:A})}catch(C){if(xe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(n){const r=await vs(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new m0;const{data:d,error:f}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:Gn});if(await Vt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const m=new ur;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:o??null}),error:f})}catch(d){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),xe(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(n){try{const{options:r,provider:l,token:o,access_token:d,nonce:f}=n,m=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Gn}),{data:g,error:v}=m;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g||!g.session||!g.user){const b=new ur;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:v})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,l,o,d,f;try{if("email"in n){const{email:m,options:g}=n;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await cr(this.storage,this.storageKey));const{error:w}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(l=g?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:b},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:m,options:g}=n,{data:v,error:b}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(d=g?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:b})}throw new no("You must provide either an email or phone number.")}catch(m){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),xe(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(n){var r,l;try{let o,d;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,d=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:m}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:o,xform:Gn});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,v=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(o){if(xe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,l,o,d,f;try{let m=null,g=null;this.flowType==="pkce"&&([m,g]=await cr(this.storage,this.storageKey));const v=await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:g}),headers:this.headers,xform:B0});return!((d=v.data)===null||d===void 0)&&d.url&&Kt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(m){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),xe(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;if(l)throw l;if(!r)throw new vn;const{error:o}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:l,type:o,options:d}=n,{error:f}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:l,type:o,options:d}=n,{data:f,error:m}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:m})}throw new no("You must provide either an email or phone number and a type")}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await vs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<Yc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const f=await vs(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=Xc()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=U0(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ja}):await this._useSession(async r=>{var l,o,d;const{data:f,error:m}=r;if(m)throw m;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vn}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0,xform:Ja})})}catch(r){if(xe(r))return h0(r)&&(await this._removeSession(),await Vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async l=>{const{data:o,error:d}=l;if(d)throw d;if(!o.session)throw new vn;const f=o.session;let m=null,g=null;this.flowType==="pkce"&&n.email!=null&&([m,g]=await cr(this.storage,this.storageKey));const{data:v,error:b}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:g}),jwt:f.access_token,xform:Ja});if(b)throw b;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),xe(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new vn;const r=Date.now()/1e3;let l=r,o=!0,d=null;const{payload:f}=Pc(n.access_token);if(f.exp&&(l=f.exp,o=l<=r),o){const{data:m,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:g}=await this._getUser(n.access_token);if(g)throw g;d={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(r){if(xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var l;if(!n){const{data:f,error:m}=r;if(m)throw m;n=(l=f.session)!==null&&l!==void 0?l:void 0}if(!n?.refresh_token)throw new vn;const{data:o,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(xe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Kt())throw new ao("No browser detected.");if(n.error||n.error_description||n.error_code)throw new ao(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Fg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ao("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Fg("No code detected.");const{data:G,error:N}=await this._exchangeCodeForSession(n.code);if(N)throw N;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:G.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:d,refresh_token:f,expires_in:m,expires_at:g,token_type:v}=n;if(!d||!m||!f||!v)throw new ao("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let S=b+w;g&&(S=parseInt(g));const x=S-b;x*1e3<=gr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const E=S-w;b-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,S,b):b-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,S,b);const{data:k,error:C}=await this._getUser(d);if(C)throw C;const A={provider_token:l,provider_refresh_token:o,access_token:d,expires_in:w,expires_at:S,refresh_token:f,token_type:v,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:n.type},error:null})}catch(l){if(xe(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await vs(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:o,error:d}=r;if(d)return this._returnResult({error:d});const f=(l=o.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(d0(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return n!=="others"&&(await this._removeSession(),await Vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=w0(),l={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async r=>{var l,o;try{const{data:{session:d},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,r={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await cr(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),xe(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var n;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:l,error:o}=await this._useSession(async d=>{var f,m,g,v,b;const{data:w,error:S}=d;if(S)throw S;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",x,{headers:this.headers,jwt:(b=(v=w.session)===null||v===void 0?void 0:v.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return Kt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:n.provider,url:l?.url},error:null})}catch(l){if(xe(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var l;try{const{error:o,data:{session:d}}=r;if(o)throw o;const{options:f,provider:m,token:g,access_token:v,nonce:b}=n,w=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=d?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:m,id_token:g,access_token:v,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Gn}),{data:S,error:x}=w;return x?this._returnResult({data:{user:null,session:null},error:x}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new ur}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:x}))}catch(o){if(await Vt(this.storage,`${this.storageKey}-code-verifier`),xe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var l,o;const{data:d,error:f}=r;if(f)throw f;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await E0(async o=>(o>0&&await j0(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Gn})),(o,d)=>{const f=200*Math.pow(2,o);return d&&Qc(d)&&Date.now()+f-l<gr})}catch(l){if(this._debug(r,"error",l),xe(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",l),Kt()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const o=await vs(this.storage,this.storageKey);if(o&&this.userStorage){let f=await vs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:o.user},await vr(this.userStorage,this.storageKey+"-user",f)),o.user=(n=f?.user)!==null&&n!==void 0?n:Xc()}else if(o&&!o.user&&!o.user){const f=await vs(this.storage,this.storageKey+"-user");f&&f?.user?(o.user=f.user,await Vt(this.storage,this.storageKey+"-user"),await vr(this.storage,this.storageKey,o)):o.user=Xc()}if(this._debug(l,"session from storage",o),!this._isValidSession(o)){this._debug(l,"session is not valid"),o!==null&&await this._removeSession();return}const d=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Yc;if(this._debug(l,`session has${d?"":" not"} expired with margin of ${Yc}s`),d){if(this.autoRefreshToken&&o.refresh_token){const{error:f}=await this._callRefreshToken(o.refresh_token);f&&(console.error(f),Qc(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(o.access_token);!m&&f?.user?(o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(l,"error",o),console.error(o);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var r,l;if(!n)throw new vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new wo;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new vn;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(o,"error",d),xe(d)){const f={data:null,error:d};return Qc(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(d),d}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,l=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,r)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Vt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await vr(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const d=sv(o);await vr(this.storage,this.storageKey,d)}else{const o=sv(r);await vr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vt(this.storage,this.storageKey),await Vt(this.storage,this.storageKey+"-code-verifier"),await Vt(this.storage,this.storageKey+"-user"),this.userStorage&&await Vt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Kt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),gr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-n)/gr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${gr}ms, refresh threshold is ${fd} ticks`),o<=fd&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Pv)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,l){const o=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[d,f]=await cr(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});o.push(m.toString())}if(l?.queryParams){const d=new URLSearchParams(l.queryParams);o.push(d.toString())}return l?.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var l;const{data:o,error:d}=r;return d?this._returnResult({data:null,error:d}):await Ce(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var l,o;const{data:d,error:f}=r;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:v}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:o,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?tw(n.webauthn.credential_response):nw(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:g}=await Ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:o,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=await Ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:F0(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ew(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const o={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(d),d.status==="verified"&&o[d.factor_type].push(d);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:l},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Pc(l.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const v=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:l},error:o}=r;return o?this._returnResult({data:null,error:o}):l?await Ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new vn})})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:o},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!o)return this._returnResult({data:null,error:new vn});const f=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Kt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:o},error:d}=l;if(d)return this._returnResult({data:null,error:d});if(!o)return this._returnResult({data:null,error:new vn});const f=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&Kt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;return l?this._returnResult({data:null,error:l}):r?await Ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new vn})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:l},error:o}=r;return o?this._returnResult({data:null,error:o}):l?(await Ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new vn})})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let l=r.keys.find(m=>m.kid===n);if(l)return l;const o=Date.now();if(l=this.jwks.keys.find(m=>m.kid===n),l&&this.jwks_cached_at+u0>o)return l;const{data:d,error:f}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=o,l=d.keys.find(m=>m.kid===n),!l)?null:l}async getClaims(n,r={}){try{let l=n;if(!l){const{data:x,error:E}=await this.getSession();if(E||!x.session)return this._returnResult({data:null,error:E});l=x.session.access_token}const{header:o,payload:d,signature:f,raw:{header:m,payload:g}}=Pc(l);r?.allowExpired||O0(d.exp);const v=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!v){const{error:x}=await this.getUser(l);if(x)throw x;return{data:{claims:d,header:o,signature:f},error:null}}const b=D0(o.alg),w=await crypto.subtle.importKey("jwk",v,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,f,b0(`${m}.${g}`)))throw new vd("Invalid JWT signature");return{data:{claims:d,header:o,signature:f},error:null}}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}}Oi.nextInstanceID={};const dw=Oi,hw="2.90.1";let bi="";typeof Deno<"u"?bi="deno":typeof document<"u"?bi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bi="react-native":bi="node";const fw={"X-Client-Info":`supabase-js-${bi}/${hw}`},mw={headers:fw},gw={schema:"public"},vw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pw={};function Di(a){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Di(a)}function yw(a,n){if(Di(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var l=r.call(a,n);if(Di(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function bw(a){var n=yw(a,"string");return Di(n)=="symbol"?n:n+""}function _w(a,n,r){return(n=bw(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function dv(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);n&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),r.push.apply(r,l)}return r}function bt(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?dv(Object(r),!0).forEach(function(l){_w(a,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):dv(Object(r)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(r,l))})}return a}const ww=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),Sw=()=>Headers,xw=(a,n,r)=>{const l=ww(r),o=Sw();return async(d,f)=>{var m;const g=(m=await n())!==null&&m!==void 0?m:a;let v=new o(f?.headers);return v.has("apikey")||v.set("apikey",a),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),l(d,bt(bt({},f),{},{headers:v}))}};function jw(a){return a.endsWith("/")?a:a+"/"}function Ew(a,n){var r,l;const{db:o,auth:d,realtime:f,global:m}=a,{db:g,auth:v,realtime:b,global:w}=n,S={db:bt(bt({},g),o),auth:bt(bt({},v),d),realtime:bt(bt({},b),f),storage:{},global:bt(bt(bt({},w),m),{},{headers:bt(bt({},(r=w?.headers)!==null&&r!==void 0?r:{}),(l=m?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return a.accessToken?S.accessToken=a.accessToken:delete S.accessToken,S}function Tw(a){const n=a?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(jw(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var kw=class extends dw{constructor(a){super(a)}},Nw=class{constructor(a,n,r){var l,o;this.supabaseUrl=a,this.supabaseKey=n;const d=Tw(a);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:gw,realtime:pw,auth:bt(bt({},vw),{},{storageKey:f}),global:mw},g=Ew(r??{},m);if(this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=g.auth)!==null&&v!==void 0?v:{},this.headers,g.global.fetch)}this.fetch=xw(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(bt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new l_(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new s0(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new n_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,n,r)}channel(a,n={config:{}}){return this.realtime.channel(a,n)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,n,r;if(a.accessToken)return await a.accessToken();const{data:l}=await a.auth.getSession();return(n=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:o,storageKey:d,flowType:f,lock:m,debug:g,throwOnError:v},b,w){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kw({url:this.authUrl.href,headers:bt(bt({},S),b),storageKey:d,autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:o,flowType:f,lock:m,debug:g,throwOnError:v,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new j_(this.realtimeUrl.href,bt(bt({},a),{},{params:bt(bt({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,n)=>{this._handleTokenChanged(a,"CLIENT",n?.access_token)})}_handleTokenChanged(a,n,r){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Cw=(a,n,r)=>new Nw(a,n,r);function Aw(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const n=a.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Aw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Rw="https://jbknjgbpghrbrstqwoxj.supabase.co",Ow="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impia25qZ2JwZ2hyYnJzdHF3b3hqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2MjIwNjMsImV4cCI6MjA3ODE5ODA2M30.ZMlxQyzmXuy43EcKIN6-eO8pJZs2F6kfDw_cfaks9qQ",me=Cw(Rw,Ow,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});let Pa=null;async function wa(){if(Pa)return Pa;try{const{data:{user:a}}=await me.auth.getUser();if(!a)return null;const{data:n,error:r}=await me.schema("gaming").from("admins").select("institution_id").eq("user_id",a.id).maybeSingle();if(!r&&n?.institution_id)return Pa=n.institution_id,Pa;const{data:l,error:o}=await me.from("users").select("institution_id").eq("user_id",a.id).maybeSingle();return!o&&l?.institution_id?(Pa=l.institution_id,Pa):null}catch(a){return console.error("Error in getCurrentUserInstitutionId:",a),null}}async function Zv(){const a=await wa();if(!a)return{id:null,name:null};try{const{data:n}=await me.from("institutions").select("id, name").eq("id",a).maybeSingle();return{id:a,name:n?.name??null}}catch(n){return console.error("Error fetching institution name:",n),{id:a,name:null}}}function Zc(){Pa=null}function hv(a){Pa=a||null}async function Wv(a="",n=500,r=null){try{let l=me.schema("gaming").from("users").select("flango_user_id, name, number, nickname, balance_minutes, grade_level").order("name",{ascending:!0}).limit(n);if(r&&(l=l.eq("institution_id",r)),a&&a.trim()){const m=a.toLowerCase().trim();l=l.or(`name.ilike.%${m}%,number.ilike.%${m}%`)}const{data:o,error:d}=await l;if(d)return d.code==="42501"||d.message?.includes("permission denied for schema gaming")?console.error(" GAMING SCHEMA ERROR:",{message:"Gaming schema er ikke eksponeret eller PostgREST er ikke genstartet",solution:'G til Supabase Dashboard  Settings  API  "Exposed schemas"  Tilfj "gaming" og vent 30 sekunder',error:d.message}):console.error("Error fetching gaming users:",d),[];let f=(o||[]).filter(m=>m.name&&m.name.trim()!=="").map(m=>({id:m.flango_user_id,flangoUserId:m.flango_user_id,name:m.name,number:m.number,nickname:m.nickname,balanceMinutes:m.balance_minutes??0,gradeLevel:m.grade_level}));if(a&&a.trim()){const m=a.toLowerCase().trim();f.sort((g,v)=>{const b=(g.nickname||g.name||"").toLowerCase(),w=(v.nickname||v.name||"").toLowerCase(),S=(g.number||"").toString().toLowerCase(),x=(v.number||"").toString().toLowerCase(),E=b.startsWith(m)||S.startsWith(m),k=w.startsWith(m)||x.startsWith(m),C=/\b/.test(b)&&(b.match(new RegExp(`\\b${m}`,"i"))||S.match(new RegExp(`^${m}`,"i"))),A=/\b/.test(w)&&(w.match(new RegExp(`\\b${m}`,"i"))||x.match(new RegExp(`^${m}`,"i")));return E&&!k?-1:!E&&k?1:C&&!A?-1:!C&&A?1:b.localeCompare(w,"da")})}return f}catch(l){return console.error("Error in fetchGamingUsers:",l),[]}}async function xi(a=null){try{let n=me.schema("gaming").from("settings").select("*");a&&(n=n.eq("institution_id",a));const{data:r,error:l}=await n.single();return l?(console.error("Error fetching settings:",l),{default_balance_minutes:30,max_session_minutes:30,auto_reset_enabled:!0,auto_reset_time:"00:00:00",auto_reset_frequency:"daily",auto_reset_weekday:null,queue_attendance_enabled:!1,queue_attendance_timeout_seconds:300,show_names:!0,allow_nicknames:!0,room_title:"Spillerummet",sound_enabled:!0,grade_filter_enabled:!1,grade_filter_levels:[],pulse_enabled_dashboard:!0,pulse_intensity_dashboard:50,pulse_enabled_viewmode:!0,pulse_intensity_viewmode:50}):r}catch(n){return console.error("Error in getSettings:",n),null}}async function Dw(a){try{const{data:{user:n}}=await me.auth.getUser();if(!n)return!1;const{data:r}=await me.from("users").select("institution_id").eq("user_id",n.id).single();if(!r?.institution_id)return!1;const{error:l}=await me.schema("gaming").from("settings").upsert({institution_id:r.institution_id,...a,updated_at:new Date().toISOString()},{onConflict:"institution_id"});return l?(console.error("Error updating settings:",l),!1):!0}catch(n){return console.error("Error in updateSettings:",n),!1}}async function Wc(a){try{const{data:n,error:r}=await me.schema("gaming").from("users").select("balance_minutes").eq("flango_user_id",a).single();return r?(console.error("Error fetching user balance:",r),null):n?.balance_minutes??0}catch(n){return console.error("Error in getUserBalance:",n),null}}async function pd(a=null){try{if(a){const{data:n,error:r}=await me.schema("gaming").rpc("reset_user_balance",{p_flango_user_id:a});return r?(console.error("Error resetting user balance:",r),!1):!!n}else{const{data:n,error:r}=await me.schema("gaming").rpc("reset_user_balances");return r?(console.error("Error resetting all balances:",r),!1):!0}}catch(n){return console.error("Error in resetUserBalance:",n),!1}}async function Mw(a){if(!a?.auto_reset_enabled)return!1;const n=new Date,r=a.auto_reset_time||"00:00:00",[l,o]=r.split(":").map(Number);if(a.auto_reset_frequency==="daily"){const d=n.getHours(),f=n.getMinutes();return d===l&&f===o}else if(a.auto_reset_frequency==="weekly"){const d=n.getDay(),f=n.getHours(),m=n.getMinutes();return a.auto_reset_weekday===d&&f===l&&m===o}return!1}async function Uw(a,n,r=1){try{const{data:l,error:o}=await me.schema("gaming").rpc("deduct_session_balance",{p_session_id:a,p_user_id:n,p_minutes_to_deduct:r});return o?(console.error("Error deducting balance:",o),null):l}catch(l){return console.error("Error in deductSessionBalance:",l),null}}async function zw(a){try{const{data:n,error:r}=await me.schema("gaming").from("parent_overrides").select("max_daily_minutes, max_session_minutes").eq("user_id",a).maybeSingle();return r?(r.code==="PGRST116"||console.error("Error fetching parent override:",r),null):n}catch(n){return console.error("Error in getParentOverride:",n),null}}async function Fv(a,n,r="expired"){try{const l=await wa();if(!l||!a.startTime)return!1;const o=a.startTime instanceof Date?a.startTime.toISOString():a.startTime,{error:d}=await me.schema("gaming").from("session_history").insert({institution_id:l,device_id:n,user_id:a.userId||null,user_name:a.userName||null,start_time:o,end_time:new Date().toISOString(),duration_minutes:a.durationMinutes||0,ended_by:r,balance_deducted:a.balanceDeducted||0});return d?(console.error("Error recording session history:",d),!1):!0}catch(l){return console.error("Error in recordSessionEnd:",l),!1}}const xs={},ji={},Lw=300;async function fv(a){if(!a||!a.id)return console.warn("[sync] syncStationToDatabase called with invalid station:",a),!1;const n=a.id.toLowerCase();return ji[n]=a,xs[n]&&clearTimeout(xs[n]),new Promise(r=>{xs[n]=setTimeout(async()=>{delete xs[n],delete ji[n];try{const l=await ep(a);r(l)}catch(l){console.error(`[sync] Uncaught error in _doSync for ${n}:`,l),r(!1)}},Lw)})}async function qw(){const a=Object.keys(ji);if(a.length===0)return;console.log(`[sync] Flushing ${a.length} pending syncs before unload...`);for(const r of a)xs[r]&&(clearTimeout(xs[r]),delete xs[r]);const n=a.map(r=>{const l=ji[r];return delete ji[r],ep(l).catch(o=>{console.error(`[sync] Flush error for ${r}:`,o)})});await Promise.allSettled(n)}async function ep(a){try{const n=await wa();if(!n)return console.warn("[sync] Cannot sync: no institution_id"),!1;const r=a.id.toLowerCase(),l=(a.activeSessions||[]).length,o=(a.queue||[]).length;console.log(`[sync] Syncing ${r}: ${l} sessions, ${o} queue, status=${a.status}, inst=${n.slice(0,8)}`);const f=(await Promise.allSettled([Bw(r,n,a.status),$w(r,n,a.activeSessions||[]),Hw(r,n,a.queue||[])])).filter(m=>m.status==="rejected");return f.length>0?console.error("[sync] Some syncs failed:",f.map(m=>m.reason)):console.log(`[sync]  ${r} synced OK`),f.length===0}catch(n){return console.error("[sync] Error syncing station:",n),!1}}async function Bw(a,n,r){const l=r==="active"?"available":r||"available",{error:o}=await me.schema("gaming").from("device_status").upsert({device_id:a,institution_id:n,status:l,updated_at:new Date().toISOString()},{onConflict:"device_id"});if(o)throw console.error(`[sync] device_status error for ${a}:`,o),o}async function $w(a,n,r){if(r.length===0){const{error:m}=await me.schema("gaming").from("sessions").delete().eq("device_id",a).eq("institution_id",n);if(m)throw console.error(`[sync] sessions delete error for ${a}:`,m),m;return}const l=r.map(m=>({id:m.id,device_id:a,institution_id:n,user_id:m.userId||null,user_name:m.userName||null,start_time:m.startTime?new Date(m.startTime).toISOString():null,duration_minutes:m.durationMinutes||30,is_paused:m.isPaused||!1,remaining_seconds_when_paused:m.remainingSecondsWhenPaused||null,user_balance_at_start:m.userBalanceAtStart??null,balance_deducted:m.balanceDeducted??0,waiting_since:m.waitingSince?new Date(m.waitingSince).toISOString():null,waiting_timeout_seconds:m.waitingTimeoutSeconds??null,status:"active"}));console.log(`[sync] Upserting ${l.length} sessions for ${a}:`,l.map(m=>({id:m.id,user_name:m.user_name})));const o=r.map(m=>m.id),d=await me.schema("gaming").from("sessions").upsert(l,{onConflict:"id"}).select();if(d.error)throw console.error(`[sync] sessions upsert error for ${a}:`,d.error),console.error("[sync] sessions upsert details:",JSON.stringify(d.error)),d.error;console.log(`[sync]  Sessions upsert OK for ${a}, returned ${d.data?.length??0} rows`);const f=await me.schema("gaming").from("sessions").delete().eq("device_id",a).eq("institution_id",n).not("id","in",`(${o.join(",")})`);f.error&&console.error(`[sync] sessions cleanup error for ${a}:`,f.error)}async function Hw(a,n,r){if(r.length===0){const{error:m}=await me.schema("gaming").from("queue").delete().eq("device_id",a).eq("institution_id",n);if(m)throw console.error(`[sync] queue delete error for ${a}:`,m),m;return}const l=r.map((m,g)=>({id:m.id,device_id:a,institution_id:n,user_id:m.userId||null,user_name:m.name||m.userName||null,position:g,expected_start_time:m.availableTime?new Date(m.availableTime).toISOString():null,is_group:!!(m.users&&m.users.length>0),group_users:m.users||null})),o=r.map(m=>m.id),d=await me.schema("gaming").from("queue").upsert(l,{onConflict:"id"});if(d.error)throw console.error(`[sync] queue upsert error for ${a}:`,d.error),d.error;const f=await me.schema("gaming").from("queue").delete().eq("device_id",a).eq("institution_id",n).not("id","in",`(${o.join(",")})`);f.error&&console.error(`[sync] queue cleanup error for ${a}:`,f.error)}const ws={};function tp(a){try{ws[a]||(ws[a]=new Audio(`/sounds/${a}.mp3`),ws[a].volume=.5),ws[a].currentTime=0,ws[a].play().catch(()=>{})}catch{}}function fo(a=800,n=200){try{const r=new(window.AudioContext||window.webkitAudioContext),l=r.createOscillator(),o=r.createGain();l.connect(o),o.connect(r.destination),l.type="sine",l.frequency.setValueAtTime(a,r.currentTime),o.gain.setValueAtTime(.3,r.currentTime),o.gain.exponentialRampToValueAtTime(.001,r.currentTime+n/1e3),l.start(r.currentTime),l.stop(r.currentTime+n/1e3)}catch{}}function Gw(){const a=ws["session-expired"];a&&a.src?tp("session-expired"):(fo(600,150),setTimeout(()=>fo(400,200),180))}function Iw(){const a=ws["queue-called"];a&&a.src?tp("queue-called"):(fo(400,150),setTimeout(()=>fo(600,200),180))}function Vw({isOpen:a=!1,debounceMs:n=300,limit:r=50,institutionId:l=null}={}){const[o,d]=y.useState([]),[f,m]=y.useState([]),[g,v]=y.useState(""),[b,w]=y.useState(!1),[S,x]=y.useState(null),[E,k]=y.useState(0),C=y.useRef(null),A=y.useRef(null),G=y.useCallback(async(W="")=>{w(!0),x(null);const K=async()=>{const T=new Promise((z,B)=>setTimeout(()=>B(new Error("Timeout: brugerlisten tog for lang tid")),2e4));return Promise.race([Wv(W,r,l),T])};try{let T;try{T=await K()}catch(z){console.warn("User search first attempt failed, retrying...",z.message),T=await K()}d(T),m(T),k(0)}catch(T){console.error("Error loading users:",T),x('Kunne ikke hente brugere. Tryk "Prv igen" eller luk og bn igen.'),d([]),m([])}finally{w(!1)}},[r,l]);y.useEffect(()=>{a&&(G(""),v(""),k(0))},[a,G]),y.useEffect(()=>{if(a)return C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{g.trim()?G(g):G("")},n),()=>{C.current&&clearTimeout(C.current)}},[g,a,n,G]),y.useEffect(()=>{if(!g.trim()){m(o);return}const W=g.toLowerCase().trim(),K=o.filter(T=>{const z=(T.nickname||T.name||"").toLowerCase(),B=(T.number||"").toString().toLowerCase(),J=T.gradeLevel!=null?`${T.gradeLevel}.`:"";return z.includes(W)||B.includes(W)||J.includes(W)});K.sort((T,z)=>{const B=(T.nickname||T.name||"").toLowerCase(),J=(z.nickname||z.name||"").toLowerCase(),O=B.startsWith(W),F=J.startsWith(W);return O&&!F?-1:!O&&F?1:B.localeCompare(J,"da")}),m(K),k(0)},[g,o]);const N=y.useCallback((W,K,T)=>{switch(W.key){case"ArrowDown":W.preventDefault(),k(z=>Math.min(z+1,f.length-1));break;case"ArrowUp":W.preventDefault(),k(z=>Math.max(z-1,0));break;case"Enter":W.preventDefault(),f[E]?K?.(f[E]):g.trim()&&K?.({name:g.trim(),id:null,isManual:!0});break;case"Escape":W.preventDefault(),T?.();break}},[f,E,g]);y.useEffect(()=>{if(A.current&&f.length>0){const W=A.current.querySelector(`[data-index="${E}"]`);W&&W.scrollIntoView({block:"nearest",behavior:"smooth"})}},[E,f.length]);const Q=y.useCallback(()=>{v(""),k(0),m(o)},[o]);return{users:o,filteredUsers:f,searchQuery:g,isLoading:b,error:S,selectedIndex:E,setSearchQuery:v,setSelectedIndex:k,loadUsers:G,handleKeyDown:N,reset:Q,listRef:A}}function Kw({isOpen:a,onClose:n,onSelectUser:r,onSelectManualEntry:l,placeholder:o="Indtast eller vlg bruger...",busyUsers:d={},institutionId:f=null,appSettings:m=null}){const[g,v]=y.useState(!1),[b,w]=y.useState(""),S=y.useRef(null),x=y.useRef(null),[E,k]=y.useState("name"),[C,A]=y.useState(!0),[G,N]=y.useState(new Set),{filteredUsers:Q,searchQuery:W,isLoading:K,error:T,selectedIndex:z,setSearchQuery:B,setSelectedIndex:J,handleKeyDown:O,loadUsers:F,listRef:se}=Vw({isOpen:a,debounceMs:300,limit:500,institutionId:f}),P=D=>{E===D?A(!C):(k(D),A(!0))},oe=m?.grade_filter_enabled&&m?.grade_filter_levels?.length>0,M=oe?[...m.grade_filter_levels].sort((D,L)=>D-L):[],$=D=>{N(L=>{const te=new Set(L);return te.has(D)?te.delete(D):te.add(D),te})},Z=G.size>0?Q.filter(D=>D.gradeLevel!=null&&G.has(D.gradeLevel)):Q,V=[...Z].sort((D,L)=>{const te=D.flangoUserId||D.id,I=L.flangoUserId||L.id,re=!!(te&&d[te]),de=!!(I&&d[I]);if(re&&!de)return 1;if(!re&&de)return-1;const he=C?1:-1;switch(E){case"name":{const ve=(D.nickname||D.name||"").toLowerCase(),ke=(L.nickname||L.name||"").toLowerCase();return he*ve.localeCompare(ke,"da")}case"number":{const ve=D.number||"",ke=L.number||"";return he*ve.localeCompare(ke,"da",{numeric:!0})}case"nickname":{const ve=(D.nickname||"").toLowerCase(),ke=(L.nickname||"").toLowerCase();return!ve&&!ke?0:ve?ke?he*ve.localeCompare(ke,"da"):-1:1}case"grade":{const ve=D.gradeLevel??-1,ke=L.gradeLevel??-1;return he*(ve-ke)}case"balance":{const ve=D.balanceMinutes??0,ke=L.balanceMinutes??0;return he*(ve-ke)}default:return 0}});y.useEffect(()=>{if(a){const D=setTimeout(()=>{S.current&&S.current.focus()},100);return()=>clearTimeout(D)}else v(!1),w(""),N(new Set)},[a]);const fe=D=>{const L=D.nickname||D.name;r(L,D.flangoUserId||D.id),n()},j=D=>{D.preventDefault(),b.trim()&&(l(b.trim()),n())},H=D=>{O(D,L=>{const te=L.flangoUserId||L.id;te&&d[te]||(L.isManual?l(L.name):fe(L),n())},n)};return a?u.jsx("div",{className:"user-selector-overlay",onClick:n,children:u.jsxs("div",{className:"user-selector-modal",onClick:D=>D.stopPropagation(),children:[u.jsxs("div",{className:"user-selector-header",children:[u.jsxs("div",{className:"user-selector-header__left",children:[u.jsx("h3",{children:"Vlg bruger"}),u.jsx("span",{className:"user-selector-count",children:V.length})]}),oe&&u.jsx("div",{className:"user-selector-grade-filter",children:M.map(D=>u.jsxs("button",{type:"button",className:`user-selector-grade-chip ${G.has(D)?"user-selector-grade-chip--active":""}`,onClick:()=>$(D),children:[D,"."]},D))}),u.jsx("button",{className:"user-selector-close",onClick:n,"aria-label":"Luk",children:""})]}),T&&u.jsxs("div",{className:"user-selector-error",children:[T,u.jsx("button",{className:"user-selector-retry-btn",onClick:()=>F(W||""),children:"Prv igen"})]}),u.jsxs("div",{className:"user-selector-search",children:[u.jsx("input",{ref:S,type:"text",className:"user-selector-input",placeholder:"Sg efter navn, nummer eller klasse...",value:W,onChange:D=>B(D.target.value),onKeyDown:H}),K&&u.jsx("div",{className:"user-selector-loading",children:"Henter brugere..."})]}),g?u.jsx("div",{className:"user-selector-manual",children:u.jsxs("form",{onSubmit:j,children:[u.jsx("input",{ref:x,type:"text",className:"user-selector-input",placeholder:"Indtast brugerens navn...",value:b,onChange:D=>w(D.target.value),onKeyDown:D=>D.key==="Escape"&&n(),autoFocus:!0}),u.jsxs("div",{className:"user-selector-manual-actions",children:[u.jsx("button",{type:"submit",className:"user-selector-submit",disabled:!b.trim(),children:"Bekrft"}),u.jsx("button",{type:"button",className:"user-selector-cancel",onClick:()=>{v(!1),w(""),S.current&&S.current.focus()},children:"Tilbage til liste"})]})]})}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"user-selector-table-wrap",ref:se,children:Z.length>0?u.jsxs("table",{className:"user-selector-table",children:[u.jsx("thead",{children:u.jsx("tr",{children:[{key:"name",label:"Navn"},{key:"nickname",label:"Kaldenavn"},{key:"number",label:"Nr."},{key:"grade",label:"Klasse"},{key:"balance",label:"Saldo"}].map(D=>u.jsxs("th",{className:`user-selector-th ${E===D.key?"active":""}`,onClick:()=>P(D.key),children:[D.label,u.jsx("span",{className:"user-selector-th__arrow",children:E===D.key?C?" ":" ":""})]},D.key))})}),u.jsx("tbody",{children:V.map((D,L)=>{const te=D.flangoUserId||D.id,I=d[te],re=!!I;return u.jsxs("tr",{"data-index":L,className:`user-selector-row ${L===z&&!re?"selected":""} ${re?"user-selector-row--busy":""}`,onClick:()=>!re&&fe(D),onMouseEnter:()=>!re&&J(L),children:[u.jsx("td",{className:"user-selector-td user-selector-td--name",children:u.jsx("span",{className:re?"user-selector-name--busy":"",children:D.name})}),u.jsx("td",{className:"user-selector-td user-selector-td--nickname",children:D.nickname||""}),u.jsx("td",{className:"user-selector-td user-selector-td--number",children:D.number||""}),u.jsx("td",{className:"user-selector-td user-selector-td--grade",children:D.gradeLevel!=null?`${D.gradeLevel}.`:""}),u.jsx("td",{className:"user-selector-td user-selector-td--balance",children:re?u.jsxs("span",{className:"user-selector-busy-badge",children:["Spiller  ",I]}):u.jsxs("span",{children:[D.balanceMinutes??0," min"]})})]},te)})})]}):(W.trim()||G.size>0)&&!K?u.jsxs("div",{className:"user-selector-empty",children:["Ingen brugere fundet.",G.size>0&&u.jsx("button",{className:"user-selector-manual-link",onClick:()=>N(new Set),children:"Fjern rgangsfilter"}),u.jsx("button",{className:"user-selector-manual-link",onClick:()=>v(!0),children:"Indtast navn manuelt "})]}):null}),u.jsx("div",{className:"user-selector-footer",children:u.jsx("button",{className:"user-selector-manual-btn",onClick:()=>v(!0),children:"Indtast navn manuelt"})})]})]})}):null}const so="skaermtid_remembered_institution",Fc="skaermtid_remembered_email";function Yw({onLoginSuccess:a,suppressAuthEvents:n}){const[r,l]=y.useState(1),[o,d]=y.useState([]),[f,m]=y.useState(""),[g,v]=y.useState(""),[b,w]=y.useState(""),[S,x]=y.useState(!0),[E,k]=y.useState(!1),[C,A]=y.useState(""),[G,N]=y.useState(""),[Q,W]=y.useState(""),[K,T]=y.useState(!1),[z,B]=y.useState(!1),[J,O]=y.useState(null);y.useEffect(()=>{try{const $=localStorage.getItem(so);if($){const{id:V,name:fe}=JSON.parse($);V&&fe&&(m(V),w(fe),k(!0),l(2))}const Z=localStorage.getItem(Fc);Z&&(N(Z),T(!0))}catch{}},[]),y.useEffect(()=>{(async()=>{try{const{data:Z,error:V}=await me.rpc("get_public_institutions");if(V){const{data:fe,error:j}=await me.from("institutions").select("id, name").eq("is_active",!0).order("name");!j&&fe?d(fe):console.error("Failed to fetch institutions:",V,j)}else d(Z||[])}catch(Z){console.error("Error loading institutions:",Z)}finally{x(!1)}})()},[]);const F=async $=>{$.preventDefault(),O(null),B(!0);try{const Z=o.find(j=>j.id===f);if(!Z){O("Vlg venligst en institution.");return}const{data:V,error:fe}=await me.rpc("verify_club_login",{p_institution_id:Z.id,p_code:g.trim()});if(fe||V!==!0){O("Forkert klubkode. Prv igen, eller sprg en voksen i klubben.");return}w(Z.name),E?localStorage.setItem(so,JSON.stringify({id:Z.id,name:Z.name})):localStorage.removeItem(so),O(null),l(2)}catch(Z){console.error("Club login error:",Z),O("Noget gik galt. Prv igen.")}finally{B(!1)}},se=async $=>{$.preventDefault(),O(null),B(!0);try{const{data:Z,error:V}=await me.functions.invoke("operator-login",{body:{institution_id:f,operator_code:C.trim()}});if(V){const j=V.message||"Noget gik galt. Prv igen.";O(j);return}if(!Z?.hashed_token){O(Z?.error||"Forkert operatr-kode.");return}const{error:fe}=await me.auth.verifyOtp({token_hash:Z.hashed_token,type:"magiclink"});if(fe){console.error("OTP verification failed:",fe),O("Login fejlede. Prv igen.");return}hv(f),a?.()}catch(Z){console.error("Operator login error:",Z),O(Z.message||"Noget gik galt. Prv igen.")}finally{B(!1)}},P=async $=>{$.preventDefault(),O(null),B(!0),n&&(n.current=!0);try{const{data:Z,error:V}=await me.auth.signInWithPassword({email:G.trim(),password:Q});if(V)throw V;if(Z.user){if(Z.user.app_metadata?.role==="superadmin")throw await me.auth.signOut(),new Error("Superadmin-konti kan ikke logge ind her. Brug super-admin panelet.");const{data:fe,error:j}=await me.schema("gaming").from("admins").select("institution_id").eq("user_id",Z.user.id).maybeSingle();if(j||!fe?.institution_id)throw await me.auth.signOut(),new Error("Denne bruger har ikke admin-adgang til skrmtid.");if(fe.institution_id!==f){await me.auth.signOut();const D=o.find(L=>L.id===fe.institution_id)?.name||"en anden institution";throw new Error(`Denne admin-konto tilhrer "${D}" og kan ikke bruges til at logge ind p "${b}".`)}n&&(n.current=!1),hv(fe.institution_id),K?localStorage.setItem(Fc,G.trim()):localStorage.removeItem(Fc),a?.(Z.user)}}catch(Z){console.error("Login error:",Z),O(Z.message||"Login fejlede. Tjek email og password.")}finally{n&&(n.current=!1),B(!1)}},oe=()=>{O(null),r==="3a"||r==="3b"?(l(2),A(""),W("")):r===2&&(l(1),v(""),localStorage.removeItem(so),k(!1))},M=r===1?1:r===2?2:3;return u.jsxs("div",{className:"login-container",children:[u.jsx("div",{className:"login-glow-orb-bottom"}),u.jsxs("div",{className:"login-card",children:[u.jsxs("div",{className:"login-logo",children:[u.jsx("div",{className:"login-logo-icon",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),u.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),u.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),u.jsx("h1",{children:"Skrmtid"}),u.jsxs("p",{children:[r===1&&"Vlg institution og indtast klubkode",r===2&&"Vlg login-type",r==="3a"&&"Indtast operatr-kode",r==="3b"&&"Log ind med din administratorkonto"]})]}),u.jsxs("div",{className:"login-steps",children:[u.jsx("div",{className:`login-step-dot ${M>=1?M>1?"completed":"active":""}`}),u.jsx("div",{className:`login-step-connector ${M>=2?"completed":""}`}),u.jsx("div",{className:`login-step-dot ${M>=2?M>2?"completed":"active":""}`}),u.jsx("div",{className:`login-step-connector ${M>=3?"completed":""}`}),u.jsx("div",{className:`login-step-dot ${M>=3?"active":""}`})]}),J&&u.jsx("div",{className:"login-error",children:J}),r===1&&u.jsxs("form",{onSubmit:F,className:"login-form login-step-enter",children:[u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"institution-select",children:"Institution"}),u.jsxs("select",{id:"institution-select",value:f,onChange:$=>m($.target.value),disabled:z||S,required:!0,children:[u.jsx("option",{value:"",children:S?"Indlser...":"Vlg institution..."}),o.map($=>u.jsx("option",{value:$.id,children:$.name},$.id))]})]}),u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"club-code",children:"Klubkode"}),u.jsx("input",{id:"club-code",type:"password",inputMode:"numeric",maxLength:8,value:g,onChange:$=>v($.target.value.replace(/\D/g,"")),placeholder:"",required:!0,disabled:z,autoComplete:"off"})]}),u.jsxs("label",{className:"login-remember",children:[u.jsx("input",{type:"checkbox",checked:E,onChange:$=>k($.target.checked)}),u.jsx("span",{className:"login-remember-check"}),u.jsx("span",{children:"Husk mig p denne enhed"})]}),u.jsxs("button",{type:"submit",className:"login-btn login-btn--primary",disabled:z||!f||g.length<1,children:[z&&u.jsx("span",{className:"login-spinner"}),z?"Verificerer...":"Fortst"]})]},"step1"),r===2&&u.jsxs("div",{className:"login-step-enter",children:[u.jsxs("div",{className:"login-institution-badge",children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),u.jsx("span",{children:b})]}),u.jsxs("div",{className:"login-role-choice",children:[u.jsxs("button",{className:"login-role-btn login-role-btn--operator",onClick:()=>{O(null),l("3a")},children:[u.jsx("div",{className:"login-role-btn-icon",children:u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),u.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),u.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),u.jsxs("div",{className:"login-role-btn-text",children:[u.jsx("strong",{children:"Log ind som operatr"}),u.jsx("span",{children:"Betjen stationer med operatr-kode"})]})]}),u.jsxs("button",{className:"login-role-btn login-role-btn--admin",onClick:()=>{O(null),l("3b")},children:[u.jsx("div",{className:"login-role-btn-icon",children:u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),u.jsxs("div",{className:"login-role-btn-text",children:[u.jsx("strong",{children:"Log ind som admin"}),u.jsx("span",{children:"Fuld adgang med email og password"})]})]}),u.jsx("button",{type:"button",className:"login-btn login-btn--back",onClick:oe,children:"Tilbage"})]})]},"step2"),r==="3a"&&u.jsxs("div",{className:"login-step-enter",children:[u.jsxs("div",{className:"login-institution-badge",children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),u.jsx("span",{children:b})]}),u.jsxs("form",{onSubmit:se,className:"login-form",children:[u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"operator-code",children:"Operatr-kode"}),u.jsx("input",{id:"operator-code",type:"password",inputMode:"numeric",maxLength:8,value:C,onChange:$=>A($.target.value.replace(/\D/g,"")),placeholder:"",required:!0,autoFocus:!0,disabled:z,autoComplete:"off"})]}),u.jsxs("button",{type:"submit",className:"login-btn login-btn--primary",disabled:z||C.length<4,children:[z&&u.jsx("span",{className:"login-spinner"}),z?"Logger ind...":"Log ind"]}),u.jsx("button",{type:"button",className:"login-btn login-btn--back",onClick:oe,disabled:z,children:"Tilbage"})]})]},"step3a"),r==="3b"&&u.jsxs("div",{className:"login-step-enter",children:[u.jsxs("div",{className:"login-institution-badge",children:[u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),u.jsx("span",{children:b})]}),u.jsxs("form",{onSubmit:P,className:"login-form",children:[u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"email",children:"Email"}),u.jsx("input",{id:"email",type:"email",value:G,onChange:$=>N($.target.value),placeholder:"admin@institution.dk",required:!0,autoFocus:!0,disabled:z})]}),u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"password",children:"Password"}),u.jsx("input",{id:"password",type:"password",value:Q,onChange:$=>W($.target.value),placeholder:"",required:!0,disabled:z})]}),u.jsxs("label",{className:"login-remember",children:[u.jsx("input",{type:"checkbox",checked:K,onChange:$=>T($.target.checked)}),u.jsx("span",{className:"login-remember-check"}),u.jsx("span",{children:"Husk mig p denne enhed"})]}),u.jsxs("button",{type:"submit",className:"login-btn login-btn--primary",disabled:z||!G.trim()||!Q,children:[z&&u.jsx("span",{className:"login-spinner"}),z?"Logger ind...":"Log ind"]}),u.jsx("button",{type:"button",className:"login-btn login-btn--back",onClick:oe,disabled:z,children:"Tilbage"})]})]},"step3b"),u.jsx("div",{className:"login-footer",children:u.jsxs("p",{children:[r===1&&"Brug klubkoden fra jeres institution til at komme videre.",r===2&&"Vlg hvordan du vil logge ind.",r==="3a"&&"Indtast den operatr-kode som din admin har oprettet.",r==="3b"&&"Log ind med din Flango stations-konto."]})})]})]})}function Qw({onPasswordChanged:a}){const[n,r]=y.useState(""),[l,o]=y.useState(""),[d,f]=y.useState(!1),[m,g]=y.useState(null),v=async b=>{if(b.preventDefault(),g(null),n.length<6){g("Adgangskoden skal vre mindst 6 tegn.");return}if(n!==l){g("Adgangskoderne er ikke ens.");return}f(!0);try{const{error:w}=await me.auth.updateUser({password:n});if(w)throw w;const{error:S}=await me.auth.updateUser({data:{must_change_password:!1}});if(S)throw S;a?.()}catch(w){g(w.message||"Kunne ikke skifte adgangskode.")}finally{f(!1)}};return u.jsx("div",{className:"login-container",children:u.jsxs("div",{className:"login-card",children:[u.jsxs("div",{className:"login-logo",children:[u.jsx("h1",{children:"Vlg ny adgangskode"}),u.jsx("p",{children:"Du skal vlge en personlig adgangskode fr du fortstter."})]}),m&&u.jsx("div",{className:"login-error",children:m}),u.jsxs("form",{onSubmit:v,className:"login-form",children:[u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"new-password",children:"Ny adgangskode"}),u.jsx("input",{id:"new-password",type:"password",value:n,onChange:b=>r(b.target.value),placeholder:"Mindst 6 tegn",required:!0,autoFocus:!0,disabled:d})]}),u.jsxs("div",{className:"login-field",children:[u.jsx("label",{htmlFor:"confirm-password",children:"Bekrft adgangskode"}),u.jsx("input",{id:"confirm-password",type:"password",value:l,onChange:b=>o(b.target.value),placeholder:"Gentag adgangskode",required:!0,disabled:d})]}),u.jsx("button",{type:"submit",className:"login-btn login-btn--primary",disabled:d||!n||!l,children:d?"Gemmer...":"Gem adgangskode"})]})]})})}const ro={skaermtid_enabled:!1,skaermtid_show_usage:!0,skaermtid_show_remaining:!0,skaermtid_show_rules:!0,skaermtid_allow_personal_limits:!1,skaermtid_allow_extra_time_requests:!1,skaermtid_allow_game_approval:!1};async function mv(){try{const a=await wa();if(!a)return{...ro};const{data:n,error:r}=await me.schema("gaming").from("portal_settings").select("*").eq("institution_id",a).maybeSingle();return r?(console.error("Error fetching portal settings:",r),{...ro}):{...ro,...n||{}}}catch(a){return console.error("Error in getPortalSettings:",a),{...ro}}}async function Pw(a){try{const n=await wa();if(!n)return!1;const{error:r}=await me.schema("gaming").from("portal_settings").upsert({institution_id:n,...a,updated_at:new Date().toISOString()},{onConflict:"institution_id"});return r?(console.error("Error updating portal settings:",r),!1):!0}catch(n){return console.error("Error in updatePortalSettings:",n),!1}}function Xw(a,n){const r=[];if(n.type){const l=Array.isArray(a)?"array":typeof a;if(l!==n.type)return r.push(`Forventede ${n.type}, fik ${l}`),{valid:!1,errors:r}}if(n.required&&(a==null||a===""))return r.push("Feltet er pkrvet"),{valid:!1,errors:r};if(typeof a=="number"&&(n.min!==void 0&&a<n.min&&r.push(`Vrdien skal vre mindst ${n.min}`),n.max!==void 0&&a>n.max&&r.push(`Vrdien m hjst vre ${n.max}`),n.integer&&!Number.isInteger(a)&&r.push("Vrdien skal vre et heltal")),typeof a=="string"&&(n.minLength!==void 0&&a.length<n.minLength&&r.push(`Skal vre mindst ${n.minLength} tegn`),n.maxLength!==void 0&&a.length>n.maxLength&&r.push(`M hjst vre ${n.maxLength} tegn`),n.pattern&&!n.pattern.test(a)&&r.push(n.patternMessage||"Ugyldigt format"),n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&r.push("Ugyldig email-adresse")),n.enum&&!n.enum.includes(a)&&r.push(`Ugyldig vrdi. Tilladt: ${n.enum.join(", ")}`),n.custom){const l=n.custom(a);l&&r.push(l)}return{valid:r.length===0,errors:r}}function Jw(a,n){const r={};let l=!0;for(const[o,d]of Object.entries(n)){const f=Xw(a[o],d);f.valid||(l=!1,r[o]=f.errors)}return{valid:l,errors:r}}const Zw={settings:{default_balance_minutes:{type:"number",min:0,max:480,integer:!0},max_session_minutes:{type:"number",min:1,max:120,integer:!0},auto_reset_time:{type:"string",pattern:/^\d{2}:\d{2}(:\d{2})?$/,patternMessage:"Tid skal vre i format HH:MM eller HH:MM:SS"},queue_attendance_timeout_seconds:{type:"number",min:30,max:900,integer:!0}}};function Ww(a){return Jw(a,Zw.settings)}async function Fw(a,n){try{const{data:r,error:l}=await me.rpc("rotate_operator_code",{p_institution_id:a,p_code:n||null});return l?(console.error("Error rotating operator code:",l),{error:l.message||"Kunne ikke generere operatr-kode."}):{code:r}}catch(r){return console.error("Error in rotateOperatorCode:",r),{error:r.message||"Uventet fejl."}}}async function eS(a){try{const{error:n}=await me.rpc("disable_operator_login",{p_institution_id:a});return n?(console.error("Error disabling operator login:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in disableOperatorLogin:",n),{success:!1,error:n.message}}}async function tS(){try{const{data:a,error:n}=await me.schema("gaming").from("game_catalog").select("*").order("display_order",{ascending:!0});return n?(console.error("Error fetching game catalog:",n),[]):a||[]}catch(a){return console.error("Error in fetchGameCatalog:",a),[]}}async function nS({name:a,category:n="both"}){try{const r=await wa();if(!r)return null;const{data:l}=await me.schema("gaming").from("game_catalog").select("display_order").order("display_order",{ascending:!1}).limit(1),o=l&&l.length>0?l[0].display_order+1:0,{data:d,error:f}=await me.schema("gaming").from("game_catalog").insert({institution_id:r,name:a,category:n,display_order:o}).select().single();return f?(f.code==="23505"&&console.error("Game name already exists:",a),console.error("Error creating game:",f),null):d}catch(r){return console.error("Error in createGame:",r),null}}async function aS(a,n){try{const r={updated_at:new Date().toISOString()};n.name!==void 0&&(r.name=n.name),n.category!==void 0&&(r.category=n.category),n.is_active!==void 0&&(r.is_active=n.is_active),n.display_order!==void 0&&(r.display_order=n.display_order);const{error:l}=await me.schema("gaming").from("game_catalog").update(r).eq("id",a);return l?(console.error("Error updating game:",l),!1):!0}catch(r){return console.error("Error in updateGame:",r),!1}}async function sS(a){try{const{error:n}=await me.schema("gaming").from("game_catalog").delete().eq("id",a);return n?(console.error("Error deleting game:",n),!1):!0}catch(n){return console.error("Error in deleteGame:",n),!1}}function rS({isOpen:a,onClose:n}){const[r,l]=y.useState([]),[o,d]=y.useState(!0),[f,m]=y.useState(""),[g,v]=y.useState("both"),[b,w]=y.useState(!1);y.useEffect(()=>{a&&S()},[a]);const S=async()=>{d(!0);const A=await tS();l(A),d(!1)},x=async()=>{if(!f.trim())return;const A=await nS({name:f.trim(),category:g});A&&(l(G=>[...G,A]),m(""),v("both"),w(!1))},E=async A=>{await aS(A.id,{is_active:!A.is_active})&&l(N=>N.map(Q=>Q.id===A.id?{...Q,is_active:!Q.is_active}:Q))},k=async A=>{if(!confirm(`Slet "${A.name}" fra kataloget?`))return;await sS(A.id)&&l(N=>N.filter(Q=>Q.id!==A.id))};if(!a)return null;const C=A=>{switch(A){case"pc":return"PC";case"console":return"Konsol";default:return"Begge"}};return u.jsx("div",{className:"gc-overlay",onClick:n,children:u.jsxs("div",{className:"gc-panel",onClick:A=>A.stopPropagation(),children:[u.jsxs("div",{className:"gc-header",children:[u.jsx("h2",{className:"gc-title",children:"Spilkatalog"}),u.jsx("button",{className:"gc-close",onClick:n,children:""})]}),u.jsx("p",{className:"gc-description",children:"Spil i kataloget kan godkendes eller blokeres af forldre via forldreportalen."}),o?u.jsx("div",{className:"gc-loading",children:"Indlser..."}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"gc-list",children:r.length===0?u.jsx("div",{className:"gc-empty",children:"Ingen spil i kataloget endnu."}):r.map(A=>u.jsxs("div",{className:`gc-item ${A.is_active?"":"gc-item--inactive"}`,children:[u.jsxs("div",{className:"gc-item-info",children:[u.jsx("span",{className:"gc-item-name",children:A.name}),u.jsx("span",{className:"gc-item-category",children:C(A.category)})]}),u.jsxs("div",{className:"gc-item-actions",children:[u.jsx("button",{className:`gc-toggle ${A.is_active?"gc-toggle--active":""}`,onClick:()=>E(A),title:A.is_active?"Deaktivr":"Aktivr",children:A.is_active?"Aktiv":"Inaktiv"}),u.jsx("button",{className:"gc-delete",onClick:()=>k(A),title:"Slet spil",children:""})]})]},A.id))}),b?u.jsxs("div",{className:"gc-add-form",children:[u.jsx("input",{type:"text",className:"gc-input",value:f,onChange:A=>m(A.target.value),placeholder:"Spilnavn...",autoFocus:!0,onKeyDown:A=>A.key==="Enter"&&x()}),u.jsxs("select",{className:"gc-select",value:g,onChange:A=>v(A.target.value),children:[u.jsx("option",{value:"both",children:"Begge"}),u.jsx("option",{value:"pc",children:"PC"}),u.jsx("option",{value:"console",children:"Konsol"})]}),u.jsxs("div",{className:"gc-add-actions",children:[u.jsx("button",{className:"gc-btn gc-btn--save",onClick:x,children:"Tilfj"}),u.jsx("button",{className:"gc-btn gc-btn--cancel",onClick:()=>{w(!1),m("")},children:"Annullr"})]})]}):u.jsx("button",{className:"gc-btn gc-btn--add",onClick:()=>w(!0),children:"+ Tilfj spil"})]})]})})}async function np(a){const{data:n,error:r}=await me.schema("gaming").from("users").select("id, flango_user_id, name, number, grade_level, nickname, balance_minutes, source, is_test_user, created_at").eq("institution_id",a).order("name");if(r)throw r;return n}async function iS(a,n,r,l){const{data:o,error:d}=await me.rpc("create_gaming_user",{p_institution_id:a,p_name:n,p_number:r||null,p_is_test_user:!1});if(d)throw d;return o}async function yd(a,n,r){const{data:l,error:o}=await me.rpc("update_gaming_user",{p_institution_id:a,p_user_id:n,p_name:r.name??null,p_number:r.number??null,p_grade_level:r.grade_level??null,p_nickname:r.nickname??null,p_balance_minutes:r.balance_minutes??null});if(o)throw o;return l}async function lS(a,n){const{error:r}=await me.rpc("delete_gaming_user",{p_institution_id:a,p_user_id:n});if(r)throw r}async function oS(a,n){const{data:r,error:l}=await me.rpc("bulk_create_gaming_users",{p_institution_id:a,p_users:n});if(l)throw l;return r}async function uS(a){const{data:n,error:r}=await me.rpc("delete_all_institution_users",{p_institution_id:a,p_target:"skaermtid"});if(r)throw r;return n}async function cS(a){const{data:n,error:r}=await me.from("institution_apps").select("is_enabled").eq("institution_id",a).eq("app_name","cafe").eq("is_enabled",!0).maybeSingle();return r?!1:!!n}async function dS(a){const{data:n,error:r}=await me.schema("gaming").rpc("get_sync_diff",{p_institution_id:a});if(r)throw r;return n}async function hS(a){const{data:n,error:r}=await me.schema("gaming").rpc("sync_from_cafe",{p_institution_id:a});if(r)throw r;return n}function fS({isOpen:a,onClose:n,institutionId:r,onSyncComplete:l}){const[o,d]=y.useState(null),[f,m]=y.useState(!0),[g,v]=y.useState(!1),[b,w]=y.useState(null),[S,x]=y.useState(null);y.useEffect(()=>{!a||!r||(m(!0),x(null),w(null),d(null),dS(r).then(C=>d(C)).catch(C=>x(C.message)).finally(()=>m(!1)))},[a,r]);const E=async()=>{v(!0),x(null);try{const C=await hS(r);w(C),l?.()}catch(C){x(C.message)}finally{v(!1)}};if(!a)return null;const k=o&&(o.to_create.length>0||o.to_update.length>0);return u.jsx("div",{className:"sm-overlay",onClick:n,children:u.jsxs("div",{className:"sm-modal",onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{className:"sm-header",children:[u.jsx("h2",{children:"Synkroniser fra Cafe"}),u.jsx("button",{className:"sm-close",onClick:n,"aria-label":"Luk",children:""})]}),u.jsxs("div",{className:"sm-content",children:[f&&u.jsx("p",{className:"sm-loading",children:"Sammenligner brugerlister..."}),S&&u.jsx("div",{className:"sm-error",children:S}),o&&!b&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"sm-summary",children:[u.jsxs("span",{children:["Cafe-brugere: ",u.jsx("strong",{children:o.summary.total_cafe_users})]}),u.jsxs("span",{children:["Skaermtid-brugere: ",u.jsx("strong",{children:o.summary.total_gaming_users})]})]}),o.to_create.length>0&&u.jsxs("div",{className:"sm-section sm-section--create",children:[u.jsxs("h3",{children:["Nye brugere (",o.to_create.length,")"]}),u.jsx("p",{className:"sm-section-help",children:"Disse brugere findes i cafe-systemet men ikke i skaermtid endnu."}),u.jsxs("table",{className:"sm-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Navn"}),u.jsx("th",{children:"Nr."}),u.jsx("th",{children:"Klasse"})]})}),u.jsx("tbody",{children:o.to_create.map(C=>u.jsxs("tr",{children:[u.jsx("td",{children:C.name}),u.jsx("td",{children:C.number||"-"}),u.jsx("td",{children:C.grade_level!=null?`${C.grade_level}. kl`:"-"})]},C.public_user_id))})]})]}),o.to_update.length>0&&u.jsxs("div",{className:"sm-section sm-section--update",children:[u.jsxs("h3",{children:["Opdateringer (",o.to_update.length,")"]}),u.jsx("p",{className:"sm-section-help",children:"Disse brugere har aendrede felter i cafe-systemet."}),u.jsxs("table",{className:"sm-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Felt"}),u.jsx("th",{children:"Nuvaerende"}),u.jsx("th",{}),u.jsx("th",{children:"Ny"})]})}),u.jsx("tbody",{children:o.to_update.map(C=>u.jsxs(u.Fragment,{children:[C.name_changed&&u.jsxs("tr",{children:[u.jsx("td",{children:"Navn"}),u.jsx("td",{className:"sm-old",children:C.current_name}),u.jsx("td",{className:"sm-arrow",children:""}),u.jsx("td",{className:"sm-new",children:C.new_name})]},`${C.gaming_user_id}-name`),C.number_changed&&u.jsxs("tr",{children:[u.jsx("td",{children:"Nr."}),u.jsx("td",{className:"sm-old",children:C.current_number||"-"}),u.jsx("td",{className:"sm-arrow",children:""}),u.jsx("td",{className:"sm-new",children:C.new_number||"-"})]},`${C.gaming_user_id}-number`),C.grade_level_changed&&u.jsxs("tr",{children:[u.jsx("td",{children:"Klasse"}),u.jsx("td",{className:"sm-old",children:C.current_grade_level!=null?`${C.current_grade_level}.`:"-"}),u.jsx("td",{className:"sm-arrow",children:""}),u.jsx("td",{className:"sm-new",children:C.new_grade_level!=null?`${C.new_grade_level}.`:"-"})]},`${C.gaming_user_id}-grade`)]}))})]})]}),o.orphaned.length>0&&u.jsxs("div",{className:"sm-section sm-section--orphaned",children:[u.jsxs("h3",{children:["Kun i Skaermtid (",o.orphaned.length,")"]}),u.jsx("p",{className:"sm-section-help",children:"Disse brugere er linket til cafe men findes ikke laengere der."}),u.jsx("ul",{className:"sm-orphan-list",children:o.orphaned.map(C=>u.jsxs("li",{children:[C.name," ",C.number?`(#${C.number})`:""]},C.gaming_user_id))})]}),!k&&o.orphaned.length===0&&u.jsx("div",{className:"sm-up-to-date",children:"Brugerlisten er ajour med cafe-systemet."}),u.jsx("p",{className:"sm-notice",children:"Balance og kaldenavne berores ikke ved synkronisering."}),u.jsxs("div",{className:"sm-actions",children:[u.jsx("button",{className:"um-btn-secondary",onClick:n,children:"Luk"}),k&&u.jsx("button",{className:"um-btn-primary",onClick:E,disabled:g,children:g?"Synkroniserer...":`Synkroniser nu (${o.to_create.length+o.to_update.length} aendringer)`})]})]}),b&&u.jsxs("div",{className:"sm-result",children:[u.jsx("h3",{children:"Synkronisering faerdig"}),u.jsxs("div",{className:"sm-result-grid",children:[u.jsxs("div",{className:"sm-result-item sm-result-item--create",children:[u.jsx("span",{className:"sm-result-count",children:b.created}),u.jsx("span",{className:"sm-result-label",children:"oprettet"})]}),u.jsxs("div",{className:"sm-result-item sm-result-item--update",children:[u.jsx("span",{className:"sm-result-count",children:b.updated}),u.jsx("span",{className:"sm-result-label",children:"opdateret"})]}),b.orphaned>0&&u.jsxs("div",{className:"sm-result-item sm-result-item--orphaned",children:[u.jsx("span",{className:"sm-result-count",children:b.orphaned}),u.jsx("span",{className:"sm-result-label",children:"kun i skaermtid"})]})]}),u.jsx("div",{className:"sm-actions",children:u.jsx("button",{className:"um-btn-primary",onClick:n,children:"Luk"})})]})]})]})})}function pi({label:a,field:n,sortField:r,sortDirection:l,onSort:o}){const d=r===n;return u.jsxs("th",{onClick:()=>o(n),style:{cursor:"pointer",userSelect:"none",whiteSpace:"nowrap"},children:[a," ",d?l==="asc"?"":"":u.jsx("span",{style:{opacity:.3},children:""})]})}function mS(a,n,r){return n?[...a].sort((l,o)=>{let d=l[n],f=o[n];return d==null&&f==null?0:d==null?1:f==null?-1:typeof d=="number"&&typeof f=="number"?r==="asc"?d-f:f-d:(d=String(d).toLowerCase(),f=String(f).toLowerCase(),d<f?r==="asc"?-1:1:d>f?r==="asc"?1:-1:0)}):a}function gS({isOpen:a,onClose:n,institutionId:r}){const[l,o]=y.useState([]),[d,f]=y.useState(!0),[m,g]=y.useState("name"),[v,b]=y.useState("asc"),[w,S]=y.useState(!1),[x,E]=y.useState(!1),[k,C]=y.useState(!1),[A,G]=y.useState(null),[N,Q]=y.useState(null),[W,K]=y.useState(null),[T,z]=y.useState(15),[B,J]=y.useState(!1),[O,F]=y.useState(!1),[se,P]=y.useState(!1),[oe,M]=y.useState(!1),Z={sortField:m,sortDirection:v,onSort:L=>{m===L?b(te=>te==="asc"?"desc":"asc"):(g(L),b("asc"))}},V=async()=>{if(r){f(!0);try{const L=await np(r);o(L||[])}catch(L){console.error("Failed to load users:",L)}finally{f(!1)}}};y.useEffect(()=>{a&&(V(),r&&cS(r).then(P))},[a,r]);const fe=async(L,te)=>{if(confirm(`Slet skrmtid-bruger "${te}"?`)){Q(L);try{await lS(r,L),V()}catch(I){alert("Fejl: "+I.message)}finally{Q(null)}}},j=async()=>{if(!(!W||T<=0)){J(!0);try{const L=(W.balance_minutes??0)+T;await yd(r,W.id,{name:W.name,balance_minutes:L}),K(null),z(15),V()}catch(L){alert("Fejl: "+L.message)}finally{J(!1)}}},H=async L=>{if(confirm(`Nulstil saldo for "${L.name}" til standard?`))try{if(L.flango_user_id)await pd(L.flango_user_id);else{const I=(await xi())?.default_balance_minutes??30;await yd(r,L.id,{name:L.name,balance_minutes:I})}V()}catch(te){alert("Fejl: "+te.message)}},D=async()=>{if(confirm("Nulstil saldo for ALLE brugere til standard?")){F(!0);try{await pd(null),V()}catch(L){alert("Fejl: "+L.message)}finally{F(!1)}}};return a?u.jsx("div",{className:"um-overlay",onClick:n,children:u.jsxs("div",{className:"um-modal",onClick:L=>L.stopPropagation(),children:[u.jsxs("div",{className:"um-header",children:[u.jsx("h2",{children:"Skrmtid-brugere"}),u.jsx("button",{className:"um-close",onClick:n,children:""})]}),u.jsx("div",{className:"um-content",children:d?u.jsx("p",{className:"um-loading",children:"Indlser..."}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"um-actions",children:[u.jsx("button",{className:"um-btn um-btn-primary",onClick:()=>S(!0),children:"+ Ny bruger"}),u.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>E(!0),children:"Importr CSV"}),se&&u.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>M(!0),children:"Synkroniser fra caf"}),u.jsx("button",{className:"um-btn um-btn-secondary",onClick:D,disabled:O,children:O?"Nulstiller...":"Nulstil alle saldoer"}),u.jsx("button",{className:"um-btn um-btn-danger",onClick:()=>C(!0),children:"Slet alle"})]}),u.jsx("div",{className:"um-table-wrap",children:u.jsxs("table",{className:"um-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx(pi,{label:"Navn",field:"name",...Z}),u.jsx(pi,{label:"Nr",field:"number",...Z}),u.jsx(pi,{label:"Klasse",field:"grade_level",...Z}),u.jsx(pi,{label:"Kaldenavn",field:"nickname",...Z}),u.jsx(pi,{label:"Balance",field:"balance_minutes",...Z}),u.jsx("th",{children:"Kilde"}),u.jsx("th",{})]})}),u.jsxs("tbody",{children:[mS(l,m,v).map(L=>u.jsxs("tr",{children:[u.jsx("td",{children:L.name}),u.jsx("td",{children:L.number||"-"}),u.jsx("td",{children:L.grade_level!=null?`${L.grade_level}. kl`:"-"}),u.jsx("td",{children:L.nickname||"-"}),u.jsxs("td",{children:[L.balance_minutes," min"]}),u.jsx("td",{children:u.jsx("span",{className:`um-badge ${L.source}`,children:L.source==="cafe_sync"?"caf":"lokal"})}),u.jsxs("td",{className:"um-action-col",children:[u.jsx("button",{className:"um-btn-sm",onClick:()=>{K(L),z(15)},children:"Optank"}),u.jsx("button",{className:"um-btn-sm",onClick:()=>H(L),children:"Nulstil"}),u.jsx("button",{className:"um-btn-sm",onClick:()=>G(L),children:"Rediger"}),u.jsx("button",{className:"um-btn-sm danger",onClick:()=>fe(L.id,L.name),disabled:N===L.id,children:N===L.id?"...":"Slet"})]})]},L.id)),l.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"7",className:"um-empty",children:"Ingen brugere"})})]})]})})]})}),w&&u.jsx(vS,{institutionId:r,onClose:()=>S(!1),onCreated:V}),x&&u.jsx(yS,{institutionId:r,onClose:()=>E(!1),onCreated:V}),k&&u.jsx(bS,{count:l.filter(L=>L.source==="standalone").length,onConfirm:async()=>{try{await uS(r),V()}catch(L){alert("Fejl: "+L.message)}C(!1)},onClose:()=>C(!1)}),A&&u.jsx(pS,{institutionId:r,user:A,onClose:()=>G(null),onSaved:()=>{G(null),V()}}),u.jsx(fS,{isOpen:oe,onClose:()=>M(!1),institutionId:r,onSyncComplete:V}),W&&u.jsx("div",{className:"um-sub-overlay",onClick:()=>K(null),children:u.jsxs("div",{className:"um-sub-modal",onClick:L=>L.stopPropagation(),children:[u.jsx("h3",{children:"Optank tid"}),u.jsxs("div",{className:"um-info",children:[u.jsx("p",{children:u.jsx("strong",{children:W.name})}),u.jsxs("p",{children:["Nuvrende saldo: ",u.jsxs("strong",{children:[W.balance_minutes??0," min"]})]})]}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Tilfj minutter"}),u.jsx("input",{type:"number",min:"1",value:T,onChange:L=>z(parseInt(L.target.value)||0),autoFocus:!0,onKeyDown:L=>{L.key==="Enter"&&j()}})]}),u.jsxs("div",{className:"um-modal-actions",children:[u.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>K(null),children:"Annuller"}),u.jsx("button",{className:"um-btn um-btn-primary",onClick:j,disabled:B||T<=0,children:B?"Tilfjer...":`+${T} min`})]})]})})]})}):null}function vS({institutionId:a,onClose:n,onCreated:r}){const[l,o]=y.useState(""),[d,f]=y.useState(""),[m,g]=y.useState(""),[v,b]=y.useState(!1),[w,S]=y.useState(null),x=async E=>{E.preventDefault(),b(!0),S(null);try{await iS(a,l.trim(),d.trim()||null,m?parseInt(m):null),r(),n()}catch(k){S(k.message)}finally{b(!1)}};return u.jsx("div",{className:"um-sub-overlay",onClick:n,children:u.jsxs("div",{className:"um-sub-modal",onClick:E=>E.stopPropagation(),children:[u.jsx("h3",{children:"Ny skrmtid-bruger"}),u.jsxs("form",{onSubmit:x,children:[w&&u.jsx("div",{className:"um-error",children:w}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Navn"}),u.jsx("input",{value:l,onChange:E=>o(E.target.value),autoFocus:!0,required:!0})]}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Nummer (valgfrit)"}),u.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"F.eks. 2501"})]}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Klasse (valgfrit)"}),u.jsx("input",{type:"number",value:m,onChange:E=>g(E.target.value),placeholder:"F.eks. 3",min:"0",max:"13"})]}),u.jsxs("div",{className:"um-modal-actions",children:[u.jsx("button",{type:"button",className:"um-btn um-btn-secondary",onClick:n,children:"Annuller"}),u.jsx("button",{type:"submit",className:"um-btn um-btn-primary",disabled:v,children:v?"Opretter...":"Opret"})]})]})]})})}function pS({institutionId:a,user:n,onClose:r,onSaved:l}){const[o,d]=y.useState(n.name||""),[f,m]=y.useState(n.number||""),[g,v]=y.useState(n.grade_level!=null?String(n.grade_level):""),[b,w]=y.useState(n.nickname||""),[S,x]=y.useState(String(n.balance_minutes??0)),[E,k]=y.useState(!1),[C,A]=y.useState(null),G=async N=>{if(N.preventDefault(),!o.trim()){A("Navn er pkrvet.");return}k(!0),A(null);try{await yd(a,n.id,{name:o.trim(),number:f.trim()||"",grade_level:g!==""?parseInt(g):null,nickname:b.trim()||"",balance_minutes:parseInt(S)||0}),l()}catch(Q){A(Q.message)}finally{k(!1)}};return u.jsx("div",{className:"um-sub-overlay",onClick:r,children:u.jsxs("div",{className:"um-sub-modal",onClick:N=>N.stopPropagation(),children:[u.jsx("h3",{children:"Rediger bruger"}),u.jsxs("form",{onSubmit:G,children:[C&&u.jsx("div",{className:"um-error",children:C}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Navn"}),u.jsx("input",{value:o,onChange:N=>d(N.target.value),autoFocus:!0,required:!0})]}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Nummer"}),u.jsx("input",{value:f,onChange:N=>m(N.target.value)})]}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Klasse"}),u.jsx("input",{type:"number",value:g,onChange:N=>v(N.target.value),min:"0",max:"13"})]}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Kaldenavn"}),u.jsx("input",{value:b,onChange:N=>w(N.target.value)})]}),u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Balance (minutter)"}),u.jsx("input",{type:"number",value:S,onChange:N=>x(N.target.value),min:"0"})]}),u.jsxs("div",{className:"um-modal-actions",children:[u.jsx("button",{type:"button",className:"um-btn um-btn-secondary",onClick:r,children:"Annuller"}),u.jsx("button",{type:"submit",className:"um-btn um-btn-primary",disabled:E,children:E?"Gemmer...":"Gem"})]})]})]})})}function yS({institutionId:a,onClose:n,onCreated:r}){const[l,o]=y.useState(null),[d,f]=y.useState(null),[m,g]=y.useState(!1),[v,b]=y.useState(!1),[w,S]=y.useState(null),[x,E]=y.useState(null),k=N=>{const Q=N.target.files[0];if(!Q)return;S(null),f(null);const W=new FileReader;W.onload=K=>{try{const T=K.target.result.split(/\r?\n/).filter(se=>se.trim());if(T.length<2){S("CSV skal have mindst en header og en data-linje.");return}const z=T[0].split(/[;,\t]/).map(se=>se.trim().toLowerCase()),B=z.findIndex(se=>["navn","name"].includes(se)),J=z.findIndex(se=>["klasse","class","grade_level","grade"].includes(se)),O=z.findIndex(se=>["nummer","number","nr"].includes(se));if(B===-1){S('CSV mangler en "navn" kolonne.');return}const F=[];for(let se=1;se<T.length;se++){const P=T[se].split(/[;,\t]/).map($=>$.trim()),oe=P[B];if(!oe)continue;const M={name:oe};if(J!==-1&&P[J]){const $=parseInt(P[J]);isNaN($)||(M.grade_level=$)}O!==-1&&P[O]&&(M.number=P[O]),F.push(M)}o(F),C(F)}catch{S("Kunne ikke parse CSV-filen.")}},W.readAsText(Q)},C=async N=>{g(!0);try{const Q=await np(a)||[],W=new Map;Q.forEach(B=>W.set(B.name.trim().toLowerCase(),B));const K=[],T=[],z=[];N.forEach(B=>{const J=B.name.trim().toLowerCase(),O=W.get(J);if(!O)K.push({csv:B});else{const F=[];B.grade_level!=null&&B.grade_level!==O.grade_level&&F.push({field:"klasse",from:O.grade_level!=null?`${O.grade_level}. kl`:"-",to:`${B.grade_level}. kl`}),B.number&&B.number!==O.number&&F.push({field:"nummer",from:O.number||"-",to:B.number}),F.length>0?T.push({csv:B,changes:F}):z.push({csv:B})}}),f({newUsers:K,updatedUsers:T,unchangedUsers:z})}catch(Q){S("Sammenligning fejlede: "+Q.message)}finally{g(!1)}},A=async()=>{b(!0),S(null);try{const N=await oS(a,l);E(N),r()}catch(N){S(N.message)}finally{b(!1)}},G=d&&(d.newUsers.length>0||d.updatedUsers.length>0);return u.jsx("div",{className:"um-sub-overlay",onClick:n,children:u.jsxs("div",{className:"um-sub-modal um-wide",onClick:N=>N.stopPropagation(),children:[u.jsx("h3",{children:"Importr CSV"}),w&&u.jsx("div",{className:"um-error",children:w}),x?u.jsxs("div",{children:[u.jsx("p",{children:"Import fuldfrt!"}),u.jsxs("div",{className:"um-info",children:[x.created>0&&u.jsxs("p",{children:["Oprettet: ",x.created]}),x.skipped>0&&u.jsxs("p",{children:["Sprunget over: ",x.skipped]})]}),u.jsx("button",{className:"um-btn um-btn-primary",onClick:n,children:"Luk"})]}):u.jsx(u.Fragment,{children:l?m?u.jsx("p",{children:"Sammenligner med database..."}):d?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"um-diff-summary",children:[u.jsxs("span",{className:"um-diff-new",children:[d.newUsers.length," nye"]}),u.jsxs("span",{className:"um-diff-update",children:[d.updatedUsers.length," opdateres"]}),u.jsxs("span",{className:"um-diff-unchanged",children:[d.unchangedUsers.length," undrede"]})]}),u.jsx("div",{className:"um-table-wrap",style:{maxHeight:"300px"},children:u.jsxs("table",{className:"um-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Navn"}),u.jsx("th",{children:"Klasse"}),l.some(N=>N.number)&&u.jsx("th",{children:"Nr"}),u.jsx("th",{children:"Status"})]})}),u.jsxs("tbody",{children:[d.updatedUsers.map((N,Q)=>u.jsxs("tr",{className:"um-row-update",children:[u.jsx("td",{children:N.csv.name}),u.jsx("td",{children:N.changes.find(W=>W.field==="klasse")?u.jsxs(u.Fragment,{children:[u.jsx("s",{children:N.changes.find(W=>W.field==="klasse").from}),"  ",u.jsx("strong",{children:N.changes.find(W=>W.field==="klasse").to})]}):N.csv.grade_level!=null?`${N.csv.grade_level}. kl`:"-"}),l.some(W=>W.number)&&u.jsx("td",{children:N.csv.number||"-"}),u.jsx("td",{children:u.jsx("span",{className:"um-status-update",children:"opdateres"})})]},`u-${Q}`)),d.newUsers.map((N,Q)=>u.jsxs("tr",{className:"um-row-new",children:[u.jsx("td",{children:N.csv.name}),u.jsx("td",{children:N.csv.grade_level!=null?`${N.csv.grade_level}. kl`:"-"}),l.some(W=>W.number)&&u.jsx("td",{children:N.csv.number||"-"}),u.jsx("td",{children:u.jsx("span",{className:"um-status-new",children:"ny"})})]},`n-${Q}`)),d.unchangedUsers.map((N,Q)=>u.jsxs("tr",{className:"um-row-unchanged",children:[u.jsx("td",{children:N.csv.name}),u.jsx("td",{children:N.csv.grade_level!=null?`${N.csv.grade_level}. kl`:"-"}),l.some(W=>W.number)&&u.jsx("td",{children:N.csv.number||"-"}),u.jsx("td",{children:u.jsx("span",{className:"um-status-unchanged",children:"undret"})})]},`c-${Q}`))]})]})}),u.jsxs("div",{className:"um-modal-actions",children:[u.jsx("button",{className:"um-btn um-btn-secondary",onClick:()=>{o(null),f(null)},children:"Vlg ny fil"}),u.jsx("button",{className:"um-btn um-btn-secondary",onClick:n,children:"Annuller"}),G?u.jsx("button",{className:"um-btn um-btn-primary",onClick:A,disabled:v,children:v?"Importerer...":`Importr (${d.newUsers.length} nye, ${d.updatedUsers.length} opdateringer)`}):u.jsx("button",{className:"um-btn um-btn-primary",disabled:!0,children:"Ingen ndringer"})]})]}):null:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"um-field",children:[u.jsx("label",{children:"Vlg CSV-fil (kolonner: navn, klasse)"}),u.jsx("input",{type:"file",accept:".csv,.txt,.tsv",onChange:k})]}),u.jsx("div",{className:"um-modal-actions",children:u.jsx("button",{className:"um-btn um-btn-secondary",onClick:n,children:"Annuller"})})]})})]})})}function bS({count:a,onConfirm:n,onClose:r}){const[l,o]=y.useState(""),[d,f]=y.useState(!1),m=async()=>{f(!0),await n(),f(!1)};return u.jsx("div",{className:"um-sub-overlay",onClick:r,children:u.jsxs("div",{className:"um-sub-modal",onClick:g=>g.stopPropagation(),children:[u.jsx("h3",{style:{color:"#ef4444"},children:"Slet alle skrmtid-brugere"}),u.jsxs("p",{children:["Er du sikker? ",u.jsx("strong",{children:a})," standalone-brugere slettes permanent."]}),u.jsx("p",{className:"um-warn",children:"Caf-synkede brugere berres ikke."}),u.jsxs("div",{className:"um-field",children:[u.jsxs("label",{children:["Skriv ",u.jsx("strong",{children:"SLET ALLE"})," for at bekrfte:"]}),u.jsx("input",{value:l,onChange:g=>o(g.target.value),placeholder:"SLET ALLE",autoFocus:!0,disabled:d})]}),u.jsxs("div",{className:"um-modal-actions",children:[u.jsx("button",{className:"um-btn um-btn-secondary",onClick:r,disabled:d,children:"Annuller"}),u.jsx("button",{className:"um-btn um-btn-danger",onClick:m,disabled:d||l!=="SLET ALLE",children:d?"Sletter...":`Slet ${a} brugere`})]})]})})}async function _S(a){const{data:n,error:r}=await me.schema("gaming").from("admins").select("id, user_id, name, email, created_at").eq("institution_id",a).order("name");if(r)throw r;return n}async function wS(a,n,r){const{data:l,error:o}=await me.functions.invoke("create-gaming-admin",{body:{institution_id:a,email:n,name:r}});if(o)throw o;if(l?.error)throw new Error(l.error);return l}async function SS(a,n,r){const{data:l,error:o}=await me.schema("gaming").from("admins").update({name:r}).eq("id",n).eq("institution_id",a).select().single();if(o)throw o;return l}async function xS(a,n,r){const{data:l,error:o}=await me.functions.invoke("update-admin-email",{body:{institution_id:a,admin_id:n,new_email:r}});if(o)throw o;if(l?.error)throw new Error(l.error);return l}async function jS(a,n){const{data:r,error:l}=await me.functions.invoke("reset-admin-password",{body:{user_id:n,institution_id:a}});if(l)throw l;if(r?.error)throw new Error(r.error);return r}async function ES(a,n){const{data:r,error:l}=await me.functions.invoke("delete-gaming-admin",{body:{admin_id:n,institution_id:a}});if(l)throw l;if(r?.error)throw new Error(r.error);return r}function TS({isOpen:a,onClose:n,institutionId:r}){const[l,o]=y.useState([]),[d,f]=y.useState(!0),[m,g]=y.useState(null),[v,b]=y.useState(null),[w,S]=y.useState(!1),[x,E]=y.useState(null),[k,C]=y.useState(null),[A,G]=y.useState(null),[N,Q]=y.useState(null),[W,K]=y.useState(null),[T,z]=y.useState(!1),[B,J]=y.useState(""),[O,F]=y.useState(""),[se,P]=y.useState(""),[oe,M]=y.useState("");y.useEffect(()=>{!a||!r||($(),me.auth.getUser().then(({data:D})=>{b(D?.user?.id||null)}))},[a,r]);const $=async()=>{f(!0),g(null);try{const D=await _S(r);o(D||[])}catch(D){g(D.message)}finally{f(!1)}},Z=()=>{S(!1),E(null),C(null),G(null),Q(null),K(null),z(!1),J(""),F(""),P(""),M("")},V=async()=>{if(!(!B.trim()||!O.trim())){z(!0),K(null);try{const D=await wS(r,O.trim(),B.trim());Q(D.temp_password),await $()}catch(D){K(D.message)}finally{z(!1)}}},fe=async()=>{if(se.trim()){z(!0),K(null);try{se.trim()!==x.name&&await SS(r,x.id,se.trim()),oe.trim()&&oe.trim()!==x.email&&await xS(r,x.id,oe.trim()),await $(),Z()}catch(D){K(D.message)}finally{z(!1)}}},j=async()=>{z(!0),K(null);try{const D=await jS(r,k.user_id);Q(D.temp_password),C(null)}catch(D){K(D.message)}finally{z(!1)}},H=async()=>{z(!0),K(null);try{await ES(r,A.id),await $(),Z()}catch(D){K(D.message)}finally{z(!1)}};return a?u.jsxs("div",{className:"am-overlay",onClick:n,children:[u.jsxs("div",{className:"am-modal",onClick:D=>D.stopPropagation(),children:[u.jsxs("div",{className:"am-header",children:[u.jsx("h2",{children:"Administrer admins"}),u.jsx("button",{className:"am-close",onClick:n,"aria-label":"Luk",children:""})]}),u.jsxs("div",{className:"am-content",children:[m&&u.jsx("div",{className:"am-error",children:m}),u.jsx("div",{className:"am-toolbar",children:u.jsx("button",{className:"um-btn-primary",onClick:()=>{Z(),S(!0)},children:"+ Opret admin"})}),d?u.jsx("div",{className:"am-loading",children:"Indlaeser admins..."}):l.length===0?u.jsx("div",{className:"am-empty",children:"Ingen admins fundet. Opret den foerste admin ovenfor."}):u.jsx("div",{className:"am-table-wrap",children:u.jsxs("table",{className:"am-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Navn"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Oprettet"}),u.jsx("th",{children:"Handlinger"})]})}),u.jsx("tbody",{children:l.map(D=>{const L=D.user_id===v;return u.jsxs("tr",{className:L?"am-self-row":"",children:[u.jsxs("td",{children:[D.name,L&&u.jsx("span",{className:"am-self-badge",children:"dig"})]}),u.jsx("td",{children:D.email||"-"}),u.jsx("td",{children:D.created_at?new Date(D.created_at).toLocaleDateString("da-DK"):"-"}),u.jsx("td",{children:u.jsxs("div",{className:"am-actions",children:[u.jsx("button",{className:"am-action-edit",onClick:()=>{Z(),P(D.name),M(D.email||""),E(D)},children:"Rediger"}),u.jsx("button",{className:"am-action-reset",onClick:()=>{Z(),C(D)},children:"Nulstil kode"}),!L&&u.jsx("button",{className:"am-action-delete",onClick:()=>{Z(),G(D)},children:"Slet"})]})})]},D.id)})})]})}),N&&u.jsxs("div",{className:"am-temp-password",children:[u.jsx("p",{children:"Midlertidig adgangskode"}),u.jsx("code",{children:N}),u.jsx("small",{children:"Kopier koden og giv den til admin. Den skal aendres ved foerste login."}),u.jsx("div",{className:"am-sub-actions",style:{justifyContent:"center",marginTop:"0.75rem"},children:u.jsx("button",{className:"um-btn-secondary",onClick:()=>Q(null),children:"Luk"})})]})]})]}),w&&!N&&u.jsx("div",{className:"am-sub-overlay",onClick:Z,children:u.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[u.jsx("h3",{children:"Opret ny admin"}),W&&u.jsx("div",{className:"am-error",children:W}),u.jsxs("div",{className:"am-field",children:[u.jsx("label",{children:"Navn"}),u.jsx("input",{type:"text",value:B,onChange:D=>J(D.target.value),placeholder:"Fulde navn",autoFocus:!0})]}),u.jsxs("div",{className:"am-field",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:O,onChange:D=>F(D.target.value),placeholder:"email@eksempel.dk"})]}),u.jsxs("div",{className:"am-sub-actions",children:[u.jsx("button",{className:"um-btn-secondary",onClick:Z,disabled:T,children:"Annuller"}),u.jsx("button",{className:"um-btn-primary",onClick:V,disabled:T||!B.trim()||!O.trim(),children:T?"Opretter...":"Opret admin"})]})]})}),x&&u.jsx("div",{className:"am-sub-overlay",onClick:Z,children:u.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[u.jsx("h3",{children:"Rediger admin"}),W&&u.jsx("div",{className:"am-error",children:W}),u.jsxs("div",{className:"am-field",children:[u.jsx("label",{children:"Navn"}),u.jsx("input",{type:"text",value:se,onChange:D=>P(D.target.value),autoFocus:!0})]}),u.jsxs("div",{className:"am-field",children:[u.jsx("label",{children:"Email"}),u.jsx("input",{type:"email",value:oe,onChange:D=>M(D.target.value)})]}),u.jsxs("div",{className:"am-sub-actions",children:[u.jsx("button",{className:"um-btn-secondary",onClick:Z,disabled:T,children:"Annuller"}),u.jsx("button",{className:"um-btn-primary",onClick:fe,disabled:T||!se.trim(),children:T?"Gemmer...":"Gem"})]})]})}),k&&!N&&u.jsx("div",{className:"am-sub-overlay",onClick:Z,children:u.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[u.jsx("h3",{children:"Nulstil adgangskode"}),W&&u.jsx("div",{className:"am-error",children:W}),u.jsxs("p",{className:"am-confirm-text",children:["Nulstil adgangskoden for ",u.jsx("strong",{children:k.name}),"?"]}),u.jsx("p",{className:"am-confirm-warn",children:"En ny midlertidig kode genereres som admin skal bruge ved naeste login."}),u.jsxs("div",{className:"am-sub-actions",children:[u.jsx("button",{className:"um-btn-secondary",onClick:Z,disabled:T,children:"Annuller"}),u.jsx("button",{className:"um-btn-primary",onClick:j,disabled:T,children:T?"Nulstiller...":"Nulstil kode"})]})]})}),A&&u.jsx("div",{className:"am-sub-overlay",onClick:Z,children:u.jsxs("div",{className:"am-sub-modal",onClick:D=>D.stopPropagation(),children:[u.jsx("h3",{children:"Slet admin"}),W&&u.jsx("div",{className:"am-error",children:W}),u.jsxs("p",{className:"am-confirm-text",children:["Er du sikker paa at du vil slette ",u.jsx("strong",{children:A.name}),"?"]}),u.jsx("p",{className:"am-confirm-warn",children:"Admin mister adgang til skaermtid og kan ikke logge ind laengere. Denne handling kan ikke fortrydes."}),u.jsxs("div",{className:"am-sub-actions",children:[u.jsx("button",{className:"um-btn-secondary",onClick:Z,disabled:T,children:"Annuller"}),u.jsx("button",{className:"um-btn-danger",onClick:H,disabled:T,children:T?"Sletter...":"Slet admin"})]})]})})]}):null}function kS({isOpen:a,onClose:n,institutionId:r=null,onOpenLayoutEditor:l,onSettingsSaved:o}){const[d,f]=y.useState(null),[m,g]=y.useState(!1),[v,b]=y.useState(!1),[w,S]=y.useState(null),[x,E]=y.useState(null),[k,C]=y.useState({}),[A,G]=y.useState(null),[N,Q]=y.useState(!1),[W,K]=y.useState({id:null,name:null}),[T,z]=y.useState(!1),[B,J]=y.useState(""),[O,F]=y.useState(""),[se,P]=y.useState(!1),[oe,M]=y.useState(null),[$,Z]=y.useState(!1),[V,fe]=y.useState(!1),[j,H]=y.useState(""),[D,L]=y.useState(!1),[te,I]=y.useState(!1),[re,de]=y.useState(!1),[he,ve]=y.useState(""),[ke,Ue]=y.useState(!1),[Me,Re]=y.useState(!1);y.useEffect(()=>{a&&(Oe(),S(null),E(null),C({}))},[a]);const Oe=async()=>{g(!0),S(null);try{const[ne,_e,je]=await Promise.all([xi(),mv(),Zv()]);if(ne?f(ne):S("Kunne ikke hente indstillinger"),G(_e??null),K(je??{id:null,name:null}),je?.id)try{const{data:Ke}=await me.from("institutions").select("login_code, operator_enabled").eq("id",je.id).single();M(Ke?.login_code||null),L(Ke?.operator_enabled===!0)}catch{}}catch(ne){console.error("Error loading settings:",ne),S("Fejl ved indlsning af indstillinger")}finally{g(!1)}},Be=async()=>{if(!d)return;const ne=Ww(d);if(!ne.valid){C(ne.errors),S("Ret venligst fejlene fr du gemmer");return}C({}),b(!0),S(null),E(null);try{const[_e,je]=await Promise.all([Dw(d),A?Pw(A):Promise.resolve(!0)]);if(_e&&je){E("Indstillinger gemt!");const Le=(await mv())?.skaermtid_enabled===!0;E(`Indstillinger gemt! ${Le?"Skrmtid i portalen er slet til (lst tilbage fra DB).":"Kontrol: Skrmtid i portalen lst tilbage som slet fra  tjek at Skrmtid bruger samme Supabase-projekt som forldreportalen (jbknjgbpghrbrstqwoxj)."}`),setTimeout(()=>E(null),8e3),o?.()}else S("Kunne ikke gemme indstillinger")}catch(_e){console.error("Error saving settings:",_e),S("Fejl ved gemning af indstillinger")}finally{b(!1)}},Ee=async()=>{if(B.length<6){S("Adgangskoden skal vre mindst 6 tegn.");return}if(B!==O){S("Adgangskoderne er ikke ens.");return}P(!0),S(null);try{const{error:ne}=await me.auth.updateUser({password:B});if(ne)throw ne;E("Admin-kode ndret!"),z(!1),J(""),F(""),setTimeout(()=>E(null),3e3)}catch(ne){S(ne.message||"Kunne ikke ndre adgangskode.")}finally{P(!1)}},De=async()=>{const ne=j.trim();if(!ne){S("Indtast en kode.");return}if(ne.length<4||ne.length>8){S("Koden skal vre mellem 4 og 8 tegn.");return}fe(!0),S(null);try{const{data:_e,error:je}=await me.rpc("rotate_invite_code",{p_institution_id:W.id,p_code:ne});if(je)throw je;M(ne),Z(!0),H(""),E("Institutionskode gemt!"),setTimeout(()=>E(null),3e3)}catch(_e){S(_e.message||"Kunne ikke gemme kode.")}finally{fe(!1)}},He=async()=>{if(!W.id)return;const ne=he.trim();if(!ne){S("Indtast en operatr-kode.");return}if(ne.length<4||ne.length>8){S("Operatr-koden skal vre mellem 4 og 8 tegn.");return}I(!0),S(null);try{const _e=await Fw(W.id,ne);_e.error?S(_e.error):(L(!0),ve(""),E("Operatr-kode gemt!"),setTimeout(()=>E(null),3e3))}catch(_e){S(_e.message||"Kunne ikke gemme operatr-kode.")}finally{I(!1)}},ge=async()=>{if(W.id&&D){de(!0),S(null);try{const ne=await eS(W.id);ne.error?S(ne.error):(L(!1),ve(""),E("Operatr-login deaktiveret."),setTimeout(()=>E(null),3e3))}catch(ne){S(ne.message||"Kunne ikke ndre operatr-status.")}finally{de(!1)}}},[pe,ye]=y.useState(null);y.useEffect(()=>{a&&ye(null)},[a]);const ze=[{key:"policy",icon:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("polyline",{points:"12 6 12 12 16 14"})]}),title:"Skrmtidspolitik",description:"Saldo, sessioner og automatisk nulstilling"},{key:"queue",icon:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),title:"K & Mdepligt",description:"Khndtering og mdepligtsregler"},{key:"display",icon:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),u.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),u.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),title:"Rum & Visning",description:"Titel, visning og lydeffekter"},...A?[{key:"portal",icon:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),u.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),title:"Portal Integration",description:"Forldreportal og spilkatalog"}]:[],{key:"users",icon:u.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),title:"Administrer brugere",description:"Brugere, saldoer og tidsoptankning",direct:!0},{key:"security",icon:u.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),title:"Adgang & Sikkerhed",description:"Koder, operatr-login og adgangskode"}],le=ze.find(ne=>ne.key===pe);if(!a)return null;const be=()=>{switch(pe){case"policy":return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Standard Saldo"}),u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:["Standard tid (minutter):",u.jsx("input",{type:"number",min:"0",max:"480",value:d.default_balance_minutes||30,onChange:ne=>f({...d,default_balance_minutes:parseInt(ne.target.value)||0}),className:k.default_balance_minutes?"input-error":""})]}),k.default_balance_minutes&&u.jsx("span",{className:"field-error",children:k.default_balance_minutes[0]})]})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Maksimal Session-lngde"}),u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:["Maksimal tid pr. session (minutter):",u.jsx("input",{type:"number",min:"1",max:"120",value:d.max_session_minutes||30,onChange:ne=>f({...d,max_session_minutes:parseInt(ne.target.value)||1}),className:k.max_session_minutes?"input-error":""})]}),k.max_session_minutes&&u.jsx("span",{className:"field-error",children:k.max_session_minutes[0]}),u.jsx("p",{className:"settings-help",children:"En session kan aldrig overstige denne tid, uanset brugerens saldo."})]})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Automatisk Nulstilling"}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.auto_reset_enabled||!1,onChange:ne=>f({...d,auto_reset_enabled:ne.target.checked})}),"Aktivr automatisk nulstilling"]})}),d.auto_reset_enabled&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:["Reset-tidspunkt (HH:MM):",u.jsx("input",{type:"time",value:d.auto_reset_time||"00:00",onChange:ne=>f({...d,auto_reset_time:ne.target.value+":00"})})]})}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:["Frekvens:",u.jsxs("select",{value:d.auto_reset_frequency||"daily",onChange:ne=>f({...d,auto_reset_frequency:ne.target.value}),children:[u.jsx("option",{value:"daily",children:"Dagligt"}),u.jsx("option",{value:"weekly",children:"Ugentligt"})]})]})}),d.auto_reset_frequency==="weekly"&&u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:["Ugedag:",u.jsxs("select",{value:d.auto_reset_weekday??0,onChange:ne=>f({...d,auto_reset_weekday:parseInt(ne.target.value)}),children:[u.jsx("option",{value:"0",children:"Sndag"}),u.jsx("option",{value:"1",children:"Mandag"}),u.jsx("option",{value:"2",children:"Tirsdag"}),u.jsx("option",{value:"3",children:"Onsdag"}),u.jsx("option",{value:"4",children:"Torsdag"}),u.jsx("option",{value:"5",children:"Fredag"}),u.jsx("option",{value:"6",children:"Lrdag"})]})]})})]})]}),u.jsx("div",{className:"settings-actions",children:u.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Be,disabled:v,children:v?"Gemmer...":"Gem indstillinger"})})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Mdepligt"}),u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.queue_attendance_enabled||!1,onChange:ne=>f({...d,queue_attendance_enabled:ne.target.checked})}),"Aktivr mdepligt"]}),u.jsx("p",{className:"settings-help",children:"Nr et barn er nste i ken og bliver kaldt, har de et tidsvindue til at mde op. Mder de ikke, mister de deres plads og ken rykker videre."})]}),d.queue_attendance_enabled&&u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:["Ventetid (sekunder):",u.jsx("input",{type:"number",min:"30",max:"900",value:d.queue_attendance_timeout_seconds||300,onChange:ne=>f({...d,queue_attendance_timeout_seconds:parseInt(ne.target.value)||300}),className:k.queue_attendance_timeout_seconds?"input-error":""})]}),k.queue_attendance_timeout_seconds&&u.jsx("span",{className:"field-error",children:k.queue_attendance_timeout_seconds[0]}),u.jsx("p",{className:"settings-help",children:"Hvor lang tid barnet har til at mde op (30-900 sekunder). Standard: 300 sekunder (5 minutter)."})]})]}),u.jsx("div",{className:"settings-actions",children:u.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Be,disabled:v,children:v?"Gemmer...":"Gem indstillinger"})})]});case"display":return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Rum & Visning"}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:["Rummets navn:",u.jsx("input",{type:"text",value:d.room_title||"",onChange:ne=>f({...d,room_title:ne.target.value}),placeholder:"Spillerummet",style:{width:"100%",padding:"0.75rem 1rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(0,217,255,0.3)",borderRadius:"6px",color:"var(--text-primary, #fff)",fontSize:"1rem"}})]})}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.show_room_title_dashboard!==!1,onChange:ne=>f({...d,show_room_title_dashboard:ne.target.checked})}),"Vis titel i kontrolpanelet"]})}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.show_room_title_viewmode!==!1,onChange:ne=>f({...d,show_room_title_viewmode:ne.target.checked})}),"Vis titel i View-tilstand"]})}),u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.sound_enabled!==!1,onChange:ne=>f({...d,sound_enabled:ne.target.checked})}),"Afspil lyde"]}),u.jsx("p",{className:"settings-help",children:"Lydeffekter ved session-udlb og k-kald."})]})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Puls-effekt (Glow)"}),u.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Den pulserende lyseffekt rundt om stationer. Styr styrke separat for kontrolpanel og TV-visning."}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.pulse_enabled_dashboard!==!1,onChange:ne=>f({...d,pulse_enabled_dashboard:ne.target.checked})}),"Vis puls i kontrolpanelet"]})}),d.pulse_enabled_dashboard!==!1&&u.jsx("div",{className:"settings-field",style:{paddingLeft:"1.5rem"},children:u.jsxs("label",{className:"settings-range-label",children:["Intensitet: ",u.jsxs("strong",{children:[d.pulse_intensity_dashboard??50,"%"]}),u.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:d.pulse_intensity_dashboard??50,onChange:ne=>f({...d,pulse_intensity_dashboard:parseInt(ne.target.value)}),className:"settings-range"})]})}),u.jsx("div",{className:"settings-field",style:{marginTop:"0.5rem"},children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.pulse_enabled_viewmode!==!1,onChange:ne=>f({...d,pulse_enabled_viewmode:ne.target.checked})}),"Vis puls i View-tilstand (TV)"]})}),d.pulse_enabled_viewmode!==!1&&u.jsx("div",{className:"settings-field",style:{paddingLeft:"1.5rem"},children:u.jsxs("label",{className:"settings-range-label",children:["Intensitet: ",u.jsxs("strong",{children:[d.pulse_intensity_viewmode??50,"%"]}),u.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:d.pulse_intensity_viewmode??50,onChange:ne=>f({...d,pulse_intensity_viewmode:parseInt(ne.target.value)}),className:"settings-range"})]})})]}),l&&u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Layout"}),u.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Placr og tilpas stationernes position og strrelse p dashboardet."}),u.jsxs("button",{className:"settings-btn settings-btn-secondary",onClick:l,style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),u.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),u.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Rediger layout"]})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"rgangsfilter"}),u.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Vis filtreringsknapper i brugervalg-dialogen, s man hurtigt kan filtrere efter klasse/rgang."}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:d.grade_filter_enabled||!1,onChange:ne=>f({...d,grade_filter_enabled:ne.target.checked})}),"Aktivr rgangsfilter"]})}),d.grade_filter_enabled&&u.jsxs("div",{className:"settings-grade-picker",children:[u.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.5rem"},children:"Vlg hvilke rgange der vises som filterknapper:"}),u.jsx("div",{className:"settings-grade-grid",children:[0,1,2,3,4,5,6,7,8,9,10].map(ne=>{const _e=d.grade_filter_levels||[],je=_e.includes(ne);return u.jsxs("label",{className:"settings-grade-option",children:[u.jsx("input",{type:"checkbox",checked:je,onChange:()=>{const Ke=je?_e.filter(Le=>Le!==ne):[..._e,ne].sort((Le,Ct)=>Le-Ct);f({...d,grade_filter_levels:Ke})}}),ne,". klasse"]},ne)})})]})]}),u.jsx("div",{className:"settings-actions",children:u.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Be,disabled:v,children:v?"Gemmer...":"Gem indstillinger"})})]});case"portal":return A?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"settings-section",children:[u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:A.skaermtid_enabled||!1,onChange:ne=>G({...A,skaermtid_enabled:ne.target.checked})}),"Aktivr Skrmtid i forldreportalen"]}),u.jsx("p",{className:"settings-help",children:"Gr det muligt for forldre at se og styre deres barns skrmtid via forldreportalen."})]}),A.skaermtid_enabled&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"settings-subsection",children:[u.jsx("h4",{children:"Forldre kan se:"}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:A.skaermtid_show_usage!==!1,onChange:ne=>G({...A,skaermtid_show_usage:ne.target.checked})}),"Forbrug (brugte minutter)"]})}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:A.skaermtid_show_remaining!==!1,onChange:ne=>G({...A,skaermtid_show_remaining:ne.target.checked})}),"Resterende tid"]})}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:A.skaermtid_show_rules!==!1,onChange:ne=>G({...A,skaermtid_show_rules:ne.target.checked})}),"Institutions-regler"]})})]}),u.jsxs("div",{className:"settings-subsection",children:[u.jsx("h4",{children:"Forldre kan gre:"}),u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:A.skaermtid_allow_personal_limits||!1,onChange:ne=>G({...A,skaermtid_allow_personal_limits:ne.target.checked})}),"St personlige grnser"]}),u.jsx("p",{className:"settings-help",children:"Forldre kan stte lavere grnser (aldrig over institutions-regler)."})]}),u.jsxs("div",{className:"settings-field",children:[u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:A.skaermtid_allow_extra_time_requests||!1,onChange:ne=>G({...A,skaermtid_allow_extra_time_requests:ne.target.checked})}),"Samtykke til forlnget spilletid"]}),u.jsx("p",{className:"settings-help",children:"Forldre kan vlge at give forudgende samtykke til, at personalet undtagelsesvis m forlnge deres barns spilletid. Samtykket giver ikke barnet ekstra rettigheder og udlser ikke automatiske forlngelser  det fungerer udelukkende som pdagogisk beslutningssttte for personalet."})]}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:[u.jsx("input",{type:"checkbox",checked:A.skaermtid_allow_game_approval||!1,onChange:ne=>G({...A,skaermtid_allow_game_approval:ne.target.checked})}),"Godkend spil fra kataloget"]})})]}),u.jsx("div",{className:"settings-admin-actions",children:u.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>Q(!0),children:"Administrer spilkatalog"})})]})]}),u.jsx("div",{className:"settings-actions",children:u.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Be,disabled:v,children:v?"Gemmer...":"Gem indstillinger"})})]}):null;case"users":return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"settings-section",children:[u.jsx("p",{className:"settings-help",style:{marginTop:0,marginBottom:"0.75rem"},children:"Opret, rediger og slet skrmtid-brugere. Optank tid og nulstil saldoer direkte i brugertabellen."}),u.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>Ue(!0),style:{width:"100%",textAlign:"left",padding:"1rem 1.25rem"},children:"Administrer brugere"})]})});case"security":return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Institutionskode"}),u.jsx("p",{className:"settings-help",children:"Denne kode bruges af personalet for at komme til login-siden."}),oe&&u.jsxs("div",{className:"settings-field",style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap",marginBottom:"0.75rem"},children:[u.jsx("span",{style:{opacity:.7},children:"Nuvrende kode:"}),u.jsx("code",{style:{background:"rgba(255,255,255,0.08)",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"1.25rem",fontWeight:"bold",letterSpacing:"0.1em",userSelect:"all"},children:$?oe:""}),u.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>Z(!$),style:{minWidth:"auto"},children:$?"Skjul":"Vis"})]}),u.jsxs("div",{className:"settings-field",style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsx("input",{type:"text",value:j,onChange:ne=>H(ne.target.value),placeholder:oe?"Ny kode (4-8 tegn)":"Vlg kode (4-8 tegn)",maxLength:8,style:{width:"180px",padding:"0.5rem 0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(0,217,255,0.3)",borderRadius:"6px",color:"var(--text-primary, #fff)",fontSize:"1rem",letterSpacing:"0.1em"}}),u.jsx("button",{className:"settings-btn settings-btn-primary",onClick:De,disabled:V||!j.trim(),style:{minWidth:"auto"},children:V?"...":"Gem kode"})]})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Operatr-login"}),u.jsx("p",{className:"settings-help",children:"Operatrer kan betjene stationer (start/stop sessioner, ker, vlge brugere) uden adgang til indstillinger eller brugerstyring."}),D&&u.jsx("div",{className:"settings-field",style:{marginBottom:"0.5rem"},children:u.jsx("span",{style:{color:"rgba(0, 217, 255, 0.9)",fontWeight:500},children:" Operatr-login er aktivt"})}),u.jsxs("div",{className:"settings-field",style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsx("input",{type:"text",value:he,onChange:ne=>ve(ne.target.value),placeholder:D?"Ny kode (4-8 tegn)":"Vlg kode (4-8 tegn)",maxLength:8,style:{width:"180px",padding:"0.5rem 0.75rem",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(0,217,255,0.3)",borderRadius:"6px",color:"var(--text-primary, #fff)",fontSize:"1rem",letterSpacing:"0.1em"}}),u.jsx("button",{className:"settings-btn settings-btn-primary",onClick:He,disabled:te||!he.trim(),style:{minWidth:"auto"},children:te?"...":D?"Gem ny kode":"Aktivr"}),D&&u.jsx("button",{className:"settings-btn settings-btn-danger",onClick:ge,disabled:re,style:{minWidth:"auto"},children:re?"...":"Deaktivr"})]})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Administrer admins"}),u.jsx("p",{className:"settings-help",children:"Opret, rediger og slet admin-brugere til skrmtid-appen."}),u.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>Re(!0),style:{width:"100%",textAlign:"left",padding:"1rem 1.25rem"},children:"Administrer admins"})]}),u.jsxs("div",{className:"settings-section",children:[u.jsx("h3",{children:"Skift admin-kode"}),T?u.jsxs("div",{className:"settings-password-change",children:[u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:["Ny adgangskode:",u.jsx("input",{type:"password",value:B,onChange:ne=>J(ne.target.value),placeholder:"Mindst 6 tegn",autoComplete:"new-password"})]})}),u.jsx("div",{className:"settings-field",children:u.jsxs("label",{children:["Bekrft adgangskode:",u.jsx("input",{type:"password",value:O,onChange:ne=>F(ne.target.value),placeholder:"Gentag adgangskode",autoComplete:"new-password"})]})}),u.jsxs("div",{className:"settings-admin-actions",children:[u.jsx("button",{className:"settings-btn settings-btn-primary",onClick:Ee,disabled:se||!B||!O,children:se?"Gemmer...":"Gem ny adgangskode"}),u.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>{z(!1),J(""),F("")},children:"Annuller"})]})]}):u.jsx("div",{className:"settings-admin-actions",children:u.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:()=>z(!0),children:"Skift min adgangskode"})})]})]});default:return null}};return u.jsx("div",{className:"settings-overlay",onClick:n,children:u.jsxs("div",{className:"settings-modal",onClick:ne=>ne.stopPropagation(),children:[u.jsxs("div",{className:"settings-header",children:[pe?u.jsx("button",{className:"settings-back-btn",onClick:()=>ye(null),"aria-label":"Tilbage",children:u.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"15 18 9 12 15 6"})})}):null,u.jsx("h2",{children:le?le.title:"Indstillinger"}),u.jsx("button",{className:"settings-close",onClick:n,"aria-label":"Luk",children:""})]}),w&&u.jsx("div",{className:"settings-error",children:w}),x&&u.jsx("div",{className:"settings-success",children:x}),m&&!d?u.jsx("div",{className:"settings-loading",children:"Indlser indstillinger..."}):d?u.jsx("div",{className:"settings-content",children:pe===null?u.jsx("div",{className:"settings-menu",children:ze.map(ne=>u.jsxs("button",{className:"settings-menu-btn",onClick:()=>ne.direct?Ue(!0):ye(ne.key),children:[u.jsx("span",{className:"settings-menu-btn__icon",children:ne.icon}),u.jsxs("span",{className:"settings-menu-btn__text",children:[u.jsx("span",{className:"settings-menu-btn__title",children:ne.title}),u.jsx("span",{className:"settings-menu-btn__desc",children:ne.description})]}),u.jsx("svg",{className:"settings-menu-btn__arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"9 18 15 12 9 6"})})]},ne.key))}):be()}):null,N&&u.jsx(rS,{isOpen:N,onClose:()=>Q(!1)}),ke&&u.jsx(gS,{isOpen:ke,onClose:()=>Ue(!1),institutionId:r}),Me&&u.jsx(TS,{isOpen:Me,onClose:()=>Re(!1),institutionId:r})]})})}var _i=Dv();function NS(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return y.useMemo(()=>l=>{n.forEach(o=>o(l))},n)}const So=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xr(a){const n=Object.prototype.toString.call(a);return n==="[object Window]"||n==="[object global]"}function Ad(a){return"nodeType"in a}function ln(a){var n,r;return a?xr(a)?a:Ad(a)&&(n=(r=a.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window}function Rd(a){const{Document:n}=ln(a);return a instanceof n}function Bi(a){return xr(a)?!1:a instanceof ln(a).HTMLElement}function ap(a){return a instanceof ln(a).SVGElement}function jr(a){return a?xr(a)?a.document:Ad(a)?Rd(a)?a:Bi(a)||ap(a)?a.ownerDocument:document:document:document}const Wn=So?y.useLayoutEffect:y.useEffect;function Od(a){const n=y.useRef(a);return Wn(()=>{n.current=a}),y.useCallback(function(){for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return n.current==null?void 0:n.current(...l)},[])}function CS(){const a=y.useRef(null),n=y.useCallback((l,o)=>{a.current=setInterval(l,o)},[]),r=y.useCallback(()=>{a.current!==null&&(clearInterval(a.current),a.current=null)},[]);return[n,r]}function Mi(a,n){n===void 0&&(n=[a]);const r=y.useRef(a);return Wn(()=>{r.current!==a&&(r.current=a)},n),r}function $i(a,n){const r=y.useRef();return y.useMemo(()=>{const l=a(r.current);return r.current=l,l},[...n])}function mo(a){const n=Od(a),r=y.useRef(null),l=y.useCallback(o=>{o!==r.current&&n?.(o,r.current),r.current=o},[]);return[r,l]}function bd(a){const n=y.useRef();return y.useEffect(()=>{n.current=a},[a]),n.current}let ed={};function Hi(a,n){return y.useMemo(()=>{if(n)return n;const r=ed[a]==null?0:ed[a]+1;return ed[a]=r,a+"-"+r},[a,n])}function sp(a){return function(n){for(var r=arguments.length,l=new Array(r>1?r-1:0),o=1;o<r;o++)l[o-1]=arguments[o];return l.reduce((d,f)=>{const m=Object.entries(f);for(const[g,v]of m){const b=d[g];b!=null&&(d[g]=b+a*v)}return d},{...n})}}const wr=sp(1),Ui=sp(-1);function AS(a){return"clientX"in a&&"clientY"in a}function Dd(a){if(!a)return!1;const{KeyboardEvent:n}=ln(a.target);return n&&a instanceof n}function RS(a){if(!a)return!1;const{TouchEvent:n}=ln(a.target);return n&&a instanceof n}function _d(a){if(RS(a)){if(a.touches&&a.touches.length){const{clientX:n,clientY:r}=a.touches[0];return{x:n,y:r}}else if(a.changedTouches&&a.changedTouches.length){const{clientX:n,clientY:r}=a.changedTouches[0];return{x:n,y:r}}}return AS(a)?{x:a.clientX,y:a.clientY}:null}const zi=Object.freeze({Translate:{toString(a){if(!a)return;const{x:n,y:r}=a;return"translate3d("+(n?Math.round(n):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(a){if(!a)return;const{scaleX:n,scaleY:r}=a;return"scaleX("+n+") scaleY("+r+")"}},Transform:{toString(a){if(a)return[zi.Translate.toString(a),zi.Scale.toString(a)].join(" ")}},Transition:{toString(a){let{property:n,duration:r,easing:l}=a;return n+" "+r+"ms "+l}}}),gv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function OS(a){return a.matches(gv)?a:a.querySelector(gv)}const DS={display:"none"};function MS(a){let{id:n,value:r}=a;return rn.createElement("div",{id:n,style:DS},r)}function US(a){let{id:n,announcement:r,ariaLiveType:l="assertive"}=a;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return rn.createElement("div",{id:n,style:o,role:"status","aria-live":l,"aria-atomic":!0},r)}function zS(){const[a,n]=y.useState("");return{announce:y.useCallback(l=>{l!=null&&n(l)},[]),announcement:a}}const rp=y.createContext(null);function LS(a){const n=y.useContext(rp);y.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(a)},[a,n])}function qS(){const[a]=y.useState(()=>new Set),n=y.useCallback(l=>(a.add(l),()=>a.delete(l)),[a]);return[y.useCallback(l=>{let{type:o,event:d}=l;a.forEach(f=>{var m;return(m=f[o])==null?void 0:m.call(f,d)})},[a]),n]}const BS={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$S={onDragStart(a){let{active:n}=a;return"Picked up draggable item "+n.id+"."},onDragOver(a){let{active:n,over:r}=a;return r?"Draggable item "+n.id+" was moved over droppable area "+r.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(a){let{active:n,over:r}=a;return r?"Draggable item "+n.id+" was dropped over droppable area "+r.id:"Draggable item "+n.id+" was dropped."},onDragCancel(a){let{active:n}=a;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function HS(a){let{announcements:n=$S,container:r,hiddenTextDescribedById:l,screenReaderInstructions:o=BS}=a;const{announce:d,announcement:f}=zS(),m=Hi("DndLiveRegion"),[g,v]=y.useState(!1);if(y.useEffect(()=>{v(!0)},[]),LS(y.useMemo(()=>({onDragStart(w){let{active:S}=w;d(n.onDragStart({active:S}))},onDragMove(w){let{active:S,over:x}=w;n.onDragMove&&d(n.onDragMove({active:S,over:x}))},onDragOver(w){let{active:S,over:x}=w;d(n.onDragOver({active:S,over:x}))},onDragEnd(w){let{active:S,over:x}=w;d(n.onDragEnd({active:S,over:x}))},onDragCancel(w){let{active:S,over:x}=w;d(n.onDragCancel({active:S,over:x}))}}),[d,n])),!g)return null;const b=rn.createElement(rn.Fragment,null,rn.createElement(MS,{id:l,value:o.draggable}),rn.createElement(US,{id:m,announcement:f}));return r?_i.createPortal(b,r):b}var Dt;(function(a){a.DragStart="dragStart",a.DragMove="dragMove",a.DragEnd="dragEnd",a.DragCancel="dragCancel",a.DragOver="dragOver",a.RegisterDroppable="registerDroppable",a.SetDroppableDisabled="setDroppableDisabled",a.UnregisterDroppable="unregisterDroppable"})(Dt||(Dt={}));function go(){}function vv(a,n){return y.useMemo(()=>({sensor:a,options:n??{}}),[a,n])}function GS(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return y.useMemo(()=>[...n].filter(l=>l!=null),[...n])}const Kn=Object.freeze({x:0,y:0});function ip(a,n){return Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2))}function lp(a,n){let{data:{value:r}}=a,{data:{value:l}}=n;return r-l}function IS(a,n){let{data:{value:r}}=a,{data:{value:l}}=n;return l-r}function pv(a){let{left:n,top:r,height:l,width:o}=a;return[{x:n,y:r},{x:n+o,y:r},{x:n,y:r+l},{x:n+o,y:r+l}]}function op(a,n){if(!a||a.length===0)return null;const[r]=a;return r[n]}function yv(a,n,r){return n===void 0&&(n=a.left),r===void 0&&(r=a.top),{x:n+a.width*.5,y:r+a.height*.5}}const VS=a=>{let{collisionRect:n,droppableRects:r,droppableContainers:l}=a;const o=yv(n,n.left,n.top),d=[];for(const f of l){const{id:m}=f,g=r.get(m);if(g){const v=ip(yv(g),o);d.push({id:m,data:{droppableContainer:f,value:v}})}}return d.sort(lp)},KS=a=>{let{collisionRect:n,droppableRects:r,droppableContainers:l}=a;const o=pv(n),d=[];for(const f of l){const{id:m}=f,g=r.get(m);if(g){const v=pv(g),b=o.reduce((S,x,E)=>S+ip(v[E],x),0),w=Number((b/4).toFixed(4));d.push({id:m,data:{droppableContainer:f,value:w}})}}return d.sort(lp)};function YS(a,n){const r=Math.max(n.top,a.top),l=Math.max(n.left,a.left),o=Math.min(n.left+n.width,a.left+a.width),d=Math.min(n.top+n.height,a.top+a.height),f=o-l,m=d-r;if(l<o&&r<d){const g=n.width*n.height,v=a.width*a.height,b=f*m,w=b/(g+v-b);return Number(w.toFixed(4))}return 0}const QS=a=>{let{collisionRect:n,droppableRects:r,droppableContainers:l}=a;const o=[];for(const d of l){const{id:f}=d,m=r.get(f);if(m){const g=YS(m,n);g>0&&o.push({id:f,data:{droppableContainer:d,value:g}})}}return o.sort(IS)};function PS(a,n,r){return{...a,scaleX:n&&r?n.width/r.width:1,scaleY:n&&r?n.height/r.height:1}}function up(a,n){return a&&n?{x:a.left-n.left,y:a.top-n.top}:Kn}function XS(a){return function(r){for(var l=arguments.length,o=new Array(l>1?l-1:0),d=1;d<l;d++)o[d-1]=arguments[d];return o.reduce((f,m)=>({...f,top:f.top+a*m.y,bottom:f.bottom+a*m.y,left:f.left+a*m.x,right:f.right+a*m.x}),{...r})}}const JS=XS(1);function ZS(a){if(a.startsWith("matrix3d(")){const n=a.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(a.startsWith("matrix(")){const n=a.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function WS(a,n,r){const l=ZS(n);if(!l)return a;const{scaleX:o,scaleY:d,x:f,y:m}=l,g=a.left-f-(1-o)*parseFloat(r),v=a.top-m-(1-d)*parseFloat(r.slice(r.indexOf(" ")+1)),b=o?a.width/o:a.width,w=d?a.height/d:a.height;return{width:b,height:w,top:v,right:g+b,bottom:v+w,left:g}}const FS={ignoreTransform:!1};function Er(a,n){n===void 0&&(n=FS);let r=a.getBoundingClientRect();if(n.ignoreTransform){const{transform:v,transformOrigin:b}=ln(a).getComputedStyle(a);v&&(r=WS(r,v,b))}const{top:l,left:o,width:d,height:f,bottom:m,right:g}=r;return{top:l,left:o,width:d,height:f,bottom:m,right:g}}function bv(a){return Er(a,{ignoreTransform:!0})}function ex(a){const n=a.innerWidth,r=a.innerHeight;return{top:0,left:0,right:n,bottom:r,width:n,height:r}}function tx(a,n){return n===void 0&&(n=ln(a).getComputedStyle(a)),n.position==="fixed"}function nx(a,n){n===void 0&&(n=ln(a).getComputedStyle(a));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const d=n[o];return typeof d=="string"?r.test(d):!1})}function xo(a,n){const r=[];function l(o){if(n!=null&&r.length>=n||!o)return r;if(Rd(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!Bi(o)||ap(o)||r.includes(o))return r;const d=ln(a).getComputedStyle(o);return o!==a&&nx(o,d)&&r.push(o),tx(o,d)?r:l(o.parentNode)}return a?l(a):r}function cp(a){const[n]=xo(a,1);return n??null}function td(a){return!So||!a?null:xr(a)?a:Ad(a)?Rd(a)||a===jr(a).scrollingElement?window:Bi(a)?a:null:null}function dp(a){return xr(a)?a.scrollX:a.scrollLeft}function hp(a){return xr(a)?a.scrollY:a.scrollTop}function wd(a){return{x:dp(a),y:hp(a)}}var qt;(function(a){a[a.Forward=1]="Forward",a[a.Backward=-1]="Backward"})(qt||(qt={}));function fp(a){return!So||!a?!1:a===document.scrollingElement}function mp(a){const n={x:0,y:0},r=fp(a)?{height:window.innerHeight,width:window.innerWidth}:{height:a.clientHeight,width:a.clientWidth},l={x:a.scrollWidth-r.width,y:a.scrollHeight-r.height},o=a.scrollTop<=n.y,d=a.scrollLeft<=n.x,f=a.scrollTop>=l.y,m=a.scrollLeft>=l.x;return{isTop:o,isLeft:d,isBottom:f,isRight:m,maxScroll:l,minScroll:n}}const ax={x:.2,y:.2};function sx(a,n,r,l,o){let{top:d,left:f,right:m,bottom:g}=r;l===void 0&&(l=10),o===void 0&&(o=ax);const{isTop:v,isBottom:b,isLeft:w,isRight:S}=mp(a),x={x:0,y:0},E={x:0,y:0},k={height:n.height*o.y,width:n.width*o.x};return!v&&d<=n.top+k.height?(x.y=qt.Backward,E.y=l*Math.abs((n.top+k.height-d)/k.height)):!b&&g>=n.bottom-k.height&&(x.y=qt.Forward,E.y=l*Math.abs((n.bottom-k.height-g)/k.height)),!S&&m>=n.right-k.width?(x.x=qt.Forward,E.x=l*Math.abs((n.right-k.width-m)/k.width)):!w&&f<=n.left+k.width&&(x.x=qt.Backward,E.x=l*Math.abs((n.left+k.width-f)/k.width)),{direction:x,speed:E}}function rx(a){if(a===document.scrollingElement){const{innerWidth:d,innerHeight:f}=window;return{top:0,left:0,right:d,bottom:f,width:d,height:f}}const{top:n,left:r,right:l,bottom:o}=a.getBoundingClientRect();return{top:n,left:r,right:l,bottom:o,width:a.clientWidth,height:a.clientHeight}}function gp(a){return a.reduce((n,r)=>wr(n,wd(r)),Kn)}function ix(a){return a.reduce((n,r)=>n+dp(r),0)}function lx(a){return a.reduce((n,r)=>n+hp(r),0)}function ox(a,n){if(n===void 0&&(n=Er),!a)return;const{top:r,left:l,bottom:o,right:d}=n(a);cp(a)&&(o<=0||d<=0||r>=window.innerHeight||l>=window.innerWidth)&&a.scrollIntoView({block:"center",inline:"center"})}const ux=[["x",["left","right"],ix],["y",["top","bottom"],lx]];class Md{constructor(n,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const l=xo(r),o=gp(l);this.rect={...n},this.width=n.width,this.height=n.height;for(const[d,f,m]of ux)for(const g of f)Object.defineProperty(this,g,{get:()=>{const v=m(l),b=o[d]-v;return this.rect[g]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ei{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var l;return(l=this.target)==null?void 0:l.removeEventListener(...r)})},this.target=n}add(n,r,l){var o;(o=this.target)==null||o.addEventListener(n,r,l),this.listeners.push([n,r,l])}}function cx(a){const{EventTarget:n}=ln(a);return a instanceof n?a:jr(a)}function nd(a,n){const r=Math.abs(a.x),l=Math.abs(a.y);return typeof n=="number"?Math.sqrt(r**2+l**2)>n:"x"in n&&"y"in n?r>n.x&&l>n.y:"x"in n?r>n.x:"y"in n?l>n.y:!1}var zn;(function(a){a.Click="click",a.DragStart="dragstart",a.Keydown="keydown",a.ContextMenu="contextmenu",a.Resize="resize",a.SelectionChange="selectionchange",a.VisibilityChange="visibilitychange"})(zn||(zn={}));function _v(a){a.preventDefault()}function dx(a){a.stopPropagation()}var Xe;(function(a){a.Space="Space",a.Down="ArrowDown",a.Right="ArrowRight",a.Left="ArrowLeft",a.Up="ArrowUp",a.Esc="Escape",a.Enter="Enter",a.Tab="Tab"})(Xe||(Xe={}));const vp={start:[Xe.Space,Xe.Enter],cancel:[Xe.Esc],end:[Xe.Space,Xe.Enter,Xe.Tab]},hx=(a,n)=>{let{currentCoordinates:r}=n;switch(a.code){case Xe.Right:return{...r,x:r.x+25};case Xe.Left:return{...r,x:r.x-25};case Xe.Down:return{...r,y:r.y+25};case Xe.Up:return{...r,y:r.y-25}}};class Ud{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:r}}=n;this.props=n,this.listeners=new Ei(jr(r)),this.windowListeners=new Ei(ln(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zn.Resize,this.handleCancel),this.windowListeners.add(zn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:r}=this.props,l=n.node.current;l&&ox(l),r(Kn)}handleKeyDown(n){if(Dd(n)){const{active:r,context:l,options:o}=this.props,{keyboardCodes:d=vp,coordinateGetter:f=hx,scrollBehavior:m="smooth"}=o,{code:g}=n;if(d.end.includes(g)){this.handleEnd(n);return}if(d.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:v}=l.current,b=v?{x:v.left,y:v.top}:Kn;this.referenceCoordinates||(this.referenceCoordinates=b);const w=f(n,{active:r,context:l.current,currentCoordinates:b});if(w){const S=Ui(w,b),x={x:0,y:0},{scrollableAncestors:E}=l.current;for(const k of E){const C=n.code,{isTop:A,isRight:G,isLeft:N,isBottom:Q,maxScroll:W,minScroll:K}=mp(k),T=rx(k),z={x:Math.min(C===Xe.Right?T.right-T.width/2:T.right,Math.max(C===Xe.Right?T.left:T.left+T.width/2,w.x)),y:Math.min(C===Xe.Down?T.bottom-T.height/2:T.bottom,Math.max(C===Xe.Down?T.top:T.top+T.height/2,w.y))},B=C===Xe.Right&&!G||C===Xe.Left&&!N,J=C===Xe.Down&&!Q||C===Xe.Up&&!A;if(B&&z.x!==w.x){const O=k.scrollLeft+S.x,F=C===Xe.Right&&O<=W.x||C===Xe.Left&&O>=K.x;if(F&&!S.y){k.scrollTo({left:O,behavior:m});return}F?x.x=k.scrollLeft-O:x.x=C===Xe.Right?k.scrollLeft-W.x:k.scrollLeft-K.x,x.x&&k.scrollBy({left:-x.x,behavior:m});break}else if(J&&z.y!==w.y){const O=k.scrollTop+S.y,F=C===Xe.Down&&O<=W.y||C===Xe.Up&&O>=K.y;if(F&&!S.x){k.scrollTo({top:O,behavior:m});return}F?x.y=k.scrollTop-O:x.y=C===Xe.Down?k.scrollTop-W.y:k.scrollTop-K.y,x.y&&k.scrollBy({top:-x.y,behavior:m});break}}this.handleMove(n,wr(Ui(w,this.referenceCoordinates),x))}}}handleMove(n,r){const{onMove:l}=this.props;n.preventDefault(),l(r)}handleEnd(n){const{onEnd:r}=this.props;n.preventDefault(),this.detach(),r()}handleCancel(n){const{onCancel:r}=this.props;n.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ud.activators=[{eventName:"onKeyDown",handler:(a,n,r)=>{let{keyboardCodes:l=vp,onActivation:o}=n,{active:d}=r;const{code:f}=a.nativeEvent;if(l.start.includes(f)){const m=d.activatorNode.current;return m&&a.target!==m?!1:(a.preventDefault(),o?.({event:a.nativeEvent}),!0)}return!1}}];function wv(a){return!!(a&&"distance"in a)}function Sv(a){return!!(a&&"delay"in a)}class zd{constructor(n,r,l){var o;l===void 0&&(l=cx(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=r;const{event:d}=n,{target:f}=d;this.props=n,this.events=r,this.document=jr(f),this.documentListeners=new Ei(this.document),this.listeners=new Ei(l),this.windowListeners=new Ei(ln(f)),this.initialCoordinates=(o=_d(d))!=null?o:Kn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:r,bypassActivationConstraint:l}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(zn.Resize,this.handleCancel),this.windowListeners.add(zn.DragStart,_v),this.windowListeners.add(zn.VisibilityChange,this.handleCancel),this.windowListeners.add(zn.ContextMenu,_v),this.documentListeners.add(zn.Keydown,this.handleKeydown),r){if(l!=null&&l({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Sv(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(wv(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,r){const{active:l,onPending:o}=this.props;o(l,n,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:n}=this,{onStart:r}=this.props;n&&(this.activated=!0,this.documentListeners.add(zn.Click,dx,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zn.SelectionChange,this.removeTextSelection),r(n))}handleMove(n){var r;const{activated:l,initialCoordinates:o,props:d}=this,{onMove:f,options:{activationConstraint:m}}=d;if(!o)return;const g=(r=_d(n))!=null?r:Kn,v=Ui(o,g);if(!l&&m){if(wv(m)){if(m.tolerance!=null&&nd(v,m.tolerance))return this.handleCancel();if(nd(v,m.distance))return this.handleStart()}if(Sv(m)&&nd(v,m.tolerance))return this.handleCancel();this.handlePending(m,v);return}n.cancelable&&n.preventDefault(),f(g)}handleEnd(){const{onAbort:n,onEnd:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleCancel(){const{onAbort:n,onCancel:r}=this.props;this.detach(),this.activated||n(this.props.active),r()}handleKeydown(n){n.code===Xe.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const fx={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ld extends zd{constructor(n){const{event:r}=n,l=jr(r.target);super(n,fx,l)}}Ld.activators=[{eventName:"onPointerDown",handler:(a,n)=>{let{nativeEvent:r}=a,{onActivation:l}=n;return!r.isPrimary||r.button!==0?!1:(l?.({event:r}),!0)}}];const mx={move:{name:"mousemove"},end:{name:"mouseup"}};var Sd;(function(a){a[a.RightClick=2]="RightClick"})(Sd||(Sd={}));class gx extends zd{constructor(n){super(n,mx,jr(n.event.target))}}gx.activators=[{eventName:"onMouseDown",handler:(a,n)=>{let{nativeEvent:r}=a,{onActivation:l}=n;return r.button===Sd.RightClick?!1:(l?.({event:r}),!0)}}];const ad={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class vx extends zd{constructor(n){super(n,ad)}static setup(){return window.addEventListener(ad.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(ad.move.name,n)};function n(){}}}vx.activators=[{eventName:"onTouchStart",handler:(a,n)=>{let{nativeEvent:r}=a,{onActivation:l}=n;const{touches:o}=r;return o.length>1?!1:(l?.({event:r}),!0)}}];var Ti;(function(a){a[a.Pointer=0]="Pointer",a[a.DraggableRect=1]="DraggableRect"})(Ti||(Ti={}));var vo;(function(a){a[a.TreeOrder=0]="TreeOrder",a[a.ReversedTreeOrder=1]="ReversedTreeOrder"})(vo||(vo={}));function px(a){let{acceleration:n,activator:r=Ti.Pointer,canScroll:l,draggingRect:o,enabled:d,interval:f=5,order:m=vo.TreeOrder,pointerCoordinates:g,scrollableAncestors:v,scrollableAncestorRects:b,delta:w,threshold:S}=a;const x=bx({delta:w,disabled:!d}),[E,k]=CS(),C=y.useRef({x:0,y:0}),A=y.useRef({x:0,y:0}),G=y.useMemo(()=>{switch(r){case Ti.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Ti.DraggableRect:return o}},[r,o,g]),N=y.useRef(null),Q=y.useCallback(()=>{const K=N.current;if(!K)return;const T=C.current.x*A.current.x,z=C.current.y*A.current.y;K.scrollBy(T,z)},[]),W=y.useMemo(()=>m===vo.TreeOrder?[...v].reverse():v,[m,v]);y.useEffect(()=>{if(!d||!v.length||!G){k();return}for(const K of W){if(l?.(K)===!1)continue;const T=v.indexOf(K),z=b[T];if(!z)continue;const{direction:B,speed:J}=sx(K,z,G,n,S);for(const O of["x","y"])x[O][B[O]]||(J[O]=0,B[O]=0);if(J.x>0||J.y>0){k(),N.current=K,E(Q,f),C.current=J,A.current=B;return}}C.current={x:0,y:0},A.current={x:0,y:0},k()},[n,Q,l,k,d,f,JSON.stringify(G),JSON.stringify(x),E,v,W,b,JSON.stringify(S)])}const yx={x:{[qt.Backward]:!1,[qt.Forward]:!1},y:{[qt.Backward]:!1,[qt.Forward]:!1}};function bx(a){let{delta:n,disabled:r}=a;const l=bd(n);return $i(o=>{if(r||!l||!o)return yx;const d={x:Math.sign(n.x-l.x),y:Math.sign(n.y-l.y)};return{x:{[qt.Backward]:o.x[qt.Backward]||d.x===-1,[qt.Forward]:o.x[qt.Forward]||d.x===1},y:{[qt.Backward]:o.y[qt.Backward]||d.y===-1,[qt.Forward]:o.y[qt.Forward]||d.y===1}}},[r,n,l])}function _x(a,n){const r=n!=null?a.get(n):void 0,l=r?r.node.current:null;return $i(o=>{var d;return n==null?null:(d=l??o)!=null?d:null},[l,n])}function wx(a,n){return y.useMemo(()=>a.reduce((r,l)=>{const{sensor:o}=l,d=o.activators.map(f=>({eventName:f.eventName,handler:n(f.handler,l)}));return[...r,...d]},[]),[a,n])}var Li;(function(a){a[a.Always=0]="Always",a[a.BeforeDragging=1]="BeforeDragging",a[a.WhileDragging=2]="WhileDragging"})(Li||(Li={}));var xd;(function(a){a.Optimized="optimized"})(xd||(xd={}));const xv=new Map;function Sx(a,n){let{dragging:r,dependencies:l,config:o}=n;const[d,f]=y.useState(null),{frequency:m,measure:g,strategy:v}=o,b=y.useRef(a),w=C(),S=Mi(w),x=y.useCallback(function(A){A===void 0&&(A=[]),!S.current&&f(G=>G===null?A:G.concat(A.filter(N=>!G.includes(N))))},[S]),E=y.useRef(null),k=$i(A=>{if(w&&!r)return xv;if(!A||A===xv||b.current!==a||d!=null){const G=new Map;for(let N of a){if(!N)continue;if(d&&d.length>0&&!d.includes(N.id)&&N.rect.current){G.set(N.id,N.rect.current);continue}const Q=N.node.current,W=Q?new Md(g(Q),Q):null;N.rect.current=W,W&&G.set(N.id,W)}return G}return A},[a,d,r,w,g]);return y.useEffect(()=>{b.current=a},[a]),y.useEffect(()=>{w||x()},[r,w]),y.useEffect(()=>{d&&d.length>0&&f(null)},[JSON.stringify(d)]),y.useEffect(()=>{w||typeof m!="number"||E.current!==null||(E.current=setTimeout(()=>{x(),E.current=null},m))},[m,w,x,...l]),{droppableRects:k,measureDroppableContainers:x,measuringScheduled:d!=null};function C(){switch(v){case Li.Always:return!1;case Li.BeforeDragging:return r;default:return!r}}}function pp(a,n){return $i(r=>a?r||(typeof n=="function"?n(a):a):null,[n,a])}function xx(a,n){return pp(a,n)}function jx(a){let{callback:n,disabled:r}=a;const l=Od(n),o=y.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:d}=window;return new d(l)},[l,r]);return y.useEffect(()=>()=>o?.disconnect(),[o]),o}function jo(a){let{callback:n,disabled:r}=a;const l=Od(n),o=y.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:d}=window;return new d(l)},[r]);return y.useEffect(()=>()=>o?.disconnect(),[o]),o}function Ex(a){return new Md(Er(a),a)}function jv(a,n,r){n===void 0&&(n=Ex);const[l,o]=y.useState(null);function d(){o(g=>{if(!a)return null;if(a.isConnected===!1){var v;return(v=g??r)!=null?v:null}const b=n(a);return JSON.stringify(g)===JSON.stringify(b)?g:b})}const f=jx({callback(g){if(a)for(const v of g){const{type:b,target:w}=v;if(b==="childList"&&w instanceof HTMLElement&&w.contains(a)){d();break}}}}),m=jo({callback:d});return Wn(()=>{d(),a?(m?.observe(a),f?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),f?.disconnect())},[a]),l}function Tx(a){const n=pp(a);return up(a,n)}const Ev=[];function kx(a){const n=y.useRef(a),r=$i(l=>a?l&&l!==Ev&&a&&n.current&&a.parentNode===n.current.parentNode?l:xo(a):Ev,[a]);return y.useEffect(()=>{n.current=a},[a]),r}function Nx(a){const[n,r]=y.useState(null),l=y.useRef(a),o=y.useCallback(d=>{const f=td(d.target);f&&r(m=>m?(m.set(f,wd(f)),new Map(m)):null)},[]);return y.useEffect(()=>{const d=l.current;if(a!==d){f(d);const m=a.map(g=>{const v=td(g);return v?(v.addEventListener("scroll",o,{passive:!0}),[v,wd(v)]):null}).filter(g=>g!=null);r(m.length?new Map(m):null),l.current=a}return()=>{f(a),f(d)};function f(m){m.forEach(g=>{const v=td(g);v?.removeEventListener("scroll",o)})}},[o,a]),y.useMemo(()=>a.length?n?Array.from(n.values()).reduce((d,f)=>wr(d,f),Kn):gp(a):Kn,[a,n])}function Tv(a,n){n===void 0&&(n=[]);const r=y.useRef(null);return y.useEffect(()=>{r.current=null},n),y.useEffect(()=>{const l=a!==Kn;l&&!r.current&&(r.current=a),!l&&r.current&&(r.current=null)},[a]),r.current?Ui(a,r.current):Kn}function Cx(a){y.useEffect(()=>{if(!So)return;const n=a.map(r=>{let{sensor:l}=r;return l.setup==null?void 0:l.setup()});return()=>{for(const r of n)r?.()}},a.map(n=>{let{sensor:r}=n;return r}))}function Ax(a,n){return y.useMemo(()=>a.reduce((r,l)=>{let{eventName:o,handler:d}=l;return r[o]=f=>{d(f,n)},r},{}),[a,n])}function yp(a){return y.useMemo(()=>a?ex(a):null,[a])}const kv=[];function Rx(a,n){n===void 0&&(n=Er);const[r]=a,l=yp(r?ln(r):null),[o,d]=y.useState(kv);function f(){d(()=>a.length?a.map(g=>fp(g)?l:new Md(n(g),g)):kv)}const m=jo({callback:f});return Wn(()=>{m?.disconnect(),f(),a.forEach(g=>m?.observe(g))},[a]),o}function Ox(a){if(!a)return null;if(a.children.length>1)return a;const n=a.children[0];return Bi(n)?n:a}function Dx(a){let{measure:n}=a;const[r,l]=y.useState(null),o=y.useCallback(v=>{for(const{target:b}of v)if(Bi(b)){l(w=>{const S=n(b);return w?{...w,width:S.width,height:S.height}:S});break}},[n]),d=jo({callback:o}),f=y.useCallback(v=>{const b=Ox(v);d?.disconnect(),b&&d?.observe(b),l(b?n(b):null)},[n,d]),[m,g]=mo(f);return y.useMemo(()=>({nodeRef:m,rect:r,setRef:g}),[r,m,g])}const Mx=[{sensor:Ld,options:{}},{sensor:Ud,options:{}}],Ux={current:{}},oo={draggable:{measure:bv},droppable:{measure:bv,strategy:Li.WhileDragging,frequency:xd.Optimized},dragOverlay:{measure:Er}};class ki extends Map{get(n){var r;return n!=null&&(r=super.get(n))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:r}=n;return!r})}getNodeFor(n){var r,l;return(r=(l=this.get(n))==null?void 0:l.node.current)!=null?r:void 0}}const zx={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ki,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:go},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:oo,measureDroppableContainers:go,windowRect:null,measuringScheduled:!1},Lx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:go,draggableNodes:new Map,over:null,measureDroppableContainers:go},Eo=y.createContext(Lx),bp=y.createContext(zx);function qx(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ki}}}function Bx(a,n){switch(n.type){case Dt.DragStart:return{...a,draggable:{...a.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Dt.DragMove:return a.draggable.active==null?a:{...a,draggable:{...a.draggable,translate:{x:n.coordinates.x-a.draggable.initialCoordinates.x,y:n.coordinates.y-a.draggable.initialCoordinates.y}}};case Dt.DragEnd:case Dt.DragCancel:return{...a,draggable:{...a.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Dt.RegisterDroppable:{const{element:r}=n,{id:l}=r,o=new ki(a.droppable.containers);return o.set(l,r),{...a,droppable:{...a.droppable,containers:o}}}case Dt.SetDroppableDisabled:{const{id:r,key:l,disabled:o}=n,d=a.droppable.containers.get(r);if(!d||l!==d.key)return a;const f=new ki(a.droppable.containers);return f.set(r,{...d,disabled:o}),{...a,droppable:{...a.droppable,containers:f}}}case Dt.UnregisterDroppable:{const{id:r,key:l}=n,o=a.droppable.containers.get(r);if(!o||l!==o.key)return a;const d=new ki(a.droppable.containers);return d.delete(r),{...a,droppable:{...a.droppable,containers:d}}}default:return a}}function $x(a){let{disabled:n}=a;const{active:r,activatorEvent:l,draggableNodes:o}=y.useContext(Eo),d=bd(l),f=bd(r?.id);return y.useEffect(()=>{if(!n&&!l&&d&&f!=null){if(!Dd(d)||document.activeElement===d.target)return;const m=o.get(f);if(!m)return;const{activatorNode:g,node:v}=m;if(!g.current&&!v.current)return;requestAnimationFrame(()=>{for(const b of[g.current,v.current]){if(!b)continue;const w=OS(b);if(w){w.focus();break}}})}},[l,n,o,f,d]),null}function Hx(a,n){let{transform:r,...l}=n;return a!=null&&a.length?a.reduce((o,d)=>d({transform:o,...l}),r):r}function Gx(a){return y.useMemo(()=>({draggable:{...oo.draggable,...a?.draggable},droppable:{...oo.droppable,...a?.droppable},dragOverlay:{...oo.dragOverlay,...a?.dragOverlay}}),[a?.draggable,a?.droppable,a?.dragOverlay])}function Ix(a){let{activeNode:n,measure:r,initialRect:l,config:o=!0}=a;const d=y.useRef(!1),{x:f,y:m}=typeof o=="boolean"?{x:o,y:o}:o;Wn(()=>{if(!f&&!m||!n){d.current=!1;return}if(d.current||!l)return;const v=n?.node.current;if(!v||v.isConnected===!1)return;const b=r(v),w=up(b,l);if(f||(w.x=0),m||(w.y=0),d.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const S=cp(v);S&&S.scrollBy({top:w.y,left:w.x})}},[n,f,m,l,r])}const _p=y.createContext({...Kn,scaleX:1,scaleY:1});var Xa;(function(a){a[a.Uninitialized=0]="Uninitialized",a[a.Initializing=1]="Initializing",a[a.Initialized=2]="Initialized"})(Xa||(Xa={}));const Vx=y.memo(function(n){var r,l,o,d;let{id:f,accessibility:m,autoScroll:g=!0,children:v,sensors:b=Mx,collisionDetection:w=QS,measuring:S,modifiers:x,...E}=n;const k=y.useReducer(Bx,void 0,qx),[C,A]=k,[G,N]=qS(),[Q,W]=y.useState(Xa.Uninitialized),K=Q===Xa.Initialized,{draggable:{active:T,nodes:z,translate:B},droppable:{containers:J}}=C,O=T!=null?z.get(T):null,F=y.useRef({initial:null,translated:null}),se=y.useMemo(()=>{var et;return T!=null?{id:T,data:(et=O?.data)!=null?et:Ux,rect:F}:null},[T,O]),P=y.useRef(null),[oe,M]=y.useState(null),[$,Z]=y.useState(null),V=Mi(E,Object.values(E)),fe=Hi("DndDescribedBy",f),j=y.useMemo(()=>J.getEnabled(),[J]),H=Gx(S),{droppableRects:D,measureDroppableContainers:L,measuringScheduled:te}=Sx(j,{dragging:K,dependencies:[B.x,B.y],config:H.droppable}),I=_x(z,T),re=y.useMemo(()=>$?_d($):null,[$]),de=wn(),he=xx(I,H.draggable.measure);Ix({activeNode:T!=null?z.get(T):null,config:de.layoutShiftCompensation,initialRect:he,measure:H.draggable.measure});const ve=jv(I,H.draggable.measure,he),ke=jv(I?I.parentElement:null),Ue=y.useRef({activatorEvent:null,active:null,activeNode:I,collisionRect:null,collisions:null,droppableRects:D,draggableNodes:z,draggingNode:null,draggingNodeRect:null,droppableContainers:J,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Me=J.getNodeFor((r=Ue.current.over)==null?void 0:r.id),Re=Dx({measure:H.dragOverlay.measure}),Oe=(l=Re.nodeRef.current)!=null?l:I,Be=K?(o=Re.rect)!=null?o:ve:null,Ee=!!(Re.nodeRef.current&&Re.rect),De=Tx(Ee?null:ve),He=yp(Oe?ln(Oe):null),ge=kx(K?Me??I:null),pe=Rx(ge),ye=Hx(x,{transform:{x:B.x-De.x,y:B.y-De.y,scaleX:1,scaleY:1},activatorEvent:$,active:se,activeNodeRect:ve,containerNodeRect:ke,draggingNodeRect:Be,over:Ue.current.over,overlayNodeRect:Re.rect,scrollableAncestors:ge,scrollableAncestorRects:pe,windowRect:He}),ze=re?wr(re,B):null,le=Nx(ge),be=Tv(le),ne=Tv(le,[ve]),_e=wr(ye,be),je=Be?JS(Be,ye):null,Ke=se&&je?w({active:se,collisionRect:je,droppableRects:D,droppableContainers:j,pointerCoordinates:ze}):null,Le=op(Ke,"id"),[Ct,ct]=y.useState(null),St=Ee?ye:wr(ye,ne),vt=PS(St,(d=Ct?.rect)!=null?d:null,ve),ft=y.useRef(null),dt=y.useCallback((et,mt)=>{let{sensor:Ut,options:Xt}=mt;if(P.current==null)return;const Jt=z.get(P.current);if(!Jt)return;const Yt=et.nativeEvent,Zt=new Ut({active:P.current,activeNode:Jt,event:Yt,options:Xt,context:Ue,onAbort(At){if(!z.get(At))return;const{onDragAbort:on}=V.current,xn={id:At};on?.(xn),G({type:"onDragAbort",event:xn})},onPending(At,Ln,on,xn){if(!z.get(At))return;const{onDragPending:ea}=V.current,qn={id:At,constraint:Ln,initialCoordinates:on,offset:xn};ea?.(qn),G({type:"onDragPending",event:qn})},onStart(At){const Ln=P.current;if(Ln==null)return;const on=z.get(Ln);if(!on)return;const{onDragStart:xn}=V.current,Fn={activatorEvent:Yt,active:{id:Ln,data:on.data,rect:F}};_i.unstable_batchedUpdates(()=>{xn?.(Fn),W(Xa.Initializing),A({type:Dt.DragStart,initialCoordinates:At,active:Ln}),G({type:"onDragStart",event:Fn}),M(ft.current),Z(Yt)})},onMove(At){A({type:Dt.DragMove,coordinates:At})},onEnd:Sn(Dt.DragEnd),onCancel:Sn(Dt.DragCancel)});ft.current=Zt;function Sn(At){return async function(){const{active:on,collisions:xn,over:Fn,scrollAdjustedTranslate:ea}=Ue.current;let qn=null;if(on&&ea){const{cancelDrop:Sa}=V.current;qn={activatorEvent:Yt,active:on,collisions:xn,delta:ea,over:Fn},At===Dt.DragEnd&&typeof Sa=="function"&&await Promise.resolve(Sa(qn))&&(At=Dt.DragCancel)}P.current=null,_i.unstable_batchedUpdates(()=>{A({type:At}),W(Xa.Uninitialized),ct(null),M(null),Z(null),ft.current=null;const Sa=At===Dt.DragEnd?"onDragEnd":"onDragCancel";if(qn){const jn=V.current[Sa];jn?.(qn),G({type:Sa,event:qn})}})}}},[z]),Yn=y.useCallback((et,mt)=>(Ut,Xt)=>{const Jt=Ut.nativeEvent,Yt=z.get(Xt);if(P.current!==null||!Yt||Jt.dndKit||Jt.defaultPrevented)return;const Zt={active:Yt};et(Ut,mt.options,Zt)===!0&&(Jt.dndKit={capturedBy:mt.sensor},P.current=Xt,dt(Ut,mt))},[z,dt]),Za=wx(b,Yn);Cx(b),Wn(()=>{ve&&Q===Xa.Initializing&&W(Xa.Initialized)},[ve,Q]),y.useEffect(()=>{const{onDragMove:et}=V.current,{active:mt,activatorEvent:Ut,collisions:Xt,over:Jt}=Ue.current;if(!mt||!Ut)return;const Yt={active:mt,activatorEvent:Ut,collisions:Xt,delta:{x:_e.x,y:_e.y},over:Jt};_i.unstable_batchedUpdates(()=>{et?.(Yt),G({type:"onDragMove",event:Yt})})},[_e.x,_e.y]),y.useEffect(()=>{const{active:et,activatorEvent:mt,collisions:Ut,droppableContainers:Xt,scrollAdjustedTranslate:Jt}=Ue.current;if(!et||P.current==null||!mt||!Jt)return;const{onDragOver:Yt}=V.current,Zt=Xt.get(Le),Sn=Zt&&Zt.rect.current?{id:Zt.id,rect:Zt.rect.current,data:Zt.data,disabled:Zt.disabled}:null,At={active:et,activatorEvent:mt,collisions:Ut,delta:{x:Jt.x,y:Jt.y},over:Sn};_i.unstable_batchedUpdates(()=>{ct(Sn),Yt?.(At),G({type:"onDragOver",event:At})})},[Le]),Wn(()=>{Ue.current={activatorEvent:$,active:se,activeNode:I,collisionRect:je,collisions:Ke,droppableRects:D,draggableNodes:z,draggingNode:Oe,draggingNodeRect:Be,droppableContainers:J,over:Ct,scrollableAncestors:ge,scrollAdjustedTranslate:_e},F.current={initial:Be,translated:je}},[se,I,Ke,je,z,Oe,Be,D,J,Ct,ge,_e]),px({...de,delta:B,draggingRect:je,pointerCoordinates:ze,scrollableAncestors:ge,scrollableAncestorRects:pe});const Fe=y.useMemo(()=>({active:se,activeNode:I,activeNodeRect:ve,activatorEvent:$,collisions:Ke,containerNodeRect:ke,dragOverlay:Re,draggableNodes:z,droppableContainers:J,droppableRects:D,over:Ct,measureDroppableContainers:L,scrollableAncestors:ge,scrollableAncestorRects:pe,measuringConfiguration:H,measuringScheduled:te,windowRect:He}),[se,I,ve,$,Ke,ke,Re,z,J,D,Ct,L,ge,pe,H,te,He]),Mt=y.useMemo(()=>({activatorEvent:$,activators:Za,active:se,activeNodeRect:ve,ariaDescribedById:{draggable:fe},dispatch:A,draggableNodes:z,over:Ct,measureDroppableContainers:L}),[$,Za,se,ve,A,fe,z,Ct,L]);return rn.createElement(rp.Provider,{value:N},rn.createElement(Eo.Provider,{value:Mt},rn.createElement(bp.Provider,{value:Fe},rn.createElement(_p.Provider,{value:vt},v)),rn.createElement($x,{disabled:m?.restoreFocus===!1})),rn.createElement(HS,{...m,hiddenTextDescribedById:fe}));function wn(){const et=oe?.autoScrollEnabled===!1,mt=typeof g=="object"?g.enabled===!1:g===!1,Ut=K&&!et&&!mt;return typeof g=="object"?{...g,enabled:Ut}:{enabled:Ut}}}),Kx=y.createContext(null),Nv="button",Yx="Draggable";function Qx(a){let{id:n,data:r,disabled:l=!1,attributes:o}=a;const d=Hi(Yx),{activators:f,activatorEvent:m,active:g,activeNodeRect:v,ariaDescribedById:b,draggableNodes:w,over:S}=y.useContext(Eo),{role:x=Nv,roleDescription:E="draggable",tabIndex:k=0}=o??{},C=g?.id===n,A=y.useContext(C?_p:Kx),[G,N]=mo(),[Q,W]=mo(),K=Ax(f,n),T=Mi(r);Wn(()=>(w.set(n,{id:n,key:d,node:G,activatorNode:Q,data:T}),()=>{const B=w.get(n);B&&B.key===d&&w.delete(n)}),[w,n]);const z=y.useMemo(()=>({role:x,tabIndex:k,"aria-disabled":l,"aria-pressed":C&&x===Nv?!0:void 0,"aria-roledescription":E,"aria-describedby":b.draggable}),[l,x,k,C,E,b.draggable]);return{active:g,activatorEvent:m,activeNodeRect:v,attributes:z,isDragging:C,listeners:l?void 0:K,node:G,over:S,setNodeRef:N,setActivatorNodeRef:W,transform:A}}function Px(){return y.useContext(bp)}const Xx="Droppable",Jx={timeout:25};function Zx(a){let{data:n,disabled:r=!1,id:l,resizeObserverConfig:o}=a;const d=Hi(Xx),{active:f,dispatch:m,over:g,measureDroppableContainers:v}=y.useContext(Eo),b=y.useRef({disabled:r}),w=y.useRef(!1),S=y.useRef(null),x=y.useRef(null),{disabled:E,updateMeasurementsFor:k,timeout:C}={...Jx,...o},A=Mi(k??l),G=y.useCallback(()=>{if(!w.current){w.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{v(Array.isArray(A.current)?A.current:[A.current]),x.current=null},C)},[C]),N=jo({callback:G,disabled:E||!f}),Q=y.useCallback((z,B)=>{N&&(B&&(N.unobserve(B),w.current=!1),z&&N.observe(z))},[N]),[W,K]=mo(Q),T=Mi(n);return y.useEffect(()=>{!N||!W.current||(N.disconnect(),w.current=!1,N.observe(W.current))},[W,N]),y.useEffect(()=>(m({type:Dt.RegisterDroppable,element:{id:l,key:d,disabled:r,node:W,rect:S,data:T}}),()=>m({type:Dt.UnregisterDroppable,key:d,id:l})),[l]),y.useEffect(()=>{r!==b.current.disabled&&(m({type:Dt.SetDroppableDisabled,id:l,key:d,disabled:r}),b.current.disabled=r)},[l,d,r,m]),{active:f,rect:S,isOver:g?.id===l,node:W,over:g,setNodeRef:K}}function qd(a,n,r){const l=a.slice();return l.splice(r<0?l.length+r:r,0,l.splice(n,1)[0]),l}function Wx(a,n){return a.reduce((r,l,o)=>{const d=n.get(l);return d&&(r[o]=d),r},Array(a.length))}function io(a){return a!==null&&a>=0}function Fx(a,n){if(a===n)return!0;if(a.length!==n.length)return!1;for(let r=0;r<a.length;r++)if(a[r]!==n[r])return!1;return!0}function ej(a){return typeof a=="boolean"?{draggable:a,droppable:a}:a}const wp=a=>{let{rects:n,activeIndex:r,overIndex:l,index:o}=a;const d=qd(n,l,r),f=n[o],m=d[o];return!m||!f?null:{x:m.left-f.left,y:m.top-f.top,scaleX:m.width/f.width,scaleY:m.height/f.height}},lo={scaleX:1,scaleY:1},tj=a=>{var n;let{activeIndex:r,activeNodeRect:l,index:o,rects:d,overIndex:f}=a;const m=(n=d[r])!=null?n:l;if(!m)return null;if(o===r){const v=d[f];return v?{x:0,y:r<f?v.top+v.height-(m.top+m.height):v.top-m.top,...lo}:null}const g=nj(d,o,r);return o>r&&o<=f?{x:0,y:-m.height-g,...lo}:o<r&&o>=f?{x:0,y:m.height+g,...lo}:{x:0,y:0,...lo}};function nj(a,n,r){const l=a[n],o=a[n-1],d=a[n+1];return l?r<n?o?l.top-(o.top+o.height):d?d.top-(l.top+l.height):0:d?d.top-(l.top+l.height):o?l.top-(o.top+o.height):0:0}const Sp="Sortable",xp=rn.createContext({activeIndex:-1,containerId:Sp,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:wp,disabled:{draggable:!1,droppable:!1}});function aj(a){let{children:n,id:r,items:l,strategy:o=wp,disabled:d=!1}=a;const{active:f,dragOverlay:m,droppableRects:g,over:v,measureDroppableContainers:b}=Px(),w=Hi(Sp,r),S=m.rect!==null,x=y.useMemo(()=>l.map(K=>typeof K=="object"&&"id"in K?K.id:K),[l]),E=f!=null,k=f?x.indexOf(f.id):-1,C=v?x.indexOf(v.id):-1,A=y.useRef(x),G=!Fx(x,A.current),N=C!==-1&&k===-1||G,Q=ej(d);Wn(()=>{G&&E&&b(x)},[G,x,E,b]),y.useEffect(()=>{A.current=x},[x]);const W=y.useMemo(()=>({activeIndex:k,containerId:w,disabled:Q,disableTransforms:N,items:x,overIndex:C,useDragOverlay:S,sortedRects:Wx(x,g),strategy:o}),[k,w,Q.draggable,Q.droppable,N,x,C,g,S,o]);return rn.createElement(xp.Provider,{value:W},n)}const sj=a=>{let{id:n,items:r,activeIndex:l,overIndex:o}=a;return qd(r,l,o).indexOf(n)},rj=a=>{let{containerId:n,isSorting:r,wasDragging:l,index:o,items:d,newIndex:f,previousItems:m,previousContainerId:g,transition:v}=a;return!v||!l||m!==d&&o===f?!1:r?!0:f!==o&&n===g},ij={duration:200,easing:"ease"},jp="transform",lj=zi.Transition.toString({property:jp,duration:0,easing:"linear"}),oj={roleDescription:"sortable"};function uj(a){let{disabled:n,index:r,node:l,rect:o}=a;const[d,f]=y.useState(null),m=y.useRef(r);return Wn(()=>{if(!n&&r!==m.current&&l.current){const g=o.current;if(g){const v=Er(l.current,{ignoreTransform:!0}),b={x:g.left-v.left,y:g.top-v.top,scaleX:g.width/v.width,scaleY:g.height/v.height};(b.x||b.y)&&f(b)}}r!==m.current&&(m.current=r)},[n,r,l,o]),y.useEffect(()=>{d&&f(null)},[d]),d}function cj(a){let{animateLayoutChanges:n=rj,attributes:r,disabled:l,data:o,getNewIndex:d=sj,id:f,strategy:m,resizeObserverConfig:g,transition:v=ij}=a;const{items:b,containerId:w,activeIndex:S,disabled:x,disableTransforms:E,sortedRects:k,overIndex:C,useDragOverlay:A,strategy:G}=y.useContext(xp),N=dj(l,x),Q=b.indexOf(f),W=y.useMemo(()=>({sortable:{containerId:w,index:Q,items:b},...o}),[w,o,Q,b]),K=y.useMemo(()=>b.slice(b.indexOf(f)),[b,f]),{rect:T,node:z,isOver:B,setNodeRef:J}=Zx({id:f,data:W,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:K,...g}}),{active:O,activatorEvent:F,activeNodeRect:se,attributes:P,setNodeRef:oe,listeners:M,isDragging:$,over:Z,setActivatorNodeRef:V,transform:fe}=Qx({id:f,data:W,attributes:{...oj,...r},disabled:N.draggable}),j=NS(J,oe),H=!!O,D=H&&!E&&io(S)&&io(C),L=!A&&$,te=L&&D?fe:null,re=D?te??(m??G)({rects:k,activeNodeRect:se,activeIndex:S,overIndex:C,index:Q}):null,de=io(S)&&io(C)?d({id:f,items:b,activeIndex:S,overIndex:C}):Q,he=O?.id,ve=y.useRef({activeId:he,items:b,newIndex:de,containerId:w}),ke=b!==ve.current.items,Ue=n({active:O,containerId:w,isDragging:$,isSorting:H,id:f,index:Q,items:b,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:v,wasDragging:ve.current.activeId!=null}),Me=uj({disabled:!Ue,index:Q,node:z,rect:T});return y.useEffect(()=>{H&&ve.current.newIndex!==de&&(ve.current.newIndex=de),w!==ve.current.containerId&&(ve.current.containerId=w),b!==ve.current.items&&(ve.current.items=b)},[H,de,w,b]),y.useEffect(()=>{if(he===ve.current.activeId)return;if(he!=null&&ve.current.activeId==null){ve.current.activeId=he;return}const Oe=setTimeout(()=>{ve.current.activeId=he},50);return()=>clearTimeout(Oe)},[he]),{active:O,activeIndex:S,attributes:P,data:W,rect:T,index:Q,newIndex:de,items:b,isOver:B,isSorting:H,isDragging:$,listeners:M,node:z,overIndex:C,over:Z,setNodeRef:j,setActivatorNodeRef:V,setDroppableNodeRef:J,setDraggableNodeRef:oe,transform:Me??re,transition:Re()};function Re(){if(Me||ke&&ve.current.newIndex===Q)return lj;if(!(L&&!Dd(F)||!v)&&(H||Ue))return zi.Transition.toString({...v,property:jp})}}function dj(a,n){var r,l;return typeof a=="boolean"?{draggable:a,droppable:!1}:{draggable:(r=a?.draggable)!=null?r:n.draggable,droppable:(l=a?.droppable)!=null?l:n.droppable}}function po(a){if(!a)return!1;const n=a.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const hj=[Xe.Down,Xe.Right,Xe.Up,Xe.Left],fj=(a,n)=>{let{context:{active:r,collisionRect:l,droppableRects:o,droppableContainers:d,over:f,scrollableAncestors:m}}=n;if(hj.includes(a.code)){if(a.preventDefault(),!r||!l)return;const g=[];d.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const S=o.get(w.id);if(S)switch(a.code){case Xe.Down:l.top<S.top&&g.push(w);break;case Xe.Up:l.top>S.top&&g.push(w);break;case Xe.Left:l.left>S.left&&g.push(w);break;case Xe.Right:l.left<S.left&&g.push(w);break}});const v=KS({collisionRect:l,droppableRects:o,droppableContainers:g});let b=op(v,"id");if(b===f?.id&&v.length>1&&(b=v[1].id),b!=null){const w=d.get(r.id),S=d.get(b),x=S?o.get(S.id):null,E=S?.node.current;if(E&&x&&w&&S){const C=xo(E).some((K,T)=>m[T]!==K),A=Ep(w,S),G=mj(w,S),N=C||!A?{x:0,y:0}:{x:G?l.width-x.width:0,y:G?l.height-x.height:0},Q={x:x.left,y:x.top};return N.x&&N.y?Q:Ui(Q,N)}}}};function Ep(a,n){return!po(a)||!po(n)?!1:a.data.current.sortable.containerId===n.data.current.sortable.containerId}function mj(a,n){return!po(a)||!po(n)||!Ep(a,n)?!1:a.data.current.sortable.index<n.data.current.sortable.index}function gj({item:a,index:n,onEdit:r,onRemove:l,compact:o=!1}){const{attributes:d,listeners:f,setNodeRef:m,transform:g,transition:v,isDragging:b}=cj({id:a.id}),w={transform:zi.Transform.toString(g),transition:v};return u.jsxs("div",{ref:m,style:w,className:`queue-item ${b?"dragging":""}`,...d,children:[u.jsx("div",{...f,style:{cursor:"grab",display:"flex",alignItems:"center"},children:u.jsxs("span",{className:"queue-item-number",children:[n+1,"."]})}),u.jsx("div",{className:"queue-item-content",children:a.users&&a.users.length>0?u.jsxs("div",{className:"queue-item-group",children:[u.jsxs("div",{className:"queue-item-group-header",children:[u.jsxs("span",{className:"queue-item-group-badge",children:["Gruppe (",a.users.length,")"]}),u.jsx("span",{className:"queue-item-time",children:Sr(a.availableTime)})]}),o?u.jsxs("div",{className:"queue-item-group-preview",title:a.users.join(", "),children:[a.users.slice(0,2).join(", "),a.users.length>2?` +${a.users.length-2}`:""]}):u.jsx("div",{className:"queue-item-group-users",children:a.users.map((S,x)=>u.jsx("input",{type:"text",className:"queue-item-name queue-item-group-name",value:S,onChange:E=>r(a.id,x,E.target.value,!0),onClick:E=>E.stopPropagation()},x))})]}):u.jsxs("div",{className:"queue-item-name-time-row",children:[u.jsx("span",{className:"queue-item-name-wrap",children:u.jsx("input",{type:"text",className:"queue-item-name",value:a.name,onChange:S=>r(a.id,S.target.value),onClick:S=>S.stopPropagation()})}),u.jsx("span",{className:"queue-item-time",children:Sr(a.availableTime)})]})}),u.jsx("button",{className:"queue-item-remove",onClick:()=>l(a.id),title:"Fjern fra k",children:""})]})}function vj({station:a,onStartSession:n,onStopSession:r,onExtendSession:l,onEditSessionName:o,onJoinSession:d,onPauseSession:f,onStartPendingSession:m,onAddToQueue:g,onAddGroupToQueue:v,onEditQueueName:b,onRemoveFromQueue:w,onReorderQueue:S,onStatusChange:x,onOpenUserSelector:E,pendingUsers:k=[],onStartGroup:C,onRemovePendingUser:A}){const[G,N]=y.useState(null),[Q,W]=y.useState({}),K=a.type==="PS",[T,z]=y.useState({});y.useEffect(()=>{const te=setInterval(()=>{const I={},re={};a.activeSessions.forEach(de=>{if(de.isPaused?de.remainingSecondsWhenPaused!==void 0&&(I[de.id]=de.remainingSecondsWhenPaused):I[de.id]=Zn(de),de.waitingSince&&!de.startTime){const he=Date.now()-new Date(de.waitingSince).getTime(),ve=(de.waitingTimeoutSeconds||300)*1e3,ke=Math.max(0,ve-he);re[de.id]=Math.ceil(ke/1e3)}}),W(I),z(re)},1e3);return()=>clearInterval(te)},[a.activeSessions]);const B=()=>{E?.(a.id,"queue")},J=()=>{E?.(a.id,"auto")},O=(te,I,re,de)=>{de&&typeof I=="number"&&re!==void 0?b(a.id,te,I,re,!0):b(a.id,te,I)},F=()=>{if(a.queue.length>0){const te=a.queue[0];n(a.id,te)}},P=a.status==="maintenance"?"maintenance":a.status==="closed"?"closed":a.activeSessions.length>0?"active":"available",oe=a.activeSessions.length<a.maxUsers,M=a.queue.length>0,$=K&&(a.activeSessions.length+a.queue.length>=4||a.activeSessions.length>=2&&a.queue.length>=1),Z=K&&a.activeSessions.length>=2&&!$,V=K&&a.queue.length>=3&&!$,fe=$&&K,j=GS(vv(Ld),vv(Ud,{coordinateGetter:fj})),H=te=>{const{active:I,over:re}=te;if(re&&I.id!==re.id){const de=a.queue.findIndex(ve=>ve.id===I.id),he=a.queue.findIndex(ve=>ve.id===re.id);S(a.id,de,he)}},L=(()=>{if(P!=="active")return null;let te=0,I=0;if(a.activeSessions.length>0){const Re=a.activeSessions.map(Ee=>{const De=Q[Ee.id]??Zn(Ee),He=Ee.durationMinutes*60;return{remaining:De,totalDuration:He}});te=Math.max(...Re.map(Ee=>Ee.remaining)),I=Re.reduce((Ee,De)=>Ee.remaining>De.remaining?Ee:De).totalDuration}const re=a.queue.length*Nt*60;te+=re;const de=I+re;if(te<=0)return null;const he=new Date,ve=new Date(he.getTime()+te*1e3),ke=Math.ceil(te/60),Ue=Math.max(0,de-te),Me=de>0?Math.max(0,Math.min(1,Ue/de)):0;return{availableTime:ve,totalSecondsUntilAvailable:te,totalMinutes:ke,progressPercent:Me}})();return u.jsxs("div",{className:`station-card status-${P} ${K?"station-card--ps":""} ${$?"station-card--ps-dense":""}`,onClick:te=>{P==="available"&&a.activeSessions.length===0&&!te.target.closest("button")&&!te.target.closest(".station-status")&&J()},children:[u.jsxs("div",{className:"station-header",children:[u.jsxs("div",{className:"station-id",children:[u.jsx("div",{className:"station-icon",children:a.type==="PC"?"":""}),u.jsx("div",{className:"station-name-wrapper",children:u.jsx("span",{className:"station-name",children:a.id.toUpperCase()})})]}),u.jsx("div",{className:"station-status-wrapper",children:u.jsxs("span",{className:`station-status ${P} ${P!=="active"?"clickable":""}`,onClick:()=>{P!=="active"&&x&&(P==="available"?x(a.id,"closed"):P==="closed"?x(a.id,"maintenance"):P==="maintenance"&&x(a.id,"available"))},style:{cursor:P!=="active"?"pointer":"default"},title:P!=="active"?"Klik for at ndre status":"",children:[P==="available"&&"Ledig",P==="active"&&"Optaget",P==="maintenance"&&"Ude af drift",P==="closed"&&"Lukket"]})})]}),P==="available"&&a.activeSessions.length===0&&(!K||k.length===0)&&u.jsx("div",{className:"station-available-label",children:"LEDIG"}),a.activeSessions.length>0&&u.jsx("div",{className:`active-sessions ${Z?"active-sessions--grid":""} ${$?"active-sessions--dense":""}`,children:a.activeSessions.map(te=>{const I=!te.startTime,re=I?te.durationMinutes*60:Q[te.id]??Zn(te),de=!I&&re<=300,he=!I&&re<=60,ve=G===te.id,ke=te.userName||"Ingen navn",Ue=te.userId&&te.userBalanceAtStart!=null,Me=Ue?Math.max(0,te.userBalanceAtStart-(te.balanceDeducted||0)):null,Re=Me!=null&&Me<=5,Oe=te.durationMinutes*60,Be=I?0:Oe-re,Ee=Oe>0?Math.max(0,Math.min(1,Be/Oe)):0;return u.jsxs("div",{className:"active-session",children:[!I&&u.jsx("div",{className:`active-session__fill ${he?"active-session__fill--critical":de?"active-session__fill--warning":""}`,style:{width:`${Ee*100}%`}}),u.jsxs("div",{className:"session-name-timer-row",children:[ve?u.jsx("input",{type:"text",className:"session-user-input",value:te.userName||"",onChange:De=>o(a.id,te.id,De.target.value),onBlur:()=>N(null),onKeyDown:De=>{(De.key==="Enter"||De.key==="Escape")&&N(null)},autoFocus:!0,placeholder:"Indtast navn..."}):u.jsxs("div",{className:"session-user",onClick:()=>N(te.id),title:"Klik for at redigere navn",children:[ke,Ue&&u.jsxs("span",{className:`session-balance ${Re?"session-balance--low":""}`,children:["(",Me," min)"]})]}),u.jsx("div",{className:`session-timer ${de?he?"critical":"warning":""} ${te.isPaused?"paused":""} ${I?"pending":""} ${te.waitingSince&&!te.startTime?"attendance":""}`,children:I&&te.waitingSince?u.jsxs("span",{className:"attendance-indicator",children:["Venter p fremmde (",Hc(T[te.id]||0),")"]}):I?u.jsxs("span",{className:"pending-indicator",children:["Klar til start (",Hc(re),")"]}):u.jsxs(u.Fragment,{children:[Hc(re),te.isPaused&&u.jsx("span",{className:"paused-indicator",children:" (Pauset)"})]})})]}),u.jsx("div",{className:`session-extend ${fe?"session-extend--compact":""}`,children:I?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"extend-btn start-session-btn",onClick:()=>m(a.id,te.id,te.userId),children:"START"}),u.jsx("button",{className:"extend-btn delete-btn",onClick:()=>r(a.id,te.id),children:"SLET"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"session-control-buttons",children:[te.isPaused?u.jsx("button",{className:"extend-btn resume-session-btn",onClick:()=>f(a.id,te.id),children:fe?"":"Fortst"}):u.jsx("button",{className:"extend-btn pause-session-btn",onClick:()=>f(a.id,te.id),children:fe?"II":"Pause"}),u.jsx("button",{className:"extend-btn",onClick:()=>r(a.id,te.id),children:fe?"":"Stop"})]}),u.jsxs("div",{className:"time-adjust-buttons",children:[u.jsx("button",{className:"extend-btn time-btn",onClick:()=>l(a.id,te.id,-1),title:"Fjern 1 minut",children:"1"}),u.jsx("button",{className:"extend-btn time-btn",onClick:()=>l(a.id,te.id,1),title:"Tilfj 1 minut",children:"+1"})]})]})})]},te.id)})}),u.jsxs("div",{className:"queue-section",children:[a.queue.length>0&&u.jsxs("div",{className:"queue-title",children:["K (",a.queue.length,")"]}),u.jsx(Vx,{sensors:j,collisionDetection:VS,onDragEnd:H,children:u.jsx(aj,{items:a.queue.map(te=>te.id),strategy:tj,children:u.jsx("div",{className:`queue-list ${V?"queue-list--grid":""} ${$?"queue-list--dense":""}`,children:a.queue.map((te,I)=>u.jsx(gj,{item:te,index:I,onEdit:O,onRemove:re=>w(a.id,re),compact:$&&K},te.id))})})})]}),P!=="maintenance"&&P!=="closed"&&a.activeSessions.length>0&&u.jsx("div",{className:"add-to-queue",children:u.jsxs("button",{className:"add-btn",onClick:B,children:["+ Tilfj til k",K?" (1-4)":""]})}),K&&k.length>0&&a.activeSessions.length===0&&u.jsxs("div",{className:"selected-users-list",children:[u.jsxs("div",{className:"selected-users-title",children:["Valgte (",k.length,"/",a.maxUsers,"):"]}),k.map((te,I)=>u.jsxs("div",{className:"selected-user-item",children:[u.jsx("span",{children:te.name}),u.jsx("button",{type:"button",className:"selected-user-remove",onClick:()=>A?.(I),title:"Fjern",children:""})]},I))]}),P!=="maintenance"&&P!=="closed"&&(a.activeSessions.length===0||K&&oe)&&u.jsx("div",{className:"select-user-section",children:u.jsx("button",{className:"select-user-btn",onClick:J,disabled:K&&!oe&&k.length>=a.maxUsers,children:K?a.activeSessions.length>0?`+ Join session (${a.activeSessions.length}/${a.maxUsers})`:`+ Vlg bruger (${k.length}/${a.maxUsers})`:"Vlg bruger"})}),u.jsxs("div",{className:"station-actions",children:[K&&k.length>0&&a.activeSessions.length===0&&u.jsxs("button",{className:"action-btn start",onClick:C,children:["Start (",k.length," ",k.length===1?"bruger":"brugere",")"]}),M&&a.activeSessions.length===0&&k.length===0&&P!=="maintenance"&&P!=="closed"&&u.jsxs("button",{className:"action-btn start",onClick:F,children:["Start (",a.queue[0].users?.length>0?`Gruppe: ${a.queue[0].users.length}`:a.queue[0].name,")"]}),a.activeSessions.length>1&&K&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"action-btn pause",onClick:()=>{const te=a.activeSessions.some(I=>!I.isPaused);a.activeSessions.forEach(I=>{(te&&!I.isPaused||!te&&I.isPaused)&&f(a.id,I.id)})},children:a.activeSessions.some(te=>!te.isPaused)?"Pause alle":"Fortst alle"}),u.jsx("button",{className:"action-btn stop",onClick:()=>a.activeSessions.forEach(te=>r(a.id,te.id)),children:"Stop alle"})]})]}),L&&u.jsxs("div",{className:`avail-bar ${L.totalSecondsUntilAvailable<=120?"avail-bar--now":L.totalSecondsUntilAvailable<=300?"avail-bar--soon":""}`,children:[u.jsx("div",{className:"avail-bar__fill",style:{width:`${L.progressPercent*100}%`}}),u.jsxs("span",{className:"avail-bar__text",children:[L.totalMinutes,"m  kl. ",Sr(L.availableTime)]})]})]})}function pj({station:a,showNames:n=!0,nicknameMap:r={}}){const[l,o]=y.useState(0),[d,f]=y.useState(0),m=a.status||"available",g=a.activeSessions||[],v=a.queue||[],b=a.type==="PS",w=b&&(g.length+v.length>=4||g.length>=2&&v.length>=1),S=b&&g.length>=2&&!w,x=b&&v.length>=3&&!w,E=g[0]||null,k=E&&E.waitingSince&&!E.startTime;y.useEffect(()=>{if(!E||m==="available"||m==="maintenance"||m==="closed"){o(0),f(0);return}const T=()=>{if(k){const B=Date.now()-new Date(E.waitingSince).getTime(),J=(E.waitingTimeoutSeconds||300)*1e3;f(Math.ceil(Math.max(0,J-B)/1e3))}else o(Zn(E))};T();const z=setInterval(T,1e3);return()=>clearInterval(z)},[E,m,k]);const C={available:{text:"Ledig",cls:"available"},active:{text:"Optaget",cls:"active"},maintenance:{text:"Ude af drift",cls:"maintenance"},closed:{text:"Lukket",cls:"closed"}},A=C[m]||C.available,G=l<=60?"vdt__timer-value--critical":l<=300?"vdt__timer-value--warning":"",Q=a.type!=="PS"?u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),u.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),u.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}):u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"6",y1:"12",x2:"10",y2:"12"}),u.jsx("line",{x1:"8",y1:"10",x2:"8",y2:"14"}),u.jsx("line",{x1:"15",y1:"13",x2:"15.01",y2:"13"}),u.jsx("line",{x1:"18",y1:"11",x2:"18.01",y2:"11"}),u.jsx("path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.544-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"})]}),K=(()=>{if(m!=="active")return null;let T=0,z=0;if(g.length>0){const oe=g.map(Z=>{let V=0;if(Z.startTime)V=Zn(Z);else if(Z.waitingSince){const j=Date.now()-new Date(Z.waitingSince).getTime(),H=(Z.waitingTimeoutSeconds||300)*1e3;V=Math.ceil(Math.max(0,H-j)/1e3)}const fe=(Z.durationMinutes||Nt)*60;return{remaining:V,totalDuration:fe}});T=Math.max(...oe.map(Z=>Z.remaining)),z=oe.reduce((Z,V)=>Z.remaining>V.remaining?Z:V).totalDuration}const B=v.length*Nt*60;T+=B;const J=z+B;if(T<=0)return null;const O=new Date(Date.now()+T*1e3),F=Math.ceil(T/60),se=Math.max(0,J-T),P=J>0?Math.max(0,Math.min(1,se/J)):0;return{availableTime:O,totalSecondsUntilAvailable:T,totalMinutes:F,progressPercent:P}})();return u.jsxs("div",{className:`vdt vdt--${a.type==="PS"?"ps":"pc"} vdt--${m} ${w?"vdt--dense":""}`,children:[u.jsxs("div",{className:"vdt__header",children:[u.jsxs("div",{className:"vdt__header-left",children:[u.jsx("div",{className:"vdt__icon",children:Q}),u.jsx("div",{className:"vdt__name-row",children:u.jsx("span",{className:"vdt__label",children:a.name||a.id.toUpperCase()})})]}),u.jsx("div",{children:u.jsx("span",{className:`vdt__badge vdt__badge--${A.cls}`,children:A.text})})]}),u.jsx("div",{className:"vdt__content",children:m==="maintenance"?u.jsx("div",{className:"vdt__status",children:"Ude af drift"}):m==="closed"?u.jsx("div",{className:"vdt__status",children:"Lukket"}):g.length===0?u.jsx("div",{className:"vdt__status vdt__status--available",children:"LEDIG"}):u.jsx("div",{className:`vdt__sessions ${S?"vdt__sessions--grid":""} ${w?"vdt__sessions--dense":""}`,children:g.map((T,z)=>{const B=T.userId&&r[T.userId]?r[T.userId]:T.userName||"Ukendt",J=n?B:`Spiller ${z+1}`,O=T.waitingSince&&!T.startTime,F=T.startTime?Zn(T):0,se=F<=60?"vdt__timer-value--critical":F<=300?"vdt__timer-value--warning":"",P=(T.durationMinutes||Nt)*60,oe=T.startTime?P-F:0,M=P>0?Math.max(0,Math.min(1,oe/P)):0;return u.jsxs("div",{className:`vdt__session ${O?"vdt__session--waiting":""}`,children:[T.startTime&&u.jsx("div",{className:`vdt__session-fill ${F<=60?"vdt__session-fill--critical":F<=300?"vdt__session-fill--warning":""}`,style:{width:`${M*100}%`}}),u.jsxs("div",{className:"vdt__session-name-timer-row",children:[u.jsx("div",{className:`vdt__session-name ${O?"vdt__session-name--waiting":""}`,children:J}),O?u.jsxs("div",{className:"vdt__attendance-timer",children:["(",Cv(d),")"]}):T.startTime?u.jsx("div",{className:"vdt__session-timer",children:u.jsx("span",{className:`vdt__timer-value ${z===0?G:se}`,children:Cv(z===0?l:F)})}):null]}),O&&u.jsx("div",{className:"vdt__attendance-label",children:"Venter p fremmde"})]},T.id||z)})})}),v.length>0&&u.jsx("div",{className:"vdt__queue",children:u.jsx("div",{className:`vdt__queue-list ${x?"vdt__queue-list--grid":""} ${w?"vdt__queue-list--dense":""}`,children:v.map((T,z)=>{let B;if(!n)B=`Spiller ${z+1}`;else if(T.users&&T.users.length>0){const O=T.users.map(F=>F.userId&&r[F.userId]||F.name||F.userName||"Ukendt");B=w?`${O.slice(0,2).join(", ")}${O.length>2?` +${O.length-2}`:""}`:O.join(", ")}else B=T.userId&&r[T.userId]?r[T.userId]:T.name||T.userName||"Ukendt";const J=T.availableTime?Sr(T.availableTime):null;return u.jsxs("div",{className:"vdt__queue-item",children:[u.jsxs("span",{className:"vdt__queue-number",children:[z+1,"."]}),u.jsx("span",{className:"vdt__queue-name",children:B}),J&&u.jsxs("span",{className:"vdt__queue-time",children:["~",J]})]},T.id||z)})})}),K&&u.jsxs("div",{className:`vdt__avail-bar ${K.totalSecondsUntilAvailable<=120?"vdt__avail-bar--now":K.totalSecondsUntilAvailable<=300?"vdt__avail-bar--soon":""}`,children:[u.jsx("div",{className:"vdt__avail-bar__fill",style:{width:`${K.progressPercent*100}%`}}),u.jsxs("span",{className:"vdt__avail-bar__text",children:[K.totalMinutes,"m  kl. ",Sr(K.availableTime)]})]})]})}function Cv(a){if(a<=0)return"00:00";if(a>=3600){const l=Math.floor(a/3600),o=Math.floor(a%3600/60);return`${l}t ${o}min`}const n=Math.floor(a/60),r=a%60;return`${n}:${String(r).padStart(2,"0")}`}const bn=48,_n=27,yj={w:6,h:5},bj={w:8,h:5},_j=6;function yi(a,n,r,l=bn,o=_n){const d=n/l,f=r/o,m=_j;return{left:a.x*d+m/2,top:a.y*f+m/2,width:a.w*d-m,height:a.h*f-m}}function yo(a,n=bn,r=_n){const l=Math.min(a.w,n),o=Math.min(a.h,r),d=Math.max(0,Math.min(a.x,n-l)),f=Math.max(0,Math.min(a.y,r-o));return{...a,x:d,y:f,w:l,h:o}}function Bd(a,n){return!(a.x+a.w<=n.x||n.x+n.w<=a.x||a.y+a.h<=n.y||n.y+n.h<=a.y)}function sd(a,n){for(const r of a)if(r.station_id!==n.station_id&&Bd(r,n))return r;return null}function wj(a,n){const r=n.x+n.w/2,l=n.y+n.h/2;let o=null,d=1/0;for(const f of a){if(f.station_id===n.station_id||!Bd(f,n))continue;const m=f.x+f.w/2,g=f.y+f.h/2,v=Math.hypot(m-r,g-l);v<d&&(d=v,o=f)}return o}function Av(a,n,r=bn,l=_n){const o=a.map(f=>({...f})),d=o.length*6;for(let f=0;f<d;f++){let m=!1;for(let g=0;g<o.length;g++)for(let v=g+1;v<o.length;v++){const b=o[g],w=o[v];if(!Bd(b,w))continue;const S=n.has(b.station_id),x=n.has(w.station_id);if(S&&x)return null;const E=S?b:x?w:b,k=E===b?v:g,C=o[k],G=[{axis:"x",val:E.x+E.w,dist:Math.abs(E.x+E.w-C.x)},{axis:"x",val:E.x-C.w,dist:Math.abs(C.x+C.w-E.x)},{axis:"y",val:E.y+E.h,dist:Math.abs(E.y+E.h-C.y)},{axis:"y",val:E.y-C.h,dist:Math.abs(C.y+C.h-E.y)}].filter(Q=>Q.axis==="x"?Q.val>=0&&Q.val+C.w<=r:Q.val>=0&&Q.val+C.h<=l).sort((Q,W)=>Q.dist-W.dist);if(G.length===0)return null;const N=G[0];N.axis==="x"?o[k]={...o[k],x:N.val}:o[k]={...o[k],y:N.val},m=!0}if(!m)return o}return null}function $d(a,n,r=bn,l=_n){const o=new Set(n.map(w=>w.station_id)),d=a.filter(w=>!o.has(w.id));if(d.length===0)return[...n];let f=0;for(const w of n){const S=w.y+w.h;S>f&&(f=S)}n.length>0&&(f+=1);const m=[...n];let g=0,v=f,b=0;for(const w of d){const S=w.type==="PS"?bj:yj;g+S.w>r&&(g=0,v+=b+1,b=0),m.push({station_id:w.id,x:g,y:v,w:S.w,h:S.h}),g+=S.w+1,S.h>b&&(b=S.h)}return m}function Rv(a,n=bn,r=_n){return $d(a,[],n,r)}function Sj(a,n,r){if(!r||r.length===0)return null;if(!a)return[...r].sort((g,v)=>g.y-v.y||g.x-v.x)[0]?.station_id||null;const l=r.find(m=>m.station_id===a);if(!l)return r[0]?.station_id||null;const o=l.x+l.w/2,d=l.y+l.h/2;let f=r.filter(m=>m.station_id!==a);switch(n){case"ArrowRight":f=f.filter(m=>m.x+m.w/2>o);break;case"ArrowLeft":f=f.filter(m=>m.x+m.w/2<o);break;case"ArrowDown":f=f.filter(m=>m.y+m.h/2>d);break;case"ArrowUp":f=f.filter(m=>m.y+m.h/2<d);break;default:return a}return f.length===0?a:(f.sort((m,g)=>{const v=Math.abs(m.x+m.w/2-o)+Math.abs(m.y+m.h/2-d),b=Math.abs(g.x+g.w/2-o)+Math.abs(g.y+g.h/2-d);return v-b}),f[0].station_id)}function Hd({stations:a=[],layoutItems:n=[],gridCols:r=bn,gridRows:l=_n,editable:o=!1,onLayoutChange:d,onSelectionChange:f,collisionMode:m="block",renderTile:g,className:v="",focusedStationId:b=null,highlightedStationId:w=null}){const S=y.useRef(null),[x,E]=y.useState({w:0,h:0}),[k,C]=y.useState(null),[A,G]=y.useState(null),[N,Q]=y.useState(null),[W,K]=y.useState(null),[T,z]=y.useState(null),[B,J]=y.useState(new Set),[O,F]=y.useState(null),se=y.useRef(B);y.useEffect(()=>{se.current!==B&&(se.current=B,f?.(B))},[B,f]);const P=$d(a,n,r,l),oe=(()=>{if(o||P.length===0)return l;let I=0;for(const re of P){const de=re.y+re.h;de>I&&(I=de)}return Math.min(l,I+1)})(),M=y.useRef(P);M.current=P,y.useEffect(()=>{if(!w||!S.current)return;S.current.querySelector(`[data-station-id="${w}"]`)?.scrollIntoView({behavior:"smooth",block:"center"})},[w]),y.useEffect(()=>{const I=S.current;if(!I)return;const re=()=>{const he=I.getBoundingClientRect();E({w:he.width,h:he.height})};re();const de=new ResizeObserver(re);return de.observe(I),()=>de.disconnect()},[]);const $=o?l:oe,Z=()=>{if(!o||x.w===0)return null;const I=x.w/r,re=x.h/$,de=[];for(let he=1;he<r;he++)de.push(u.jsx("line",{x1:he*I,y1:0,x2:he*I,y2:x.h,stroke:"rgba(0,217,255,0.06)",strokeWidth:"1"},`v${he}`));for(let he=1;he<$;he++)de.push(u.jsx("line",{x1:0,y1:he*re,x2:x.w,y2:he*re,stroke:"rgba(0,217,255,0.06)",strokeWidth:"1"},`h${he}`));return u.jsx("svg",{className:"lc__grid-lines",width:x.w,height:x.h,children:de})},V=y.useCallback((I,re)=>{if(!o||I.target.closest(".lc__resize-handle"))return;I.preventDefault(),I.stopPropagation();const de=S.current.getBoundingClientRect(),he=I.clientX-de.left,ve=I.clientY-de.top;if(I.shiftKey){J(Ee=>{const De=new Set(Ee);return De.has(re.station_id)?De.delete(re.station_id):De.add(re.station_id),De});return}const ke=B.has(re.station_id);ke||J(new Set([re.station_id]));const Ue=yi(re,x.w,x.h,r,$),Me=ke?B:new Set([re.station_id]),Re={},Oe=M.current;for(const Ee of Me){const De=Oe.find(He=>He.station_id===Ee);De&&(Re[Ee]={...De})}C({station_id:re.station_id,dragSet:Me,originals:Re,startPx:he,startPy:ve,origItem:{...re},offsetX:he-Ue.left,offsetY:ve-Ue.top});const Be=[];for(const Ee of Me){const De=Re[Ee];De&&Be.push({station_id:Ee,x:De.x,y:De.y,w:De.w,h:De.h})}K(Be)},[o,x,r,$,B]),fe=y.useCallback((I,re)=>{if(!o)return;I.preventDefault(),I.stopPropagation();const de=S.current.getBoundingClientRect();G({station_id:re.station_id,origItem:{...re},startPx:I.clientX-de.left,startPy:I.clientY-de.top}),Q({x:re.x,y:re.y,w:re.w,h:re.h}),J(new Set([re.station_id]))},[o]),j=y.useCallback(I=>{if(!o||I.target!==S.current&&!I.target.classList.contains("lc__grid-lines"))return;I.preventDefault();const re=S.current.getBoundingClientRect(),de=I.clientX-re.left,he=I.clientY-re.top;I.shiftKey||J(new Set),F({startX:de,startY:he,curX:de,curY:he})},[o]);y.useEffect(()=>{const I=!!k,re=!!A,de=!!O;if(!I&&!re&&!de)return;const he=ke=>{const Ue=S.current.getBoundingClientRect(),Me=ke.clientX-Ue.left,Re=ke.clientY-Ue.top;if(de&&!I&&!re){F(Oe=>Oe?{...Oe,curX:Me,curY:Re}:null);return}if(I){const Oe=x.w/r,Be=x.h/$,Ee=Math.round((Me-k.startPx)/Oe),De=Math.round((Re-k.startPy)/Be),He=[];for(const ge of k.dragSet){const pe=k.originals[ge];if(!pe)continue;const ye=yo({...pe,x:pe.x+Ee,y:pe.y+De},r,l);He.push({station_id:ge,x:ye.x,y:ye.y,w:ye.w,h:ye.h})}K(He)}if(re){const Oe=x.w/r,Be=x.h/$,Ee=Me-A.startPx,De=Re-A.startPy,He=Math.max(2,A.origItem.w+Math.round(Ee/Oe)),ge=Math.max(2,A.origItem.h+Math.round(De/Be)),pe=yo({...A.origItem,w:He,h:ge},r,l);Q({x:pe.x,y:pe.y,w:pe.w,h:pe.h})}},ve=ke=>{if(de&&!I&&!re&&O){const Ue=Math.min(O.startX,O.curX),Me=Math.min(O.startY,O.curY),Re=Math.max(O.startX,O.curX),Oe=Math.max(O.startY,O.curY);if(Re-Ue>5||Oe-Me>5){const Be=M.current,Ee=new Set(ke?.shiftKey?B:[]);for(const De of Be){const He=yi(De,x.w,x.h,r,$),ge=He.left,pe=He.top,ye=He.left+He.width,ze=He.top+He.height;ye>Ue&&ge<Re&&ze>Me&&pe<Oe&&Ee.add(De.station_id)}J(Ee)}F(null);return}if(I&&W){const Ue=M.current,Me=k.dragSet,Re=Ue.filter(Ee=>!Me.has(Ee.station_id)),Oe=W.map(Ee=>({...Ee}));let Be=!1;for(const Ee of Oe){if(sd(Re,Ee)){Be=!0;break}if(sd(Oe,Ee)){Be=!0;break}}if(Be)if(m==="swap"&&Me.size===1){const Ee=[...Me][0],De=Oe[0],He=wj(Re,De);if(He){const ge=k.originals[Ee],pe=Ue.map(ye=>ye.station_id===Ee?{...ye,x:He.x,y:He.y}:ye.station_id===He.station_id?{...ye,x:ge.x,y:ge.y}:ye);d?.(pe)}else H(Me)}else H(Me);else{const Ee={};for(const He of Oe)Ee[He.station_id]=He;const De=Ue.map(He=>Ee[He.station_id]?Ee[He.station_id]:He);d?.(De)}C(null),K(null);return}if(re&&N){const Ue=M.current,Me=A.station_id,Re={station_id:Me,...N},Oe=Ue.filter(Ee=>Ee.station_id!==Me);if(sd(Oe,Re))H(new Set([Me]));else{const Ee=Ue.map(De=>De.station_id===Me?Re:De);d?.(Ee)}G(null),Q(null);return}C(null),G(null),Q(null),K(null),F(null)};return window.addEventListener("pointermove",he),window.addEventListener("pointerup",ve),()=>{window.removeEventListener("pointermove",he),window.removeEventListener("pointerup",ve)}},[k,A,O,N,W,x,r,l,$,m,d,B]);const H=I=>{z(I),setTimeout(()=>z(null),600)},D=()=>{if(!O)return null;const I=Math.min(O.startX,O.curX),re=Math.min(O.startY,O.curY),de=Math.abs(O.curX-O.startX),he=Math.abs(O.curY-O.startY);return{position:"absolute",left:I,top:re,width:de,height:he}};y.useEffect(()=>{if(!o)return;const I=re=>{re.key==="Escape"&&B.size>0&&(re.stopPropagation(),J(new Set)),(re.ctrlKey||re.metaKey)&&re.key==="a"&&(re.preventDefault(),J(new Set(n.map(de=>de.station_id))))};return window.addEventListener("keydown",I,!0),()=>window.removeEventListener("keydown",I,!0)},[o,B,n]);const L=o?void 0:{aspectRatio:`${r} / ${oe}`,height:"auto"};if(x.w===0||x.h===0)return u.jsx("div",{ref:S,className:`lc ${v}`,style:L});const te=k?.dragSet||new Set;return u.jsxs("div",{ref:S,className:`lc ${o?"lc--editable":""} ${v}`,style:L,onPointerDown:o?j:void 0,children:[Z(),W&&k&&W.map(I=>u.jsx("div",{className:"lc__ghost",style:rd(yi(I,x.w,x.h,r,$))},`ghost-${I.station_id}`)),N&&A&&u.jsx("div",{className:"lc__ghost",style:rd(yi(N,x.w,x.h,r,$))}),O&&u.jsx("div",{className:"lc__marquee",style:D()}),P.map(I=>{const re=a.find(Be=>Be.id===I.station_id);if(!re)return null;const de=te.has(I.station_id),he=A?.station_id===I.station_id,ve=yi(I,x.w,x.h,r,$),ke=B.has(I.station_id),Ue=T instanceof Set?T.has(I.station_id):T===I.station_id,Me=b===I.station_id,Re=w===I.station_id,Oe=["lc__tile",de?"lc__tile--dragging":"",he?"lc__tile--dragging":"",Ue?"lc__tile--collision":"",ke&&o?"lc__tile--selected":"",Me?"lc__tile--focused":"",Re?"lc__tile--highlighted":""].filter(Boolean).join(" ");return u.jsxs("div",{"data-station-id":I.station_id,className:Oe,style:{...rd(ve),opacity:de?.4:1},onPointerDown:o?Be=>V(Be,I):void 0,children:[g(re,ve),o&&u.jsx("div",{className:"lc__resize-handle",onPointerDown:Be=>fe(Be,I)})]},I.station_id)}),o&&B.size>1&&!k&&u.jsxs("div",{className:"lc__selection-badge",children:[B.size," valgte"]})]})}function rd(a){return{position:"absolute",left:`${a.left}px`,top:`${a.top}px`,width:`${a.width}px`,height:`${a.height}px`}}function xj({stations:a,appSettings:n,onExitViewMode:r,layoutItems:l=[],gridCols:o=bn,gridRows:d=_n}){const[f,m]=y.useState(new Date),[g,v]=y.useState({}),b=y.useRef(a);y.useEffect(()=>{a!==b.current&&(m(new Date),b.current=a)},[a]),y.useEffect(()=>{let E=!1;return Wv("",1e3).then(k=>{if(E)return;const C={};k.forEach(A=>{A.nickname&&A.flangoUserId&&(C[A.flangoUserId]=A.nickname)}),v(C)}).catch(()=>{}),()=>{E=!0}},[]);const w=n?.show_names!==!1,S=n?.show_room_title_viewmode!==!1,x=n?.room_title||"Spillerummet";return u.jsxs("div",{className:"view-mode",children:[u.jsxs("div",{className:"view-mode__header",children:[u.jsx("div",{children:S&&u.jsx("div",{className:"view-mode__title",children:x})}),u.jsxs("div",{className:"view-mode__meta",children:[u.jsxs("span",{className:"view-mode__updated",children:["Sidst opdateret: ",Sr(f)]}),u.jsxs("button",{className:"view-mode__exit-btn",onClick:r,title:"Tilbage til kontrolpanel (Tab)",children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),u.jsx("polyline",{points:"12 19 5 12 12 5"})]}),"Tilbage"]})]})]}),u.jsx("div",{className:"view-mode__layout",style:{"--pulse-i":n?.pulse_enabled_viewmode!==!1?(n?.pulse_intensity_viewmode??50)/100:0},children:a.length===0?u.jsx("div",{className:"view-mode__empty",children:"Ingen stationer konfigureret"}):u.jsx(Hd,{stations:a,layoutItems:l,gridCols:o,gridRows:d,editable:!1,renderTile:E=>u.jsx(pj,{station:E,showNames:w,nicknameMap:g}),className:"view-mode__canvas"})})]})}async function Tp(a=null){try{let n=me.schema("gaming").from("stations").select("*").order("display_order",{ascending:!0});a&&(n=n.eq("institution_id",a));const{data:r,error:l}=await n;return l?(console.error("Error fetching stations:",l),[]):(r||[]).map(o=>({id:o.slug,dbId:o.id,slug:o.slug,name:o.name,type:o.type==="console"?"PS":"PC",maxUsers:o.max_users,displayOrder:o.display_order,status:o.status,hasClient:o.has_client}))}catch(n){return console.error("Error in fetchStations:",n),[]}}async function jj({name:a,type:n,maxUsers:r}){try{const l=await wa();if(!l)return null;const o=kp(a),{data:d}=await me.schema("gaming").from("stations").select("display_order").order("display_order",{ascending:!1}).limit(1),f=d&&d.length>0?d[0].display_order+1:0,{data:m,error:g}=await me.schema("gaming").from("stations").insert({institution_id:l,slug:o,name:a,type:n==="PS"?"console":"pc",max_users:r||(n==="PS"?4:1),display_order:f,status:"available"}).select().single();return g?(g.code==="23505"&&console.error("Station slug already exists:",o),console.error("Error creating station:",g),null):{id:m.slug,dbId:m.id,slug:m.slug,name:m.name,type:m.type==="console"?"PS":"PC",maxUsers:m.max_users,displayOrder:m.display_order,status:m.status,hasClient:m.has_client}}catch(l){return console.error("Error in createStation:",l),null}}async function Ej(a,n){try{const r={};n.name!==void 0&&(r.name=n.name,r.slug=kp(n.name)),n.type!==void 0&&(r.type=n.type==="PS"?"console":"pc"),n.maxUsers!==void 0&&(r.max_users=n.maxUsers),n.status!==void 0&&(r.status=n.status);const{error:l}=await me.schema("gaming").from("stations").update(r).eq("id",a);return l?(console.error("Error updating station:",l),!1):!0}catch(r){return console.error("Error in updateStation:",r),!1}}async function Tj(a){try{const{error:n}=await me.schema("gaming").from("stations").delete().eq("id",a);return n?(console.error("Error deleting station:",n),!1):!0}catch(n){return console.error("Error in deleteStation:",n),!1}}function kp(a){return a.toLowerCase().replace(/[]/g,"ae").replace(/[]/g,"oe").replace(/[]/g,"aa").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||"station"}function kj({stations:a,onClose:n,onStationsChanged:r}){const[l,o]=y.useState([]),[d,f]=y.useState(!1),[m,g]=y.useState(null),[v,b]=y.useState(null),[w,S]=y.useState(!1),[x,E]=y.useState(null),[k,C]=y.useState(""),[A,G]=y.useState("PC"),[N,Q]=y.useState(1);y.useEffect(()=>{W()},[]);const W=async()=>{f(!0);try{const O=await Tp();o(O)}catch(O){console.error("Error loading stations:",O),g("Fejl ved indlsning af stationer")}finally{f(!1)}},K=()=>{E(null),C(""),G("PC"),Q(1),S(!0),g(null)},T=O=>{E(O),C(O.name),G(O.type),Q(O.maxUsers),S(!0),g(null)},z=async O=>{if(a?.find(P=>P.id===O.id||P.slug===O.slug)?.activeSessions?.length>0){g(`"${O.name}" har aktive sessions. Stop dem frst.`);return}if(!window.confirm(`Slet stationen "${O.name}"? Alle tilknyttede data fjernes.`))return;g(null),await Tj(O.dbId)?(o(P=>P.filter(oe=>oe.dbId!==O.dbId)),J(`"${O.name}" slettet`),r?.()):g("Kunne ikke slette stationen")},B=async O=>{if(O.preventDefault(),!!k.trim()){g(null),f(!0);try{if(x)await Ej(x.dbId,{name:k.trim(),type:A,maxUsers:N})?(await W(),J(`"${k.trim()}" opdateret`),S(!1),r?.()):g("Kunne ikke opdatere stationen");else{const F=await jj({name:k.trim(),type:A,maxUsers:N});F?(o(se=>[...se,F]),J(`"${k.trim()}" oprettet`),S(!1),r?.()):g("Kunne ikke oprette stationen. Tjek at navnet er unikt.")}}finally{f(!1)}}},J=O=>{b(O),setTimeout(()=>b(null),3e3)};return u.jsx("div",{className:"mss__overlay",onClick:n,children:u.jsxs("div",{className:"mss",onClick:O=>O.stopPropagation(),children:[u.jsxs("div",{className:"mss__header",children:[u.jsx("h3",{children:"Administrr stationer"}),u.jsx("button",{className:"mss__close",onClick:n,children:""})]}),m&&u.jsx("div",{className:"mss__msg mss__msg--error",children:m}),v&&u.jsx("div",{className:"mss__msg mss__msg--success",children:v}),w?u.jsxs("form",{className:"mss__form",onSubmit:B,children:[u.jsx("h4",{className:"mss__form-title",children:x?"Rediger station":"Ny station"}),u.jsxs("label",{className:"mss__field",children:[u.jsx("span",{children:"Navn"}),u.jsx("input",{type:"text",value:k,onChange:O=>C(O.target.value),placeholder:"fx PC 1, Xbox Lounge",autoFocus:!0,required:!0})]}),u.jsxs("label",{className:"mss__field",children:[u.jsx("span",{children:"Type"}),u.jsxs("select",{value:A,onChange:O=>{G(O.target.value),O.target.value==="PS"&&N===1?Q(4):O.target.value==="PC"&&N===4&&Q(1)},children:[u.jsx("option",{value:"PC",children:"PC"}),u.jsx("option",{value:"PS",children:"Konsol"})]})]}),u.jsxs("label",{className:"mss__field",children:[u.jsx("span",{children:"Maks brugere"}),u.jsx("input",{type:"number",min:"1",max:"8",value:N,onChange:O=>Q(parseInt(O.target.value)||1)})]}),u.jsxs("div",{className:"mss__form-actions",children:[u.jsx("button",{type:"submit",className:"le__btn le__btn--primary",disabled:d||!k.trim(),children:d?"Gemmer...":x?"Gem ndringer":"Opret"}),u.jsx("button",{type:"button",className:"le__btn",onClick:()=>S(!1),children:"Annullr"})]})]}):u.jsxs("div",{className:"mss__content",children:[d?u.jsx("div",{className:"mss__empty",children:"Indlser stationer..."}):l.length===0?u.jsx("div",{className:"mss__empty",children:u.jsx("p",{children:"Ingen stationer oprettet endnu."})}):u.jsx("div",{className:"mss__list",children:l.map(O=>u.jsxs("div",{className:"mss__item",children:[u.jsx("div",{className:"mss__item-icon",children:O.type==="PS"?"":""}),u.jsxs("div",{className:"mss__item-info",children:[u.jsx("span",{className:"mss__item-name",children:O.name}),u.jsxs("span",{className:"mss__item-meta",children:[O.type,"  maks ",O.maxUsers," ",O.maxUsers===1?"bruger":"brugere"]})]}),u.jsxs("div",{className:"mss__item-actions",children:[u.jsx("button",{className:"le__btn",onClick:()=>T(O),children:"Rediger"}),u.jsx("button",{className:"le__btn le__btn--danger",onClick:()=>z(O),children:"Slet"})]})]},O.dbId))}),u.jsx("button",{className:"le__btn le__btn--primary mss__add-btn",onClick:K,children:"+ Tilfj station"})]})]})})}async function pr(){try{const{data:a,error:n}=await me.schema("gaming").from("station_layout_presets").select("*").order("name");return n?(console.error("Error fetching layout presets:",n),[]):a||[]}catch(a){return console.error("Error in fetchLayoutPresets:",a),[]}}async function Ov(a){try{const n=await wa();if(!n)return{data:null,error:"Kunne ikke finde institution. Prv at logge ind igen."};const r={institution_id:n,name:a.name,is_default:a.is_default??!1,grid_w:a.grid_w??48,grid_h:a.grid_h??27,items_json:a.items_json??[],updated_at:new Date().toISOString()};if(a.id){const{data:l,error:o}=await me.schema("gaming").from("station_layout_presets").update(r).eq("id",a.id).select().single();return o?(console.error("Error updating layout preset:",o),{data:null,error:`Fejl ved opdatering: ${o.message}`}):{data:l,error:null}}else{const{data:l,error:o}=await me.schema("gaming").from("station_layout_presets").insert(r).select().single();return o?(console.error("Error creating layout preset:",o),{data:null,error:`Fejl ved oprettelse: ${o.message}`}):{data:l,error:null}}}catch(n){return console.error("Error in saveLayoutPreset:",n),{data:null,error:`Uventet fejl: ${n.message}`}}}async function Nj(a){try{const{error:n}=await me.schema("gaming").from("station_layout_presets").delete().eq("id",a);return n?(console.error("Error deleting layout preset:",n),!1):!0}catch(n){return console.error("Error in deleteLayoutPreset:",n),!1}}async function Cj(a){try{const n=await wa();if(!n)return!1;const{error:r}=await me.schema("gaming").from("station_layout_presets").update({is_default:!1}).eq("institution_id",n);if(r)return console.error("Error clearing default presets:",r),!1;const{error:l}=await me.schema("gaming").from("station_layout_presets").update({is_default:!0,updated_at:new Date().toISOString()}).eq("id",a);return l?(console.error("Error setting default preset:",l),!1):!0}catch(n){return console.error("Error in setDefaultPreset:",n),!1}}function Aj({stations:a,institutionId:n,onClose:r,onStationsChanged:l}){const o=n?`skaermtid_last_layout_preset_${n}`:"skaermtid_last_layout_preset",[d,f]=y.useState([]),[m,g]=y.useState(null),[v,b]=y.useState(""),[w,S]=y.useState([]),[x,E]=y.useState(bn),[k,C]=y.useState(_n),[A,G]=y.useState(!1),[N,Q]=y.useState(!1),[W,K]=y.useState("block"),[T,z]=y.useState(!1),[B,J]=y.useState(""),[O,F]=y.useState(!1),[se,P]=y.useState(!0),[oe,M]=y.useState(null),[$,Z]=y.useState(!1),[V,fe]=y.useState(new Set),j=y.useRef([]),H=y.useRef([]),[D,L]=y.useState(0),[te,I]=y.useState(0),re=y.useRef(!1),de=y.useCallback(le=>{S(be=>{const ne=typeof le=="function"?le(be):le;return ne===be?be:(re.current||(j.current=[...j.current,be],j.current.length>80&&(j.current=j.current.slice(-80)),H.current=[],L(j.current.length),I(0)),re.current=!1,ne)})},[]),he=y.useCallback(()=>{if(j.current.length===0)return;const le=j.current[j.current.length-1];j.current=j.current.slice(0,-1),L(j.current.length),S(be=>(H.current=[...H.current,be],I(H.current.length),le)),G(!0)},[]),ve=y.useCallback(()=>{if(H.current.length===0)return;const le=H.current[H.current.length-1];H.current=H.current.slice(0,-1),I(H.current.length),S(be=>(j.current=[...j.current,be],L(j.current.length),le)),G(!0)},[]),ke=y.useCallback((le,be)=>{de(ne=>{const _e=V.size>0?V:new Set(ne.map(Fe=>Fe.station_id)),je=ne.filter(Fe=>_e.has(Fe.station_id));if(je.length===0)return ne;const Le=[...je].sort((Fe,Mt)=>Fe.y!==Mt.y?Fe.y-Mt.y:Fe.x-Mt.x)[0],Ct=Math.max(2,Le.w+le),ct=Math.max(2,Le.h+be),St=Le.w>0?Ct/Le.w:1,vt=Le.h>0?ct/Le.h:1,ft=ne.map(Fe=>{if(!_e.has(Fe.station_id))return Fe;const Mt=Math.max(2,Fe.w+le),wn=Math.max(2,Fe.h+be);if(Fe.station_id===Le.station_id)return yo({...Fe,w:Mt,h:wn},x,k);const et=Le.x+Math.round((Fe.x-Le.x)*St),mt=Le.y+Math.round((Fe.y-Le.y)*vt);return yo({...Fe,x:et,y:mt,w:Mt,h:wn},x,k)}),dt=ft.filter(Fe=>_e.has(Fe.station_id));let Yn=ft;if(dt.length>1){const Fe=Le.station_id,Mt=Av(dt,new Set([Fe]),x,k);if(!Mt)return ne;const wn={};for(const et of Mt)wn[et.station_id]=et;Yn=ft.map(et=>wn[et.station_id]||et)}return Av(Yn,_e,x,k)||ne}),G(!0)},[V,x,k,de]);y.useEffect(()=>{Ue()},[]);const Ue=async()=>{P(!0);const le=await pr();f(le);const be=localStorage.getItem(o),ne=le.find(Ke=>Ke.is_default),je=(be?le.find(Ke=>Ke.id===be):null)||ne||null;if(je)Me(je);else{const Ke=Rv(a,bn,_n);S(Ke),E(bn),C(_n),b("Standard"),g(null)}P(!1)},Me=le=>{g(le.id),b(le.name),re.current=!0,S(le.items_json||[]),E(le.grid_w||bn),C(le.grid_h||_n),G(!1),j.current=[],H.current=[],L(0),I(0),localStorage.setItem(o,le.id)},Re=y.useCallback(le=>{de(le),G(!0)},[de]),Oe=(le,be)=>{M({type:le,text:be}),setTimeout(()=>M(null),4e3)},Be=async()=>{Z(!0);const{data:le,error:be}=await Ov({id:m||void 0,name:v||"Standard",grid_w:x,grid_h:k,items_json:w});if(Z(!1),be)return Oe("error",be),null;if(le){g(le.id),G(!1),localStorage.setItem(o,le.id),Oe("success",`"${le.name}" gemt`);const ne=await pr();return f(ne),le}return null},Ee=async()=>{if(!B.trim())return;Z(!0);const{data:le,error:be}=await Ov({name:B.trim(),grid_w:x,grid_h:k,items_json:w});if(Z(!1),be){Oe("error",be);return}if(le){g(le.id),b(le.name),G(!1),z(!1),J(""),localStorage.setItem(o,le.id),Oe("success",`"${le.name}" gemt`);const ne=await pr();f(ne)}},De=async()=>{if(!m||!window.confirm(`Slet layout "${v}"?`))return;if(await Nj(m)){Oe("success",`"${v}" slettet`);const be=await pr();f(be),be.length>0?Me(be[0]):(g(null),b("Standard"),S(Rv(a,x,k)),G(!1),localStorage.removeItem(o))}else Oe("error","Kunne ikke slette layout")},He=async()=>{let le=m;if(le||(le=(await Be())?.id||null),le)if(await Cj(le)){Oe("success","Sat som standard-layout");const ne=await pr();f(ne)}else Oe("error","Kunne ikke stte standard")},ge=le=>{if(A&&!window.confirm("Du har ndringer der ikke er gemt. Skift alligevel?"))return;const be=d.find(ne=>ne.id===le);be&&Me(be)},pe=le=>{const be=le.status||"available",ne=le.type!=="PS",_e=le.activeSessions?.length||0,je=le.queue?.length||0;return u.jsxs("div",{className:`le-tile le-tile--${be}`,children:[u.jsxs("div",{className:"le-tile__header",children:[u.jsx("span",{className:"le-tile__icon",children:ne?"":""}),u.jsx("span",{className:"le-tile__name",children:le.name||le.id.toUpperCase()})]}),u.jsxs("div",{className:"le-tile__info",children:[_e>0&&u.jsxs("span",{className:"le-tile__badge le-tile__badge--active",children:[_e," aktiv"]}),je>0&&u.jsxs("span",{className:"le-tile__badge le-tile__badge--queue",children:[je," i k"]}),_e===0&&je===0&&u.jsx("span",{className:"le-tile__badge le-tile__badge--available",children:"Ledig"})]})]})};y.useEffect(()=>{const le=be=>{if((be.ctrlKey||be.metaKey)&&be.key==="z"&&!be.shiftKey){be.preventDefault(),he();return}if((be.ctrlKey||be.metaKey)&&(be.key==="Z"||be.key==="z"&&be.shiftKey||be.key==="y")){be.preventDefault(),ve();return}be.key==="Escape"&&(T?z(!1):O?F(!1):r())};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[r,T,O,he,ve]);const ze=d.find(le=>le.id===m)?.is_default===!0;return u.jsxs("div",{className:"le",children:[u.jsxs("div",{className:"le__toolbar",children:[u.jsxs("div",{className:"le__toolbar-left",children:[u.jsxs("select",{className:"le__select",value:m||"",onChange:le=>le.target.value?ge(le.target.value):null,children:[d.length===0&&u.jsx("option",{value:"",children:"Ingen presets"}),d.map(le=>u.jsxs("option",{value:le.id,children:[le.name,le.is_default?" (standard)":""]},le.id))]}),u.jsx("button",{className:"le__btn le__btn--primary",onClick:Be,disabled:$,title:"Gem",children:$?" Gemmer...":A?" Gem *":" Gem"}),u.jsx("button",{className:"le__btn",onClick:()=>{z(!0),J("")},title:"Gem som ny",children:"Gem som..."}),m&&u.jsx("button",{className:"le__btn le__btn--danger",onClick:De,title:"Slet layout",children:"Slet"}),m&&!ze&&u.jsx("button",{className:"le__btn",onClick:He,title:"St som standard-layout",children:"St standard"}),ze&&u.jsx("span",{className:"le__default-badge",children:" Standard"})]}),u.jsxs("div",{className:"le__toolbar-right",children:[u.jsxs("div",{className:"le__undo-group",children:[u.jsx("button",{className:"le__btn le__btn--undo",onClick:he,disabled:D===0,title:"Fortryd (Ctrl+Z)",children:""}),u.jsx("button",{className:"le__btn le__btn--undo",onClick:ve,disabled:te===0,title:"Gentag (Ctrl+Shift+Z)",children:""})]}),u.jsxs("div",{className:"le__size-group",children:[u.jsxs("span",{className:"le__size-label",children:["Strrelse",V.size>0?` (${V.size})`:""]}),u.jsx("button",{className:"le__btn le__btn--size",onClick:()=>ke(-1,-1),title:"Formindsk (1 grid)",children:""}),u.jsx("button",{className:"le__btn le__btn--size",onClick:()=>ke(1,1),title:"Forstr (+1 grid)",children:"+"}),u.jsx("button",{className:"le__btn le__btn--size le__btn--size-w",onClick:()=>ke(-1,0),title:"Smallere bredde",children:"W"}),u.jsx("button",{className:"le__btn le__btn--size le__btn--size-w",onClick:()=>ke(1,0),title:"Bredere",children:"W+"}),u.jsx("button",{className:"le__btn le__btn--size le__btn--size-h",onClick:()=>ke(0,-1),title:"Lavere hjde",children:"H"}),u.jsx("button",{className:"le__btn le__btn--size le__btn--size-h",onClick:()=>ke(0,1),title:"Hjere",children:"H+"})]}),u.jsxs("label",{className:"le__toggle",children:[u.jsx("input",{type:"checkbox",checked:W==="swap",onChange:le=>K(le.target.checked?"swap":"block")}),u.jsx("span",{className:"le__toggle-label",children:"Swap-tilstand"})]}),u.jsxs("label",{className:"le__toggle",children:[u.jsx("input",{type:"checkbox",checked:N,onChange:le=>Q(le.target.checked)}),u.jsx("span",{className:"le__toggle-label",children:"Redigr layout"})]}),u.jsx("button",{className:"le__btn",onClick:()=>F(!0),children:"Administrr stationer"}),u.jsx("button",{className:"le__btn le__btn--close",onClick:r,title:"Luk (Esc)",children:" Luk"})]})]}),oe&&u.jsx("div",{className:`le__status le__status--${oe.type}`,children:oe.text}),u.jsx("div",{className:"le__canvas-wrap",children:se?u.jsx("div",{className:"le__loading",children:"Indlser layout..."}):u.jsx(Hd,{stations:a,layoutItems:w,gridCols:x,gridRows:k,editable:N,onLayoutChange:Re,onSelectionChange:fe,collisionMode:W,renderTile:pe,className:"le__canvas"})}),T&&u.jsx("div",{className:"le__dialog-overlay",onClick:()=>z(!1),children:u.jsxs("div",{className:"le__dialog",onClick:le=>le.stopPropagation(),children:[u.jsx("h3",{children:"Gem layout som"}),u.jsx("input",{className:"le__dialog-input",type:"text",placeholder:"Navn p layout...",value:B,onChange:le=>J(le.target.value),onKeyDown:le=>le.key==="Enter"&&Ee(),autoFocus:!0}),u.jsxs("div",{className:"le__dialog-actions",children:[u.jsx("button",{className:"le__btn le__btn--primary",onClick:Ee,disabled:!B.trim(),children:"Gem"}),u.jsx("button",{className:"le__btn",onClick:()=>z(!1),children:"Annullr"})]})]})}),O&&u.jsx(kj,{stations:a,onClose:()=>F(!1),onStationsChanged:l})]})}class Rj extends y.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({errorInfo:r}),this.props.onError&&this.props.onError(n,r)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:u.jsx("div",{style:Ya.container,children:u.jsxs("div",{style:Ya.content,children:[u.jsx("div",{style:Ya.icon,children:""}),u.jsx("h2",{style:Ya.title,children:"Noget gik galt"}),u.jsx("p",{style:Ya.message,children:"Der opstod en uventet fejl. Prv at genindlse siden."}),!1,u.jsxs("div",{style:Ya.buttons,children:[u.jsx("button",{style:Ya.retryButton,onClick:this.handleRetry,children:"Prv igen"}),u.jsx("button",{style:Ya.reloadButton,onClick:this.handleReload,children:"Genindls side"})]})]})}):this.props.children}}const Ya={container:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#0a0a0a",padding:"20px"},content:{textAlign:"center",maxWidth:"500px",padding:"40px",backgroundColor:"#1a1a1a",borderRadius:"12px",border:"1px solid #333"},icon:{fontSize:"48px",marginBottom:"20px"},title:{color:"#fff",fontSize:"24px",fontWeight:"600",marginBottom:"12px"},message:{color:"#888",fontSize:"16px",marginBottom:"24px",lineHeight:"1.5"},buttons:{display:"flex",gap:"12px",justifyContent:"center"},retryButton:{padding:"12px 24px",backgroundColor:"transparent",border:"1px solid #4a9eff",borderRadius:"6px",color:"#4a9eff",fontSize:"14px",fontWeight:"500",cursor:"pointer"},reloadButton:{padding:"12px 24px",backgroundColor:"#4a9eff",border:"none",borderRadius:"6px",color:"#fff",fontSize:"14px",fontWeight:"500",cursor:"pointer"}},ps=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Oj(a,n){const[r,l]=y.useState([]),[o,d]=y.useState(!1),f=y.useCallback(async()=>{try{const T=await Tp(n);if(!T||T.length===0){l([]),d(!0);return}let z=me.schema("gaming").from("sessions").select("*").eq("status","active"),B=me.schema("gaming").from("queue").select("*").order("position",{ascending:!0});n&&(z=z.eq("institution_id",n),B=B.eq("institution_id",n));const[J,O]=await Promise.all([z,B]),F=J.data||[],se=O.data||[];console.log(`[loadStations] Loaded ${F.length} sessions and ${se.length} queue items from DB`),F.forEach(V=>console.log(`[loadStations]   session: ${V.user_name} on ${V.device_id} (id=${V.id?.slice(0,8)})`));const P={};F.forEach(V=>{P[V.device_id]||(P[V.device_id]=[]),P[V.device_id].push({id:V.id,userName:V.user_name||"",userId:V.user_id||null,startTime:V.start_time?new Date(V.start_time):null,durationMinutes:V.duration_minutes||30,isPaused:V.is_paused||!1,remainingSecondsWhenPaused:V.remaining_seconds_when_paused||null,userBalanceAtStart:V.user_balance_at_start??null,balanceDeducted:V.balance_deducted??0,waitingSince:V.waiting_since?new Date(V.waiting_since):null,waitingTimeoutSeconds:V.waiting_timeout_seconds??null,_loadedFromDb:!0})});const oe=new Set(F.map(V=>V.id));let M=0;try{const V=localStorage.getItem("skaermtid_sessions_backup");V&&(JSON.parse(V).forEach(j=>{if(!oe.has(j.id)&&j._deviceId){const H=j._deviceId;P[H]||(P[H]=[]),P[H].push({id:j.id,userName:j.userName||"",userId:j.userId||null,startTime:j.startTime?new Date(j.startTime):null,durationMinutes:j.durationMinutes||30,isPaused:j.isPaused||!1,remainingSecondsWhenPaused:j.remainingSecondsWhenPaused||null,userBalanceAtStart:j.userBalanceAtStart??null,balanceDeducted:j.balanceDeducted??0,waitingSince:j.waitingSince?new Date(j.waitingSince):null,waitingTimeoutSeconds:j.waitingTimeoutSeconds??null,_loadedFromDb:!0,_restoredFromBackup:!0}),M++,console.log(`[loadStations]  Restored session from backup: ${j.userName} on ${H}`)}}),localStorage.removeItem("skaermtid_sessions_backup"))}catch(V){console.warn("[loadStations] Error restoring from localStorage backup:",V)}M>0&&console.log(`[loadStations] Restored ${M} sessions from localStorage backup`);const $={};se.forEach(V=>{$[V.device_id]||($[V.device_id]=[]),$[V.device_id].push({id:V.id,name:V.user_name||"",userId:V.user_id||null,availableTime:V.expected_start_time?new Date(V.expected_start_time):new Date,users:V.is_group?V.group_users||[]:void 0})});const Z=T.map(V=>({...V,activeSessions:P[V.id]||[],queue:$[V.id]||[],status:P[V.id]?.length>0?"active":V.status}));l(Z),d(!0),M>0&&Z.filter(V=>V.activeSessions.some(fe=>fe._restoredFromBackup)).forEach(V=>{console.log(`[loadStations] Re-syncing restored station ${V.id} to DB`),fv(V)})}catch(T){console.error("Error loading stations:",T),d(!0)}},[n]),m=y.useCallback((T,z)=>{let B=null;return l(J=>{const O=J.find(F=>F.id===T);return O?(B=z(O),J.map(F=>F.id===T?B:F)):J}),B},[]),g=y.useCallback(T=>{if(T){const z=(T.activeSessions||[]).map(B=>B.userName).join(", ");console.log(`[useStations] syncStation called for ${T.id}: ${T.activeSessions?.length||0} sessions [${z}], ${T.queue?.length||0} queue`),fv(T).catch(B=>{console.error(`Error syncing station ${T.id}:`,B)})}else console.warn("[useStations] syncStation called with null/undefined station")},[]),v=y.useCallback(()=>a?.max_session_minutes||Nt,[a]),b=y.useCallback(async(T,z)=>{let B="",J=null,O=!1,F=null,se=!1,P=[];z&&typeof z=="object"&&(B=z.name||"",J=z.userId||null,z.users?.length>0?(se=!0,P=z.users,O=!0,F=z.id):z.id&&(O=!0,F=z.id));const oe=v();let M=oe,$=null;if(J&&!se){const[V,fe]=await Promise.all([Wc(J),zw(J)]);if(V!==null){if(V<=0){console.warn(`User ${B} has no balance (${V} min)`);return}M=Math.min(V,oe),$=V}fe?.max_session_minutes&&(M=Math.min(M,fe.max_session_minutes))}const Z=m(T,V=>{if(V.status!=="available"&&V.status!=="active")return V;if(se){const L=P.map(de=>({id:ps(),userName:de,startTime:new Date,durationMinutes:oe})),te=[...V.activeSessions,...L],I=V.queue.filter(de=>de.id!==F),re=Un(te,I,Nt);return{...V,activeSessions:te,queue:I.map((de,he)=>({...de,availableTime:re[he]||new Date})),status:"active"}}const fe={id:ps(),userName:B,userId:J,startTime:new Date,durationMinutes:M,userBalanceAtStart:$,balanceDeducted:0},j=[...V.activeSessions,fe];let H=V.queue;O&&F&&(H=V.queue.filter(L=>L.id!==F));const D=Un(j,H,Nt);return{...V,activeSessions:j,queue:H.map((L,te)=>({...L,availableTime:D[te]||new Date})),status:"active"}});g(Z)},[m,g,v]),w=y.useCallback((T,z,B="admin_stop")=>{const J=a?.queue_attendance_enabled||!1,O=a?.queue_attendance_timeout_seconds||300;l(se=>{const oe=se.find(M=>M.id===T)?.activeSessions?.find(M=>M.id===z);return oe&&oe.startTime&&Fv(oe,T,B),se});const F=m(T,se=>{const P=se.activeSessions.filter(Z=>Z.id!==z),oe=Un(P,se.queue,Nt);let M=se.queue.map((Z,V)=>({...Z,availableTime:oe[V]||new Date}));if(P.length<se.maxUsers&&M.length>0){const Z=M[0];M=M.slice(1);let V=[];Z.users?.length>0?V=Z.users.map(H=>({id:ps(),userName:H,durationMinutes:v(),...J&&{waitingSince:new Date,waitingTimeoutSeconds:O}})):V=[{id:ps(),userName:Z.name,userId:Z.userId||null,durationMinutes:v(),...J&&{waitingSince:new Date,waitingTimeoutSeconds:O}}];const fe=[...P,...V],j=Un(fe,M,Nt);return{...se,activeSessions:fe,queue:M.map((H,D)=>({...H,availableTime:j[D]||new Date})),status:"active"}}return{...se,activeSessions:P,queue:M,status:P.length===0?"available":"active"}});g(F)},[m,g,v,a]),S=y.useCallback((T,z,B)=>{let J=null;l(O=>O.map(F=>{if(F.id===T){const se=F.activeSessions.map(oe=>{if(oe.id===z){const M=Math.max(1,oe.durationMinutes+B);return{...oe,durationMinutes:M}}return oe}),P=Un(se,F.queue,Nt);return J={...F,activeSessions:se,queue:F.queue.map((oe,M)=>({...oe,availableTime:P[M]||new Date}))},J}return F})),g(J)},[g]),x=y.useCallback((T,z)=>{const B=m(T,J=>{const O=J.activeSessions.find(F=>F.id===z);if(!O||!O.startTime)return J;if(O.isPaused){const F=O.remainingSecondsWhenPaused||0,se=new Date(Date.now()-O.durationMinutes*60*1e3+F*1e3);return{...J,activeSessions:J.activeSessions.map(P=>P.id===z?{...P,isPaused:!1,startTime:se,remainingSecondsWhenPaused:void 0}:P)}}else{const F=Zn(O);return{...J,activeSessions:J.activeSessions.map(se=>se.id===z?{...se,isPaused:!0,remainingSecondsWhenPaused:F}:se)}}});g(B)},[m,g]),E=y.useCallback(async(T,z,B)=>{let J=v(),O=null;if(B){const se=await Wc(B);if(se!==null){if(se<=0){const P=m(T,oe=>{const M=oe.activeSessions.filter($=>$.id!==z);return{...oe,activeSessions:M,status:M.length===0?"available":"active"}});g(P);return}J=Math.min(se,J),O=se}}const F=m(T,se=>{const P=se.activeSessions.find(oe=>oe.id===z);return!P||P.startTime?se:{...se,activeSessions:se.activeSessions.map(oe=>oe.id===z?{...oe,startTime:new Date,durationMinutes:J,userBalanceAtStart:O,balanceDeducted:0,waitingSince:null,waitingTimeoutSeconds:null}:oe)}});g(F)},[m,g,v]),k=y.useCallback(async(T,z,B)=>{const J=v();let O=J,F=null;if(B){const P=await Wc(B);if(P!==null){if(P<=0){console.warn(`User ${z} has no balance`);return}O=Math.min(P,J),F=P}}const se=m(T,P=>{if(P.activeSessions.length===0)return P;const oe={id:ps(),userName:z,userId:B,startTime:new Date,durationMinutes:O,userBalanceAtStart:F,balanceDeducted:0},M=[...P.activeSessions,oe],$=Un(M,P.queue,Nt);return{...P,activeSessions:M,queue:P.queue.map((Z,V)=>({...Z,availableTime:$[V]||new Date})),status:"active"}});g(se)},[m,g,v]),C=y.useCallback((T,z,B)=>{const J=m(T,O=>({...O,activeSessions:O.activeSessions.map(F=>F.id===z?{...F,userName:B}:F)}));g(J)},[m,g]),A=y.useCallback((T,z,B)=>{const J=m(T,O=>{const F={id:ps(),name:z,userId:B||null,availableTime:new Date},se=[...O.queue,F],P=Un(O.activeSessions,se,Nt);return{...O,queue:se.map((oe,M)=>({...oe,availableTime:P[M]||new Date}))}});g(J)},[m,g]),G=y.useCallback((T,z)=>{if(!z?.length)return;const B=m(T,J=>{const O={id:ps(),users:[...z],availableTime:new Date},F=[...J.queue,O],se=Un(J.activeSessions,F,Nt);return{...J,queue:F.map((P,oe)=>({...P,availableTime:se[oe]||new Date}))}});g(B)},[m,g]),N=y.useCallback((T,z,B,J,O)=>{const F=m(T,se=>O&&typeof B=="number"&&J!==void 0?{...se,queue:se.queue.map(P=>{if(P.id===z&&P.users){const oe=[...P.users];return oe[B]=J,{...P,users:oe}}return P})}:{...se,queue:se.queue.map(P=>P.id===z?{...P,name:B}:P)});g(F)},[m,g]),Q=y.useCallback((T,z)=>{const B=m(T,J=>{const O=J.queue.filter(se=>se.id!==z),F=Un(J.activeSessions,O,Nt);return{...J,queue:O.map((se,P)=>({...se,availableTime:F[P]||new Date}))}});g(B)},[m,g]),W=y.useCallback((T,z,B)=>{const J=m(T,O=>{const F=qd(O.queue,z,B),se=Un(O.activeSessions,F,Nt);return{...O,queue:F.map((P,oe)=>({...P,availableTime:se[oe]||new Date}))}});g(J)},[m,g]),K=y.useCallback((T,z)=>{const B=m(T,J=>({...J,status:z}));g(B)},[m,g]);return{stations:r,setStations:l,stationsLoaded:o,loadStations:f,syncStation:g,handlers:{handleStartSession:b,handleStopSession:w,handleExtendSession:S,handlePauseSession:x,handleStartPendingSession:E,handleJoinSession:k,handleEditSessionName:C,handleAddToQueue:A,handleAddGroupToQueue:G,handleEditQueueName:N,handleRemoveFromQueue:Q,handleReorderQueue:W,handleStatusChange:K}}}function Dj(){const[a,n]=y.useState(!1),[r,l]=y.useState(!0),[o,d]=y.useState(!1),[f,m]=y.useState(null),[g,v]=y.useState(null),[b,w]=y.useState(null),[S,x]=y.useState(null),[E,k]=y.useState(null),[C,A]=y.useState(null),G=y.useRef(!1),N=y.useRef(!1),Q=async J=>{try{const{data:O,error:F}=await me.schema("gaming").from("admins").select("name, institution_id").eq("user_id",J).maybeSingle();if(O)return{role:"admin",name:O.name||null,institutionId:O.institution_id};const{data:se,error:P}=await me.from("users").select("role, name, institution_id").eq("user_id",J).single();if(P)return console.error("Error fetching user profile:",P),{role:null,name:null,institutionId:null};let oe=se?.name||null;return se?.role==="operator"&&oe&&(oe=oe.replace(/^Operatr\s*-\s*/i,"").trim()||oe),{role:se?.role||null,name:oe,institutionId:se?.institution_id||null}}catch(O){return console.error("Error in fetchUserProfile:",O),{role:null,name:null,institutionId:null}}},W=async J=>{try{x(J.email||null);const O=await Q(J.id);m(O.role),k(O.name),O.role==="admin"&&J.user_metadata?.must_change_password&&d(!0);let F=O.institutionId,se=null;if(F){const{data:oe}=await me.from("institutions").select("name").eq("id",F).maybeSingle();se=oe?.name??null}else{const oe=await Zv();F=oe?.id||null,se=oe?.name||null}v(F),w(se);const P=await xi(F);P&&A(P)}catch(O){console.error("Error loading user data:",O)}};y.useEffect(()=>{const{data:{subscription:J}}=me.auth.onAuthStateChange(async(oe,M)=>{G.current&&(N.current||(oe==="SIGNED_IN"?(n(!0),M?.user&&await W(M.user)):oe==="SIGNED_OUT"?(Zc(),n(!1),m(null),A(null),v(null),w(null),x(null),k(null),d(!1)):oe==="TOKEN_REFRESHED"&&n(!!M)))});(async()=>{try{const{data:{user:oe},error:M}=await me.auth.getUser();M||!oe?n(!1):(n(!0),await W(oe))}catch(oe){console.error("Auth init error:",oe),n(!1)}finally{G.current=!0,l(!1)}})();let F=null;const se=120*1e3,P=async()=>{if(document.visibilityState==="hidden"){F=Date.now();return}if(!G.current||!F)return;const oe=Date.now()-F;if(F=null,!(oe<se))try{const{data:{session:M}}=await me.auth.getSession();if(M)return;const{data:{user:$},error:Z}=await me.auth.getUser();(Z||!$)&&(Zc(),n(!1),m(null),A(null),v(null),w(null),x(null),k(null))}catch{}};return document.addEventListener("visibilitychange",P),()=>{J.unsubscribe(),document.removeEventListener("visibilitychange",P)}},[]),y.useEffect(()=>{if(!a||!C)return;const J=setInterval(async()=>{if(await Mw(C)&&await pd(null)){const se=await xi(g);se&&A(se)}},6e4);return()=>clearInterval(J)},[a,C,g]);const K=y.useCallback(async()=>{Zc(),await me.auth.signOut(),n(!1),m(null),A(null),w(null),x(null),k(null)},[]),T=y.useCallback(async()=>{const J=await xi(g);J&&A(J)},[g]),z=y.useCallback(()=>{d(!1)},[]),B=y.useCallback(async()=>{n(!0);try{const{data:{user:J}}=await me.auth.getUser();J&&await W(J)}catch(J){console.error("Error loading user data after login:",J)}},[]);return{isAuthenticated:a,isCheckingAuth:r,mustChangePassword:o,userRole:f,institutionId:g,institutionName:b,userEmail:S,userName:E,appSettings:C,handleLoginSuccess:B,signOut:K,refreshSettings:T,clearMustChangePassword:z,suppressAuthEvents:N}}function Mj(){const{isAuthenticated:a,isCheckingAuth:n,mustChangePassword:r,userRole:l,institutionId:o,institutionName:d,userName:f,appSettings:m,refreshSettings:g,handleLoginSuccess:v,signOut:b,clearMustChangePassword:w,suppressAuthEvents:S}=Dj(),x=l==="admin",{stations:E,setStations:k,stationsLoaded:C,loadStations:A,syncStation:G,handlers:N}=Oj(m,o),[Q,W]=y.useState(!1),[K,T]=y.useState(null),[z,B]=y.useState("auto"),[J,O]=y.useState({}),[F,se]=y.useState(!1),[P,oe]=y.useState(()=>{try{return localStorage.getItem("skaermtid_viewMode")==="true"}catch{return!1}}),[M,$]=y.useState(!1),[Z,V]=y.useState([]),[fe,j]=y.useState(bn),[H,D]=y.useState(_n),[L,te]=y.useState(null),[I,re]=y.useState(null),de=y.useRef(null),he=y.useMemo(()=>$d(E,Z,fe,H),[E,Z,fe,H]),ve=y.useRef(E);y.useEffect(()=>{ve.current=E},[E]);const ke=y.useRef(Date.now());y.useEffect(()=>{a&&o&&A()},[a,o,A]),y.useEffect(()=>{const ge=()=>{try{const pe=ve.current.flatMap(ye=>(ye.activeSessions||[]).map(ze=>({...ze,_deviceId:ye.id,startTime:ze.startTime?ze.startTime.toISOString():null,waitingSince:ze.waitingSince?new Date(ze.waitingSince).toISOString():null}))).filter(ye=>ye.startTime);pe.length>0&&(localStorage.setItem("skaermtid_sessions_backup",JSON.stringify(pe)),console.log(`[unload] Saved ${pe.length} sessions to localStorage backup`))}catch{}qw()};return window.addEventListener("beforeunload",ge),()=>window.removeEventListener("beforeunload",ge)},[]);const Ue=y.useCallback(async()=>{try{const ge=await pr(),pe=o?`skaermtid_last_layout_preset_${o}`:"skaermtid_last_layout_preset",ye=localStorage.getItem(pe),ze=ge.find(ne=>ne.is_default),be=(ye?ge.find(ne=>ne.id===ye):null)||ze||null;be&&(V(be.items_json||[]),j(be.grid_w||bn),D(be.grid_h||_n))}catch(ge){console.error("Error loading layout preset:",ge)}},[o]);y.useEffect(()=>{a&&C&&Ue()},[a,C,Ue]),y.useEffect(()=>{try{localStorage.setItem("skaermtid_viewMode",P?"true":"false")}catch{}},[P]),y.useEffect(()=>{const ge=pe=>{const ye=pe.target.tagName;if(pe.key==="Tab"&&ye!=="INPUT"&&ye!=="TEXTAREA"&&ye!=="SELECT"&&(pe.preventDefault(),oe(le=>!le)),pe.key==="Escape"){if(L){te(null);return}M?$(!1):P?oe(!1):Q?W(!1):F&&se(!1);return}if(!(Q||F||M||P)&&!(ye==="INPUT"||ye==="TEXTAREA"||ye==="SELECT")){if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(pe.key)){pe.preventDefault(),te(le=>Sj(le,pe.key,he));return}pe.key==="Enter"&&L&&(pe.preventDefault(),T(L),B("auto"),W(!0))}};return document.addEventListener("keydown",ge),()=>document.removeEventListener("keydown",ge)},[P,Q,F,M,L,he]),y.useEffect(()=>{if(!a||!C)return;const ge=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),pe=setInterval(()=>{const ye=Date.now();ye-ke.current>=6e4&&(ke.current=ye,ve.current.forEach(_e=>{_e.activeSessions.forEach(je=>{const Ke=je._loadedFromDb&&je.startTime&&Zn(je)<=0;je.userId&&je.startTime&&!je.isPaused&&!Ke&&Uw(je.id,je.userId,1).then(Le=>{Le&&Le.success?(k(Ct=>Ct.map(ct=>({...ct,activeSessions:ct.activeSessions.map(St=>St.id===je.id?{...St,balanceDeducted:(St.balanceDeducted||0)+(Le.deducted||0),_loadedFromDb:!1}:St)}))),Le.remaining<=0&&(console.log(`[balance] Stopping session ${je.userName} on ${_e.id}: balance exhausted (remaining=${Le.remaining})`),N.handleStopSession(_e.id,je.id,"balance_exhausted"))):Le&&!Le.success&&Le.reason==="no_balance"&&(console.log(`[balance] Stopping session ${je.userName} on ${_e.id}: no_balance response`),N.handleStopSession(_e.id,je.id,"balance_exhausted"))}).catch(Le=>{console.error("Balance deduction error:",Le)})})}));const ze=m?.queue_attendance_enabled||!1,le=m?.queue_attendance_timeout_seconds||300,be=[];k(ne=>ne.map(_e=>{if(_e.status==="maintenance"||_e.status==="closed")return _e;let je=!1,Ke=[..._e.activeSessions],Le=[..._e.queue];const Ct=m?.sound_enabled!==!1;if(Ke=Ke.filter(ct=>{if(!ct.startTime||ct.isPaused)return!0;const St=Zn(ct);return St<=0?ct._loadedFromDb?!0:(console.log(`[expiry] Removing expired session ${ct.userName} on ${_e.id} (remaining=${St}, duration=${ct.durationMinutes}min)`),je=!0,Fv(ct,_e.id,"expired"),Ct&&Gw(),!1):!0}),ze&&(Ke=Ke.filter(ct=>{if(!ct.waitingSince||ct.startTime)return!0;const St=Date.now()-new Date(ct.waitingSince).getTime(),vt=(ct.waitingTimeoutSeconds||le)*1e3;return St>=vt?(je=!0,!1):!0})),je){const ct=Un(Ke,Le,Nt);if(Le=Le.map((ft,dt)=>({...ft,availableTime:ct[dt]||new Date})),Ke.length<_e.maxUsers&&Le.length>0){const ft=Le[0];Le=Le.slice(1),Ct&&Iw();const dt=m?.max_session_minutes||Nt;let Yn=[];ft.users?.length>0?Yn=ft.users.map(Fe=>({id:ge(),userName:Fe,durationMinutes:dt,...ze&&{waitingSince:new Date,waitingTimeoutSeconds:le}})):Yn=[{id:ge(),userName:ft.name,userId:ft.userId||null,durationMinutes:dt,...ze&&{waitingSince:new Date,waitingTimeoutSeconds:le}}],Ke=[...Ke,...Yn];const Za=Un(Ke,Le,Nt);Le=Le.map((Fe,Mt)=>({...Fe,availableTime:Za[Mt]||new Date}))}const vt={..._e,activeSessions:Ke,queue:Le,status:Ke.length===0?"available":"active"};return be.push(vt),vt}return _e})),be.forEach(ne=>G(ne))},1e3);return()=>clearInterval(pe)},[a,C,m,k,N,G]);const Me=(ge,pe,ye)=>{for(const ze of E)if(ze.id!==ye)for(const le of ze.queue){if(pe&&le.userId===pe)return{station:ze,queueItem:le,matchedInGroup:!1};if(le.users&&le.users.some(be=>be===ge))return{station:ze,queueItem:le,matchedInGroup:!0};if(!le.users&&le.name===ge)return{station:ze,queueItem:le,matchedInGroup:!1}}return null},Re=(ge,pe)=>{const ye=E.find(_e=>_e.id===K);if(!ye)return;if(pe){const _e=E.find(je=>je.activeSessions.some(Ke=>Ke.userId===pe));if(_e){const je=_e.name||_e.id.toUpperCase();window.alert(`${ge} spiller allerede p ${je}.`);return}}const ze=Me(ge,pe,K);if(ze){const _e=ze.station.name||ze.station.id.toUpperCase();if(!window.confirm(`${ge} er allerede i k til ${_e}.

Vil du fjerne fra ken der og fortstte her?`))return;N.handleRemoveFromQueue(ze.station.id,ze.queueItem.id)}const le=ye.activeSessions.length>0,be=ye.activeSessions.length<ye.maxUsers,ne=ye.type==="PS"&&ye.maxUsers>1;z==="queue"?ne?N.handleAddGroupToQueue(K,[ge]):N.handleAddToQueue(K,ge,pe):!le&&ne?O(_e=>({..._e,[K]:[..._e[K]||[],{name:ge,userId:pe}]})):le?be?N.handleJoinSession(K,ge,pe):ne?N.handleAddGroupToQueue(K,[ge]):N.handleAddToQueue(K,ge,pe):N.handleStartSession(K,{name:ge,userId:pe}),W(!1),T(null),B("auto")},Oe=ge=>{Re(ge,null)},Be=ge=>{const pe=J[ge]||[];pe.length!==0&&(pe.forEach(ye=>{N.handleStartSession(ge,{name:ye.name,userId:ye.userId})}),O(ye=>{const ze={...ye};return delete ze[ge],ze}))},Ee=(ge,pe)=>{O(ye=>{const ze=(ye[ge]||[]).filter((le,be)=>be!==pe);if(ze.length===0){const le={...ye};return delete le[ge],le}return{...ye,[ge]:ze}})},De=y.useMemo(()=>E.length===0?!1:E.every(ge=>ge.status==="maintenance"||ge.status==="closed"||ge.activeSessions.length>=ge.maxUsers),[E]),He=y.useCallback(()=>{let ge=null,pe=1/0;E.forEach(ye=>{ye.status==="maintenance"||ye.status==="closed"||ye.activeSessions.forEach(ze=>{if(!ze.startTime||ze.isPaused)return;const le=Zn(ze),be=ye.queue.length*(m?.max_session_minutes||Nt)*60,ne=le+be;ne<pe&&(pe=ne,ge=ye.id)})}),ge&&(re(ge),te(ge),de.current&&clearTimeout(de.current),de.current=setTimeout(()=>{re(null),de.current=null},3e3))},[E,m]);return y.useEffect(()=>()=>{de.current&&clearTimeout(de.current)},[]),n?u.jsx("div",{className:"app",children:u.jsxs("div",{className:"app-header",children:[u.jsx("h1",{className:"app-title",children:"Gaming Station Dashboard"}),u.jsx("p",{className:"app-subtitle",children:"Tjekker login..."})]})}):a?r&&x?u.jsx(Qw,{onPasswordChanged:w}):u.jsx(Rj,{children:u.jsxs("div",{className:"app",children:[u.jsx("div",{className:"app-header",children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[u.jsx("div",{children:m?.show_room_title_dashboard!==!1&&u.jsx("h1",{className:"app-title",children:m?.room_title||"Spillerummet"})}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[(d||l)&&u.jsxs("div",{className:"header-user-info",children:[d&&u.jsxs("span",{className:"header-user-info__item",children:[u.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),u.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),d]}),d&&l&&u.jsx("span",{className:"header-user-info__divider"}),l&&u.jsxs("span",{className:"header-user-info__item",children:[u.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l==="admin"?u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}):u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),l==="admin"?f?`Admin: ${f}`:"Admin":"Operatr"]})]}),u.jsxs("button",{onClick:()=>oe(!0),className:"header-btn header-btn--view",title:"Vis TV-visning (Tab)",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"View"]}),De&&E.length>0&&u.jsxs("button",{onClick:He,className:"header-btn header-btn--next-available",title:"Find stationen der snart bliver ledig",children:[u.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Nste ledige"]}),x&&u.jsx("button",{onClick:()=>se(!0),className:"header-btn header-btn--settings",children:"Indstillinger"}),u.jsx("button",{onClick:b,className:"header-btn header-btn--logout",children:"Log ud"})]})]})}),C?E.length===0?u.jsx("div",{className:"station-grid",style:{justifyContent:"center",padding:"4rem",textAlign:"center"},children:u.jsxs("div",{children:[u.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"1.1rem",marginBottom:"1rem"},children:"Ingen stationer oprettet endnu."}),x&&u.jsx("button",{onClick:()=>se(!0),style:{padding:"0.75rem 1.5rem",background:"var(--accent-cyan)",border:"none",borderRadius:"6px",color:"#000",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"Opret stationer i Indstillinger"})]})}):u.jsx("div",{className:"dashboard-canvas-wrap",style:{"--pulse-i":m?.pulse_enabled_dashboard!==!1?(m?.pulse_intensity_dashboard??50)/100:0},children:u.jsx(Hd,{stations:E,layoutItems:Z,gridCols:fe,gridRows:H,editable:!1,focusedStationId:L,highlightedStationId:I,renderTile:ge=>u.jsx(vj,{station:ge,onStartSession:N.handleStartSession,onStopSession:N.handleStopSession,onExtendSession:N.handleExtendSession,onEditSessionName:N.handleEditSessionName,onJoinSession:N.handleJoinSession,onPauseSession:N.handlePauseSession,onStartPendingSession:N.handleStartPendingSession,onAddToQueue:N.handleAddToQueue,onAddGroupToQueue:N.handleAddGroupToQueue,onEditQueueName:N.handleEditQueueName,onRemoveFromQueue:N.handleRemoveFromQueue,onReorderQueue:N.handleReorderQueue,onStatusChange:N.handleStatusChange,onOpenUserSelector:(pe,ye)=>{T(pe),B(ye||"auto"),W(!0)},pendingUsers:J[ge.id]||[],onStartGroup:()=>Be(ge.id),onRemovePendingUser:pe=>Ee(ge.id,pe)}),className:"dashboard-canvas"})}):u.jsx("div",{className:"station-grid",style:{justifyContent:"center",padding:"4rem"},children:u.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"1.1rem"},children:"Indlser stationer..."})}),K&&u.jsx(Kw,{isOpen:Q,onClose:()=>{W(!1),T(null),B("auto")},onSelectUser:Re,onSelectManualEntry:Oe,placeholder:"Vlg eller indtast bruger...",institutionId:o,appSettings:m,busyUsers:(()=>{const ge={};return E.forEach(pe=>{pe.activeSessions.forEach(ye=>{ye.userId&&(ge[ye.userId]=pe.name||pe.id.toUpperCase())})}),ge})()}),u.jsx(kS,{isOpen:F,onClose:()=>se(!1),onSettingsSaved:g,onStationsChanged:A,institutionId:o,onOpenLayoutEditor:()=>{se(!1),$(!0)}}),P&&u.jsx(xj,{stations:E,appSettings:m,onExitViewMode:()=>oe(!1),layoutItems:Z,gridCols:fe,gridRows:H}),M&&u.jsx(Aj,{stations:E,institutionId:o,onClose:()=>{$(!1),Ue()},onStationsChanged:A})]})}):u.jsx(Yw,{onLoginSuccess:v,suppressAuthEvents:S})}const Np=()=>{try{return localStorage.getItem("queryLoggingEnabled")==="true"||!1}catch{return!1}},Uj=Np();let Cp=0,br=[];function zj(){Cp=0,br=[]}function Ap(a=50){return br.slice(-a)}function Lj(){if(!Uj)return{enabled:!1,message:'Query logging is disabled. Enable via: localStorage.setItem("queryLoggingEnabled", "true")'};const a=br.reduce((l,o)=>(l[o.type]=(l[o.type]||0)+1,l),{}),n=br.filter(l=>l.duration).reduce((l,o)=>l+o.duration,0),r=br.filter(l=>l.duration).length>0?Math.round(n/br.filter(l=>l.duration).length):0;return{enabled:!0,totalQueries:Cp,queriesByType:a,totalDuration:`${n}ms`,averageDuration:`${r}ms`,recentQueries:Ap(10)}}typeof window<"u"&&(window.enableQueryLogging=()=>{try{localStorage.setItem("queryLoggingEnabled","true"),console.log(" Query logging enabled! Reload page to activate.")}catch(a){console.error("Could not enable query logging:",a)}},window.disableQueryLogging=()=>{try{localStorage.setItem("queryLoggingEnabled","false"),console.log(" Query logging disabled! Reload page to deactivate.")}catch(a){console.error("Could not disable query logging:",a)}},window.getQueryStats=Lj,window.getQueryLog=Ap,window.resetQueryCount=zj,setTimeout(()=>{Np()?(console.log(" Query logging is ENABLED"),console.log("Commands: getQueryStats(), getQueryLog(), resetQueryCount()")):(console.log(" Query logging is DISABLED"),console.log("Run enableQueryLogging() to enable, then reload page"))},100));Zb.createRoot(document.getElementById("root")).render(u.jsx(y.StrictMode,{children:u.jsx(Mj,{})}));
